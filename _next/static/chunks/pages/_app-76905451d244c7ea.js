(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{744:function(e,g,t){"use strict";var n=this&&this.__rest||function(e,g){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&g.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var I=0;for(n=Object.getOwnPropertySymbols(e);I<n.length;I++)g.indexOf(n[I])<0&&Object.prototype.propertyIsEnumerable.call(e,n[I])&&(t[n[I]]=e[n[I]])}return t};Object.defineProperty(g,"__esModule",{value:!0}),g.store=g.PERSISTENCY_KEY=void 0;const I=t(9328);function C(){try{return null!=localStorage&&(localStorage.setItem("test","test"),localStorage.getItem("test"),!0)}catch(e){return!1}}g.PERSISTENCY_KEY="MSW_COOKIE_STORE";g.store=new class{constructor(){this.store=new Map}add(e,g){if("omit"===e.credentials)return;const t=new URL(e.url),C=g.headers.get("set-cookie");if(!C)return;const r=Date.now(),o=I.parse(C).map((e=>{var{maxAge:g}=e,t=n(e,["maxAge"]);return Object.assign(Object.assign({},t),{expires:void 0===g?t.expires:new Date(r+1e3*g),maxAge:g})})),i=this.store.get(t.origin)||new Map;o.forEach((e=>{this.store.set(t.origin,i.set(e.name,e))}))}get(e){this.deleteExpiredCookies();const g=new URL(e.url),t=this.store.get(g.origin)||new Map;switch(e.credentials){case"include":return I.parse(document.cookie).forEach((e=>{t.set(e.name,e)})),t;case"same-origin":return t;default:return new Map}}getAll(){return this.deleteExpiredCookies(),this.store}deleteAll(e){const g=new URL(e.url);this.store.delete(g.origin)}clear(){this.store.clear()}hydrate(){if(!C())return;const e=localStorage.getItem(g.PERSISTENCY_KEY);if(e)try{JSON.parse(e).forEach((([e,g])=>{this.store.set(e,new Map(g.map((e=>{var[g,t]=e,{expires:I}=t,C=n(t,["expires"]);return[g,void 0===I?C:Object.assign(Object.assign({},C),{expires:new Date(I)})]}))))}))}catch(t){console.warn(`\n[virtual-cookie] Failed to parse a stored cookie from the localStorage (key "${g.PERSISTENCY_KEY}").\n\nStored value:\n${localStorage.getItem(g.PERSISTENCY_KEY)}\n\nThrown exception:\n${t}\n\nInvalid value has been removed from localStorage to prevent subsequent failed parsing attempts.`),localStorage.removeItem(g.PERSISTENCY_KEY)}}persist(){if(!C())return;const e=Array.from(this.store.entries()).map((([e,g])=>[e,Array.from(g.entries())]));localStorage.setItem(g.PERSISTENCY_KEY,JSON.stringify(e))}deleteExpiredCookies(){const e=Date.now();this.store.forEach(((g,t)=>{g.forEach((({expires:t,name:n})=>{void 0!==t&&t.getTime()<=e&&g.delete(n)})),0===g.size&&this.store.delete(t)}))}}},8612:function(e,g,t){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,g,t,n){void 0===n&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return g[t]}})}:function(e,g,t,n){void 0===n&&(n=t),e[n]=g[t]}),I=this&&this.__exportStar||function(e,g){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(g,t)||n(g,e,t)};Object.defineProperty(g,"__esModule",{value:!0}),I(t(744),g)},2924:function(e,g,t){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.createInterceptor=void 0;var n=t(8533);g.createInterceptor=function(e){var g=new n.StrictEventEmitter,t=[];return{apply:function(){t=e.modules.map((function(t){return t(g,e.resolver)}))},on:function(e,t){g.addListener(e,t)},restore:function(){if(g.removeAllListeners(),0===t.length)throw new Error('Failed to restore patched modules: no patches found. Did you forget to run ".apply()"?');t.forEach((function(e){return e()}))}}}},2247:function(e,g,t){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,g,t,n){void 0===n&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return g[t]}})}:function(e,g,t,n){void 0===n&&(n=t),e[n]=g[t]}),I=this&&this.__exportStar||function(e,g){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(g,t)||n(g,e,t)};Object.defineProperty(g,"__esModule",{value:!0}),g.getCleanUrl=void 0,I(t(2924),g),I(t(7912),g);var C=t(7941);Object.defineProperty(g,"getCleanUrl",{enumerable:!0,get:function(){return C.getCleanUrl}})},7551:function(e,g,t){"use strict";var n=this&&this.__awaiter||function(e,g,t,n){return new(t||(t=Promise))((function(I,C){function r(e){try{i(n.next(e))}catch(g){C(g)}}function o(e){try{i(n.throw(e))}catch(g){C(g)}}function i(e){var g;e.done?I(e.value):(g=e.value,g instanceof t?g:new t((function(e){e(g)}))).then(r,o)}i((n=n.apply(e,g||[])).next())}))},I=this&&this.__generator||function(e,g){var t,n,I,C,r={label:0,sent:function(){if(1&I[0])throw I[1];return I[1]},trys:[],ops:[]};return C={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(C[Symbol.iterator]=function(){return this}),C;function o(C){return function(o){return function(C){if(t)throw new TypeError("Generator is already executing.");for(;r;)try{if(t=1,n&&(I=2&C[0]?n.return:C[0]?n.throw||((I=n.return)&&I.call(n),0):n.next)&&!(I=I.call(n,C[1])).done)return I;switch(n=0,I&&(C=[2&C[0],I.value]),C[0]){case 0:case 1:I=C;break;case 4:return r.label++,{value:C[1],done:!1};case 5:r.label++,n=C[1],C=[0];continue;case 7:C=r.ops.pop(),r.trys.pop();continue;default:if(!(I=(I=r.trys).length>0&&I[I.length-1])&&(6===C[0]||2===C[0])){r=0;continue}if(3===C[0]&&(!I||C[1]>I[0]&&C[1]<I[3])){r.label=C[1];break}if(6===C[0]&&r.label<I[1]){r.label=I[1],I=C;break}if(I&&r.label<I[2]){r.label=I[2],r.ops.push(C);break}I[2]&&r.ops.pop(),r.trys.pop();continue}C=g.call(e,r)}catch(o){C=[6,o],n=0}finally{t=I=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([C,o])}}},C=this&&this.__values||function(e){var g="function"===typeof Symbol&&Symbol.iterator,t=g&&e[g],n=0;if(t)return t.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")},r=this&&this.__read||function(e,g){var t="function"===typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,I,C=t.call(e),r=[];try{for(;(void 0===g||g-- >0)&&!(n=C.next()).done;)r.push(n.value)}catch(o){I={error:o}}finally{try{n&&!n.done&&(t=C.return)&&t.call(C)}finally{if(I)throw I.error}}return r};Object.defineProperty(g,"__esModule",{value:!0}),g.createXMLHttpRequestOverride=void 0;var o=t(864),i=t(3602),l=t(3969),a=t(6523),s=t(2464),c=t(8949),A=t(8566),u=t(2208),d=t(1227);g.createXMLHttpRequestOverride=function(e){var g,t=e.pureXMLHttpRequest,h=e.observer,m=e.resolver,b=d("XHR");return g=function(){function e(){this._events=[],this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.onreadystatechange=null,this.onabort=null,this.onerror=null,this.onload=null,this.onloadend=null,this.onloadstart=null,this.onprogress=null,this.ontimeout=null,this.url="",this.method="GET",this.readyState=this.UNSENT,this.withCredentials=!1,this.status=200,this.statusText="OK",this.data="",this.response="",this.responseType="text",this.responseText="",this.responseXML=null,this.responseURL="",this.upload={},this.timeout=0,this._requestHeaders=new i.Headers,this._responseHeaders=new i.Headers}return e.prototype.setReadyState=function(e){e!==this.readyState&&(b("readyState change %d -> %d",this.readyState,e),this.readyState=e,e!==this.UNSENT&&(b("triggerring readystate change..."),this.trigger("readystatechange")))},e.prototype.trigger=function(e,g){var t,n;b('trigger "%s" (%d)',e,this.readyState),b('resolve listener for event "%s"',e);var I=this["on"+e];null===I||void 0===I||I.call(this,u.createEvent(this,e,g));try{for(var r=C(this._events),o=r.next();!o.done;o=r.next()){var i=o.value;i.name===e&&(b('calling mock event listener "%s" (%d)',e,this.readyState),i.listener.call(this,u.createEvent(this,e,g)))}}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return this},e.prototype.reset=function(){b("reset"),this.setReadyState(this.UNSENT),this.status=200,this.statusText="OK",this.data="",this.response=null,this.responseText=null,this.responseXML=null,this._requestHeaders=new i.Headers,this._responseHeaders=new i.Headers},e.prototype.open=function(e,g,t,C,r){return void 0===t&&(t=!0),n(this,void 0,void 0,(function(){return I(this,(function(n){return(b=d("XHR "+e+" "+g))("open",{method:e,url:g,async:t,user:C,password:r}),this.reset(),this.setReadyState(this.OPENED),"undefined"===typeof g?(this.url=e,this.method="GET"):(this.url=g,this.method=e,this.async=t,this.user=C,this.password=r),[2]}))}))},e.prototype.send=function(e){var g,C=this;b("send %s %s",this.method,this.url),this.data=e||"";try{g=new URL(this.url)}catch(a){g=new URL(this.url,window.location.href)}b("request headers",this._requestHeaders);var l={id:c.uuidv4(),url:g,method:this.method,headers:this._requestHeaders,credentials:this.withCredentials?"include":"omit",body:this.data};h.emit("request",l),b("awaiting mocked response..."),Promise.resolve(o.until((function(){return n(C,void 0,void 0,(function(){return I(this,(function(e){return[2,m(l,this)]}))}))}))).then((function(e){var g,n=r(e,2),I=n[0],o=n[1];if(I)return b("middleware function threw an exception!",I),C.trigger("error"),void C.abort();if(o){if(b("received mocked response",o),C.trigger("loadstart"),C.status=o.status||200,C.statusText=o.statusText||"OK",C._responseHeaders=o.headers?i.objectToHeaders(o.headers):new i.Headers,b("set response status",C.status,C.statusText),b("set response headers",C._responseHeaders),C.setReadyState(C.HEADERS_RECEIVED),b("response type",C.responseType),C.response=C.getResponseBody(o.body),C.responseText=o.body||"",C.responseXML=C.getResponseXML(),b("set response body",C.response),o.body&&C.response){C.setReadyState(C.LOADING);var a=A.bufferFrom(o.body);C.trigger("progress",{loaded:a.length,total:a.length})}C.setReadyState(C.DONE),C.trigger("load"),C.trigger("loadend"),h.emit("response",l,s.toIsoResponse(o))}else{b("no mocked response received!");var c=new t;b("opening an original request %s %s",C.method,C.url),c.open(C.method,C.url,null===(g=C.async)||void 0===g||g,C.user,C.password),c.addEventListener("load",(function(){b('original "onload"'),C.status=c.status,C.statusText=c.statusText,C.responseURL=c.responseURL,C.responseType=c.responseType,C.response=c.response,C.responseText=c.responseText,C.responseXML=c.responseXML,b("set mock request readyState to DONE"),C.setReadyState(C.DONE),b("received original response",C.status,C.statusText),b("original response body:",C.response);var e=c.getAllResponseHeaders();b("original response headers:\n",e),C._responseHeaders=i.stringToHeaders(e),b("original response headers (normalized)",C._responseHeaders),b("original response finished"),h.emit("response",l,{status:c.status,statusText:c.statusText,headers:C._responseHeaders,body:c.response})})),C.propagateCallbacks(c),C.propagateListeners(c),C.propagateHeaders(c,C._requestHeaders),C.async&&(c.timeout=C.timeout),b("send",C.data),c.send(C.data)}}))},e.prototype.abort=function(){b("abort"),this.readyState>this.UNSENT&&this.readyState<this.DONE&&(this.setReadyState(this.UNSENT),this.trigger("abort"))},e.prototype.dispatchEvent=function(){return!1},e.prototype.setRequestHeader=function(e,g){b('set request header "%s" to "%s"',e,g),this._requestHeaders.append(e,g)},e.prototype.getResponseHeader=function(e){if(b('get response header "%s"',e),this.readyState<this.HEADERS_RECEIVED)return b("cannot return a header: headers not received (state: %s)",this.readyState),null;var g=this._responseHeaders.get(e);return b('resolved response header "%s" to "%s"',e,g,this._responseHeaders),g},e.prototype.getAllResponseHeaders=function(){return b("get all response headers"),this.readyState<this.HEADERS_RECEIVED?(b("cannot return headers: headers not received (state: %s)",this.readyState),""):i.headersToString(this._responseHeaders)},e.prototype.addEventListener=function(e,g){b("addEventListener",e,g),this._events.push({name:e,listener:g})},e.prototype.removeEventListener=function(e,g){b("removeEventListener",e,g),this._events=this._events.filter((function(t){return t.name!==e&&t.listener!==g}))},e.prototype.overrideMimeType=function(){},e.prototype.getResponseBody=function(e){var g=null!==e&&void 0!==e?e:"";switch(b("coerced response body to",g),this.responseType){case"json":return b("resolving response body as JSON"),a.parseJson(g);case"blob":var t=this.getResponseHeader("content-type")||"text/plain";return b("resolving response body as Blob",{type:t}),new Blob([g],{type:t});case"arraybuffer":return b("resolving response body as ArrayBuffer"),A.bufferFrom(g);default:return g}},e.prototype.getResponseXML=function(){var e=this.getResponseHeader("Content-Type");return"application/xml"===e||"text/xml"===e?(new l.DOMParser).parseFromString(this.responseText,e):null},e.prototype.propagateCallbacks=function(e){e.onabort=this.abort,e.onerror=this.onerror,e.ontimeout=this.ontimeout,e.onload=this.onload,e.onloadstart=this.onloadstart,e.onloadend=this.onloadend,e.onprogress=this.onprogress,e.onreadystatechange=this.onreadystatechange},e.prototype.propagateListeners=function(e){b("propagating request listeners (%d) to the original request",this._events.length,this._events),this._events.forEach((function(g){var t=g.name,n=g.listener;e.addEventListener(t,n)}))},e.prototype.propagateHeaders=function(e,g){b("propagating request headers to the original request",g),Object.entries(g.raw()).forEach((function(g){var t=r(g,2),n=t[0],I=t[1];b('setting "%s" (%s) header on the original request',n,I),e.setRequestHeader(n,I)}))},e}(),g.UNSENT=0,g.OPENED=1,g.HEADERS_RECEIVED=2,g.LOADING=3,g.DONE=4,g}},6237:function(e,g,t){"use strict";g.T=void 0;var n=t(7551),I=t(1227)("XHR"),C="undefined"===typeof window?void 0:window.XMLHttpRequest;g.T=function(e,g){if(C){I('patching "XMLHttpRequest" module...');var t=n.createXMLHttpRequestOverride({pureXMLHttpRequest:C,observer:e,resolver:g});window.XMLHttpRequest=t}return function(){C&&(I("restoring modules..."),window.XMLHttpRequest=C)}}},3261:function(e,g){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.EventPolyfill=void 0;var t=function(){function e(e,g){this.AT_TARGET=0,this.BUBBLING_PHASE=0,this.CAPTURING_PHASE=0,this.NONE=0,this.type="",this.srcElement=null,this.currentTarget=null,this.eventPhase=0,this.isTrusted=!0,this.composed=!1,this.cancelable=!0,this.defaultPrevented=!1,this.bubbles=!0,this.lengthComputable=!0,this.loaded=0,this.total=0,this.cancelBubble=!1,this.returnValue=!0,this.type=e,this.target=(null===g||void 0===g?void 0:g.target)||null,this.currentTarget=(null===g||void 0===g?void 0:g.currentTarget)||null,this.timeStamp=Date.now()}return e.prototype.composedPath=function(){return[]},e.prototype.initEvent=function(e,g,t){this.type=e,this.bubbles=!!g,this.cancelable=!!t},e.prototype.preventDefault=function(){this.defaultPrevented=!0},e.prototype.stopPropagation=function(){},e.prototype.stopImmediatePropagation=function(){},e}();g.EventPolyfill=t},8534:function(e,g,t){"use strict";var n=this&&this.__extends||function(){var e=function(g,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,g){e.__proto__=g}||function(e,g){for(var t in g)Object.prototype.hasOwnProperty.call(g,t)&&(e[t]=g[t])},e(g,t)};return function(g,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=g}e(g,t),g.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(g,"__esModule",{value:!0}),g.ProgressEventPolyfill=void 0;var I=function(e){function g(g,t){var n=e.call(this,g)||this;return n.lengthComputable=(null===t||void 0===t?void 0:t.lengthComputable)||!1,n.composed=(null===t||void 0===t?void 0:t.composed)||!1,n.loaded=(null===t||void 0===t?void 0:t.loaded)||0,n.total=(null===t||void 0===t?void 0:t.total)||0,n}return n(g,e),g}(t(3261).EventPolyfill);g.ProgressEventPolyfill=I},8566:function(e,g){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.bufferFrom=void 0,g.bufferFrom=function(e){var g=encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,g){return String.fromCharCode("0x"+g)})),t=new Uint8Array(g.length);return Array.prototype.forEach.call(g,(function(e,g){t[g]=e.charCodeAt(0)})),t}},2208:function(e,g,t){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.createEvent=void 0;var n=t(3261),I=t(8534),C="undefined"!==typeof ProgressEvent;g.createEvent=function(e,g,t){var r=C?ProgressEvent:I.ProgressEventPolyfill;return["error","progress","loadstart","loadend","load","timeout","abort"].includes(g)?new r(g,{lengthComputable:!0,loaded:(null===t||void 0===t?void 0:t.loaded)||0,total:(null===t||void 0===t?void 0:t.total)||0}):new n.EventPolyfill(g,{target:e,currentTarget:e})}},5344:function(e,g,t){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var g,t=1,n=arguments.length;t<n;t++)for(var I in g=arguments[t])Object.prototype.hasOwnProperty.call(g,I)&&(e[I]=g[I]);return e},n.apply(this,arguments)},I=this&&this.__awaiter||function(e,g,t,n){return new(t||(t=Promise))((function(I,C){function r(e){try{i(n.next(e))}catch(g){C(g)}}function o(e){try{i(n.throw(e))}catch(g){C(g)}}function i(e){var g;e.done?I(e.value):(g=e.value,g instanceof t?g:new t((function(e){e(g)}))).then(r,o)}i((n=n.apply(e,g||[])).next())}))},C=this&&this.__generator||function(e,g){var t,n,I,C,r={label:0,sent:function(){if(1&I[0])throw I[1];return I[1]},trys:[],ops:[]};return C={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(C[Symbol.iterator]=function(){return this}),C;function o(C){return function(o){return function(C){if(t)throw new TypeError("Generator is already executing.");for(;r;)try{if(t=1,n&&(I=2&C[0]?n.return:C[0]?n.throw||((I=n.return)&&I.call(n),0):n.next)&&!(I=I.call(n,C[1])).done)return I;switch(n=0,I&&(C=[2&C[0],I.value]),C[0]){case 0:case 1:I=C;break;case 4:return r.label++,{value:C[1],done:!1};case 5:r.label++,n=C[1],C=[0];continue;case 7:C=r.ops.pop(),r.trys.pop();continue;default:if(!(I=(I=r.trys).length>0&&I[I.length-1])&&(6===C[0]||2===C[0])){r=0;continue}if(3===C[0]&&(!I||C[1]>I[0]&&C[1]<I[3])){r.label=C[1];break}if(6===C[0]&&r.label<I[1]){r.label=I[1],I=C;break}if(I&&r.label<I[2]){r.label=I[2],r.ops.push(C);break}I[2]&&r.ops.pop(),r.trys.pop();continue}C=g.call(e,r)}catch(o){C=[6,o],n=0}finally{t=I=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([C,o])}}};Object.defineProperty(g,"__esModule",{value:!0}),g.interceptFetch=void 0;var r=t(3602),o=t(2464),i=t(8949),l=t(1227)("fetch");function a(e){return I(this,void 0,void 0,(function(){var g;return C(this,(function(t){switch(t.label){case 0:return g={status:e.status,statusText:e.statusText,headers:r.objectToHeaders(r.headersToObject(e.headers))},[4,e.text()];case 1:return[2,(g.body=t.sent(),g)]}}))}))}g.interceptFetch=function(e,g){var t=window.fetch;return l('replacing "window.fetch"...'),window.fetch=function(s,c){return I(void 0,void 0,void 0,(function(){var A,u,d,h,m,b,p;return C(this,(function(Z){switch(Z.label){case 0:return A=new Request(s,c),u="string"===typeof s?s:s.url,d=A.method,l("[%s] %s",d,u),p={id:i.uuidv4(),url:new URL(u,location.origin),method:d,headers:new r.Headers(A.headers),credentials:A.credentials},[4,A.clone().text()];case 1:return p.body=Z.sent(),l("isomorphic request",h=p),e.emit("request",h),l("awaiting for the mocked response..."),[4,g(h,A)];case 2:return m=Z.sent(),l("mocked response",m),m?(b=o.toIsoResponse(m),l("derived isomorphic response",b),e.emit("response",h,b),[2,new Response(m.body,n(n({},b),{headers:r.flattenHeadersObject(m.headers||{})}))]):(l("no mocked response found, bypassing..."),[2,t(A).then((function(g){return I(void 0,void 0,void 0,(function(){var t,n,I,r;return C(this,(function(C){switch(C.label){case 0:return t=g.clone(),l("original fetch performed",t),I=(n=e).emit,r=["response",h],[4,a(t)];case 1:return I.apply(n,r.concat([C.sent()])),[2,g]}}))}))}))])}}))}))},function(){l("restoring modules..."),window.fetch=t}}},7912:function(e,g,t){"use strict";var n=t(4155),I=this&&this.__assign||function(){return I=Object.assign||function(e){for(var g,t=1,n=arguments.length;t<n;t++)for(var I in g=arguments[t])Object.prototype.hasOwnProperty.call(g,I)&&(e[I]=g[I]);return e},I.apply(this,arguments)},C=this&&this.__awaiter||function(e,g,t,n){return new(t||(t=Promise))((function(I,C){function r(e){try{i(n.next(e))}catch(g){C(g)}}function o(e){try{i(n.throw(e))}catch(g){C(g)}}function i(e){var g;e.done?I(e.value):(g=e.value,g instanceof t?g:new t((function(e){e(g)}))).then(r,o)}i((n=n.apply(e,g||[])).next())}))},r=this&&this.__generator||function(e,g){var t,n,I,C,r={label:0,sent:function(){if(1&I[0])throw I[1];return I[1]},trys:[],ops:[]};return C={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(C[Symbol.iterator]=function(){return this}),C;function o(C){return function(o){return function(C){if(t)throw new TypeError("Generator is already executing.");for(;r;)try{if(t=1,n&&(I=2&C[0]?n.return:C[0]?n.throw||((I=n.return)&&I.call(n),0):n.next)&&!(I=I.call(n,C[1])).done)return I;switch(n=0,I&&(C=[2&C[0],I.value]),C[0]){case 0:case 1:I=C;break;case 4:return r.label++,{value:C[1],done:!1};case 5:r.label++,n=C[1],C=[0];continue;case 7:C=r.ops.pop(),r.trys.pop();continue;default:if(!(I=(I=r.trys).length>0&&I[I.length-1])&&(6===C[0]||2===C[0])){r=0;continue}if(3===C[0]&&(!I||C[1]>I[0]&&C[1]<I[3])){r.label=C[1];break}if(6===C[0]&&r.label<I[1]){r.label=I[1],I=C;break}if(I&&r.label<I[2]){r.label=I[2],r.ops.push(C);break}I[2]&&r.ops.pop(),r.trys.pop();continue}C=g.call(e,r)}catch(o){C=[6,o],n=0}finally{t=I=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([C,o])}}},o=this&&this.__read||function(e,g){var t="function"===typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,I,C=t.call(e),r=[];try{for(;(void 0===g||g-- >0)&&!(n=C.next()).done;)r.push(n.value)}catch(o){I={error:o}}finally{try{n&&!n.done&&(t=C.return)&&t.call(C)}finally{if(I)throw I.error}}return r};Object.defineProperty(g,"__esModule",{value:!0}),g.createRemoteResolver=g.createRemoteInterceptor=void 0;var i=t(3602),l=t(8987),a=t(8533),s=t(2924),c=t(2464);function A(e,g){switch(e){case"url":return new URL(g);case"headers":return new i.Headers(g);default:return g}}g.createRemoteInterceptor=function(e){if(l.invariant(n.connected,"Failed to create a remote interceptor: the current process (%s) does not have a parent. Please make sure you're spawning this process as a child process in order to use remote request interception.",n.pid),"undefined"===typeof n.send)throw new Error("Failed to create a remote interceptor: the current process ("+n.pid+") does not have the IPC enabled. Please make sure you're spawning this process with the \"ipc\" stdio value set:\n\nspawn('node', ['module.js'], { stdio: ['ipc'] })");var g,t=s.createInterceptor(I(I({},e),{resolver:function(e){var t,I=JSON.stringify(e);return null===(t=n.send)||void 0===t||t.call(n,"request:"+I),new Promise((function(t){g=function(g){if("string"===typeof g&&g.startsWith("response:"+e.id)){var n=o(g.match(/^response:.+?:(.+)$/)||[],2)[1];if(!n)return t();var I=JSON.parse(n);return t(I)}},n.addListener("message",g)}))}}));return I(I({},t),{restore:function(){t.restore(),n.removeListener("message",g)}})},g.createRemoteResolver=function(e){var g=this,t=new a.StrictEventEmitter,n=function(n){return C(g,void 0,void 0,(function(){var g,I,C,i,l;return r(this,(function(r){switch(r.label){case 0:return"string"!==typeof n?[2]:n.startsWith("request:")?(g=o(n.match(/^request:(.+)$/)||[],2),(I=g[1])?(C=JSON.parse(I,A),t.emit("request",C),[4,e.resolver(C,void 0)]):[2]):[3,2];case 1:i=r.sent(),l=JSON.stringify(i),e.process.send("response:"+C.id+":"+l,(function(e){e||i&&t.emit("response",C,c.toIsoResponse(i))})),r.label=2;case 2:return[2]}}))}))},I=function(){e.process.removeListener("message",n)};return e.process.addListener("message",n),e.process.addListener("disconnect",I),e.process.addListener("error",I),e.process.addListener("exit",I),{on:function(e,g){t.addListener(e,g)}}}},7941:function(e,g){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.getCleanUrl=void 0,g.getCleanUrl=function(e,g){return void 0===g&&(g=!0),[g&&e.origin,e.pathname].filter(Boolean).join("")}},6523:function(e,g){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.parseJson=void 0,g.parseJson=function(e){try{return JSON.parse(e)}catch(g){return null}}},2464:function(e,g,t){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.toIsoResponse=void 0;var n=t(3602);g.toIsoResponse=function(e){return{status:e.status||200,statusText:e.statusText||"OK",headers:n.objectToHeaders(e.headers||{}),body:e.body}}},8949:function(e,g){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.uuidv4=void 0,g.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var g=16*Math.random()|0;return("x"==e?g:3&g|8).toString(16)}))}},864:function(e,g,t){"use strict";Object.defineProperty(g,"__esModule",{value:!0});var n=t(8257);g.until=n.until},8257:function(e,g){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.until=async e=>{try{return[null,await e().catch((e=>{throw e}))]}catch(g){return[g,null]}}},7010:function(e,g,t){"use strict";t.r(g),t.d(g,{detectEnv:function(){return r},detectOS:function(){return o},formatIOSMobile:function(){return w},formatMobileRegistry:function(){return M},formatMobileRegistryEntry:function(){return x},getClientMeta:function(){return v},getCrypto:function(){return G},getCryptoOrThrow:function(){return y},getDappRegistryUrl:function(){return E},getDocument:function(){return h},getDocumentOrThrow:function(){return d},getFromWindow:function(){return A},getFromWindowOrThrow:function(){return u},getLocal:function(){return k},getLocalStorage:function(){return f},getLocalStorageOrThrow:function(){return B},getLocation:function(){return Z},getLocationOrThrow:function(){return p},getMobileLinkRegistry:function(){return N},getMobileRegistryEntry:function(){return H},getNavigator:function(){return b},getNavigatorOrThrow:function(){return m},getWalletRegistryUrl:function(){return K},isAndroid:function(){return i},isBrowser:function(){return c},isIOS:function(){return l},isMobile:function(){return a},isNode:function(){return s},mobileLinkChoiceKey:function(){return J},removeLocal:function(){return X},safeJsonParse:function(){return V},safeJsonStringify:function(){return W},saveMobileLinkInfo:function(){return Y},setLocal:function(){return R}});var n=t(5755),I=t(2873),C=t(3631);function r(e){return(0,C.qY)(e)}function o(){const e=r();return e&&e.os?e.os:void 0}function i(){const e=o();return!!e&&e.toLowerCase().includes("android")}function l(){const e=o();return!!e&&(e.toLowerCase().includes("ios")||e.toLowerCase().includes("mac")&&navigator.maxTouchPoints>1)}function a(){return!!o()&&(i()||l())}function s(){const e=r();return!(!e||!e.name)&&"node"===e.name.toLowerCase()}function c(){return!s()&&!!b()}const A=I.getFromWindow,u=I.getFromWindowOrThrow,d=I.getDocumentOrThrow,h=I.getDocument,m=I.getNavigatorOrThrow,b=I.getNavigator,p=I.getLocationOrThrow,Z=I.getLocation,y=I.getCryptoOrThrow,G=I.getCrypto,B=I.getLocalStorageOrThrow,f=I.getLocalStorage;function v(){return n.D()}var S=t(5094);const V=S.D,W=S.u;function R(e,g){const t=W(g),n=f();n&&n.setItem(e,t)}function k(e){let g=null,t=null;const n=f();return n&&(t=n.getItem(e)),g=t?V(t):t,g}function X(e){const g=f();g&&g.removeItem(e)}const J="WALLETCONNECT_DEEPLINK_CHOICE";function w(e,g){const t=encodeURIComponent(e);return g.universalLink?`${g.universalLink}/wc?uri=${t}`:g.deepLink?`${g.deepLink}${g.deepLink.endsWith(":")?"//":"/"}wc?uri=${t}`:""}function Y(e){const g=e.href.split("?")[0];R(J,Object.assign(Object.assign({},e),{href:g}))}function H(e,g){return e.filter((e=>e.name.toLowerCase().includes(g.toLowerCase())))[0]}function N(e,g){let t=e;return g&&(t=g.map((g=>H(e,g))).filter(Boolean)),t}const F="https://registry.walletconnect.com";function K(){return F+"/api/v2/wallets"}function E(){return F+"/api/v2/dapps"}function x(e,g="mobile"){var t;return{name:e.name||"",shortName:e.metadata.shortName||"",color:e.metadata.colors.primary||"",logo:null!==(t=e.image_url.sm)&&void 0!==t?t:"",universalLink:e[g].universal||"",deepLink:e[g].native||""}}function M(e,g="mobile"){return Object.values(e).filter((e=>!!e[g].universal||!!e[g].native)).map((e=>x(e,g)))}},926:function(e,g,t){"use strict";function n(){return(null===t.g||void 0===t.g?void 0:t.g.crypto)||(null===t.g||void 0===t.g?void 0:t.g.msCrypto)||{}}function I(){const e=n();return e.subtle||e.webkitSubtle}Object.defineProperty(g,"__esModule",{value:!0}),g.isBrowserCryptoAvailable=g.getSubtleCrypto=g.getBrowerCrypto=void 0,g.getBrowerCrypto=n,g.getSubtleCrypto=I,g.isBrowserCryptoAvailable=function(){return!!n()&&!!I()}},8618:function(e,g,t){"use strict";var n=t(4155);function I(){return"undefined"===typeof document&&"undefined"!==typeof navigator&&"ReactNative"===navigator.product}function C(){return"undefined"!==typeof n&&"undefined"!==typeof n.versions&&"undefined"!==typeof n.versions.node}Object.defineProperty(g,"__esModule",{value:!0}),g.isBrowser=g.isNode=g.isReactNative=void 0,g.isReactNative=I,g.isNode=C,g.isBrowser=function(){return!I()&&!C()}},1468:function(e,g,t){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,g,t,n){void 0===n&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return g[t]}})}:function(e,g,t,n){void 0===n&&(n=t),e[n]=g[t]}),I=this&&this.__exportStar||function(e,g){for(var t in e)"default"===t||g.hasOwnProperty(t)||n(g,e,t)};Object.defineProperty(g,"__esModule",{value:!0}),I(t(926),g),I(t(8618),g)},5094:function(e,g,t){"use strict";function n(e){if("string"!==typeof e)throw new Error("Cannot safe json parse value of type "+typeof e);try{return JSON.parse(e)}catch(g){return e}}function I(e){return"string"===typeof e?e:JSON.stringify(e)}t.d(g,{D:function(){return n},u:function(){return I}})},2873:function(e,g){"use strict";function t(e){let g;return"undefined"!==typeof window&&"undefined"!==typeof window[e]&&(g=window[e]),g}function n(e){const g=t(e);if(!g)throw new Error(`${e} is not defined in Window`);return g}Object.defineProperty(g,"__esModule",{value:!0}),g.getLocalStorage=g.getLocalStorageOrThrow=g.getCrypto=g.getCryptoOrThrow=g.getLocation=g.getLocationOrThrow=g.getNavigator=g.getNavigatorOrThrow=g.getDocument=g.getDocumentOrThrow=g.getFromWindowOrThrow=g.getFromWindow=void 0,g.getFromWindow=t,g.getFromWindowOrThrow=n,g.getDocumentOrThrow=function(){return n("document")},g.getDocument=function(){return t("document")},g.getNavigatorOrThrow=function(){return n("navigator")},g.getNavigator=function(){return t("navigator")},g.getLocationOrThrow=function(){return n("location")},g.getLocation=function(){return t("location")},g.getCryptoOrThrow=function(){return n("crypto")},g.getCrypto=function(){return t("crypto")},g.getLocalStorageOrThrow=function(){return n("localStorage")},g.getLocalStorage=function(){return t("localStorage")}},5755:function(e,g,t){"use strict";g.D=void 0;const n=t(2873);g.D=function(){let e,g;try{e=n.getDocumentOrThrow(),g=n.getLocationOrThrow()}catch(C){return null}function t(...g){const t=e.getElementsByTagName("meta");for(let e=0;e<t.length;e++){const n=t[e],I=["itemprop","property","name"].map((e=>n.getAttribute(e))).filter((e=>!!e&&g.includes(e)));if(I.length&&I){const e=n.getAttribute("content");if(e)return e}}return""}const I=function(){let g=t("name","og:site_name","og:title","twitter:title");return g||(g=e.title),g}();return{description:t("description","og:description","twitter:description","keywords"),url:g.origin,icons:function(){const t=e.getElementsByTagName("link"),n=[];for(let e=0;e<t.length;e++){const I=t[e],C=I.getAttribute("rel");if(C&&C.toLowerCase().indexOf("icon")>-1){const e=I.getAttribute("href");if(e)if(-1===e.toLowerCase().indexOf("https:")&&-1===e.toLowerCase().indexOf("http:")&&0!==e.indexOf("//")){let t=g.protocol+"//"+g.host;if(0===e.indexOf("/"))t+=e;else{const n=g.pathname.split("/");n.pop();t+=n.join("/")+"/"+e}n.push(t)}else if(0===e.indexOf("//")){const t=g.protocol+e;n.push(t)}else n.push(e)}}return n}(),name:I}}},2167:function(e,g){"use strict";function t(e,g){return void 0===g&&(g=Object),g&&"function"===typeof g.freeze?g.freeze(e):e}var n=t({HTML:"text/html",isHTML:function(e){return e===n.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),I=t({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===I.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});g.freeze=t,g.MIME_TYPE=n,g.NAMESPACE=I},6129:function(e,g,t){var n=t(2167),I=t(1146),C=t(1045),r=t(6925),o=I.DOMImplementation,i=n.NAMESPACE,l=r.ParseError,a=r.XMLReader;function s(e){this.options=e||{locator:{}}}function c(){this.cdata=!1}function A(e,g){g.lineNumber=e.lineNumber,g.columnNumber=e.columnNumber}function u(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function d(e,g,t){return"string"==typeof e?e.substr(g,t):e.length>=g+t||g?new java.lang.String(e,g,t)+"":e}function h(e,g){e.currentElement?e.currentElement.appendChild(g):e.doc.appendChild(g)}s.prototype.parseFromString=function(e,g){var t=this.options,n=new a,I=t.domBuilder||new c,r=t.errorHandler,o=t.locator,l=t.xmlns||{},s=/\/x?html?$/.test(g),A=s?C.HTML_ENTITIES:C.XML_ENTITIES;return o&&I.setDocumentLocator(o),n.errorHandler=function(e,g,t){if(!e){if(g instanceof c)return g;e=g}var n={},I=e instanceof Function;function C(g){var C=e[g];!C&&I&&(C=2==e.length?function(t){e(g,t)}:e),n[g]=C&&function(e){C("[xmldom "+g+"]\t"+e+u(t))}||function(){}}return t=t||{},C("warning"),C("error"),C("fatalError"),n}(r,I,o),n.domBuilder=t.domBuilder||I,s&&(l[""]=i.HTML),l.xml=l.xml||i.XML,e&&"string"===typeof e?n.parse(e,l,A):n.errorHandler.error("invalid doc source"),I.doc},c.prototype={startDocument:function(){this.doc=(new o).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,g,t,n){var I=this.doc,C=I.createElementNS(e,t||g),r=n.length;h(this,C),this.currentElement=C,this.locator&&A(this.locator,C);for(var o=0;o<r;o++){e=n.getURI(o);var i=n.getValue(o),l=(t=n.getQName(o),I.createAttributeNS(e,t));this.locator&&A(n.getLocator(o),l),l.value=l.nodeValue=i,C.setAttributeNode(l)}},endElement:function(e,g,t){var n=this.currentElement;n.tagName;this.currentElement=n.parentNode},startPrefixMapping:function(e,g){},endPrefixMapping:function(e){},processingInstruction:function(e,g){var t=this.doc.createProcessingInstruction(e,g);this.locator&&A(this.locator,t),h(this,t)},ignorableWhitespace:function(e,g,t){},characters:function(e,g,t){if(e=d.apply(this,arguments)){if(this.cdata)var n=this.doc.createCDATASection(e);else n=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(e)&&this.doc.appendChild(n),this.locator&&A(this.locator,n)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,g,t){e=d.apply(this,arguments);var n=this.doc.createComment(e);this.locator&&A(this.locator,n),h(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,g,t){var n=this.doc.implementation;if(n&&n.createDocumentType){var I=n.createDocumentType(e,g,t);this.locator&&A(this.locator,I),h(this,I),this.doc.doctype=I}},warning:function(e){console.warn("[xmldom warning]\t"+e,u(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,u(this.locator))},fatalError:function(e){throw new l(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){c.prototype[e]=function(){return null}})),g.DOMParser=s,I.DOMImplementation,I.XMLSerializer},1146:function(e,g,t){var n=t(2167).NAMESPACE;function I(e){return""!==e}function C(e,g){return e.hasOwnProperty(g)||(e[g]=!0),e}function r(e){if(!e)return[];var g=function(e){return e?e.split(/[\t\n\f\r ]+/).filter(I):[]}(e);return Object.keys(g.reduce(C,{}))}function o(e,g){for(var t in e)g[t]=e[t]}function i(e,g){var t=e.prototype;if(!(t instanceof g)){function n(){}n.prototype=g.prototype,o(t,n=new n),e.prototype=t=n}t.constructor!=e&&("function"!=typeof e&&console.error("unknown Class:"+e),t.constructor=e)}var l={},a=l.ELEMENT_NODE=1,s=l.ATTRIBUTE_NODE=2,c=l.TEXT_NODE=3,A=l.CDATA_SECTION_NODE=4,u=l.ENTITY_REFERENCE_NODE=5,d=l.ENTITY_NODE=6,h=l.PROCESSING_INSTRUCTION_NODE=7,m=l.COMMENT_NODE=8,b=l.DOCUMENT_NODE=9,p=l.DOCUMENT_TYPE_NODE=10,Z=l.DOCUMENT_FRAGMENT_NODE=11,y=l.NOTATION_NODE=12,G={},B={},f=(G.INDEX_SIZE_ERR=(B[1]="Index size error",1),G.DOMSTRING_SIZE_ERR=(B[2]="DOMString size error",2),G.HIERARCHY_REQUEST_ERR=(B[3]="Hierarchy request error",3)),v=(G.WRONG_DOCUMENT_ERR=(B[4]="Wrong document",4),G.INVALID_CHARACTER_ERR=(B[5]="Invalid character",5),G.NO_DATA_ALLOWED_ERR=(B[6]="No data allowed",6),G.NO_MODIFICATION_ALLOWED_ERR=(B[7]="No modification allowed",7),G.NOT_FOUND_ERR=(B[8]="Not found",8)),S=(G.NOT_SUPPORTED_ERR=(B[9]="Not supported",9),G.INUSE_ATTRIBUTE_ERR=(B[10]="Attribute in use",10));G.INVALID_STATE_ERR=(B[11]="Invalid state",11),G.SYNTAX_ERR=(B[12]="Syntax error",12),G.INVALID_MODIFICATION_ERR=(B[13]="Invalid modification",13),G.NAMESPACE_ERR=(B[14]="Invalid namespace",14),G.INVALID_ACCESS_ERR=(B[15]="Invalid access",15);function V(e,g){if(g instanceof Error)var t=g;else t=this,Error.call(this,B[e]),this.message=B[e],Error.captureStackTrace&&Error.captureStackTrace(this,V);return t.code=e,g&&(this.message=this.message+": "+g),t}function W(){}function R(e,g){this._node=e,this._refresh=g,k(this)}function k(e){var g=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=g){var t=e._refresh(e._node);le(e,"length",t.length),o(t,e),e._inc=g}}function X(){}function J(e,g){for(var t=e.length;t--;)if(e[t]===g)return t}function w(e,g,t,I){if(I?g[J(g,I)]=t:g[g.length++]=t,e){t.ownerElement=e;var C=e.ownerDocument;C&&(I&&x(C,e,I),function(e,g,t){e&&e._inc++,t.namespaceURI===n.XMLNS&&(g._nsMap[t.prefix?t.localName:""]=t.value)}(C,e,t))}}function Y(e,g,t){var n=J(g,t);if(!(n>=0))throw V(v,new Error(e.tagName+"@"+t));for(var I=g.length-1;n<I;)g[n]=g[++n];if(g.length=I,e){var C=e.ownerDocument;C&&(x(C,e,t),t.ownerElement=null)}}function H(){}function N(){}function F(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function K(e,g){if(g(e))return!0;if(e=e.firstChild)do{if(K(e,g))return!0}while(e=e.nextSibling)}function E(){}function x(e,g,t,I){e&&e._inc++,t.namespaceURI===n.XMLNS&&delete g._nsMap[t.prefix?t.localName:""]}function M(e,g,t){if(e&&e._inc){e._inc++;var n=g.childNodes;if(t)n[n.length++]=t;else{for(var I=g.firstChild,C=0;I;)n[C++]=I,I=I.nextSibling;n.length=C}}}function U(e,g){var t=g.previousSibling,n=g.nextSibling;return t?t.nextSibling=n:e.firstChild=n,n?n.previousSibling=t:e.lastChild=t,M(e.ownerDocument,e),g}function T(e,g,t){var n=g.parentNode;if(n&&n.removeChild(g),g.nodeType===Z){var I=g.firstChild;if(null==I)return g;var C=g.lastChild}else I=C=g;var r=t?t.previousSibling:e.lastChild;I.previousSibling=r,C.nextSibling=t,r?r.nextSibling=I:e.firstChild=I,null==t?e.lastChild=C:t.previousSibling=C;do{I.parentNode=e}while(I!==C&&(I=I.nextSibling));return M(e.ownerDocument||e,e),g.nodeType==Z&&(g.firstChild=g.lastChild=null),g}function z(){this._nsMap={}}function L(){}function Q(){}function D(){}function j(){}function O(){}function P(){}function _(){}function q(){}function $(){}function ee(){}function ge(){}function te(){}function ne(e,g){var t=[],n=9==this.nodeType&&this.documentElement||this,I=n.prefix,C=n.namespaceURI;if(C&&null==I&&null==(I=n.lookupPrefix(C)))var r=[{namespace:C,prefix:null}];return re(this,t,e,g,r),t.join("")}function Ie(e,g,t){var I=e.prefix||"",C=e.namespaceURI;if(!C)return!1;if("xml"===I&&C===n.XML||C===n.XMLNS)return!1;for(var r=t.length;r--;){var o=t[r];if(o.prefix===I)return o.namespace!==C}return!0}function Ce(e,g,t){e.push(" ",g,'="',t.replace(/[<&"]/g,F),'"')}function re(e,g,t,I,C){if(C||(C=[]),I){if(!(e=I(e)))return;if("string"==typeof e)return void g.push(e)}switch(e.nodeType){case a:var r=e.attributes,o=r.length,i=e.firstChild,l=e.tagName,d=l;if(!(t=n.isHTML(e.namespaceURI)||t)&&!e.prefix&&e.namespaceURI){for(var y,G=0;G<r.length;G++)if("xmlns"===r.item(G).name){y=r.item(G).value;break}if(!y)for(var B=C.length-1;B>=0;B--){if(""===(f=C[B]).prefix&&f.namespace===e.namespaceURI){y=f.namespace;break}}if(y!==e.namespaceURI)for(B=C.length-1;B>=0;B--){var f;if((f=C[B]).namespace===e.namespaceURI){f.prefix&&(d=f.prefix+":"+l);break}}}g.push("<",d);for(var v=0;v<o;v++){"xmlns"==(S=r.item(v)).prefix?C.push({prefix:S.localName,namespace:S.value}):"xmlns"==S.nodeName&&C.push({prefix:"",namespace:S.value})}for(v=0;v<o;v++){var S,V,W;if(Ie(S=r.item(v),0,C))Ce(g,(V=S.prefix||"")?"xmlns:"+V:"xmlns",W=S.namespaceURI),C.push({prefix:V,namespace:W});re(S,g,t,I,C)}if(l===d&&Ie(e,0,C))Ce(g,(V=e.prefix||"")?"xmlns:"+V:"xmlns",W=e.namespaceURI),C.push({prefix:V,namespace:W});if(i||t&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(g.push(">"),t&&/^script$/i.test(l))for(;i;)i.data?g.push(i.data):re(i,g,t,I,C.slice()),i=i.nextSibling;else for(;i;)re(i,g,t,I,C.slice()),i=i.nextSibling;g.push("</",d,">")}else g.push("/>");return;case b:case Z:for(i=e.firstChild;i;)re(i,g,t,I,C.slice()),i=i.nextSibling;return;case s:return Ce(g,e.name,e.value);case c:return g.push(e.data.replace(/[<&]/g,F).replace(/]]>/g,"]]&gt;"));case A:return g.push("<![CDATA[",e.data,"]]>");case m:return g.push("\x3c!--",e.data,"--\x3e");case p:var R=e.publicId,k=e.systemId;if(g.push("<!DOCTYPE ",e.name),R)g.push(" PUBLIC ",R),k&&"."!=k&&g.push(" ",k),g.push(">");else if(k&&"."!=k)g.push(" SYSTEM ",k,">");else{var X=e.internalSubset;X&&g.push(" [",X,"]"),g.push(">")}return;case h:return g.push("<?",e.target," ",e.data,"?>");case u:return g.push("&",e.nodeName,";");default:g.push("??",e.nodeName)}}function oe(e,g,t){var n;switch(g.nodeType){case a:(n=g.cloneNode(!1)).ownerDocument=e;case Z:break;case s:t=!0}if(n||(n=g.cloneNode(!1)),n.ownerDocument=e,n.parentNode=null,t)for(var I=g.firstChild;I;)n.appendChild(oe(e,I,t)),I=I.nextSibling;return n}function ie(e,g,t){var n=new g.constructor;for(var I in g){var C=g[I];"object"!=typeof C&&C!=n[I]&&(n[I]=C)}switch(g.childNodes&&(n.childNodes=new W),n.ownerDocument=e,n.nodeType){case a:var r=g.attributes,o=n.attributes=new X,i=r.length;o._ownerElement=n;for(var l=0;l<i;l++)n.setAttributeNode(ie(e,r.item(l),!0));break;case s:t=!0}if(t)for(var c=g.firstChild;c;)n.appendChild(ie(e,c,t)),c=c.nextSibling;return n}function le(e,g,t){e[g]=t}V.prototype=Error.prototype,o(G,V),W.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,g){for(var t=[],n=0;n<this.length;n++)re(this[n],t,e,g);return t.join("")}},R.prototype.item=function(e){return k(this),this[e]},i(R,W),X.prototype={length:0,item:W.prototype.item,getNamedItem:function(e){for(var g=this.length;g--;){var t=this[g];if(t.nodeName==e)return t}},setNamedItem:function(e){var g=e.ownerElement;if(g&&g!=this._ownerElement)throw new V(S);var t=this.getNamedItem(e.nodeName);return w(this._ownerElement,this,e,t),t},setNamedItemNS:function(e){var g,t=e.ownerElement;if(t&&t!=this._ownerElement)throw new V(S);return g=this.getNamedItemNS(e.namespaceURI,e.localName),w(this._ownerElement,this,e,g),g},removeNamedItem:function(e){var g=this.getNamedItem(e);return Y(this._ownerElement,this,g),g},removeNamedItemNS:function(e,g){var t=this.getNamedItemNS(e,g);return Y(this._ownerElement,this,t),t},getNamedItemNS:function(e,g){for(var t=this.length;t--;){var n=this[t];if(n.localName==g&&n.namespaceURI==e)return n}return null}},H.prototype={hasFeature:function(e,g){return!0},createDocument:function(e,g,t){var n=new E;if(n.implementation=this,n.childNodes=new W,n.doctype=t||null,t&&n.appendChild(t),g){var I=n.createElementNS(e,g);n.appendChild(I)}return n},createDocumentType:function(e,g,t){var n=new P;return n.name=e,n.nodeName=e,n.publicId=g||"",n.systemId=t||"",n}},N.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,g){return T(this,e,g)},replaceChild:function(e,g){this.insertBefore(e,g),g&&this.removeChild(g)},removeChild:function(e){return U(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return ie(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var g=e.nextSibling;g&&g.nodeType==c&&e.nodeType==c?(this.removeChild(g),e.appendData(g.data)):(e.normalize(),e=g)}},isSupported:function(e,g){return this.ownerDocument.implementation.hasFeature(e,g)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var g=this;g;){var t=g._nsMap;if(t)for(var n in t)if(t[n]==e)return n;g=g.nodeType==s?g.ownerDocument:g.parentNode}return null},lookupNamespaceURI:function(e){for(var g=this;g;){var t=g._nsMap;if(t&&e in t)return t[e];g=g.nodeType==s?g.ownerDocument:g.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},o(l,N),o(l,N.prototype),E.prototype={nodeName:"#document",nodeType:b,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,g){if(e.nodeType==Z){for(var t=e.firstChild;t;){var n=t.nextSibling;this.insertBefore(t,g),t=n}return e}return null==this.documentElement&&e.nodeType==a&&(this.documentElement=e),T(this,e,g),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),U(this,e)},importNode:function(e,g){return oe(this,e,g)},getElementById:function(e){var g=null;return K(this.documentElement,(function(t){if(t.nodeType==a&&t.getAttribute("id")==e)return g=t,!0})),g},getElementsByClassName:function(e){var g=r(e);return new R(this,(function(t){var n=[];return g.length>0&&K(t.documentElement,(function(I){if(I!==t&&I.nodeType===a){var C=I.getAttribute("class");if(C){var o=e===C;if(!o){var i=r(C);o=g.every((l=i,function(e){return l&&-1!==l.indexOf(e)}))}o&&n.push(I)}}var l})),n}))},createElement:function(e){var g=new z;return g.ownerDocument=this,g.nodeName=e,g.tagName=e,g.localName=e,g.childNodes=new W,(g.attributes=new X)._ownerElement=g,g},createDocumentFragment:function(){var e=new ee;return e.ownerDocument=this,e.childNodes=new W,e},createTextNode:function(e){var g=new D;return g.ownerDocument=this,g.appendData(e),g},createComment:function(e){var g=new j;return g.ownerDocument=this,g.appendData(e),g},createCDATASection:function(e){var g=new O;return g.ownerDocument=this,g.appendData(e),g},createProcessingInstruction:function(e,g){var t=new ge;return t.ownerDocument=this,t.tagName=t.target=e,t.nodeValue=t.data=g,t},createAttribute:function(e){var g=new L;return g.ownerDocument=this,g.name=e,g.nodeName=e,g.localName=e,g.specified=!0,g},createEntityReference:function(e){var g=new $;return g.ownerDocument=this,g.nodeName=e,g},createElementNS:function(e,g){var t=new z,n=g.split(":"),I=t.attributes=new X;return t.childNodes=new W,t.ownerDocument=this,t.nodeName=g,t.tagName=g,t.namespaceURI=e,2==n.length?(t.prefix=n[0],t.localName=n[1]):t.localName=g,I._ownerElement=t,t},createAttributeNS:function(e,g){var t=new L,n=g.split(":");return t.ownerDocument=this,t.nodeName=g,t.name=g,t.namespaceURI=e,t.specified=!0,2==n.length?(t.prefix=n[0],t.localName=n[1]):t.localName=g,t}},i(E,N),z.prototype={nodeType:a,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var g=this.getAttributeNode(e);return g&&g.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,g){var t=this.ownerDocument.createAttribute(e);t.value=t.nodeValue=""+g,this.setAttributeNode(t)},removeAttribute:function(e){var g=this.getAttributeNode(e);g&&this.removeAttributeNode(g)},appendChild:function(e){return e.nodeType===Z?this.insertBefore(e,null):function(e,g){var t=g.parentNode;if(t){var n=e.lastChild;t.removeChild(g),n=e.lastChild}return n=e.lastChild,g.parentNode=e,g.previousSibling=n,g.nextSibling=null,n?n.nextSibling=g:e.firstChild=g,e.lastChild=g,M(e.ownerDocument,e,g),g}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,g){var t=this.getAttributeNodeNS(e,g);t&&this.removeAttributeNode(t)},hasAttributeNS:function(e,g){return null!=this.getAttributeNodeNS(e,g)},getAttributeNS:function(e,g){var t=this.getAttributeNodeNS(e,g);return t&&t.value||""},setAttributeNS:function(e,g,t){var n=this.ownerDocument.createAttributeNS(e,g);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},getAttributeNodeNS:function(e,g){return this.attributes.getNamedItemNS(e,g)},getElementsByTagName:function(e){return new R(this,(function(g){var t=[];return K(g,(function(n){n===g||n.nodeType!=a||"*"!==e&&n.tagName!=e||t.push(n)})),t}))},getElementsByTagNameNS:function(e,g){return new R(this,(function(t){var n=[];return K(t,(function(I){I===t||I.nodeType!==a||"*"!==e&&I.namespaceURI!==e||"*"!==g&&I.localName!=g||n.push(I)})),n}))}},E.prototype.getElementsByTagName=z.prototype.getElementsByTagName,E.prototype.getElementsByTagNameNS=z.prototype.getElementsByTagNameNS,i(z,N),L.prototype.nodeType=s,i(L,N),Q.prototype={data:"",substringData:function(e,g){return this.data.substring(e,e+g)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,g){this.replaceData(e,0,g)},appendChild:function(e){throw new Error(B[f])},deleteData:function(e,g){this.replaceData(e,g,"")},replaceData:function(e,g,t){t=this.data.substring(0,e)+t+this.data.substring(e+g),this.nodeValue=this.data=t,this.length=t.length}},i(Q,N),D.prototype={nodeName:"#text",nodeType:c,splitText:function(e){var g=this.data,t=g.substring(e);g=g.substring(0,e),this.data=this.nodeValue=g,this.length=g.length;var n=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},i(D,Q),j.prototype={nodeName:"#comment",nodeType:m},i(j,Q),O.prototype={nodeName:"#cdata-section",nodeType:A},i(O,Q),P.prototype.nodeType=p,i(P,N),_.prototype.nodeType=y,i(_,N),q.prototype.nodeType=d,i(q,N),$.prototype.nodeType=u,i($,N),ee.prototype.nodeName="#document-fragment",ee.prototype.nodeType=Z,i(ee,N),ge.prototype.nodeType=h,i(ge,N),te.prototype.serializeToString=function(e,g,t){return ne.call(e,g,t)},N.prototype.toString=ne;try{if(Object.defineProperty){function ae(e){switch(e.nodeType){case a:case Z:var g=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&g.push(ae(e)),e=e.nextSibling;return g.join("");default:return e.nodeValue}}Object.defineProperty(R.prototype,"length",{get:function(){return k(this),this.$$length}}),Object.defineProperty(N.prototype,"textContent",{get:function(){return ae(this)},set:function(e){switch(this.nodeType){case a:case Z:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),le=function(e,g,t){e["$$"+g]=t}}}catch(se){}g.DocumentType=P,g.DOMException=V,g.DOMImplementation=H,g.Element=z,g.Node=N,g.NodeList=W,g.XMLSerializer=te},1045:function(e,g,t){var n=t(2167).freeze;g.XML_ENTITIES=n({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),g.HTML_ENTITIES=n({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",times:"\xd7",divide:"\xf7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a",int:"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02c6",tilde:"\u02dc",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203a",oline:"\u203e",euro:"\u20ac",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),g.entityMap=g.HTML_ENTITIES},3969:function(e,g,t){var n=t(1146);g.DOMImplementation=n.DOMImplementation,g.XMLSerializer=n.XMLSerializer,g.DOMParser=t(6129).DOMParser},6925:function(e,g,t){var n=t(2167).NAMESPACE,I=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,C=new RegExp("[\\-\\.0-9"+I.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),r=new RegExp("^"+I.source+C.source+"*(?::"+I.source+C.source+"*)?$");function o(e,g){this.message=e,this.locator=g,Error.captureStackTrace&&Error.captureStackTrace(this,o)}function i(){}function l(e,g){return g.lineNumber=e.lineNumber,g.columnNumber=e.columnNumber,g}function a(e,g,t,I,C,r){function o(e,g,n){t.attributeNames.hasOwnProperty(e)&&r.fatalError("Attribute "+e+" redefined"),t.addValue(e,g,n)}for(var i,l=++g,a=0;;){var s=e.charAt(l);switch(s){case"=":if(1===a)i=e.slice(g,l),a=3;else{if(2!==a)throw new Error("attribute equal must after attrName");a=3}break;case"'":case'"':if(3===a||1===a){if(1===a&&(r.warning('attribute value must after "="'),i=e.slice(g,l)),g=l+1,!((l=e.indexOf(s,g))>0))throw new Error("attribute value no end '"+s+"' match");o(i,c=e.slice(g,l).replace(/&#?\w+;/g,C),g-1),a=5}else{if(4!=a)throw new Error('attribute value must after "="');o(i,c=e.slice(g,l).replace(/&#?\w+;/g,C),g),r.warning('attribute "'+i+'" missed start quot('+s+")!!"),g=l+1,a=5}break;case"/":switch(a){case 0:t.setTagName(e.slice(g,l));case 5:case 6:case 7:a=7,t.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return r.error("unexpected end of input"),0==a&&t.setTagName(e.slice(g,l)),l;case">":switch(a){case 0:t.setTagName(e.slice(g,l));case 5:case 6:case 7:break;case 4:case 1:"/"===(c=e.slice(g,l)).slice(-1)&&(t.closed=!0,c=c.slice(0,-1));case 2:2===a&&(c=i),4==a?(r.warning('attribute "'+c+'" missed quot(")!'),o(i,c.replace(/&#?\w+;/g,C),g)):(n.isHTML(I[""])&&c.match(/^(?:disabled|checked|selected)$/i)||r.warning('attribute "'+c+'" missed value!! "'+c+'" instead!!'),o(c,c,g));break;case 3:throw new Error("attribute value missed!!")}return l;case"\x80":s=" ";default:if(s<=" ")switch(a){case 0:t.setTagName(e.slice(g,l)),a=6;break;case 1:i=e.slice(g,l),a=2;break;case 4:var c=e.slice(g,l).replace(/&#?\w+;/g,C);r.warning('attribute "'+c+'" missed quot(")!!'),o(i,c,g);case 5:a=6}else switch(a){case 2:t.tagName;n.isHTML(I[""])&&i.match(/^(?:disabled|checked|selected)$/i)||r.warning('attribute "'+i+'" missed value!! "'+i+'" instead2!!'),o(i,i,g),g=l,a=1;break;case 5:r.warning('attribute space is required"'+i+'"!!');case 6:a=1,g=l;break;case 3:a=4,g=l;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}function s(e,g,t){for(var I=e.tagName,C=null,r=e.length;r--;){var o=e[r],i=o.qName,l=o.value;if((A=i.indexOf(":"))>0)var a=o.prefix=i.slice(0,A),s=i.slice(A+1),c="xmlns"===a&&s;else s=i,a=null,c="xmlns"===i&&"";o.localName=s,!1!==c&&(null==C&&(C={},u(t,t={})),t[c]=C[c]=l,o.uri=n.XMLNS,g.startPrefixMapping(c,l))}for(r=e.length;r--;){(a=(o=e[r]).prefix)&&("xml"===a&&(o.uri=n.XML),"xmlns"!==a&&(o.uri=t[a||""]))}var A;(A=I.indexOf(":"))>0?(a=e.prefix=I.slice(0,A),s=e.localName=I.slice(A+1)):(a=null,s=e.localName=I);var d=e.uri=t[a||""];if(g.startElement(d,s,I,e),!e.closed)return e.currentNSMap=t,e.localNSMap=C,!0;if(g.endElement(d,s,I),C)for(a in C)g.endPrefixMapping(a)}function c(e,g,t,n,I){if(/^(?:script|textarea)$/i.test(t)){var C=e.indexOf("</"+t+">",g),r=e.substring(g+1,C);if(/[&<]/.test(r))return/^script$/i.test(t)?(I.characters(r,0,r.length),C):(r=r.replace(/&#?\w+;/g,n),I.characters(r,0,r.length),C)}return g+1}function A(e,g,t,n){var I=n[t];return null==I&&((I=e.lastIndexOf("</"+t+">"))<g&&(I=e.lastIndexOf("</"+t)),n[t]=I),I<g}function u(e,g){for(var t in e)g[t]=e[t]}function d(e,g,t,n){if("-"===e.charAt(g+2))return"-"===e.charAt(g+3)?(I=e.indexOf("--\x3e",g+4))>g?(t.comment(e,g+4,I-g-4),I+3):(n.error("Unclosed comment"),-1):-1;if("CDATA["==e.substr(g+3,6)){var I=e.indexOf("]]>",g+9);return t.startCDATA(),t.characters(e,g+9,I-g-9),t.endCDATA(),I+3}var C=function(e,g){var t,n=[],I=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;I.lastIndex=g,I.exec(e);for(;t=I.exec(e);)if(n.push(t),t[1])return n}(e,g),r=C.length;if(r>1&&/!doctype/i.test(C[0][0])){var o=C[1][0],i=!1,l=!1;r>3&&(/^public$/i.test(C[2][0])?(i=C[3][0],l=r>4&&C[4][0]):/^system$/i.test(C[2][0])&&(l=C[3][0]));var a=C[r-1];return t.startDTD(o,i,l),t.endDTD(),a.index+a[0].length}return-1}function h(e,g,t){var n=e.indexOf("?>",g);if(n){var I=e.substring(g,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(I){I[0].length;return t.processingInstruction(I[1],I[2]),n+2}return-1}return-1}function m(){this.attributeNames={}}o.prototype=new Error,o.prototype.name=o.name,i.prototype={parse:function(e,g,t){var I=this.domBuilder;I.startDocument(),u(g,g={}),function(e,g,t,I,C){function r(e){if(e>65535){var g=55296+((e-=65536)>>10),t=56320+(1023&e);return String.fromCharCode(g,t)}return String.fromCharCode(e)}function i(e){var g=e.slice(1,-1);return g in t?t[g]:"#"===g.charAt(0)?r(parseInt(g.substr(1).replace("x","0x"))):(C.error("entity not found:"+e),e)}function u(g){if(g>v){var t=e.substring(v,g).replace(/&#?\w+;/g,i);G&&b(v),I.characters(t,0,g-v),v=g}}function b(g,t){for(;g>=Z&&(t=y.exec(e));)p=t.index,Z=p+t[0].length,G.lineNumber++;G.columnNumber=g-p+1}var p=0,Z=0,y=/.*(?:\r\n?|\n)|.*$/g,G=I.locator,B=[{currentNSMap:g}],f={},v=0;for(;;){try{var S=e.indexOf("<",v);if(S<0){if(!e.substr(v).match(/^\s*$/)){var V=I.doc,W=V.createTextNode(e.substr(v));V.appendChild(W),I.currentElement=W}return}switch(S>v&&u(S),e.charAt(S+1)){case"/":var R=e.indexOf(">",S+3),k=e.substring(S+2,R).replace(/[ \t\n\r]+$/g,""),X=B.pop();R<0?(k=e.substring(S+2).replace(/[\s<].*/,""),C.error("end tag name: "+k+" is not complete:"+X.tagName),R=S+1+k.length):k.match(/\s</)&&(k=k.replace(/[\s<].*/,""),C.error("end tag name: "+k+" maybe not complete"),R=S+1+k.length);var J=X.localNSMap,w=X.tagName==k;if(w||X.tagName&&X.tagName.toLowerCase()==k.toLowerCase()){if(I.endElement(X.uri,X.localName,k),J)for(var Y in J)I.endPrefixMapping(Y);w||C.fatalError("end tag name: "+k+" is not match the current start tagName:"+X.tagName)}else B.push(X);R++;break;case"?":G&&b(S),R=h(e,S,I);break;case"!":G&&b(S),R=d(e,S,I,C);break;default:G&&b(S);var H=new m,N=B[B.length-1].currentNSMap,F=(R=a(e,S,H,N,i,C),H.length);if(!H.closed&&A(e,R,H.tagName,f)&&(H.closed=!0,t.nbsp||C.warning("unclosed xml attribute")),G&&F){for(var K=l(G,{}),E=0;E<F;E++){var x=H[E];b(x.offset),x.locator=l(G,{})}I.locator=K,s(H,I,N)&&B.push(H),I.locator=G}else s(H,I,N)&&B.push(H);n.isHTML(H.uri)&&!H.closed?R=c(e,R,H.tagName,i,I):R++}}catch(M){if(M instanceof o)throw M;C.error("element parse error: "+M),R=-1}R>v?v=R:u(Math.max(S,v)+1)}}(e,g,t,I,this.errorHandler),I.endDocument()}},m.prototype={setTagName:function(e){if(!r.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,g,t){if(!r.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:g,offset:t}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},g.XMLReader=i,g.ParseError=o},3632:function(e,g,t){var n=t(4155);function I(e){return e&&"object"===typeof e&&"default"in e?e.default:e}var C=t(7010),r=I(t(2592)),o=I(t(640)),i=t(7423);var l="walletconnect-wrapper",a="walletconnect-style-sheet",s="walletconnect-qrcode-modal",c="walletconnect-qrcode-text";function A(e){return i.createElement("div",{className:"walletconnect-modal__header"},i.createElement("img",{src:"data:image/svg+xml,%3Csvg height='185' viewBox='0 0 300 185' width='300' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m61.4385429 36.2562612c48.9112241-47.8881663 128.2119871-47.8881663 177.1232091 0l5.886545 5.7634174c2.445561 2.3944081 2.445561 6.2765112 0 8.6709204l-20.136695 19.715503c-1.222781 1.1972051-3.2053 1.1972051-4.428081 0l-8.100584-7.9311479c-34.121692-33.4079817-89.443886-33.4079817-123.5655788 0l-8.6750562 8.4936051c-1.2227816 1.1972041-3.205301 1.1972041-4.4280806 0l-20.1366949-19.7155031c-2.4455612-2.3944092-2.4455612-6.2765122 0-8.6709204zm218.7677961 40.7737449 17.921697 17.546897c2.445549 2.3943969 2.445563 6.2764769.000031 8.6708899l-80.810171 79.121134c-2.445544 2.394426-6.410582 2.394453-8.85616.000062-.00001-.00001-.000022-.000022-.000032-.000032l-57.354143-56.154572c-.61139-.598602-1.60265-.598602-2.21404 0-.000004.000004-.000007.000008-.000011.000011l-57.3529212 56.154531c-2.4455368 2.394432-6.4105755 2.394472-8.8561612.000087-.0000143-.000014-.0000296-.000028-.0000449-.000044l-80.81241943-79.122185c-2.44556021-2.394408-2.44556021-6.2765115 0-8.6709197l17.92172963-17.5468673c2.4455602-2.3944082 6.4105989-2.3944082 8.8561602 0l57.3549775 56.155357c.6113908.598602 1.602649.598602 2.2140398 0 .0000092-.000009.0000174-.000017.0000265-.000024l57.3521031-56.155333c2.445505-2.3944633 6.410544-2.3945531 8.856161-.0002.000034.0000336.000068.0000673.000101.000101l57.354902 56.155432c.61139.598601 1.60265.598601 2.21404 0l57.353975-56.1543249c2.445561-2.3944092 6.410599-2.3944092 8.85616 0z' fill='%233b99fc'/%3E%3C/svg%3E",className:"walletconnect-modal__headerLogo"}),i.createElement("p",null,"WalletConnect"),i.createElement("div",{className:"walletconnect-modal__close__wrapper",onClick:e.onClose},i.createElement("div",{id:"walletconnect-qrcode-close",className:"walletconnect-modal__close__icon"},i.createElement("div",{className:"walletconnect-modal__close__line1"}),i.createElement("div",{className:"walletconnect-modal__close__line2"}))))}function u(e){return i.createElement("a",{className:"walletconnect-connect__button",href:e.href,id:"walletconnect-connect-button-"+e.name,onClick:e.onClick,rel:"noopener noreferrer",style:{backgroundColor:e.color},target:"_blank"},e.name)}function d(e){var g=e.color,t=e.href,n=e.name,I=e.logo,C=e.onClick;return i.createElement("a",{className:"walletconnect-modal__base__row",href:t,onClick:C,rel:"noopener noreferrer",target:"_blank"},i.createElement("h3",{className:"walletconnect-modal__base__row__h3"},n),i.createElement("div",{className:"walletconnect-modal__base__row__right"},i.createElement("div",{className:"walletconnect-modal__base__row__right__app-icon",style:{background:"url('"+I+"') "+g,backgroundSize:"100%"}}),i.createElement("img",{src:"data:image/svg+xml,%3Csvg fill='none' height='18' viewBox='0 0 8 18' width='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath clip-rule='evenodd' d='m.586301.213898c-.435947.33907-.5144813.967342-.175411 1.403292l4.87831 6.27212c.28087.36111.28087.86677 0 1.22788l-4.878311 6.27211c-.33907.436-.260536 1.0642.175412 1.4033.435949.3391 1.064219.2605 1.403289-.1754l4.87832-6.2721c.84259-1.08336.84259-2.60034 0-3.68367l-4.87832-6.27212c-.33907-.4359474-.96734-.514482-1.403289-.175412z' fill='%233c4252' fill-rule='evenodd'/%3E%3C/svg%3E",className:"walletconnect-modal__base__row__right__caret"})))}function h(e){var g=e.color,t=e.href,n=e.name,I=e.logo,C=e.onClick,r=window.innerWidth<768?(n.length>8?2.5:2.7)+"vw":"inherit";return i.createElement("a",{className:"walletconnect-connect__button__icon_anchor",href:t,onClick:C,rel:"noopener noreferrer",target:"_blank"},i.createElement("div",{className:"walletconnect-connect__button__icon",style:{background:"url('"+I+"') "+g,backgroundSize:"100%"}}),i.createElement("div",{style:{fontSize:r},className:"walletconnect-connect__button__text"},n))}function m(e){var g=C.isAndroid(),t=i.useState(""),n=t[0],I=t[1],r=i.useState(""),o=r[0],l=r[1],a=i.useState(1),s=a[0],A=a[1],m=o?e.links.filter((function(e){return e.name.toLowerCase().includes(o.toLowerCase())})):e.links,b=e.errorMessage,p=o||m.length>5,Z=Math.ceil(m.length/12),y=[12*(s-1)+1,12*s],G=m.length?m.filter((function(e,g){return g+1>=y[0]&&g+1<=y[1]})):[],B=!(g||!(Z>1)),f=void 0;return i.createElement("div",null,i.createElement("p",{id:c,className:"walletconnect-qrcode__text"},g?e.text.connect_mobile_wallet:e.text.choose_preferred_wallet),!g&&i.createElement("input",{className:"walletconnect-search__input",placeholder:"Search",value:n,onChange:function(e){I(e.target.value),clearTimeout(f),e.target.value?f=setTimeout((function(){l(e.target.value),A(1)}),1e3):(I(""),l(""),A(1))}}),i.createElement("div",{className:"walletconnect-connect__buttons__wrapper"+(g?"__android":p&&m.length?"__wrap":"")},g?i.createElement(u,{name:e.text.connect,color:"rgb(64, 153, 255)",href:e.uri,onClick:i.useCallback((function(){C.saveMobileLinkInfo({name:"Unknown",href:e.uri})}),[])}):G.length?G.map((function(g){var t=g.color,n=g.name,I=g.shortName,r=g.logo,o=C.formatIOSMobile(e.uri,g),l=i.useCallback((function(){C.saveMobileLinkInfo({name:n,href:o})}),[G]);return p?i.createElement(h,{color:t,href:o,name:I||n,logo:r,onClick:l}):i.createElement(d,{color:t,href:o,name:n,logo:r,onClick:l})})):i.createElement(i.Fragment,null,i.createElement("p",null,b.length?e.errorMessage:e.links.length&&!m.length?e.text.no_wallets_found:e.text.loading))),B&&i.createElement("div",{className:"walletconnect-modal__footer"},Array(Z).fill(0).map((function(e,g){var t=g+1,n=s===t;return i.createElement("a",{style:{margin:"auto 10px",fontWeight:n?"bold":"normal"},onClick:function(){return A(t)}},t)}))))}function b(e){var g=!!e.message.trim();return i.createElement("div",{className:"walletconnect-qrcode__notification"+(g?" notification__show":"")},e.message)}function p(e){var g=i.useState(""),t=g[0],n=g[1],I=i.useState(""),C=I[0],l=I[1];i.useEffect((function(){try{return Promise.resolve(function(e){try{var g="";return Promise.resolve(r.toString(e,{margin:0,type:"svg"})).then((function(e){return"string"===typeof e&&(g=e.replace("<svg",'<svg class="walletconnect-qrcode__image"')),g}))}catch(t){return Promise.reject(t)}}(e.uri)).then((function(e){l(e)}))}catch(g){Promise.reject(g)}}),[]);return i.createElement("div",null,i.createElement("p",{id:c,className:"walletconnect-qrcode__text"},e.text.scan_qrcode_with_wallet),i.createElement("div",{dangerouslySetInnerHTML:{__html:C}}),i.createElement("div",{className:"walletconnect-modal__footer"},i.createElement("a",{onClick:function(){o(e.uri)?(n(e.text.copied_to_clipboard),setInterval((function(){return n("")}),1200)):(n("Error"),setInterval((function(){return n("")}),1200))}},e.text.copy_to_clipboard)),i.createElement(b,{message:t}))}var Z={id:"23138217b046ae8d9d07e62b3337fb288c4445f92f64be067809cd0a8f9454b9",name:"Pera Wallet",homepage:"https://perawallet.app",chains:["algorand"],image_id:"1765f9aa-f99e-414e-826b-6b570d480999",image_url:{sm:"https://algorand-app.s3.amazonaws.com/app-icons/Pera-walletconnect-128.png",md:"https://algorand-app.s3.amazonaws.com/app-icons/Pera-walletconnect-128.png",lg:"https://algorand-app.s3.amazonaws.com/app-icons/Pera-walletconnect-128.png"},app:{browser:"",ios:"https://apps.apple.com/us/app/algorand-wallet/id1459898525",android:"https://play.google.com/store/apps/details?id=com.algorand.android",mac:"",windows:"",linux:""},mobile:{native:"algorand-wc:",universal:""},desktop:{native:"",universal:""},metadata:{shortName:"Pera Wallet",colors:{primary:"rgb(255, 238, 85)",secondary:""}}},y={};function G(e){var g=C.isAndroid(),t=C.isMobile(),n=t?e.qrcodeModalOptions&&e.qrcodeModalOptions.mobileLinks?e.qrcodeModalOptions.mobileLinks:void 0:e.qrcodeModalOptions&&e.qrcodeModalOptions.desktopLinks?e.qrcodeModalOptions.desktopLinks:void 0,I=i.useState(!1),r=I[0],o=I[1],l=i.useState(!1),a=l[0],c=l[1],u=i.useState(!t),d=u[0],h=u[1],b={mobile:t,text:e.text,uri:e.uri,qrcodeModalOptions:e.qrcodeModalOptions},Z=i.useState(""),G=Z[0],B=Z[1],f=i.useState(!1),v=f[0],S=f[1],V=i.useState([]),W=V[0],R=V[1],k=i.useState(""),X=k[0],J=k[1],w=function(){a||r||n&&!n.length||W.length>0||i.useEffect((function(){!function(){try{if(g)return Promise.resolve();o(!0);try{var I=t?"mobile":"desktop",r=C.getMobileLinkRegistry(C.formatMobileRegistry(y,I),n);o(!1),c(!0),J(r.length?"":e.text.no_supported_wallets),R(r);var i=1===r.length;i&&(B(C.formatIOSMobile(e.uri,r[0])),h(!0)),S(i)}catch(l){o(!1),c(!0),J(e.text.something_went_wrong),console.error(l)}Promise.resolve()}catch(l){return Promise.reject(l)}}()}))};w();var Y=t?d:!d;return i.createElement("div",{id:s,className:"walletconnect-qrcode__base animated fadeIn"},i.createElement("div",{className:"walletconnect-modal__base"},i.createElement(A,{onClose:e.onClose}),v&&d?i.createElement("div",{className:"walletconnect-modal__single_wallet"},i.createElement("a",{onClick:function(){return C.saveMobileLinkInfo({name:W[0].name,href:G})},href:G,rel:"noopener noreferrer",target:"_blank"},e.text.connect_with+" "+(v?W[0].name:"")+" \u203a")):g||r||!r&&W.length?i.createElement("div",{className:"walletconnect-modal__mobile__toggle"+(Y?" right__selected":"")},i.createElement("div",{className:"walletconnect-modal__mobile__toggle_selector"}),t?i.createElement(i.Fragment,null,i.createElement("a",{onClick:function(){return h(!1),w()}},e.text.mobile),i.createElement("a",{onClick:function(){return h(!0)}},e.text.qrcode)):i.createElement(i.Fragment,null,i.createElement("a",{onClick:function(){return h(!0)}},e.text.qrcode),i.createElement("a",{onClick:function(){return h(!1),w()}},e.text.desktop))):null,i.createElement("div",null,d||!g&&!r&&!W.length?i.createElement(p,Object.assign({},b)):i.createElement(m,Object.assign({},b,{links:W,errorMessage:X})))))}y[Z.id]=Z;var B={de:{choose_preferred_wallet:"W\xe4hle bevorzugte Wallet",connect_mobile_wallet:"Verbinde mit Mobile Wallet",scan_qrcode_with_wallet:"Scanne den QR-code mit einer WalletConnect kompatiblen Wallet",connect:"Verbinden",qrcode:"QR-Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"In die Zwischenablage kopieren",copied_to_clipboard:"In die Zwischenablage kopiert!",connect_with:"Verbinden mit Hilfe von",loading:"Laden...",something_went_wrong:"Etwas ist schief gelaufen",no_supported_wallets:"Es gibt noch keine unterst\xfctzten Wallet",no_wallets_found:"keine Wallet gefunden"},en:{choose_preferred_wallet:"Choose your preferred wallet",connect_mobile_wallet:"Connect to Mobile Wallet",scan_qrcode_with_wallet:"Scan QR code with a WalletConnect-compatible wallet",connect:"Connect",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copy to clipboard",copied_to_clipboard:"Copied to clipboard!",connect_with:"Connect with",loading:"Loading...",something_went_wrong:"Something went wrong",no_supported_wallets:"There are no supported wallets yet",no_wallets_found:"No wallets found"},es:{choose_preferred_wallet:"Elige tu billetera preferida",connect_mobile_wallet:"Conectar a billetera m\xf3vil",scan_qrcode_with_wallet:"Escanea el c\xf3digo QR con una billetera compatible con WalletConnect",connect:"Conectar",qrcode:"C\xf3digo QR",mobile:"M\xf3vil",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Conectar mediante",loading:"Cargando...",something_went_wrong:"Algo sali\xf3 mal",no_supported_wallets:"Todav\xeda no hay billeteras compatibles",no_wallets_found:"No se encontraron billeteras"},fr:{choose_preferred_wallet:"Choisissez votre portefeuille pr\xe9f\xe9r\xe9",connect_mobile_wallet:"Se connecter au portefeuille mobile",scan_qrcode_with_wallet:"Scannez le QR code avec un portefeuille compatible WalletConnect",connect:"Se connecter",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copier",copied_to_clipboard:"Copi\xe9!",connect_with:"Connectez-vous \xe0 l'aide de",loading:"Chargement...",something_went_wrong:"Quelque chose a mal tourn\xe9",no_supported_wallets:"Il n'y a pas encore de portefeuilles pris en charge",no_wallets_found:"Aucun portefeuille trouv\xe9"},ko:{choose_preferred_wallet:"\uc6d0\ud558\ub294 \uc9c0\uac11\uc744 \uc120\ud0dd\ud558\uc138\uc694",connect_mobile_wallet:"\ubaa8\ubc14\uc77c \uc9c0\uac11\uacfc \uc5f0\uacb0",scan_qrcode_with_wallet:"WalletConnect \uc9c0\uc6d0 \uc9c0\uac11\uc5d0\uc11c QR\ucf54\ub4dc\ub97c \uc2a4\uce94\ud558\uc138\uc694",connect:"\uc5f0\uacb0",qrcode:"QR \ucf54\ub4dc",mobile:"\ubaa8\ubc14\uc77c",desktop:"\ub370\uc2a4\ud06c\ud0d1",copy_to_clipboard:"\ud074\ub9bd\ubcf4\ub4dc\uc5d0 \ubcf5\uc0ac",copied_to_clipboard:"\ud074\ub9bd\ubcf4\ub4dc\uc5d0 \ubcf5\uc0ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4!",connect_with:"\uc640 \uc5f0\uacb0\ud558\ub2e4",loading:"\ub85c\ub4dc \uc911...",something_went_wrong:"\ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.",no_supported_wallets:"\uc544\uc9c1 \uc9c0\uc6d0\ub418\ub294 \uc9c0\uac11\uc774 \uc5c6\uc2b5\ub2c8\ub2e4",no_wallets_found:"\uc9c0\uac11\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"},pt:{choose_preferred_wallet:"Escolha sua carteira preferida",connect_mobile_wallet:"Conectar-se \xe0 carteira m\xf3vel",scan_qrcode_with_wallet:"Ler o c\xf3digo QR com uma carteira compat\xedvel com WalletConnect",connect:"Conectar",qrcode:"C\xf3digo QR",mobile:"M\xf3vel",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Ligar por meio de",loading:"Carregamento...",something_went_wrong:"Algo correu mal",no_supported_wallets:"Ainda n\xe3o h\xe1 carteiras suportadas",no_wallets_found:"Nenhuma carteira encontrada"},zh:{choose_preferred_wallet:"\u9009\u62e9\u4f60\u7684\u94b1\u5305",connect_mobile_wallet:"\u8fde\u63a5\u81f3\u79fb\u52a8\u7aef\u94b1\u5305",scan_qrcode_with_wallet:"\u4f7f\u7528\u517c\u5bb9 WalletConnect \u7684\u94b1\u5305\u626b\u63cf\u4e8c\u7ef4\u7801",connect:"\u8fde\u63a5",qrcode:"\u4e8c\u7ef4\u7801",mobile:"\u79fb\u52a8",desktop:"\u684c\u9762",copy_to_clipboard:"\u590d\u5236\u5230\u526a\u8d34\u677f",copied_to_clipboard:"\u590d\u5236\u5230\u526a\u8d34\u677f\u6210\u529f\uff01",connect_with:"\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u8fde\u63a5",loading:"\u6b63\u5728\u52a0\u8f7d...",something_went_wrong:"\u51fa\u4e86\u95ee\u9898",no_supported_wallets:"\u76ee\u524d\u8fd8\u6ca1\u6709\u652f\u6301\u7684\u94b1\u5305",no_wallets_found:"\u6ca1\u6709\u627e\u5230\u94b1\u5305"},fa:{choose_preferred_wallet:"\u06a9\u06cc\u0641 \u067e\u0648\u0644 \u0645\u0648\u0631\u062f \u0646\u0638\u0631 \u062e\u0648\u062f \u0631\u0627 \u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0646\u06cc\u062f",connect_mobile_wallet:"\u0628\u0647 \u06a9\u06cc\u0641 \u067e\u0648\u0644 \u0645\u0648\u0628\u0627\u06cc\u0644 \u0648\u0635\u0644 \u0634\u0648\u06cc\u062f",scan_qrcode_with_wallet:"\u06a9\u062f QR \u0631\u0627 \u0628\u0627 \u06cc\u06a9 \u06a9\u06cc\u0641 \u067e\u0648\u0644 \u0633\u0627\u0632\u06af\u0627\u0631 \u0628\u0627 WalletConnect \u0627\u0633\u06a9\u0646 \u06a9\u0646\u06cc\u062f",connect:"\u0627\u062a\u0635\u0627\u0644",qrcode:"\u06a9\u062f QR",mobile:"\u0633\u06cc\u0627\u0631",desktop:"\u062f\u0633\u06a9\u062a\u0627\u067e",copy_to_clipboard:"\u06a9\u067e\u06cc \u0628\u0647 \u06a9\u0644\u06cc\u067e \u0628\u0648\u0631\u062f",copied_to_clipboard:"\u062f\u0631 \u06a9\u0644\u06cc\u067e \u0628\u0648\u0631\u062f \u06a9\u067e\u06cc \u0634\u062f!",connect_with:"\u0627\u0631\u062a\u0628\u0627\u0637 \u0628\u0627",loading:"...\u0628\u0627\u0631\u06af\u0630\u0627\u0631\u06cc",something_went_wrong:"\u0645\u0634\u06a9\u0644\u06cc \u067e\u06cc\u0634 \u0622\u0645\u062f",no_supported_wallets:"\u0647\u0646\u0648\u0632 \u0647\u06cc\u0686 \u06a9\u06cc\u0641 \u067e\u0648\u0644 \u067e\u0634\u062a\u06cc\u0628\u0627\u0646\u06cc \u0634\u062f\u0647 \u0627\u06cc \u0648\u062c\u0648\u062f \u0646\u062f\u0627\u0631\u062f",no_wallets_found:"\u0647\u06cc\u0686 \u06a9\u06cc\u0641 \u067e\u0648\u0644\u06cc \u067e\u06cc\u062f\u0627 \u0646\u0634\u062f"}};function f(){var e=C.getDocumentOrThrow(),g=e.getElementById(s);g&&(g.className=g.className.replace("fadeIn","fadeOut"),setTimeout((function(){var g=e.getElementById(l);g&&e.body.removeChild(g)}),300))}function v(e){return function(){f(),e&&e()}}function S(){var e=C.getNavigatorOrThrow().language.split("-")[0]||"en";return B[e]||B.en}function V(e,g,t){!function(){var e=C.getDocumentOrThrow(),g=e.getElementById(a);g&&e.head.removeChild(g);var t=e.createElement("style");t.setAttribute("id",a),t.innerText=':root {\n  --animation-duration: 300ms;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n@keyframes fadeOut {\n  from {\n    opacity: 1;\n  }\n  to {\n    opacity: 0;\n  }\n}\n\n.animated {\n  animation-duration: var(--animation-duration);\n  animation-fill-mode: both;\n}\n\n.fadeIn {\n  animation-name: fadeIn;\n}\n\n.fadeOut {\n  animation-name: fadeOut;\n}\n\n#walletconnect-wrapper {\n  -webkit-user-select: none;\n  align-items: center;\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  left: 0;\n  pointer-events: none;\n  position: fixed;\n  top: 0;\n  user-select: none;\n  width: 100%;\n  z-index: 99999999999999;\n}\n\n.walletconnect-modal__headerLogo {\n  height: 21px;\n}\n\n.walletconnect-modal__header p {\n  color: #ffffff;\n  font-size: 20px;\n  font-weight: 600;\n  margin: 0;\n  align-items: flex-start;\n  display: flex;\n  flex: 1;\n  margin-left: 5px;\n}\n\n.walletconnect-modal__close__wrapper {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  z-index: 10000;\n  background: white;\n  border-radius: 26px;\n  padding: 6px;\n  box-sizing: border-box;\n  width: 26px;\n  height: 26px;\n  cursor: pointer;\n}\n\n.walletconnect-modal__close__icon {\n  position: relative;\n  top: 7px;\n  right: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transform: rotate(45deg);\n}\n\n.walletconnect-modal__close__line1 {\n  position: absolute;\n  width: 100%;\n  border: 1px solid rgb(48, 52, 59);\n}\n\n.walletconnect-modal__close__line2 {\n  position: absolute;\n  width: 100%;\n  border: 1px solid rgb(48, 52, 59);\n  transform: rotate(90deg);\n}\n\n.walletconnect-qrcode__base {\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  background: rgba(37, 41, 46, 0.95);\n  height: 100%;\n  left: 0;\n  pointer-events: auto;\n  position: fixed;\n  top: 0;\n  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n  width: 100%;\n  will-change: opacity;\n  padding: 40px;\n  box-sizing: border-box;\n}\n\n.walletconnect-qrcode__text {\n  color: rgba(60, 66, 82, 0.6);\n  font-size: 16px;\n  font-weight: 600;\n  letter-spacing: 0;\n  line-height: 1.1875em;\n  margin: 10px 0 20px 0;\n  text-align: center;\n  width: 100%;\n}\n\n@media only screen and (max-width: 768px) {\n  .walletconnect-qrcode__text {\n    font-size: 4vw;\n  }\n}\n\n@media only screen and (max-width: 320px) {\n  .walletconnect-qrcode__text {\n    font-size: 14px;\n  }\n}\n\n.walletconnect-qrcode__image {\n  width: calc(100% - 30px);\n  box-sizing: border-box;\n  cursor: none;\n  margin: 0 auto;\n}\n\n.walletconnect-qrcode__notification {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  font-size: 16px;\n  padding: 16px 20px;\n  border-radius: 16px;\n  text-align: center;\n  transition: all 0.1s ease-in-out;\n  background: white;\n  color: black;\n  margin-bottom: -60px;\n  opacity: 0;\n}\n\n.walletconnect-qrcode__notification.notification__show {\n  opacity: 1;\n}\n\n@media only screen and (max-width: 768px) {\n  .walletconnect-modal__header {\n    height: 130px;\n  }\n  .walletconnect-modal__base {\n    overflow: auto;\n  }\n}\n\n@media only screen and (min-device-width: 415px) and (max-width: 768px) {\n  #content {\n    max-width: 768px;\n    box-sizing: border-box;\n  }\n}\n\n@media only screen and (min-width: 375px) and (max-width: 415px) {\n  #content {\n    max-width: 414px;\n    box-sizing: border-box;\n  }\n}\n\n@media only screen and (min-width: 320px) and (max-width: 375px) {\n  #content {\n    max-width: 375px;\n    box-sizing: border-box;\n  }\n}\n\n@media only screen and (max-width: 320px) {\n  #content {\n    max-width: 320px;\n    box-sizing: border-box;\n  }\n}\n\n.walletconnect-modal__base {\n  -webkit-font-smoothing: antialiased;\n  background: #ffffff;\n  border-radius: 24px;\n  box-shadow: 0 10px 50px 5px rgba(0, 0, 0, 0.4);\n  font-family: ui-rounded, "SF Pro Rounded", "SF Pro Text", medium-content-sans-serif-font,\n    -apple-system, BlinkMacSystemFont, ui-sans-serif, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell,\n    "Open Sans", "Helvetica Neue", sans-serif;\n  margin-top: 41px;\n  padding: 24px 24px 22px;\n  pointer-events: auto;\n  position: relative;\n  text-align: center;\n  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n  will-change: transform;\n  overflow: visible;\n  transform: translateY(-50%);\n  top: 50%;\n  max-width: 500px;\n  margin: auto;\n}\n\n@media only screen and (max-width: 320px) {\n  .walletconnect-modal__base {\n    padding: 24px 12px;\n  }\n}\n\n.walletconnect-modal__base .hidden {\n  transform: translateY(150%);\n  transition: 0.125s cubic-bezier(0.4, 0, 1, 1);\n}\n\n.walletconnect-modal__header {\n  align-items: center;\n  display: flex;\n  height: 26px;\n  left: 0;\n  justify-content: space-between;\n  position: absolute;\n  top: -42px;\n  width: 100%;\n}\n\n.walletconnect-modal__base .wc-logo {\n  align-items: center;\n  display: flex;\n  height: 26px;\n  margin-top: 15px;\n  padding-bottom: 15px;\n  pointer-events: auto;\n}\n\n.walletconnect-modal__base .wc-logo div {\n  background-color: #3399ff;\n  height: 21px;\n  margin-right: 5px;\n  mask-image: url("images/wc-logo.svg") center no-repeat;\n  width: 32px;\n}\n\n.walletconnect-modal__base .wc-logo p {\n  color: #ffffff;\n  font-size: 20px;\n  font-weight: 600;\n  margin: 0;\n}\n\n.walletconnect-modal__base h2 {\n  color: rgba(60, 66, 82, 0.6);\n  font-size: 16px;\n  font-weight: 600;\n  letter-spacing: 0;\n  line-height: 1.1875em;\n  margin: 0 0 19px 0;\n  text-align: center;\n  width: 100%;\n}\n\n.walletconnect-modal__base__row {\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  align-items: center;\n  border-radius: 20px;\n  cursor: pointer;\n  display: flex;\n  height: 56px;\n  justify-content: space-between;\n  padding: 0 15px;\n  position: relative;\n  margin: 0px 0px 8px;\n  text-align: left;\n  transition: 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n  will-change: transform;\n  text-decoration: none;\n}\n\n.walletconnect-modal__base__row:hover {\n  background: rgba(60, 66, 82, 0.06);\n}\n\n.walletconnect-modal__base__row:active {\n  background: rgba(60, 66, 82, 0.06);\n  transform: scale(0.975);\n  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n}\n\n.walletconnect-modal__base__row__h3 {\n  color: #25292e;\n  font-size: 20px;\n  font-weight: 700;\n  margin: 0;\n  padding-bottom: 3px;\n}\n\n.walletconnect-modal__base__row__right {\n  align-items: center;\n  display: flex;\n  justify-content: center;\n}\n\n.walletconnect-modal__base__row__right__app-icon {\n  border-radius: 8px;\n  height: 34px;\n  margin: 0 11px 2px 0;\n  width: 34px;\n  background-size: 100%;\n  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);\n}\n\n.walletconnect-modal__base__row__right__caret {\n  height: 18px;\n  opacity: 0.3;\n  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n  width: 8px;\n  will-change: opacity;\n}\n\n.walletconnect-modal__base__row:hover .caret,\n.walletconnect-modal__base__row:active .caret {\n  opacity: 0.6;\n}\n\n.walletconnect-modal__mobile__toggle {\n  width: 80%;\n  display: flex;\n  margin: 0 auto;\n  position: relative;\n  overflow: hidden;\n  border-radius: 8px;\n  margin-bottom: 18px;\n  background: #d4d5d9;\n}\n\n.walletconnect-modal__single_wallet {\n  display: flex;\n  justify-content: center;\n  margin-top: 7px;\n  margin-bottom: 18px;\n}\n\n.walletconnect-modal__single_wallet a {\n  cursor: pointer;\n  color: rgb(64, 153, 255);\n  font-size: 21px;\n  font-weight: 800;\n  text-decoration: none !important;\n  margin: 0 auto;\n}\n\n.walletconnect-modal__mobile__toggle_selector {\n  width: calc(50% - 8px);\n  background: white;\n  position: absolute;\n  border-radius: 5px;\n  height: calc(100% - 8px);\n  top: 4px;\n  transition: all 0.2s ease-in-out;\n  transform: translate3d(4px, 0, 0);\n}\n\n.walletconnect-modal__mobile__toggle.right__selected .walletconnect-modal__mobile__toggle_selector {\n  transform: translate3d(calc(100% + 12px), 0, 0);\n}\n\n.walletconnect-modal__mobile__toggle a {\n  font-size: 12px;\n  width: 50%;\n  text-align: center;\n  padding: 8px;\n  margin: 0;\n  font-weight: 600;\n  z-index: 1;\n}\n\n.walletconnect-modal__footer {\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n}\n\n@media only screen and (max-width: 768px) {\n  .walletconnect-modal__footer {\n    margin-top: 5vw;\n  }\n}\n\n.walletconnect-modal__footer a {\n  cursor: pointer;\n  color: #898d97;\n  font-size: 15px;\n  margin: 0 auto;\n}\n\n@media only screen and (max-width: 320px) {\n  .walletconnect-modal__footer a {\n    font-size: 14px;\n  }\n}\n\n.walletconnect-connect__buttons__wrapper {\n  max-height: 44vh;\n}\n\n.walletconnect-connect__buttons__wrapper__android {\n  margin: 50% 0;\n}\n\n.walletconnect-connect__buttons__wrapper__wrap {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  margin: 10px 0;\n}\n\n@media only screen and (min-width: 768px) {\n  .walletconnect-connect__buttons__wrapper__wrap {\n    margin-top: 40px;\n  }\n}\n\n.walletconnect-connect__button {\n  background-color: rgb(64, 153, 255);\n  padding: 12px;\n  border-radius: 8px;\n  text-decoration: none;\n  color: rgb(255, 255, 255);\n  font-weight: 500;\n}\n\n.walletconnect-connect__button__icon_anchor {\n  cursor: pointer;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  margin: 8px;\n  width: 42px;\n  justify-self: center;\n  flex-direction: column;\n  text-decoration: none !important;\n}\n\n@media only screen and (max-width: 320px) {\n  .walletconnect-connect__button__icon_anchor {\n    margin: 4px;\n  }\n}\n\n.walletconnect-connect__button__icon {\n  border-radius: 10px;\n  height: 42px;\n  margin: 0;\n  width: 42px;\n  background-size: cover !important;\n  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);\n}\n\n.walletconnect-connect__button__text {\n  color: #424952;\n  font-size: 2.7vw;\n  text-decoration: none !important;\n  padding: 0;\n  margin-top: 1.8vw;\n  font-weight: 600;\n}\n\n@media only screen and (min-width: 768px) {\n  .walletconnect-connect__button__text {\n    font-size: 16px;\n    margin-top: 12px;\n  }\n}\n\n.walletconnect-search__input {\n  border: none;\n  background: #d4d5d9;\n  border-style: none;\n  padding: 8px 16px;\n  outline: none;\n  font-style: normal;\n  font-stretch: normal;\n  font-size: 16px;\n  font-style: normal;\n  font-stretch: normal;\n  line-height: normal;\n  letter-spacing: normal;\n  text-align: left;\n  border-radius: 8px;\n  width: calc(100% - 16px);\n  margin: 0;\n  margin-bottom: 8px;\n}\n',e.head.appendChild(t)}();var n=function(){var e=C.getDocumentOrThrow(),g=e.createElement("div");return g.setAttribute("id",l),e.body.appendChild(g),g}();i.render(i.createElement(G,{text:S(),uri:e,onClose:v(g),qrcodeModalOptions:t}),n)}var W=function(){return"undefined"!==typeof n&&"undefined"!==typeof n.versions&&"undefined"!==typeof n.versions.node};var R={open:function(e,g,t){console.log(e),W()?function(e){r.toString(e,{type:"terminal"}).then(console.log)}(e):V(e,g,t)},close:function(){W()||f()}};e.exports=R},9669:function(e,g,t){e.exports=t(1609)},5448:function(e,g,t){"use strict";var n=t(4867),I=t(6026),C=t(4372),r=t(5327),o=t(4097),i=t(4109),l=t(7985),a=t(7874),s=t(2648),c=t(644),A=t(205);e.exports=function(e){return new Promise((function(g,t){var u,d=e.data,h=e.headers,m=e.responseType;function b(){e.cancelToken&&e.cancelToken.unsubscribe(u),e.signal&&e.signal.removeEventListener("abort",u)}n.isFormData(d)&&n.isStandardBrowserEnv()&&delete h["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var Z=e.auth.username||"",y=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.Authorization="Basic "+btoa(Z+":"+y)}var G=o(e.baseURL,e.url);function B(){if(p){var n="getAllResponseHeaders"in p?i(p.getAllResponseHeaders()):null,C={data:m&&"text"!==m&&"json"!==m?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:n,config:e,request:p};I((function(e){g(e),b()}),(function(e){t(e),b()}),C),p=null}}if(p.open(e.method.toUpperCase(),r(G,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,"onloadend"in p?p.onloadend=B:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(B)},p.onabort=function(){p&&(t(new s("Request aborted",s.ECONNABORTED,e,p)),p=null)},p.onerror=function(){t(new s("Network Error",s.ERR_NETWORK,e,p,p)),p=null},p.ontimeout=function(){var g=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",n=e.transitional||a;e.timeoutErrorMessage&&(g=e.timeoutErrorMessage),t(new s(g,n.clarifyTimeoutError?s.ETIMEDOUT:s.ECONNABORTED,e,p)),p=null},n.isStandardBrowserEnv()){var f=(e.withCredentials||l(G))&&e.xsrfCookieName?C.read(e.xsrfCookieName):void 0;f&&(h[e.xsrfHeaderName]=f)}"setRequestHeader"in p&&n.forEach(h,(function(e,g){"undefined"===typeof d&&"content-type"===g.toLowerCase()?delete h[g]:p.setRequestHeader(g,e)})),n.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),m&&"json"!==m&&(p.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(u=function(e){p&&(t(!e||e&&e.type?new c:e),p.abort(),p=null)},e.cancelToken&&e.cancelToken.subscribe(u),e.signal&&(e.signal.aborted?u():e.signal.addEventListener("abort",u))),d||(d=null);var v=A(G);v&&-1===["http","https","file"].indexOf(v)?t(new s("Unsupported protocol "+v+":",s.ERR_BAD_REQUEST,e)):p.send(d)}))}},1609:function(e,g,t){"use strict";var n=t(4867),I=t(1849),C=t(321),r=t(8883);var o=function e(g){var t=new C(g),o=I(C.prototype.request,t);return n.extend(o,C.prototype,t),n.extend(o,t),o.create=function(t){return e(r(g,t))},o}(t(370));o.Axios=C,o.CanceledError=t(644),o.CancelToken=t(4972),o.isCancel=t(6502),o.VERSION=t(7288).version,o.toFormData=t(7675),o.AxiosError=t(2648),o.Cancel=o.CanceledError,o.all=function(e){return Promise.all(e)},o.spread=t(8713),o.isAxiosError=t(6268),e.exports=o,e.exports.default=o},4972:function(e,g,t){"use strict";var n=t(644);function I(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var g;this.promise=new Promise((function(e){g=e}));var t=this;this.promise.then((function(e){if(t._listeners){var g,n=t._listeners.length;for(g=0;g<n;g++)t._listeners[g](e);t._listeners=null}})),this.promise.then=function(e){var g,n=new Promise((function(e){t.subscribe(e),g=e})).then(e);return n.cancel=function(){t.unsubscribe(g)},n},e((function(e){t.reason||(t.reason=new n(e),g(t.reason))}))}I.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},I.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},I.prototype.unsubscribe=function(e){if(this._listeners){var g=this._listeners.indexOf(e);-1!==g&&this._listeners.splice(g,1)}},I.source=function(){var e;return{token:new I((function(g){e=g})),cancel:e}},e.exports=I},644:function(e,g,t){"use strict";var n=t(2648);function I(e){n.call(this,null==e?"canceled":e,n.ERR_CANCELED),this.name="CanceledError"}t(4867).inherits(I,n,{__CANCEL__:!0}),e.exports=I},6502:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},321:function(e,g,t){"use strict";var n=t(4867),I=t(5327),C=t(782),r=t(3572),o=t(8883),i=t(4097),l=t(4875),a=l.validators;function s(e){this.defaults=e,this.interceptors={request:new C,response:new C}}s.prototype.request=function(e,g){"string"===typeof e?(g=g||{}).url=e:g=e||{},(g=o(this.defaults,g)).method?g.method=g.method.toLowerCase():this.defaults.method?g.method=this.defaults.method.toLowerCase():g.method="get";var t=g.transitional;void 0!==t&&l.assertOptions(t,{silentJSONParsing:a.transitional(a.boolean),forcedJSONParsing:a.transitional(a.boolean),clarifyTimeoutError:a.transitional(a.boolean)},!1);var n=[],I=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(g)||(I=I&&e.synchronous,n.unshift(e.fulfilled,e.rejected))}));var C,i=[];if(this.interceptors.response.forEach((function(e){i.push(e.fulfilled,e.rejected)})),!I){var s=[r,void 0];for(Array.prototype.unshift.apply(s,n),s=s.concat(i),C=Promise.resolve(g);s.length;)C=C.then(s.shift(),s.shift());return C}for(var c=g;n.length;){var A=n.shift(),u=n.shift();try{c=A(c)}catch(d){u(d);break}}try{C=r(c)}catch(d){return Promise.reject(d)}for(;i.length;)C=C.then(i.shift(),i.shift());return C},s.prototype.getUri=function(e){e=o(this.defaults,e);var g=i(e.baseURL,e.url);return I(g,e.params,e.paramsSerializer)},n.forEach(["delete","get","head","options"],(function(e){s.prototype[e]=function(g,t){return this.request(o(t||{},{method:e,url:g,data:(t||{}).data}))}})),n.forEach(["post","put","patch"],(function(e){function g(g){return function(t,n,I){return this.request(o(I||{},{method:e,headers:g?{"Content-Type":"multipart/form-data"}:{},url:t,data:n}))}}s.prototype[e]=g(),s.prototype[e+"Form"]=g(!0)})),e.exports=s},2648:function(e,g,t){"use strict";var n=t(4867);function I(e,g,t,n,I){Error.call(this),this.message=e,this.name="AxiosError",g&&(this.code=g),t&&(this.config=t),n&&(this.request=n),I&&(this.response=I)}n.inherits(I,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var C=I.prototype,r={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){r[e]={value:e}})),Object.defineProperties(I,r),Object.defineProperty(C,"isAxiosError",{value:!0}),I.from=function(e,g,t,r,o,i){var l=Object.create(C);return n.toFlatObject(e,l,(function(e){return e!==Error.prototype})),I.call(l,e.message,g,t,r,o),l.name=e.name,i&&Object.assign(l,i),l},e.exports=I},782:function(e,g,t){"use strict";var n=t(4867);function I(){this.handlers=[]}I.prototype.use=function(e,g,t){return this.handlers.push({fulfilled:e,rejected:g,synchronous:!!t&&t.synchronous,runWhen:t?t.runWhen:null}),this.handlers.length-1},I.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},I.prototype.forEach=function(e){n.forEach(this.handlers,(function(g){null!==g&&e(g)}))},e.exports=I},4097:function(e,g,t){"use strict";var n=t(1793),I=t(7303);e.exports=function(e,g){return e&&!n(g)?I(e,g):g}},3572:function(e,g,t){"use strict";var n=t(4867),I=t(8527),C=t(6502),r=t(370),o=t(644);function i(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new o}e.exports=function(e){return i(e),e.headers=e.headers||{},e.data=I.call(e,e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(g){delete e.headers[g]})),(e.adapter||r.adapter)(e).then((function(g){return i(e),g.data=I.call(e,g.data,g.headers,e.transformResponse),g}),(function(g){return C(g)||(i(e),g&&g.response&&(g.response.data=I.call(e,g.response.data,g.response.headers,e.transformResponse))),Promise.reject(g)}))}},8883:function(e,g,t){"use strict";var n=t(4867);e.exports=function(e,g){g=g||{};var t={};function I(e,g){return n.isPlainObject(e)&&n.isPlainObject(g)?n.merge(e,g):n.isPlainObject(g)?n.merge({},g):n.isArray(g)?g.slice():g}function C(t){return n.isUndefined(g[t])?n.isUndefined(e[t])?void 0:I(void 0,e[t]):I(e[t],g[t])}function r(e){if(!n.isUndefined(g[e]))return I(void 0,g[e])}function o(t){return n.isUndefined(g[t])?n.isUndefined(e[t])?void 0:I(void 0,e[t]):I(void 0,g[t])}function i(t){return t in g?I(e[t],g[t]):t in e?I(void 0,e[t]):void 0}var l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:i};return n.forEach(Object.keys(e).concat(Object.keys(g)),(function(e){var g=l[e]||C,I=g(e);n.isUndefined(I)&&g!==i||(t[e]=I)})),t}},6026:function(e,g,t){"use strict";var n=t(2648);e.exports=function(e,g,t){var I=t.config.validateStatus;t.status&&I&&!I(t.status)?g(new n("Request failed with status code "+t.status,[n.ERR_BAD_REQUEST,n.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t)):e(t)}},8527:function(e,g,t){"use strict";var n=t(4867),I=t(370);e.exports=function(e,g,t){var C=this||I;return n.forEach(t,(function(t){e=t.call(C,e,g)})),e}},370:function(e,g,t){"use strict";var n=t(4155),I=t(4867),C=t(6016),r=t(2648),o=t(7874),i=t(7675),l={"Content-Type":"application/x-www-form-urlencoded"};function a(e,g){!I.isUndefined(e)&&I.isUndefined(e["Content-Type"])&&(e["Content-Type"]=g)}var s={transitional:o,adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof n&&"[object process]"===Object.prototype.toString.call(n))&&(e=t(5448)),e}(),transformRequest:[function(e,g){if(C(g,"Accept"),C(g,"Content-Type"),I.isFormData(e)||I.isArrayBuffer(e)||I.isBuffer(e)||I.isStream(e)||I.isFile(e)||I.isBlob(e))return e;if(I.isArrayBufferView(e))return e.buffer;if(I.isURLSearchParams(e))return a(g,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var t,n=I.isObject(e),r=g&&g["Content-Type"];if((t=I.isFileList(e))||n&&"multipart/form-data"===r){var o=this.env&&this.env.FormData;return i(t?{"files[]":e}:e,o&&new o)}return n||"application/json"===r?(a(g,"application/json"),function(e,g,t){if(I.isString(e))try{return(g||JSON.parse)(e),I.trim(e)}catch(n){if("SyntaxError"!==n.name)throw n}return(t||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var g=this.transitional||s.transitional,t=g&&g.silentJSONParsing,n=g&&g.forcedJSONParsing,C=!t&&"json"===this.responseType;if(C||n&&I.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(C){if("SyntaxError"===o.name)throw r.from(o,r.ERR_BAD_RESPONSE,this,null,this.response);throw o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:t(1623)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};I.forEach(["delete","get","head"],(function(e){s.headers[e]={}})),I.forEach(["post","put","patch"],(function(e){s.headers[e]=I.merge(l)})),e.exports=s},7874:function(e){"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7288:function(e){e.exports={version:"0.27.2"}},1849:function(e){"use strict";e.exports=function(e,g){return function(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];return e.apply(g,t)}}},5327:function(e,g,t){"use strict";var n=t(4867);function I(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,g,t){if(!g)return e;var C;if(t)C=t(g);else if(n.isURLSearchParams(g))C=g.toString();else{var r=[];n.forEach(g,(function(e,g){null!==e&&"undefined"!==typeof e&&(n.isArray(e)?g+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),r.push(I(g)+"="+I(e))})))})),C=r.join("&")}if(C){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+C}return e}},7303:function(e){"use strict";e.exports=function(e,g){return g?e.replace(/\/+$/,"")+"/"+g.replace(/^\/+/,""):e}},4372:function(e,g,t){"use strict";var n=t(4867);e.exports=n.isStandardBrowserEnv()?{write:function(e,g,t,I,C,r){var o=[];o.push(e+"="+encodeURIComponent(g)),n.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),n.isString(I)&&o.push("path="+I),n.isString(C)&&o.push("domain="+C),!0===r&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var g=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return g?decodeURIComponent(g[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},1793:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},6268:function(e,g,t){"use strict";var n=t(4867);e.exports=function(e){return n.isObject(e)&&!0===e.isAxiosError}},7985:function(e,g,t){"use strict";var n=t(4867);e.exports=n.isStandardBrowserEnv()?function(){var e,g=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");function I(e){var n=e;return g&&(t.setAttribute("href",n),n=t.href),t.setAttribute("href",n),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return e=I(window.location.href),function(g){var t=n.isString(g)?I(g):g;return t.protocol===e.protocol&&t.host===e.host}}():function(){return!0}},6016:function(e,g,t){"use strict";var n=t(4867);e.exports=function(e,g){n.forEach(e,(function(t,n){n!==g&&n.toUpperCase()===g.toUpperCase()&&(e[g]=t,delete e[n])}))}},1623:function(e){e.exports=null},4109:function(e,g,t){"use strict";var n=t(4867),I=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var g,t,C,r={};return e?(n.forEach(e.split("\n"),(function(e){if(C=e.indexOf(":"),g=n.trim(e.substr(0,C)).toLowerCase(),t=n.trim(e.substr(C+1)),g){if(r[g]&&I.indexOf(g)>=0)return;r[g]="set-cookie"===g?(r[g]?r[g]:[]).concat([t]):r[g]?r[g]+", "+t:t}})),r):r}},205:function(e){"use strict";e.exports=function(e){var g=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return g&&g[1]||""}},8713:function(e){"use strict";e.exports=function(e){return function(g){return e.apply(null,g)}}},7675:function(e,g,t){"use strict";var n=t(8764).Buffer,I=t(4867);e.exports=function(e,g){g=g||new FormData;var t=[];function C(e){return null===e?"":I.isDate(e)?e.toISOString():I.isArrayBuffer(e)||I.isTypedArray(e)?"function"===typeof Blob?new Blob([e]):n.from(e):e}return function e(n,r){if(I.isPlainObject(n)||I.isArray(n)){if(-1!==t.indexOf(n))throw Error("Circular reference detected in "+r);t.push(n),I.forEach(n,(function(t,n){if(!I.isUndefined(t)){var o,i=r?r+"."+n:n;if(t&&!r&&"object"===typeof t)if(I.endsWith(n,"{}"))t=JSON.stringify(t);else if(I.endsWith(n,"[]")&&(o=I.toArray(t)))return void o.forEach((function(e){!I.isUndefined(e)&&g.append(i,C(e))}));e(t,i)}})),t.pop()}else g.append(r,C(n))}(e),g}},4875:function(e,g,t){"use strict";var n=t(7288).version,I=t(2648),C={};["object","boolean","number","function","string","symbol"].forEach((function(e,g){C[e]=function(t){return typeof t===e||"a"+(g<1?"n ":" ")+e}}));var r={};C.transitional=function(e,g,t){function C(e,g){return"[Axios v"+n+"] Transitional option '"+e+"'"+g+(t?". "+t:"")}return function(t,n,o){if(!1===e)throw new I(C(n," has been removed"+(g?" in "+g:"")),I.ERR_DEPRECATED);return g&&!r[n]&&(r[n]=!0,console.warn(C(n," has been deprecated since v"+g+" and will be removed in the near future"))),!e||e(t,n,o)}},e.exports={assertOptions:function(e,g,t){if("object"!==typeof e)throw new I("options must be an object",I.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(e),C=n.length;C-- >0;){var r=n[C],o=g[r];if(o){var i=e[r],l=void 0===i||o(i,r,e);if(!0!==l)throw new I("option "+r+" must be "+l,I.ERR_BAD_OPTION_VALUE)}else if(!0!==t)throw new I("Unknown option "+r,I.ERR_BAD_OPTION)}},validators:C}},4867:function(e,g,t){"use strict";var n,I=t(1849),C=Object.prototype.toString,r=(n=Object.create(null),function(e){var g=C.call(e);return n[g]||(n[g]=g.slice(8,-1).toLowerCase())});function o(e){return e=e.toLowerCase(),function(g){return r(g)===e}}function i(e){return Array.isArray(e)}function l(e){return"undefined"===typeof e}var a=o("ArrayBuffer");function s(e){return null!==e&&"object"===typeof e}function c(e){if("object"!==r(e))return!1;var g=Object.getPrototypeOf(e);return null===g||g===Object.prototype}var A=o("Date"),u=o("File"),d=o("Blob"),h=o("FileList");function m(e){return"[object Function]"===C.call(e)}var b=o("URLSearchParams");function p(e,g){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),i(e))for(var t=0,n=e.length;t<n;t++)g.call(null,e[t],t,e);else for(var I in e)Object.prototype.hasOwnProperty.call(e,I)&&g.call(null,e[I],I,e)}var Z,y=(Z="undefined"!==typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return Z&&e instanceof Z});e.exports={isArray:i,isArrayBuffer:a,isBuffer:function(e){return null!==e&&!l(e)&&null!==e.constructor&&!l(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var g="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||C.call(e)===g||m(e.toString)&&e.toString()===g)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&a(e.buffer)},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:s,isPlainObject:c,isUndefined:l,isDate:A,isFile:u,isBlob:d,isFunction:m,isStream:function(e){return s(e)&&m(e.pipe)},isURLSearchParams:b,isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:p,merge:function e(){var g={};function t(t,n){c(g[n])&&c(t)?g[n]=e(g[n],t):c(t)?g[n]=e({},t):i(t)?g[n]=t.slice():g[n]=t}for(var n=0,I=arguments.length;n<I;n++)p(arguments[n],t);return g},extend:function(e,g,t){return p(g,(function(g,n){e[n]=t&&"function"===typeof g?I(g,t):g})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,g,t,n){e.prototype=Object.create(g.prototype,n),e.prototype.constructor=e,t&&Object.assign(e.prototype,t)},toFlatObject:function(e,g,t){var n,I,C,r={};g=g||{};do{for(I=(n=Object.getOwnPropertyNames(e)).length;I-- >0;)r[C=n[I]]||(g[C]=e[C],r[C]=!0);e=Object.getPrototypeOf(e)}while(e&&(!t||t(e,g))&&e!==Object.prototype);return g},kindOf:r,kindOfTest:o,endsWith:function(e,g,t){e=String(e),(void 0===t||t>e.length)&&(t=e.length),t-=g.length;var n=e.indexOf(g,t);return-1!==n&&n===t},toArray:function(e){if(!e)return null;var g=e.length;if(l(g))return null;for(var t=new Array(g);g-- >0;)t[g]=e[g];return t},isTypedArray:y,isFileList:h}},8162:function(e,g,t){"use strict";var n=t(9509).Buffer;e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var g=new Uint8Array(256),t=0;t<g.length;t++)g[t]=255;for(var I=0;I<e.length;I++){var C=e.charAt(I),r=C.charCodeAt(0);if(255!==g[r])throw new TypeError(C+" is ambiguous");g[r]=I}var o=e.length,i=e.charAt(0),l=Math.log(o)/Math.log(256),a=Math.log(256)/Math.log(o);function s(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return n.alloc(0);for(var t=0,I=0,C=0;e[t]===i;)I++,t++;for(var r=(e.length-t)*l+1>>>0,a=new Uint8Array(r);e[t];){var s=g[e.charCodeAt(t)];if(255===s)return;for(var c=0,A=r-1;(0!==s||c<C)&&-1!==A;A--,c++)s+=o*a[A]>>>0,a[A]=s%256>>>0,s=s/256>>>0;if(0!==s)throw new Error("Non-zero carry");C=c,t++}for(var u=r-C;u!==r&&0===a[u];)u++;var d=n.allocUnsafe(I+(r-u));d.fill(0,0,I);for(var h=I;u!==r;)d[h++]=a[u++];return d}return{encode:function(g){if((Array.isArray(g)||g instanceof Uint8Array)&&(g=n.from(g)),!n.isBuffer(g))throw new TypeError("Expected Buffer");if(0===g.length)return"";for(var t=0,I=0,C=0,r=g.length;C!==r&&0===g[C];)C++,t++;for(var l=(r-C)*a+1>>>0,s=new Uint8Array(l);C!==r;){for(var c=g[C],A=0,u=l-1;(0!==c||A<I)&&-1!==u;u--,A++)c+=256*s[u]>>>0,s[u]=c%o>>>0,c=c/o>>>0;if(0!==c)throw new Error("Non-zero carry");I=A,C++}for(var d=l-I;d!==l&&0===s[d];)d++;for(var h=i.repeat(t);d<l;++d)h+=e.charAt(s[d]);return h},decodeUnsafe:s,decode:function(e){var g=s(e);if(g)return g;throw new Error("Non-base"+o+" character")}}}},9742:function(e,g){"use strict";g.byteLength=function(e){var g=i(e),t=g[0],n=g[1];return 3*(t+n)/4-n},g.toByteArray=function(e){var g,t,C=i(e),r=C[0],o=C[1],l=new I(function(e,g,t){return 3*(g+t)/4-t}(0,r,o)),a=0,s=o>0?r-4:r;for(t=0;t<s;t+=4)g=n[e.charCodeAt(t)]<<18|n[e.charCodeAt(t+1)]<<12|n[e.charCodeAt(t+2)]<<6|n[e.charCodeAt(t+3)],l[a++]=g>>16&255,l[a++]=g>>8&255,l[a++]=255&g;2===o&&(g=n[e.charCodeAt(t)]<<2|n[e.charCodeAt(t+1)]>>4,l[a++]=255&g);1===o&&(g=n[e.charCodeAt(t)]<<10|n[e.charCodeAt(t+1)]<<4|n[e.charCodeAt(t+2)]>>2,l[a++]=g>>8&255,l[a++]=255&g);return l},g.fromByteArray=function(e){for(var g,n=e.length,I=n%3,C=[],r=16383,o=0,i=n-I;o<i;o+=r)C.push(l(e,o,o+r>i?i:o+r));1===I?(g=e[n-1],C.push(t[g>>2]+t[g<<4&63]+"==")):2===I&&(g=(e[n-2]<<8)+e[n-1],C.push(t[g>>10]+t[g>>4&63]+t[g<<2&63]+"="));return C.join("")};for(var t=[],n=[],I="undefined"!==typeof Uint8Array?Uint8Array:Array,C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,o=C.length;r<o;++r)t[r]=C[r],n[C.charCodeAt(r)]=r;function i(e){var g=e.length;if(g%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=e.indexOf("=");return-1===t&&(t=g),[t,t===g?0:4-t%4]}function l(e,g,n){for(var I,C,r=[],o=g;o<n;o+=3)I=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),r.push(t[(C=I)>>18&63]+t[C>>12&63]+t[C>>6&63]+t[63&C]);return r.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},3550:function(e,g,t){!function(e,g){"use strict";function n(e,g){if(!e)throw new Error(g||"Assertion failed")}function I(e,g){e.super_=g;var t=function(){};t.prototype=g.prototype,e.prototype=new t,e.prototype.constructor=e}function C(e,g,t){if(C.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==g&&"be"!==g||(t=g,g=10),this._init(e||0,g||10,t||"be"))}var r;"object"===typeof e?e.exports=C:g.BN=C,C.BN=C,C.wordSize=26;try{r=t(6601).Buffer}catch(f){}function o(e,g,t){for(var n=0,I=Math.min(e.length,t),C=g;C<I;C++){var r=e.charCodeAt(C)-48;n<<=4,n|=r>=49&&r<=54?r-49+10:r>=17&&r<=22?r-17+10:15&r}return n}function i(e,g,t,n){for(var I=0,C=Math.min(e.length,t),r=g;r<C;r++){var o=e.charCodeAt(r)-48;I*=n,I+=o>=49?o-49+10:o>=17?o-17+10:o}return I}C.isBN=function(e){return e instanceof C||null!==e&&"object"===typeof e&&e.constructor.wordSize===C.wordSize&&Array.isArray(e.words)},C.max=function(e,g){return e.cmp(g)>0?e:g},C.min=function(e,g){return e.cmp(g)<0?e:g},C.prototype._init=function(e,g,t){if("number"===typeof e)return this._initNumber(e,g,t);if("object"===typeof e)return this._initArray(e,g,t);"hex"===g&&(g=16),n(g===(0|g)&&g>=2&&g<=36);var I=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&I++,16===g?this._parseHex(e,I):this._parseBase(e,g,I),"-"===e[0]&&(this.negative=1),this.strip(),"le"===t&&this._initArray(this.toArray(),g,t)},C.prototype._initNumber=function(e,g,t){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===t&&this._initArray(this.toArray(),g,t)},C.prototype._initArray=function(e,g,t){if(n("number"===typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var I=0;I<this.length;I++)this.words[I]=0;var C,r,o=0;if("be"===t)for(I=e.length-1,C=0;I>=0;I-=3)r=e[I]|e[I-1]<<8|e[I-2]<<16,this.words[C]|=r<<o&67108863,this.words[C+1]=r>>>26-o&67108863,(o+=24)>=26&&(o-=26,C++);else if("le"===t)for(I=0,C=0;I<e.length;I+=3)r=e[I]|e[I+1]<<8|e[I+2]<<16,this.words[C]|=r<<o&67108863,this.words[C+1]=r>>>26-o&67108863,(o+=24)>=26&&(o-=26,C++);return this.strip()},C.prototype._parseHex=function(e,g){this.length=Math.ceil((e.length-g)/6),this.words=new Array(this.length);for(var t=0;t<this.length;t++)this.words[t]=0;var n,I,C=0;for(t=e.length-6,n=0;t>=g;t-=6)I=o(e,t,t+6),this.words[n]|=I<<C&67108863,this.words[n+1]|=I>>>26-C&4194303,(C+=24)>=26&&(C-=26,n++);t+6!==g&&(I=o(e,g,t+6),this.words[n]|=I<<C&67108863,this.words[n+1]|=I>>>26-C&4194303),this.strip()},C.prototype._parseBase=function(e,g,t){this.words=[0],this.length=1;for(var n=0,I=1;I<=67108863;I*=g)n++;n--,I=I/g|0;for(var C=e.length-t,r=C%n,o=Math.min(C,C-r)+t,l=0,a=t;a<o;a+=n)l=i(e,a,a+n,g),this.imuln(I),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==r){var s=1;for(l=i(e,a,e.length,g),a=0;a<r;a++)s*=g;this.imuln(s),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}},C.prototype.copy=function(e){e.words=new Array(this.length);for(var g=0;g<this.length;g++)e.words[g]=this.words[g];e.length=this.length,e.negative=this.negative,e.red=this.red},C.prototype.clone=function(){var e=new C(null);return this.copy(e),e},C.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},C.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},C.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},C.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],a=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],s=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function c(e,g,t){t.negative=g.negative^e.negative;var n=e.length+g.length|0;t.length=n,n=n-1|0;var I=0|e.words[0],C=0|g.words[0],r=I*C,o=67108863&r,i=r/67108864|0;t.words[0]=o;for(var l=1;l<n;l++){for(var a=i>>>26,s=67108863&i,c=Math.min(l,g.length-1),A=Math.max(0,l-e.length+1);A<=c;A++){var u=l-A|0;a+=(r=(I=0|e.words[u])*(C=0|g.words[A])+s)/67108864|0,s=67108863&r}t.words[l]=0|s,i=0|a}return 0!==i?t.words[l]=0|i:t.length--,t.strip()}C.prototype.toString=function(e,g){var t;if(g=0|g||1,16===(e=e||10)||"hex"===e){t="";for(var I=0,C=0,r=0;r<this.length;r++){var o=this.words[r],i=(16777215&(o<<I|C)).toString(16);t=0!==(C=o>>>24-I&16777215)||r!==this.length-1?l[6-i.length]+i+t:i+t,(I+=2)>=26&&(I-=26,r--)}for(0!==C&&(t=C.toString(16)+t);t.length%g!==0;)t="0"+t;return 0!==this.negative&&(t="-"+t),t}if(e===(0|e)&&e>=2&&e<=36){var c=a[e],A=s[e];t="";var u=this.clone();for(u.negative=0;!u.isZero();){var d=u.modn(A).toString(e);t=(u=u.idivn(A)).isZero()?d+t:l[c-d.length]+d+t}for(this.isZero()&&(t="0"+t);t.length%g!==0;)t="0"+t;return 0!==this.negative&&(t="-"+t),t}n(!1,"Base should be between 2 and 36")},C.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},C.prototype.toJSON=function(){return this.toString(16)},C.prototype.toBuffer=function(e,g){return n("undefined"!==typeof r),this.toArrayLike(r,e,g)},C.prototype.toArray=function(e,g){return this.toArrayLike(Array,e,g)},C.prototype.toArrayLike=function(e,g,t){var I=this.byteLength(),C=t||Math.max(1,I);n(I<=C,"byte array longer than desired length"),n(C>0,"Requested array length <= 0"),this.strip();var r,o,i="le"===g,l=new e(C),a=this.clone();if(i){for(o=0;!a.isZero();o++)r=a.andln(255),a.iushrn(8),l[o]=r;for(;o<C;o++)l[o]=0}else{for(o=0;o<C-I;o++)l[o]=0;for(o=0;!a.isZero();o++)r=a.andln(255),a.iushrn(8),l[C-o-1]=r}return l},Math.clz32?C.prototype._countBits=function(e){return 32-Math.clz32(e)}:C.prototype._countBits=function(e){var g=e,t=0;return g>=4096&&(t+=13,g>>>=13),g>=64&&(t+=7,g>>>=7),g>=8&&(t+=4,g>>>=4),g>=2&&(t+=2,g>>>=2),t+g},C.prototype._zeroBits=function(e){if(0===e)return 26;var g=e,t=0;return 0===(8191&g)&&(t+=13,g>>>=13),0===(127&g)&&(t+=7,g>>>=7),0===(15&g)&&(t+=4,g>>>=4),0===(3&g)&&(t+=2,g>>>=2),0===(1&g)&&t++,t},C.prototype.bitLength=function(){var e=this.words[this.length-1],g=this._countBits(e);return 26*(this.length-1)+g},C.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,g=0;g<this.length;g++){var t=this._zeroBits(this.words[g]);if(e+=t,26!==t)break}return e},C.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},C.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},C.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},C.prototype.isNeg=function(){return 0!==this.negative},C.prototype.neg=function(){return this.clone().ineg()},C.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},C.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var g=0;g<e.length;g++)this.words[g]=this.words[g]|e.words[g];return this.strip()},C.prototype.ior=function(e){return n(0===(this.negative|e.negative)),this.iuor(e)},C.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},C.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},C.prototype.iuand=function(e){var g;g=this.length>e.length?e:this;for(var t=0;t<g.length;t++)this.words[t]=this.words[t]&e.words[t];return this.length=g.length,this.strip()},C.prototype.iand=function(e){return n(0===(this.negative|e.negative)),this.iuand(e)},C.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},C.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},C.prototype.iuxor=function(e){var g,t;this.length>e.length?(g=this,t=e):(g=e,t=this);for(var n=0;n<t.length;n++)this.words[n]=g.words[n]^t.words[n];if(this!==g)for(;n<g.length;n++)this.words[n]=g.words[n];return this.length=g.length,this.strip()},C.prototype.ixor=function(e){return n(0===(this.negative|e.negative)),this.iuxor(e)},C.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},C.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},C.prototype.inotn=function(e){n("number"===typeof e&&e>=0);var g=0|Math.ceil(e/26),t=e%26;this._expand(g),t>0&&g--;for(var I=0;I<g;I++)this.words[I]=67108863&~this.words[I];return t>0&&(this.words[I]=~this.words[I]&67108863>>26-t),this.strip()},C.prototype.notn=function(e){return this.clone().inotn(e)},C.prototype.setn=function(e,g){n("number"===typeof e&&e>=0);var t=e/26|0,I=e%26;return this._expand(t+1),this.words[t]=g?this.words[t]|1<<I:this.words[t]&~(1<<I),this.strip()},C.prototype.iadd=function(e){var g,t,n;if(0!==this.negative&&0===e.negative)return this.negative=0,g=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,g=this.isub(e),e.negative=1,g._normSign();this.length>e.length?(t=this,n=e):(t=e,n=this);for(var I=0,C=0;C<n.length;C++)g=(0|t.words[C])+(0|n.words[C])+I,this.words[C]=67108863&g,I=g>>>26;for(;0!==I&&C<t.length;C++)g=(0|t.words[C])+I,this.words[C]=67108863&g,I=g>>>26;if(this.length=t.length,0!==I)this.words[this.length]=I,this.length++;else if(t!==this)for(;C<t.length;C++)this.words[C]=t.words[C];return this},C.prototype.add=function(e){var g;return 0!==e.negative&&0===this.negative?(e.negative=0,g=this.sub(e),e.negative^=1,g):0===e.negative&&0!==this.negative?(this.negative=0,g=e.sub(this),this.negative=1,g):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},C.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var g=this.iadd(e);return e.negative=1,g._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var t,n,I=this.cmp(e);if(0===I)return this.negative=0,this.length=1,this.words[0]=0,this;I>0?(t=this,n=e):(t=e,n=this);for(var C=0,r=0;r<n.length;r++)C=(g=(0|t.words[r])-(0|n.words[r])+C)>>26,this.words[r]=67108863&g;for(;0!==C&&r<t.length;r++)C=(g=(0|t.words[r])+C)>>26,this.words[r]=67108863&g;if(0===C&&r<t.length&&t!==this)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=Math.max(this.length,r),t!==this&&(this.negative=1),this.strip()},C.prototype.sub=function(e){return this.clone().isub(e)};var A=function(e,g,t){var n,I,C,r=e.words,o=g.words,i=t.words,l=0,a=0|r[0],s=8191&a,c=a>>>13,A=0|r[1],u=8191&A,d=A>>>13,h=0|r[2],m=8191&h,b=h>>>13,p=0|r[3],Z=8191&p,y=p>>>13,G=0|r[4],B=8191&G,f=G>>>13,v=0|r[5],S=8191&v,V=v>>>13,W=0|r[6],R=8191&W,k=W>>>13,X=0|r[7],J=8191&X,w=X>>>13,Y=0|r[8],H=8191&Y,N=Y>>>13,F=0|r[9],K=8191&F,E=F>>>13,x=0|o[0],M=8191&x,U=x>>>13,T=0|o[1],z=8191&T,L=T>>>13,Q=0|o[2],D=8191&Q,j=Q>>>13,O=0|o[3],P=8191&O,_=O>>>13,q=0|o[4],$=8191&q,ee=q>>>13,ge=0|o[5],te=8191&ge,ne=ge>>>13,Ie=0|o[6],Ce=8191&Ie,re=Ie>>>13,oe=0|o[7],ie=8191&oe,le=oe>>>13,ae=0|o[8],se=8191&ae,ce=ae>>>13,Ae=0|o[9],ue=8191&Ae,de=Ae>>>13;t.negative=e.negative^g.negative,t.length=19;var he=(l+(n=Math.imul(s,M))|0)+((8191&(I=(I=Math.imul(s,U))+Math.imul(c,M)|0))<<13)|0;l=((C=Math.imul(c,U))+(I>>>13)|0)+(he>>>26)|0,he&=67108863,n=Math.imul(u,M),I=(I=Math.imul(u,U))+Math.imul(d,M)|0,C=Math.imul(d,U);var me=(l+(n=n+Math.imul(s,z)|0)|0)+((8191&(I=(I=I+Math.imul(s,L)|0)+Math.imul(c,z)|0))<<13)|0;l=((C=C+Math.imul(c,L)|0)+(I>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(m,M),I=(I=Math.imul(m,U))+Math.imul(b,M)|0,C=Math.imul(b,U),n=n+Math.imul(u,z)|0,I=(I=I+Math.imul(u,L)|0)+Math.imul(d,z)|0,C=C+Math.imul(d,L)|0;var be=(l+(n=n+Math.imul(s,D)|0)|0)+((8191&(I=(I=I+Math.imul(s,j)|0)+Math.imul(c,D)|0))<<13)|0;l=((C=C+Math.imul(c,j)|0)+(I>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(Z,M),I=(I=Math.imul(Z,U))+Math.imul(y,M)|0,C=Math.imul(y,U),n=n+Math.imul(m,z)|0,I=(I=I+Math.imul(m,L)|0)+Math.imul(b,z)|0,C=C+Math.imul(b,L)|0,n=n+Math.imul(u,D)|0,I=(I=I+Math.imul(u,j)|0)+Math.imul(d,D)|0,C=C+Math.imul(d,j)|0;var pe=(l+(n=n+Math.imul(s,P)|0)|0)+((8191&(I=(I=I+Math.imul(s,_)|0)+Math.imul(c,P)|0))<<13)|0;l=((C=C+Math.imul(c,_)|0)+(I>>>13)|0)+(pe>>>26)|0,pe&=67108863,n=Math.imul(B,M),I=(I=Math.imul(B,U))+Math.imul(f,M)|0,C=Math.imul(f,U),n=n+Math.imul(Z,z)|0,I=(I=I+Math.imul(Z,L)|0)+Math.imul(y,z)|0,C=C+Math.imul(y,L)|0,n=n+Math.imul(m,D)|0,I=(I=I+Math.imul(m,j)|0)+Math.imul(b,D)|0,C=C+Math.imul(b,j)|0,n=n+Math.imul(u,P)|0,I=(I=I+Math.imul(u,_)|0)+Math.imul(d,P)|0,C=C+Math.imul(d,_)|0;var Ze=(l+(n=n+Math.imul(s,$)|0)|0)+((8191&(I=(I=I+Math.imul(s,ee)|0)+Math.imul(c,$)|0))<<13)|0;l=((C=C+Math.imul(c,ee)|0)+(I>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,n=Math.imul(S,M),I=(I=Math.imul(S,U))+Math.imul(V,M)|0,C=Math.imul(V,U),n=n+Math.imul(B,z)|0,I=(I=I+Math.imul(B,L)|0)+Math.imul(f,z)|0,C=C+Math.imul(f,L)|0,n=n+Math.imul(Z,D)|0,I=(I=I+Math.imul(Z,j)|0)+Math.imul(y,D)|0,C=C+Math.imul(y,j)|0,n=n+Math.imul(m,P)|0,I=(I=I+Math.imul(m,_)|0)+Math.imul(b,P)|0,C=C+Math.imul(b,_)|0,n=n+Math.imul(u,$)|0,I=(I=I+Math.imul(u,ee)|0)+Math.imul(d,$)|0,C=C+Math.imul(d,ee)|0;var ye=(l+(n=n+Math.imul(s,te)|0)|0)+((8191&(I=(I=I+Math.imul(s,ne)|0)+Math.imul(c,te)|0))<<13)|0;l=((C=C+Math.imul(c,ne)|0)+(I>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(R,M),I=(I=Math.imul(R,U))+Math.imul(k,M)|0,C=Math.imul(k,U),n=n+Math.imul(S,z)|0,I=(I=I+Math.imul(S,L)|0)+Math.imul(V,z)|0,C=C+Math.imul(V,L)|0,n=n+Math.imul(B,D)|0,I=(I=I+Math.imul(B,j)|0)+Math.imul(f,D)|0,C=C+Math.imul(f,j)|0,n=n+Math.imul(Z,P)|0,I=(I=I+Math.imul(Z,_)|0)+Math.imul(y,P)|0,C=C+Math.imul(y,_)|0,n=n+Math.imul(m,$)|0,I=(I=I+Math.imul(m,ee)|0)+Math.imul(b,$)|0,C=C+Math.imul(b,ee)|0,n=n+Math.imul(u,te)|0,I=(I=I+Math.imul(u,ne)|0)+Math.imul(d,te)|0,C=C+Math.imul(d,ne)|0;var Ge=(l+(n=n+Math.imul(s,Ce)|0)|0)+((8191&(I=(I=I+Math.imul(s,re)|0)+Math.imul(c,Ce)|0))<<13)|0;l=((C=C+Math.imul(c,re)|0)+(I>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,n=Math.imul(J,M),I=(I=Math.imul(J,U))+Math.imul(w,M)|0,C=Math.imul(w,U),n=n+Math.imul(R,z)|0,I=(I=I+Math.imul(R,L)|0)+Math.imul(k,z)|0,C=C+Math.imul(k,L)|0,n=n+Math.imul(S,D)|0,I=(I=I+Math.imul(S,j)|0)+Math.imul(V,D)|0,C=C+Math.imul(V,j)|0,n=n+Math.imul(B,P)|0,I=(I=I+Math.imul(B,_)|0)+Math.imul(f,P)|0,C=C+Math.imul(f,_)|0,n=n+Math.imul(Z,$)|0,I=(I=I+Math.imul(Z,ee)|0)+Math.imul(y,$)|0,C=C+Math.imul(y,ee)|0,n=n+Math.imul(m,te)|0,I=(I=I+Math.imul(m,ne)|0)+Math.imul(b,te)|0,C=C+Math.imul(b,ne)|0,n=n+Math.imul(u,Ce)|0,I=(I=I+Math.imul(u,re)|0)+Math.imul(d,Ce)|0,C=C+Math.imul(d,re)|0;var Be=(l+(n=n+Math.imul(s,ie)|0)|0)+((8191&(I=(I=I+Math.imul(s,le)|0)+Math.imul(c,ie)|0))<<13)|0;l=((C=C+Math.imul(c,le)|0)+(I>>>13)|0)+(Be>>>26)|0,Be&=67108863,n=Math.imul(H,M),I=(I=Math.imul(H,U))+Math.imul(N,M)|0,C=Math.imul(N,U),n=n+Math.imul(J,z)|0,I=(I=I+Math.imul(J,L)|0)+Math.imul(w,z)|0,C=C+Math.imul(w,L)|0,n=n+Math.imul(R,D)|0,I=(I=I+Math.imul(R,j)|0)+Math.imul(k,D)|0,C=C+Math.imul(k,j)|0,n=n+Math.imul(S,P)|0,I=(I=I+Math.imul(S,_)|0)+Math.imul(V,P)|0,C=C+Math.imul(V,_)|0,n=n+Math.imul(B,$)|0,I=(I=I+Math.imul(B,ee)|0)+Math.imul(f,$)|0,C=C+Math.imul(f,ee)|0,n=n+Math.imul(Z,te)|0,I=(I=I+Math.imul(Z,ne)|0)+Math.imul(y,te)|0,C=C+Math.imul(y,ne)|0,n=n+Math.imul(m,Ce)|0,I=(I=I+Math.imul(m,re)|0)+Math.imul(b,Ce)|0,C=C+Math.imul(b,re)|0,n=n+Math.imul(u,ie)|0,I=(I=I+Math.imul(u,le)|0)+Math.imul(d,ie)|0,C=C+Math.imul(d,le)|0;var fe=(l+(n=n+Math.imul(s,se)|0)|0)+((8191&(I=(I=I+Math.imul(s,ce)|0)+Math.imul(c,se)|0))<<13)|0;l=((C=C+Math.imul(c,ce)|0)+(I>>>13)|0)+(fe>>>26)|0,fe&=67108863,n=Math.imul(K,M),I=(I=Math.imul(K,U))+Math.imul(E,M)|0,C=Math.imul(E,U),n=n+Math.imul(H,z)|0,I=(I=I+Math.imul(H,L)|0)+Math.imul(N,z)|0,C=C+Math.imul(N,L)|0,n=n+Math.imul(J,D)|0,I=(I=I+Math.imul(J,j)|0)+Math.imul(w,D)|0,C=C+Math.imul(w,j)|0,n=n+Math.imul(R,P)|0,I=(I=I+Math.imul(R,_)|0)+Math.imul(k,P)|0,C=C+Math.imul(k,_)|0,n=n+Math.imul(S,$)|0,I=(I=I+Math.imul(S,ee)|0)+Math.imul(V,$)|0,C=C+Math.imul(V,ee)|0,n=n+Math.imul(B,te)|0,I=(I=I+Math.imul(B,ne)|0)+Math.imul(f,te)|0,C=C+Math.imul(f,ne)|0,n=n+Math.imul(Z,Ce)|0,I=(I=I+Math.imul(Z,re)|0)+Math.imul(y,Ce)|0,C=C+Math.imul(y,re)|0,n=n+Math.imul(m,ie)|0,I=(I=I+Math.imul(m,le)|0)+Math.imul(b,ie)|0,C=C+Math.imul(b,le)|0,n=n+Math.imul(u,se)|0,I=(I=I+Math.imul(u,ce)|0)+Math.imul(d,se)|0,C=C+Math.imul(d,ce)|0;var ve=(l+(n=n+Math.imul(s,ue)|0)|0)+((8191&(I=(I=I+Math.imul(s,de)|0)+Math.imul(c,ue)|0))<<13)|0;l=((C=C+Math.imul(c,de)|0)+(I>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(K,z),I=(I=Math.imul(K,L))+Math.imul(E,z)|0,C=Math.imul(E,L),n=n+Math.imul(H,D)|0,I=(I=I+Math.imul(H,j)|0)+Math.imul(N,D)|0,C=C+Math.imul(N,j)|0,n=n+Math.imul(J,P)|0,I=(I=I+Math.imul(J,_)|0)+Math.imul(w,P)|0,C=C+Math.imul(w,_)|0,n=n+Math.imul(R,$)|0,I=(I=I+Math.imul(R,ee)|0)+Math.imul(k,$)|0,C=C+Math.imul(k,ee)|0,n=n+Math.imul(S,te)|0,I=(I=I+Math.imul(S,ne)|0)+Math.imul(V,te)|0,C=C+Math.imul(V,ne)|0,n=n+Math.imul(B,Ce)|0,I=(I=I+Math.imul(B,re)|0)+Math.imul(f,Ce)|0,C=C+Math.imul(f,re)|0,n=n+Math.imul(Z,ie)|0,I=(I=I+Math.imul(Z,le)|0)+Math.imul(y,ie)|0,C=C+Math.imul(y,le)|0,n=n+Math.imul(m,se)|0,I=(I=I+Math.imul(m,ce)|0)+Math.imul(b,se)|0,C=C+Math.imul(b,ce)|0;var Se=(l+(n=n+Math.imul(u,ue)|0)|0)+((8191&(I=(I=I+Math.imul(u,de)|0)+Math.imul(d,ue)|0))<<13)|0;l=((C=C+Math.imul(d,de)|0)+(I>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(K,D),I=(I=Math.imul(K,j))+Math.imul(E,D)|0,C=Math.imul(E,j),n=n+Math.imul(H,P)|0,I=(I=I+Math.imul(H,_)|0)+Math.imul(N,P)|0,C=C+Math.imul(N,_)|0,n=n+Math.imul(J,$)|0,I=(I=I+Math.imul(J,ee)|0)+Math.imul(w,$)|0,C=C+Math.imul(w,ee)|0,n=n+Math.imul(R,te)|0,I=(I=I+Math.imul(R,ne)|0)+Math.imul(k,te)|0,C=C+Math.imul(k,ne)|0,n=n+Math.imul(S,Ce)|0,I=(I=I+Math.imul(S,re)|0)+Math.imul(V,Ce)|0,C=C+Math.imul(V,re)|0,n=n+Math.imul(B,ie)|0,I=(I=I+Math.imul(B,le)|0)+Math.imul(f,ie)|0,C=C+Math.imul(f,le)|0,n=n+Math.imul(Z,se)|0,I=(I=I+Math.imul(Z,ce)|0)+Math.imul(y,se)|0,C=C+Math.imul(y,ce)|0;var Ve=(l+(n=n+Math.imul(m,ue)|0)|0)+((8191&(I=(I=I+Math.imul(m,de)|0)+Math.imul(b,ue)|0))<<13)|0;l=((C=C+Math.imul(b,de)|0)+(I>>>13)|0)+(Ve>>>26)|0,Ve&=67108863,n=Math.imul(K,P),I=(I=Math.imul(K,_))+Math.imul(E,P)|0,C=Math.imul(E,_),n=n+Math.imul(H,$)|0,I=(I=I+Math.imul(H,ee)|0)+Math.imul(N,$)|0,C=C+Math.imul(N,ee)|0,n=n+Math.imul(J,te)|0,I=(I=I+Math.imul(J,ne)|0)+Math.imul(w,te)|0,C=C+Math.imul(w,ne)|0,n=n+Math.imul(R,Ce)|0,I=(I=I+Math.imul(R,re)|0)+Math.imul(k,Ce)|0,C=C+Math.imul(k,re)|0,n=n+Math.imul(S,ie)|0,I=(I=I+Math.imul(S,le)|0)+Math.imul(V,ie)|0,C=C+Math.imul(V,le)|0,n=n+Math.imul(B,se)|0,I=(I=I+Math.imul(B,ce)|0)+Math.imul(f,se)|0,C=C+Math.imul(f,ce)|0;var We=(l+(n=n+Math.imul(Z,ue)|0)|0)+((8191&(I=(I=I+Math.imul(Z,de)|0)+Math.imul(y,ue)|0))<<13)|0;l=((C=C+Math.imul(y,de)|0)+(I>>>13)|0)+(We>>>26)|0,We&=67108863,n=Math.imul(K,$),I=(I=Math.imul(K,ee))+Math.imul(E,$)|0,C=Math.imul(E,ee),n=n+Math.imul(H,te)|0,I=(I=I+Math.imul(H,ne)|0)+Math.imul(N,te)|0,C=C+Math.imul(N,ne)|0,n=n+Math.imul(J,Ce)|0,I=(I=I+Math.imul(J,re)|0)+Math.imul(w,Ce)|0,C=C+Math.imul(w,re)|0,n=n+Math.imul(R,ie)|0,I=(I=I+Math.imul(R,le)|0)+Math.imul(k,ie)|0,C=C+Math.imul(k,le)|0,n=n+Math.imul(S,se)|0,I=(I=I+Math.imul(S,ce)|0)+Math.imul(V,se)|0,C=C+Math.imul(V,ce)|0;var Re=(l+(n=n+Math.imul(B,ue)|0)|0)+((8191&(I=(I=I+Math.imul(B,de)|0)+Math.imul(f,ue)|0))<<13)|0;l=((C=C+Math.imul(f,de)|0)+(I>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(K,te),I=(I=Math.imul(K,ne))+Math.imul(E,te)|0,C=Math.imul(E,ne),n=n+Math.imul(H,Ce)|0,I=(I=I+Math.imul(H,re)|0)+Math.imul(N,Ce)|0,C=C+Math.imul(N,re)|0,n=n+Math.imul(J,ie)|0,I=(I=I+Math.imul(J,le)|0)+Math.imul(w,ie)|0,C=C+Math.imul(w,le)|0,n=n+Math.imul(R,se)|0,I=(I=I+Math.imul(R,ce)|0)+Math.imul(k,se)|0,C=C+Math.imul(k,ce)|0;var ke=(l+(n=n+Math.imul(S,ue)|0)|0)+((8191&(I=(I=I+Math.imul(S,de)|0)+Math.imul(V,ue)|0))<<13)|0;l=((C=C+Math.imul(V,de)|0)+(I>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(K,Ce),I=(I=Math.imul(K,re))+Math.imul(E,Ce)|0,C=Math.imul(E,re),n=n+Math.imul(H,ie)|0,I=(I=I+Math.imul(H,le)|0)+Math.imul(N,ie)|0,C=C+Math.imul(N,le)|0,n=n+Math.imul(J,se)|0,I=(I=I+Math.imul(J,ce)|0)+Math.imul(w,se)|0,C=C+Math.imul(w,ce)|0;var Xe=(l+(n=n+Math.imul(R,ue)|0)|0)+((8191&(I=(I=I+Math.imul(R,de)|0)+Math.imul(k,ue)|0))<<13)|0;l=((C=C+Math.imul(k,de)|0)+(I>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,n=Math.imul(K,ie),I=(I=Math.imul(K,le))+Math.imul(E,ie)|0,C=Math.imul(E,le),n=n+Math.imul(H,se)|0,I=(I=I+Math.imul(H,ce)|0)+Math.imul(N,se)|0,C=C+Math.imul(N,ce)|0;var Je=(l+(n=n+Math.imul(J,ue)|0)|0)+((8191&(I=(I=I+Math.imul(J,de)|0)+Math.imul(w,ue)|0))<<13)|0;l=((C=C+Math.imul(w,de)|0)+(I>>>13)|0)+(Je>>>26)|0,Je&=67108863,n=Math.imul(K,se),I=(I=Math.imul(K,ce))+Math.imul(E,se)|0,C=Math.imul(E,ce);var we=(l+(n=n+Math.imul(H,ue)|0)|0)+((8191&(I=(I=I+Math.imul(H,de)|0)+Math.imul(N,ue)|0))<<13)|0;l=((C=C+Math.imul(N,de)|0)+(I>>>13)|0)+(we>>>26)|0,we&=67108863;var Ye=(l+(n=Math.imul(K,ue))|0)+((8191&(I=(I=Math.imul(K,de))+Math.imul(E,ue)|0))<<13)|0;return l=((C=Math.imul(E,de))+(I>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,i[0]=he,i[1]=me,i[2]=be,i[3]=pe,i[4]=Ze,i[5]=ye,i[6]=Ge,i[7]=Be,i[8]=fe,i[9]=ve,i[10]=Se,i[11]=Ve,i[12]=We,i[13]=Re,i[14]=ke,i[15]=Xe,i[16]=Je,i[17]=we,i[18]=Ye,0!==l&&(i[19]=l,t.length++),t};function u(e,g,t){return(new d).mulp(e,g,t)}function d(e,g){this.x=e,this.y=g}Math.imul||(A=c),C.prototype.mulTo=function(e,g){var t,n=this.length+e.length;return t=10===this.length&&10===e.length?A(this,e,g):n<63?c(this,e,g):n<1024?function(e,g,t){t.negative=g.negative^e.negative,t.length=e.length+g.length;for(var n=0,I=0,C=0;C<t.length-1;C++){var r=I;I=0;for(var o=67108863&n,i=Math.min(C,g.length-1),l=Math.max(0,C-e.length+1);l<=i;l++){var a=C-l,s=(0|e.words[a])*(0|g.words[l]),c=67108863&s;o=67108863&(c=c+o|0),I+=(r=(r=r+(s/67108864|0)|0)+(c>>>26)|0)>>>26,r&=67108863}t.words[C]=o,n=r,r=I}return 0!==n?t.words[C]=n:t.length--,t.strip()}(this,e,g):u(this,e,g),t},d.prototype.makeRBT=function(e){for(var g=new Array(e),t=C.prototype._countBits(e)-1,n=0;n<e;n++)g[n]=this.revBin(n,t,e);return g},d.prototype.revBin=function(e,g,t){if(0===e||e===t-1)return e;for(var n=0,I=0;I<g;I++)n|=(1&e)<<g-I-1,e>>=1;return n},d.prototype.permute=function(e,g,t,n,I,C){for(var r=0;r<C;r++)n[r]=g[e[r]],I[r]=t[e[r]]},d.prototype.transform=function(e,g,t,n,I,C){this.permute(C,e,g,t,n,I);for(var r=1;r<I;r<<=1)for(var o=r<<1,i=Math.cos(2*Math.PI/o),l=Math.sin(2*Math.PI/o),a=0;a<I;a+=o)for(var s=i,c=l,A=0;A<r;A++){var u=t[a+A],d=n[a+A],h=t[a+A+r],m=n[a+A+r],b=s*h-c*m;m=s*m+c*h,h=b,t[a+A]=u+h,n[a+A]=d+m,t[a+A+r]=u-h,n[a+A+r]=d-m,A!==o&&(b=i*s-l*c,c=i*c+l*s,s=b)}},d.prototype.guessLen13b=function(e,g){var t=1|Math.max(g,e),n=1&t,I=0;for(t=t/2|0;t;t>>>=1)I++;return 1<<I+1+n},d.prototype.conjugate=function(e,g,t){if(!(t<=1))for(var n=0;n<t/2;n++){var I=e[n];e[n]=e[t-n-1],e[t-n-1]=I,I=g[n],g[n]=-g[t-n-1],g[t-n-1]=-I}},d.prototype.normalize13b=function(e,g){for(var t=0,n=0;n<g/2;n++){var I=8192*Math.round(e[2*n+1]/g)+Math.round(e[2*n]/g)+t;e[n]=67108863&I,t=I<67108864?0:I/67108864|0}return e},d.prototype.convert13b=function(e,g,t,I){for(var C=0,r=0;r<g;r++)C+=0|e[r],t[2*r]=8191&C,C>>>=13,t[2*r+1]=8191&C,C>>>=13;for(r=2*g;r<I;++r)t[r]=0;n(0===C),n(0===(-8192&C))},d.prototype.stub=function(e){for(var g=new Array(e),t=0;t<e;t++)g[t]=0;return g},d.prototype.mulp=function(e,g,t){var n=2*this.guessLen13b(e.length,g.length),I=this.makeRBT(n),C=this.stub(n),r=new Array(n),o=new Array(n),i=new Array(n),l=new Array(n),a=new Array(n),s=new Array(n),c=t.words;c.length=n,this.convert13b(e.words,e.length,r,n),this.convert13b(g.words,g.length,l,n),this.transform(r,C,o,i,n,I),this.transform(l,C,a,s,n,I);for(var A=0;A<n;A++){var u=o[A]*a[A]-i[A]*s[A];i[A]=o[A]*s[A]+i[A]*a[A],o[A]=u}return this.conjugate(o,i,n),this.transform(o,i,c,C,n,I),this.conjugate(c,C,n),this.normalize13b(c,n),t.negative=e.negative^g.negative,t.length=e.length+g.length,t.strip()},C.prototype.mul=function(e){var g=new C(null);return g.words=new Array(this.length+e.length),this.mulTo(e,g)},C.prototype.mulf=function(e){var g=new C(null);return g.words=new Array(this.length+e.length),u(this,e,g)},C.prototype.imul=function(e){return this.clone().mulTo(e,this)},C.prototype.imuln=function(e){n("number"===typeof e),n(e<67108864);for(var g=0,t=0;t<this.length;t++){var I=(0|this.words[t])*e,C=(67108863&I)+(67108863&g);g>>=26,g+=I/67108864|0,g+=C>>>26,this.words[t]=67108863&C}return 0!==g&&(this.words[t]=g,this.length++),this},C.prototype.muln=function(e){return this.clone().imuln(e)},C.prototype.sqr=function(){return this.mul(this)},C.prototype.isqr=function(){return this.imul(this.clone())},C.prototype.pow=function(e){var g=function(e){for(var g=new Array(e.bitLength()),t=0;t<g.length;t++){var n=t/26|0,I=t%26;g[t]=(e.words[n]&1<<I)>>>I}return g}(e);if(0===g.length)return new C(1);for(var t=this,n=0;n<g.length&&0===g[n];n++,t=t.sqr());if(++n<g.length)for(var I=t.sqr();n<g.length;n++,I=I.sqr())0!==g[n]&&(t=t.mul(I));return t},C.prototype.iushln=function(e){n("number"===typeof e&&e>=0);var g,t=e%26,I=(e-t)/26,C=67108863>>>26-t<<26-t;if(0!==t){var r=0;for(g=0;g<this.length;g++){var o=this.words[g]&C,i=(0|this.words[g])-o<<t;this.words[g]=i|r,r=o>>>26-t}r&&(this.words[g]=r,this.length++)}if(0!==I){for(g=this.length-1;g>=0;g--)this.words[g+I]=this.words[g];for(g=0;g<I;g++)this.words[g]=0;this.length+=I}return this.strip()},C.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},C.prototype.iushrn=function(e,g,t){var I;n("number"===typeof e&&e>=0),I=g?(g-g%26)/26:0;var C=e%26,r=Math.min((e-C)/26,this.length),o=67108863^67108863>>>C<<C,i=t;if(I-=r,I=Math.max(0,I),i){for(var l=0;l<r;l++)i.words[l]=this.words[l];i.length=r}if(0===r);else if(this.length>r)for(this.length-=r,l=0;l<this.length;l++)this.words[l]=this.words[l+r];else this.words[0]=0,this.length=1;var a=0;for(l=this.length-1;l>=0&&(0!==a||l>=I);l--){var s=0|this.words[l];this.words[l]=a<<26-C|s>>>C,a=s&o}return i&&0!==a&&(i.words[i.length++]=a),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},C.prototype.ishrn=function(e,g,t){return n(0===this.negative),this.iushrn(e,g,t)},C.prototype.shln=function(e){return this.clone().ishln(e)},C.prototype.ushln=function(e){return this.clone().iushln(e)},C.prototype.shrn=function(e){return this.clone().ishrn(e)},C.prototype.ushrn=function(e){return this.clone().iushrn(e)},C.prototype.testn=function(e){n("number"===typeof e&&e>=0);var g=e%26,t=(e-g)/26,I=1<<g;return!(this.length<=t)&&!!(this.words[t]&I)},C.prototype.imaskn=function(e){n("number"===typeof e&&e>=0);var g=e%26,t=(e-g)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=t)return this;if(0!==g&&t++,this.length=Math.min(t,this.length),0!==g){var I=67108863^67108863>>>g<<g;this.words[this.length-1]&=I}return this.strip()},C.prototype.maskn=function(e){return this.clone().imaskn(e)},C.prototype.iaddn=function(e){return n("number"===typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},C.prototype._iaddn=function(e){this.words[0]+=e;for(var g=0;g<this.length&&this.words[g]>=67108864;g++)this.words[g]-=67108864,g===this.length-1?this.words[g+1]=1:this.words[g+1]++;return this.length=Math.max(this.length,g+1),this},C.prototype.isubn=function(e){if(n("number"===typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var g=0;g<this.length&&this.words[g]<0;g++)this.words[g]+=67108864,this.words[g+1]-=1;return this.strip()},C.prototype.addn=function(e){return this.clone().iaddn(e)},C.prototype.subn=function(e){return this.clone().isubn(e)},C.prototype.iabs=function(){return this.negative=0,this},C.prototype.abs=function(){return this.clone().iabs()},C.prototype._ishlnsubmul=function(e,g,t){var I,C,r=e.length+t;this._expand(r);var o=0;for(I=0;I<e.length;I++){C=(0|this.words[I+t])+o;var i=(0|e.words[I])*g;o=((C-=67108863&i)>>26)-(i/67108864|0),this.words[I+t]=67108863&C}for(;I<this.length-t;I++)o=(C=(0|this.words[I+t])+o)>>26,this.words[I+t]=67108863&C;if(0===o)return this.strip();for(n(-1===o),o=0,I=0;I<this.length;I++)o=(C=-(0|this.words[I])+o)>>26,this.words[I]=67108863&C;return this.negative=1,this.strip()},C.prototype._wordDiv=function(e,g){var t=(this.length,e.length),n=this.clone(),I=e,r=0|I.words[I.length-1];0!==(t=26-this._countBits(r))&&(I=I.ushln(t),n.iushln(t),r=0|I.words[I.length-1]);var o,i=n.length-I.length;if("mod"!==g){(o=new C(null)).length=i+1,o.words=new Array(o.length);for(var l=0;l<o.length;l++)o.words[l]=0}var a=n.clone()._ishlnsubmul(I,1,i);0===a.negative&&(n=a,o&&(o.words[i]=1));for(var s=i-1;s>=0;s--){var c=67108864*(0|n.words[I.length+s])+(0|n.words[I.length+s-1]);for(c=Math.min(c/r|0,67108863),n._ishlnsubmul(I,c,s);0!==n.negative;)c--,n.negative=0,n._ishlnsubmul(I,1,s),n.isZero()||(n.negative^=1);o&&(o.words[s]=c)}return o&&o.strip(),n.strip(),"div"!==g&&0!==t&&n.iushrn(t),{div:o||null,mod:n}},C.prototype.divmod=function(e,g,t){return n(!e.isZero()),this.isZero()?{div:new C(0),mod:new C(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,g),"mod"!==g&&(I=o.div.neg()),"div"!==g&&(r=o.mod.neg(),t&&0!==r.negative&&r.iadd(e)),{div:I,mod:r}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),g),"mod"!==g&&(I=o.div.neg()),{div:I,mod:o.mod}):0!==(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),g),"div"!==g&&(r=o.mod.neg(),t&&0!==r.negative&&r.isub(e)),{div:o.div,mod:r}):e.length>this.length||this.cmp(e)<0?{div:new C(0),mod:this}:1===e.length?"div"===g?{div:this.divn(e.words[0]),mod:null}:"mod"===g?{div:null,mod:new C(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new C(this.modn(e.words[0]))}:this._wordDiv(e,g);var I,r,o},C.prototype.div=function(e){return this.divmod(e,"div",!1).div},C.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},C.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},C.prototype.divRound=function(e){var g=this.divmod(e);if(g.mod.isZero())return g.div;var t=0!==g.div.negative?g.mod.isub(e):g.mod,n=e.ushrn(1),I=e.andln(1),C=t.cmp(n);return C<0||1===I&&0===C?g.div:0!==g.div.negative?g.div.isubn(1):g.div.iaddn(1)},C.prototype.modn=function(e){n(e<=67108863);for(var g=(1<<26)%e,t=0,I=this.length-1;I>=0;I--)t=(g*t+(0|this.words[I]))%e;return t},C.prototype.idivn=function(e){n(e<=67108863);for(var g=0,t=this.length-1;t>=0;t--){var I=(0|this.words[t])+67108864*g;this.words[t]=I/e|0,g=I%e}return this.strip()},C.prototype.divn=function(e){return this.clone().idivn(e)},C.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var g=this,t=e.clone();g=0!==g.negative?g.umod(e):g.clone();for(var I=new C(1),r=new C(0),o=new C(0),i=new C(1),l=0;g.isEven()&&t.isEven();)g.iushrn(1),t.iushrn(1),++l;for(var a=t.clone(),s=g.clone();!g.isZero();){for(var c=0,A=1;0===(g.words[0]&A)&&c<26;++c,A<<=1);if(c>0)for(g.iushrn(c);c-- >0;)(I.isOdd()||r.isOdd())&&(I.iadd(a),r.isub(s)),I.iushrn(1),r.iushrn(1);for(var u=0,d=1;0===(t.words[0]&d)&&u<26;++u,d<<=1);if(u>0)for(t.iushrn(u);u-- >0;)(o.isOdd()||i.isOdd())&&(o.iadd(a),i.isub(s)),o.iushrn(1),i.iushrn(1);g.cmp(t)>=0?(g.isub(t),I.isub(o),r.isub(i)):(t.isub(g),o.isub(I),i.isub(r))}return{a:o,b:i,gcd:t.iushln(l)}},C.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var g=this,t=e.clone();g=0!==g.negative?g.umod(e):g.clone();for(var I,r=new C(1),o=new C(0),i=t.clone();g.cmpn(1)>0&&t.cmpn(1)>0;){for(var l=0,a=1;0===(g.words[0]&a)&&l<26;++l,a<<=1);if(l>0)for(g.iushrn(l);l-- >0;)r.isOdd()&&r.iadd(i),r.iushrn(1);for(var s=0,c=1;0===(t.words[0]&c)&&s<26;++s,c<<=1);if(s>0)for(t.iushrn(s);s-- >0;)o.isOdd()&&o.iadd(i),o.iushrn(1);g.cmp(t)>=0?(g.isub(t),r.isub(o)):(t.isub(g),o.isub(r))}return(I=0===g.cmpn(1)?r:o).cmpn(0)<0&&I.iadd(e),I},C.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var g=this.clone(),t=e.clone();g.negative=0,t.negative=0;for(var n=0;g.isEven()&&t.isEven();n++)g.iushrn(1),t.iushrn(1);for(;;){for(;g.isEven();)g.iushrn(1);for(;t.isEven();)t.iushrn(1);var I=g.cmp(t);if(I<0){var C=g;g=t,t=C}else if(0===I||0===t.cmpn(1))break;g.isub(t)}return t.iushln(n)},C.prototype.invm=function(e){return this.egcd(e).a.umod(e)},C.prototype.isEven=function(){return 0===(1&this.words[0])},C.prototype.isOdd=function(){return 1===(1&this.words[0])},C.prototype.andln=function(e){return this.words[0]&e},C.prototype.bincn=function(e){n("number"===typeof e);var g=e%26,t=(e-g)/26,I=1<<g;if(this.length<=t)return this._expand(t+1),this.words[t]|=I,this;for(var C=I,r=t;0!==C&&r<this.length;r++){var o=0|this.words[r];C=(o+=C)>>>26,o&=67108863,this.words[r]=o}return 0!==C&&(this.words[r]=C,this.length++),this},C.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},C.prototype.cmpn=function(e){var g,t=e<0;if(0!==this.negative&&!t)return-1;if(0===this.negative&&t)return 1;if(this.strip(),this.length>1)g=1;else{t&&(e=-e),n(e<=67108863,"Number is too big");var I=0|this.words[0];g=I===e?0:I<e?-1:1}return 0!==this.negative?0|-g:g},C.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var g=this.ucmp(e);return 0!==this.negative?0|-g:g},C.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var g=0,t=this.length-1;t>=0;t--){var n=0|this.words[t],I=0|e.words[t];if(n!==I){n<I?g=-1:n>I&&(g=1);break}}return g},C.prototype.gtn=function(e){return 1===this.cmpn(e)},C.prototype.gt=function(e){return 1===this.cmp(e)},C.prototype.gten=function(e){return this.cmpn(e)>=0},C.prototype.gte=function(e){return this.cmp(e)>=0},C.prototype.ltn=function(e){return-1===this.cmpn(e)},C.prototype.lt=function(e){return-1===this.cmp(e)},C.prototype.lten=function(e){return this.cmpn(e)<=0},C.prototype.lte=function(e){return this.cmp(e)<=0},C.prototype.eqn=function(e){return 0===this.cmpn(e)},C.prototype.eq=function(e){return 0===this.cmp(e)},C.red=function(e){return new G(e)},C.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},C.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},C.prototype._forceRed=function(e){return this.red=e,this},C.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},C.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},C.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},C.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},C.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},C.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},C.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},C.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},C.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},C.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},C.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},C.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},C.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},C.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var h={k256:null,p224:null,p192:null,p25519:null};function m(e,g){this.name=e,this.p=new C(g,16),this.n=this.p.bitLength(),this.k=new C(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function p(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function Z(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function y(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function G(e){if("string"===typeof e){var g=C._prime(e);this.m=g.p,this.prime=g}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function B(e){G.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new C(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var e=new C(null);return e.words=new Array(Math.ceil(this.n/13)),e},m.prototype.ireduce=function(e){var g,t=e;do{this.split(t,this.tmp),g=(t=(t=this.imulK(t)).iadd(this.tmp)).bitLength()}while(g>this.n);var n=g<this.n?-1:t.ucmp(this.p);return 0===n?(t.words[0]=0,t.length=1):n>0?t.isub(this.p):t.strip(),t},m.prototype.split=function(e,g){e.iushrn(this.n,0,g)},m.prototype.imulK=function(e){return e.imul(this.k)},I(b,m),b.prototype.split=function(e,g){for(var t=4194303,n=Math.min(e.length,9),I=0;I<n;I++)g.words[I]=e.words[I];if(g.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var C=e.words[9];for(g.words[g.length++]=C&t,I=10;I<e.length;I++){var r=0|e.words[I];e.words[I-10]=(r&t)<<4|C>>>22,C=r}C>>>=22,e.words[I-10]=C,0===C&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var g=0,t=0;t<e.length;t++){var n=0|e.words[t];g+=977*n,e.words[t]=67108863&g,g=64*n+(g/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},I(p,m),I(Z,m),I(y,m),y.prototype.imulK=function(e){for(var g=0,t=0;t<e.length;t++){var n=19*(0|e.words[t])+g,I=67108863&n;n>>>=26,e.words[t]=I,g=n}return 0!==g&&(e.words[e.length++]=g),e},C._prime=function(e){if(h[e])return h[e];var g;if("k256"===e)g=new b;else if("p224"===e)g=new p;else if("p192"===e)g=new Z;else{if("p25519"!==e)throw new Error("Unknown prime "+e);g=new y}return h[e]=g,g},G.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},G.prototype._verify2=function(e,g){n(0===(e.negative|g.negative),"red works only with positives"),n(e.red&&e.red===g.red,"red works only with red numbers")},G.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},G.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},G.prototype.add=function(e,g){this._verify2(e,g);var t=e.add(g);return t.cmp(this.m)>=0&&t.isub(this.m),t._forceRed(this)},G.prototype.iadd=function(e,g){this._verify2(e,g);var t=e.iadd(g);return t.cmp(this.m)>=0&&t.isub(this.m),t},G.prototype.sub=function(e,g){this._verify2(e,g);var t=e.sub(g);return t.cmpn(0)<0&&t.iadd(this.m),t._forceRed(this)},G.prototype.isub=function(e,g){this._verify2(e,g);var t=e.isub(g);return t.cmpn(0)<0&&t.iadd(this.m),t},G.prototype.shl=function(e,g){return this._verify1(e),this.imod(e.ushln(g))},G.prototype.imul=function(e,g){return this._verify2(e,g),this.imod(e.imul(g))},G.prototype.mul=function(e,g){return this._verify2(e,g),this.imod(e.mul(g))},G.prototype.isqr=function(e){return this.imul(e,e.clone())},G.prototype.sqr=function(e){return this.mul(e,e)},G.prototype.sqrt=function(e){if(e.isZero())return e.clone();var g=this.m.andln(3);if(n(g%2===1),3===g){var t=this.m.add(new C(1)).iushrn(2);return this.pow(e,t)}for(var I=this.m.subn(1),r=0;!I.isZero()&&0===I.andln(1);)r++,I.iushrn(1);n(!I.isZero());var o=new C(1).toRed(this),i=o.redNeg(),l=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new C(2*a*a).toRed(this);0!==this.pow(a,l).cmp(i);)a.redIAdd(i);for(var s=this.pow(a,I),c=this.pow(e,I.addn(1).iushrn(1)),A=this.pow(e,I),u=r;0!==A.cmp(o);){for(var d=A,h=0;0!==d.cmp(o);h++)d=d.redSqr();n(h<u);var m=this.pow(s,new C(1).iushln(u-h-1));c=c.redMul(m),s=m.redSqr(),A=A.redMul(s),u=h}return c},G.prototype.invm=function(e){var g=e._invmp(this.m);return 0!==g.negative?(g.negative=0,this.imod(g).redNeg()):this.imod(g)},G.prototype.pow=function(e,g){if(g.isZero())return new C(1).toRed(this);if(0===g.cmpn(1))return e.clone();var t=new Array(16);t[0]=new C(1).toRed(this),t[1]=e;for(var n=2;n<t.length;n++)t[n]=this.mul(t[n-1],e);var I=t[0],r=0,o=0,i=g.bitLength()%26;for(0===i&&(i=26),n=g.length-1;n>=0;n--){for(var l=g.words[n],a=i-1;a>=0;a--){var s=l>>a&1;I!==t[0]&&(I=this.sqr(I)),0!==s||0!==r?(r<<=1,r|=s,(4===++o||0===n&&0===a)&&(I=this.mul(I,t[r]),o=0,r=0)):o=0}i=26}return I},G.prototype.convertTo=function(e){var g=e.umod(this.m);return g===e?g.clone():g},G.prototype.convertFrom=function(e){var g=e.clone();return g.red=null,g},C.mont=function(e){return new B(e)},I(B,G),B.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},B.prototype.convertFrom=function(e){var g=this.imod(e.mul(this.rinv));return g.red=null,g},B.prototype.imul=function(e,g){if(e.isZero()||g.isZero())return e.words[0]=0,e.length=1,e;var t=e.imul(g),n=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),I=t.isub(n).iushrn(this.shift),C=I;return I.cmp(this.m)>=0?C=I.isub(this.m):I.cmpn(0)<0&&(C=I.iadd(this.m)),C._forceRed(this)},B.prototype.mul=function(e,g){if(e.isZero()||g.isZero())return new C(0)._forceRed(this);var t=e.mul(g),n=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),I=t.isub(n).iushrn(this.shift),r=I;return I.cmp(this.m)>=0?r=I.isub(this.m):I.cmpn(0)<0&&(r=I.iadd(this.m)),r._forceRed(this)},B.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=t.nmd(e),this)},299:function(e,g,t){var n,I=t(8764).Buffer,C=1e9,r=1e6,o=20,i=4,l=-7,a=21,s=-C,c=C,A=!0,u=parseInt,d=y.prototype,h="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_",m=0,b=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,p=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},Z=y(1);function y(e,g){var t,I,C,r,l,a,u=this;if(!(u instanceof y))return new y(e,g);if(e instanceof y){if(m=0,g===t)return u.s=e.s,u.e=e.e,void(u.c=(e=e.c)?e.slice():e);e+=""}if("string"!=typeof e&&(e=(C="number"==typeof e||"[object Number]"==Object.prototype.toString.call(e))&&0===e&&1/e<0?"-0":e+""),a=e,g===t&&b.test(e))u.s="-"==e.charAt(0)?(e=e.slice(1),-1):1;else{if(10==g)return V(e,o,i);if(e=p.call(e).replace(/^\+(?!-)/,""),u.s="-"==e.charAt(0)?(e=e.replace(/^-(?!-)/,""),-1):1,null!=g?g!=(0|g)&&A||(n=!(g>=2&&g<65))?(G(g,2),l=b.test(e)):(r="["+h.slice(0,g|=0)+"]+",e=e.replace(/\.$/,"").replace(/^\./,"0."),(l=new RegExp("^"+r+"(?:\\."+r+")?$",g<37?"i":"").test(e))?(C&&(e.replace(/^0\.0*|\./,"").length>15&&G(a,0),C=!C),e=B(e,10,g,u.s)):"Infinity"!=e&&"NaN"!=e&&(G(a,1,g),e="NaN")):l=b.test(e),!l)return u.c=u.e=null,"Infinity"!=e&&("NaN"!=e&&G(a,3),u.s=null),void(m=0)}for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(I=e.search(/e/i))>0?(t<0&&(t=I),t+=+e.slice(I+1),e=e.substring(0,I)):t<0&&(t=e.length),I=0;"0"==e.charAt(I);I++);if(g=e.length,C&&g>15&&e.slice(I).length>15&&G(a,0),m=0,(t-=I+1)>c)u.c=u.e=null;else if(I==g||t<s)u.c=[u.e=0];else{for(;"0"==e.charAt(--g););for(u.e=t,u.c=[],t=0;I<=g;u.c[t++]=+e.charAt(I++));}}function G(e,g,t,I,C,r){if(A){var o,i=["new BigNumber","cmp","div","eq","gt","gte","lt","lte","minus","mod","plus","times","toFr"][m?m<0?-m:m:1/m<0?1:0]+"()",l=n?" out of range":" not a"+(C?" non-zero":"n")+" integer";throw l=([i+" number type has more than 15 significant digits",i+" not a base "+t+" number",i+" base"+l,i+" not a number"][g]||t+"() "+g+(r?" not a boolean or binary digit":l+(I?" or not ["+(n?" negative, positive":" integer, integer")+" ]":"")))+": "+e,n=m=0,(o=new Error(l)).name="BigNumber Error",o}}function B(e,g,t,n){var I,C,r,o,i,l;function a(e,n){var I,C,r=0,o=e.length,i=[0];for(n=n||t;r<o;r++){for(C=i.length,I=0;I<C;i[I]*=n,I++);for(i[0]+=h.indexOf(e.charAt(r)),I=0;I<i.length;I++)i[I]>g-1&&(null==i[I+1]&&(i[I+1]=0),i[I+1]+=i[I]/g^0,i[I]%=g)}return i.reverse()}function s(e){for(var g=0,t=e.length,n="";g<t;n+=h.charAt(e[g++]));return n}if(t<37&&(e=e.toLowerCase()),(I=e.indexOf("."))>-1)if(I=e.length-I-1,C=a(new y(t).pow(I).toF(),10),r=a((o=e.split("."))[1]),o=a(o[0]),i=(l=f(r,C,r.length-C.length,n,g,1&o[o.length-1])).c,I=l.e){for(;++I;i.unshift(0));e=s(o)+"."+s(i)}else i[0]?o[I=o.length-1]<g-1?(++o[I],e=s(o)):e=new y(s(o),g).plus(Z).toS(g):e=s(o);else e=s(a(e));return e}function f(e,g,t,n,I,C){var r,i,l,a,A,u=g.slice(),d=r=g.length,h=e.length,m=e.slice(0,r),b=m.length,p=new y(Z),G=p.c=[],B=0,f=o+(p.e=t)+1;for(p.s=n,n=f<0?0:f;b++<r;m.push(0));u.unshift(0);do{for(l=0;l<I;l++){if(r!=(b=m.length))a=r>b?1:-1;else for(A=-1,a=0;++A<r;)if(g[A]!=m[A]){a=g[A]>m[A]?1:-1;break}if(!(a<0))break;for(i=b==r?g:u;b;){if(m[--b]<i[b]){for(A=b;A&&!m[--A];m[A]=I-1);--m[A],m[b]+=I}m[b]-=i[b]}for(;!m[0];m.shift());}G[B++]=a?l:++l,m[0]&&a?m[b]=e[d]||0:m=[e[d]]}while((d++<h||null!=m[0])&&n--);return G[0]||1==B||(--p.e,G.shift()),B>f&&S(p,o,I,C,null!=m[0]),p.e>c?p.c=p.e=null:p.e<s&&(p.c=[p.e=0]),p}function v(e,g,t){var n=g-(e=new y(e)).e,I=e.c;if(!I)return e.toS();for(I.length>++g&&S(e,n,10),n=0==I[0]?n+1:t?g:e.e+n+1;I.length<n;I.push(0));return n=e.e,1==t||2==t&&(--g<n||n<=l)?(e.s<0&&I[0]?"-":"")+(I.length>1?(I.splice(1,0,"."),I.join("")):I[0])+(n<0?"e":"e+")+n:e.toS()}function S(e,g,t,n,I){var C=e.c,r=e.s<0,o=t/2,l=e.e+g+1,a=C[l],s=I||l<0||null!=C[l+1];if(I=i<4?(null!=a||s)&&(0==i||2==i&&!r||3==i&&r):a>o||a==o&&(4==i||s||6==i&&(1&C[l-1]||!g&&n)||7==i&&!r||8==i&&r),l<1||!C[0])return C.length=0,C.push(0),I?(C[0]=1,e.e=-g):e.e=0,e;if(C.length=l--,I)for(--t;++C[l]>t;)C[l]=0,l--||(++e.e,C.unshift(1));for(l=C.length;!C[--l];C.pop());return e}function V(e,g,t){var n=i;return i=t,(e=new y(e)).c&&S(e,g,10),i=n,e}y.ROUND_UP=0,y.ROUND_DOWN=1,y.ROUND_CEIL=2,y.ROUND_FLOOR=3,y.ROUND_HALF_UP=4,y.ROUND_HALF_DOWN=5,y.ROUND_HALF_EVEN=6,y.ROUND_HALF_CEIL=7,y.ROUND_HALF_FLOOR=8,y.fromBuffer=function(e,g){g||(g={});var t={1:"big","-1":"little"}[g.endian]||g.endian||"big",n="auto"===g.size?Math.ceil(e.length):g.size||1;if(e.length%n!==0)throw new RangeError("Buffer length ("+e.length+") must be a multiple of size ("+n+")");for(var I=[],C=0;C<e.length;C+=n){for(var r=[],o=0;o<n;o++)r.push(e[C+("big"===t?o:n-o-1)]);I.push(r.map((function(e){return(e<16?"0":"")+e.toString(16)})).join(""))}return y(I.join(""),16)},y.config=function(){var e,g,t=0,I={},r=arguments,d=r[0],h="config",b=function(e,g,t){return!((n=e<g||e>t)||u(e)!=e&&0!==e)},p=d&&"object"==typeof d?function(){if(d.hasOwnProperty(g))return null!=(e=d[g])}:function(){if(r.length>t)return null!=(e=r[t++])};return p(g="DECIMAL_PLACES")&&(b(e,0,C)?o=0|e:G(e,g,h)),I[g]=o,p(g="ROUNDING_MODE")&&(b(e,0,8)?i=0|e:G(e,g,h)),I[g]=i,p(g="EXPONENTIAL_AT")&&(b(e,-C,C)?l=-(a=~~(e<0?-e:+e)):!n&&e&&b(e[0],-C,0)&&b(e[1],0,C)?(l=~~e[0],a=~~e[1]):G(e,g,h,1)),I[g]=[l,a],p(g="RANGE")&&(b(e,-C,C)&&~~e?s=-(c=~~(e<0?-e:+e)):!n&&e&&b(e[0],-C,-1)&&b(e[1],1,C)?(s=~~e[0],c=~~e[1]):G(e,g,h,1,1)),I[g]=[s,c],p(g="ERRORS")&&(e===!!e||1===e||0===e?(n=m=0,u=(A=!!e)?parseInt:parseFloat):G(e,g,h,0,0,1)),I[g]=A,I},d.abs=d.absoluteValue=function(){var e=new y(this);return e.s<0&&(e.s=1),e},d.bitLength=function(){return this.toString(2).length},d.ceil=function(){return V(this,0,2)},d.comparedTo=d.cmp=function(e,g){var t,n=this,I=n.c,C=(m=-m,e=new y(e,g)).c,r=n.s,o=e.s,i=n.e,l=e.e;if(!r||!o)return null;if(t=I&&!I[0],g=C&&!C[0],t||g)return t?g?0:-o:r;if(r!=o)return r;if(t=r<0,g=i==l,!I||!C)return g?0:!I^t?1:-1;if(!g)return i>l^t?1:-1;for(r=-1,o=(i=I.length)<(l=C.length)?i:l;++r<o;)if(I[r]!=C[r])return I[r]>C[r]^t?1:-1;return i==l?0:i>l^t?1:-1},d.dividedBy=d.div=function(e,g){var t=this.c,n=this.e,I=this.s,C=(m=2,e=new y(e,g)).c,r=e.e,o=e.s,i=I==o?1:-1;return(n||t&&t[0])&&(r||C&&C[0])?f(t,C,n-r,i,10):new y(I&&o&&(t?!C||t[0]!=C[0]:C)?t&&0==t[0]||!C?0*i:i/0:NaN)},d.equals=d.eq=function(e,g){return m=3,0===this.cmp(e,g)},d.floor=function(){return V(this,0,3)},d.greaterThan=d.gt=function(e,g){return m=4,this.cmp(e,g)>0},d.greaterThanOrEqualTo=d.gte=d.gt=function(e,g){return m=5,1==(g=this.cmp(e,g))||0===g},d.isFinite=d.isF=function(){return!!this.c},d.isNaN=function(){return!this.s},d.isNegative=d.isNeg=function(){return this.s<0},d.isZero=d.isZ=function(){return!!this.c&&0==this.c[0]},d.lessThan=d.lt=function(e,g){return m=6,this.cmp(e,g)<0},d.lessThanOrEqualTo=d.lte=d.le=function(e,g){return m=7,-1==(g=this.cmp(e,g))||0===g},d.minus=d.sub=function(e,g){var t,n,I,C,r=this,o=r.s;if(g=(m=8,e=new y(e,g)).s,!o||!g)return new y(NaN);if(o!=g)return e.s=-g,r.plus(e);var l=r.c,a=r.e,c=e.c,A=e.e;if(!a||!A){if(!l||!c)return l?(e.s=-g,e):new y(c?r:NaN);if(!l[0]||!c[0])return c[0]?(e.s=-g,e):new y(l[0]?r:3==i?-0:0)}if(l=l.slice(),o=a-A){for((t=(C=o<0)?(o=-o,l):(A=a,c)).reverse(),g=o;g--;t.push(0));t.reverse()}else for(I=((C=l.length<c.length)?l:c).length,o=g=0;g<I;g++)if(l[g]!=c[g]){C=l[g]<c[g];break}if(C&&(t=l,l=c,c=t,e.s=-e.s),(g=-((I=l.length)-c.length))>0)for(;g--;l[I++]=0);for(g=c.length;g>o;){if(l[--g]<c[g]){for(n=g;n&&!l[--n];l[n]=9);--l[n],l[g]+=10}l[g]-=c[g]}for(;0==l[--I];l.pop());for(;0==l[0];l.shift(),--A);return(A<s||!l[0])&&(l[0]||(e.s=3==i?-1:1),l=[A=0]),e.c=l,e.e=A,e},d.modulo=d.mod=function(e,g){var t=this,n=t.c,I=(m=9,e=new y(e,g)).c,C=t.s,r=e.s;return(g=!C||!r||I&&!I[0])||n&&!n[0]?new y(g?NaN:t):(t.s=e.s=1,g=1==e.cmp(t),t.s=C,e.s=r,g?new y(t):(C=o,r=i,o=0,i=1,t=t.div(e),o=C,i=r,this.minus(t.times(e))))},d.negated=d.neg=function(){var e=new y(this);return e.s=-e.s||null,e},d.plus=d.add=function(e,g){var t,n=this,I=n.s;if(g=(m=10,e=new y(e,g)).s,!I||!g)return new y(NaN);if(I!=g)return e.s=-g,n.minus(e);var C=n.e,r=n.c,o=e.e,i=e.c;if(!C||!o){if(!r||!i)return new y(I/0);if(!r[0]||!i[0])return i[0]?e:new y(r[0]?n:0*I)}if(r=r.slice(),I=C-o){for((t=I>0?(o=C,i):(I=-I,r)).reverse();I--;t.push(0));t.reverse()}for(r.length-i.length<0&&(t=i,i=r,r=t),I=i.length,g=0;I;g=(r[--I]=r[I]+i[I]+g)/10^0,r[I]%=10);for(g&&(r.unshift(g),++o>c&&(r=o=null)),I=r.length;0==r[--I];r.pop());return e.c=r,e.e=o,e},d.toPower=d.pow=function(e){var g=0*e==0?0|e:e,t=new y(this),I=new y(Z);if(((n=e<-1e6||e>r)&&(g=1*e/0)||u(e)!=e&&0!==e&&!(g=NaN))&&!G(e,"exponent","pow")||!g)return new y(Math.pow(t.toS(),g));for(g=g<0?-g:g;1&g&&(I=I.times(t)),g>>=1;)t=t.times(t);return e<0?Z.div(I):I},d.powm=function(e,g){return this.pow(e).mod(g)},d.round=function(e,g){return V(this,e=null==e||((n=e<0||e>C)||u(e)!=e)&&!G(e,"decimal places","round")?0:0|e,g=null==g||((n=g<0||g>8)||u(g)!=g&&0!==g)&&!G(g,"mode","round")?i:0|g)},d.squareRoot=d.sqrt=function(){var e,g,t,n,I=this,C=I.c,r=I.s,l=I.e,a=o,s=i,c=new y("0.5");if(1!==r||!C||!C[0])return new y(!r||r<0&&(!C||C[0])?NaN:C?I:1/0);for(r=Math.sqrt(I.toS()),i=1,0==r||r==1/0?((e=C.join("")).length+l&1||(e+="0"),(g=new y(Math.sqrt(e)+"")).c||(g.c=[1]),g.e=((l+1)/2|0)-(l<0||1&l)):g=new y(e=r.toString()),(r=(t=g.e)+(o+=4))<3&&(r=0),l=r;;)if(n=g,g=c.times(n.plus(I.div(n))),n.c.slice(0,r).join("")===g.c.slice(0,r).join("")){if(9!=(C=g.c)[r-=e&&g.e<t]||9!=C[r-1]||9!=C[r-2]||!(9==C[r-3]||e&&4==C[r-3])){if(!C[l]&&!C[l-1]&&!C[l-2]&&(!C[l-3]||5==C[l-3])&&(C.length>l-2&&(C.length=l-2),!g.times(g).eq(I))){for(;C.length<l-3;)C.push(0);C[l-3]++}return i=s,S(g,o=a,10),g}if(e&&9==C[r-3]&&(n=g.round(a,0)).times(n).eq(I))return i=s,o=a,n;o+=4,r+=4,e=""}},d.times=d.mul=function(e,g){var t,n=this,I=n.c,C=(m=11,e=new y(e,g)).c,r=n.e,o=e.e,i=n.s;if(e.s=i==(g=e.s)?1:-1,!r&&(!I||!I[0])||!o&&(!C||!C[0]))return new y(!i||!g||I&&!I[0]&&!C||C&&!C[0]&&!I?NaN:I&&C?0*e.s:e.s/0);for(e.e=r+o,(i=I.length)<(g=C.length)&&(t=I,I=C,C=t,o=i,i=g,g=o),o=i+g,t=[];o--;t.push(0));for(r=g-1;r>-1;r--){for(g=0,o=i+r;o>r;g=t[o]+C[r]*I[o-r-1]+g,t[o--]=g%10|0,g=g/10|0);g&&(t[o]=(t[o]+g)%10)}for(g&&++e.e,!t[0]&&t.shift(),o=t.length;!t[--o];t.pop());return e.c=e.e>c?e.e=null:e.e<s?[e.e=0]:t,e},d.toBuffer=function(e){if("string"===typeof e){if("mpint"!==e)return"Unsupported Buffer representation";var g=this.abs(),t=1===(a=g.toBuffer({size:1,endian:"big"})).length&&0===a[0]?0:a.length;128&a[0]&&t++;var n=new I(4+t);t>0&&a.copy(n,4+(128&a[0]?1:0)),128&a[0]&&(n[4]=0),n[0]=t&255<<24,n[1]=t&255<<16,n[2]=65280&t,n[3]=255&t;var C=this.lt(0);if(C)for(var r=4;r<n.length;r++)n[r]=255-n[r];return n[4]=127&n[4]|(C?128:0),C&&n[n.length-1]++,n}e||(e={});var o={1:"big","-1":"little"}[e.endian]||e.endian||"big",i=this.toString(16);if("-"===i.charAt(0))throw new Error("converting negative numbers to Buffers not supported yet");for(var l="auto"===e.size?Math.ceil(i.length/2):e.size||1,a=(t=Math.ceil(i.length/(2*l))*l,new I(t));i.length<2*t;)i="0"+i;return i.split(new RegExp("(.{"+2*l+"})")).filter((function(e){return e.length>0})).forEach((function(e,g){for(var t=0;t<l;t++){a[g*l+("big"===o?t:l-t-1)]=parseInt(e.slice(2*t,2*t+2),16)}})),a},d.toExponential=d.toE=function(e){return v(this,(null==e||((n=e<0||e>C)||u(e)!=e&&0!==e)&&!G(e,"decimal places","toE"))&&this.c?this.c.length-1:0|e,1)},d.toFixed=d.toF=function(e){var g,t,I,r=this;return null==e||((n=e<0||e>C)||u(e)!=e&&0!==e)&&!G(e,"decimal places","toF")||(I=r.e+(0|e)),g=l,e=a,l=-(a=1/0),I==t?t=r.toS():(t=v(r,I),r.s<0&&r.c&&(r.c[0]?t.indexOf("-")<0&&(t="-"+t):t=t.replace(/^-/,""))),l=g,a=e,t},d.toFraction=d.toFr=function(e){var g,t,I,C,r,l,a,s=C=new y(Z),u=I=new y("0"),d=this,h=d.c,b=c,p=o,B=i,f=new y(Z);if(!h)return d.toS();for(a=f.e=h.length-d.e-1,(null==e||(!(m=12,l=new y(e)).s||(n=l.cmp(s)<0||!l.c)||A&&l.e<l.c.length-1)&&!G(e,"max denominator","toFr")||(e=l).cmp(f)>0)&&(e=a>0?f:s),c=1/0,l=new y(h.join("")),o=0,i=1;g=l.div(f),1!=(r=C.plus(g.times(u))).cmp(e);)C=u,u=r,s=I.plus(g.times(r=s)),I=r,f=l.minus(g.times(r=f)),l=r;return r=e.minus(C).div(u),I=I.plus(r.times(s)),C=C.plus(r.times(u)),I.s=s.s=d.s,o=2*a,i=B,t=s.div(u).minus(d).abs().cmp(I.div(C).minus(d).abs())<1?[s.toS(),u.toS()]:[I.toS(),C.toS()],c=b,o=p,t},d.toPrecision=d.toP=function(e){return null==e||((n=e<1||e>C)||u(e)!=e)&&!G(e,"precision","toP")?this.toS():v(this,0|--e,2)},d.toString=d.toS=function(e){var g,t,I,C=this,r=C.e;if(null===r)t=C.s?"Infinity":"NaN";else{if(e===g&&(r<=l||r>=a))return v(C,C.c.length-1,1);if(t=C.c.join(""),r<0){for(;++r;t="0"+t);t="0."+t}else if(I=t.length,r>0)if(++r>I)for(r-=I;r--;t+="0");else r<I&&(t=t.slice(0,r)+"."+t.slice(r));else if(g=t.charAt(0),I>1)t=g+"."+t.slice(1);else if("0"==g)return g;if(null!=e)if((n=!(e>=2&&e<65))||e!=(0|e)&&A)G(e,"base","toS");else if("0"==(t=B(t,0|e,10,C.s)))return t}return C.s<0?"-"+t:t},d.valueOf=function(){return this.toS()},e.exports=y},8764:function(e,g,t){"use strict";var n=t(9742),I=t(645),C="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;g.Buffer=i,g.SlowBuffer=function(e){+e!=e&&(e=0);return i.alloc(+e)},g.INSPECT_MAX_BYTES=50;var r=2147483647;function o(e){if(e>r)throw new RangeError('The value "'+e+'" is invalid for option "size"');var g=new Uint8Array(e);return Object.setPrototypeOf(g,i.prototype),g}function i(e,g,t){if("number"===typeof e){if("string"===typeof g)throw new TypeError('The "string" argument must be of type string. Received type number');return s(e)}return l(e,g,t)}function l(e,g,t){if("string"===typeof e)return function(e,g){"string"===typeof g&&""!==g||(g="utf8");if(!i.isEncoding(g))throw new TypeError("Unknown encoding: "+g);var t=0|d(e,g),n=o(t),I=n.write(e,g);I!==t&&(n=n.slice(0,I));return n}(e,g);if(ArrayBuffer.isView(e))return function(e){if(M(e,Uint8Array)){var g=new Uint8Array(e);return A(g.buffer,g.byteOffset,g.byteLength)}return c(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(M(e,ArrayBuffer)||e&&M(e.buffer,ArrayBuffer))return A(e,g,t);if("undefined"!==typeof SharedArrayBuffer&&(M(e,SharedArrayBuffer)||e&&M(e.buffer,SharedArrayBuffer)))return A(e,g,t);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return i.from(n,g,t);var I=function(e){if(i.isBuffer(e)){var g=0|u(e.length),t=o(g);return 0===t.length||e.copy(t,0,0,g),t}if(void 0!==e.length)return"number"!==typeof e.length||U(e.length)?o(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(e);if(I)return I;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return i.from(e[Symbol.toPrimitive]("string"),g,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function a(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function s(e){return a(e),o(e<0?0:0|u(e))}function c(e){for(var g=e.length<0?0:0|u(e.length),t=o(g),n=0;n<g;n+=1)t[n]=255&e[n];return t}function A(e,g,t){if(g<0||e.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<g+(t||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===g&&void 0===t?new Uint8Array(e):void 0===t?new Uint8Array(e,g):new Uint8Array(e,g,t),Object.setPrototypeOf(n,i.prototype),n}function u(e){if(e>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|e}function d(e,g){if(i.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||M(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var t=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===t)return 0;for(var I=!1;;)switch(g){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t;case"hex":return t>>>1;case"base64":return E(e).length;default:if(I)return n?-1:K(e).length;g=(""+g).toLowerCase(),I=!0}}function h(e,g,t){var n=!1;if((void 0===g||g<0)&&(g=0),g>this.length)return"";if((void 0===t||t>this.length)&&(t=this.length),t<=0)return"";if((t>>>=0)<=(g>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,g,t);case"utf8":case"utf-8":return S(this,g,t);case"ascii":return W(this,g,t);case"latin1":case"binary":return R(this,g,t);case"base64":return v(this,g,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,g,t);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function m(e,g,t){var n=e[g];e[g]=e[t],e[t]=n}function b(e,g,t,n,I){if(0===e.length)return-1;if("string"===typeof t?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),U(t=+t)&&(t=I?0:e.length-1),t<0&&(t=e.length+t),t>=e.length){if(I)return-1;t=e.length-1}else if(t<0){if(!I)return-1;t=0}if("string"===typeof g&&(g=i.from(g,n)),i.isBuffer(g))return 0===g.length?-1:p(e,g,t,n,I);if("number"===typeof g)return g&=255,"function"===typeof Uint8Array.prototype.indexOf?I?Uint8Array.prototype.indexOf.call(e,g,t):Uint8Array.prototype.lastIndexOf.call(e,g,t):p(e,[g],t,n,I);throw new TypeError("val must be string, number or Buffer")}function p(e,g,t,n,I){var C,r=1,o=e.length,i=g.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||g.length<2)return-1;r=2,o/=2,i/=2,t/=2}function l(e,g){return 1===r?e[g]:e.readUInt16BE(g*r)}if(I){var a=-1;for(C=t;C<o;C++)if(l(e,C)===l(g,-1===a?0:C-a)){if(-1===a&&(a=C),C-a+1===i)return a*r}else-1!==a&&(C-=C-a),a=-1}else for(t+i>o&&(t=o-i),C=t;C>=0;C--){for(var s=!0,c=0;c<i;c++)if(l(e,C+c)!==l(g,c)){s=!1;break}if(s)return C}return-1}function Z(e,g,t,n){t=Number(t)||0;var I=e.length-t;n?(n=Number(n))>I&&(n=I):n=I;var C=g.length;n>C/2&&(n=C/2);for(var r=0;r<n;++r){var o=parseInt(g.substr(2*r,2),16);if(U(o))return r;e[t+r]=o}return r}function y(e,g,t,n){return x(K(g,e.length-t),e,t,n)}function G(e,g,t,n){return x(function(e){for(var g=[],t=0;t<e.length;++t)g.push(255&e.charCodeAt(t));return g}(g),e,t,n)}function B(e,g,t,n){return x(E(g),e,t,n)}function f(e,g,t,n){return x(function(e,g){for(var t,n,I,C=[],r=0;r<e.length&&!((g-=2)<0);++r)n=(t=e.charCodeAt(r))>>8,I=t%256,C.push(I),C.push(n);return C}(g,e.length-t),e,t,n)}function v(e,g,t){return 0===g&&t===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(g,t))}function S(e,g,t){t=Math.min(e.length,t);for(var n=[],I=g;I<t;){var C,r,o,i,l=e[I],a=null,s=l>239?4:l>223?3:l>191?2:1;if(I+s<=t)switch(s){case 1:l<128&&(a=l);break;case 2:128===(192&(C=e[I+1]))&&(i=(31&l)<<6|63&C)>127&&(a=i);break;case 3:C=e[I+1],r=e[I+2],128===(192&C)&&128===(192&r)&&(i=(15&l)<<12|(63&C)<<6|63&r)>2047&&(i<55296||i>57343)&&(a=i);break;case 4:C=e[I+1],r=e[I+2],o=e[I+3],128===(192&C)&&128===(192&r)&&128===(192&o)&&(i=(15&l)<<18|(63&C)<<12|(63&r)<<6|63&o)>65535&&i<1114112&&(a=i)}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),I+=s}return function(e){var g=e.length;if(g<=V)return String.fromCharCode.apply(String,e);var t="",n=0;for(;n<g;)t+=String.fromCharCode.apply(String,e.slice(n,n+=V));return t}(n)}g.kMaxLength=r,i.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(e,g),42===e.foo()}catch(t){return!1}}(),i.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),i.poolSize=8192,i.from=function(e,g,t){return l(e,g,t)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array),i.alloc=function(e,g,t){return function(e,g,t){return a(e),e<=0?o(e):void 0!==g?"string"===typeof t?o(e).fill(g,t):o(e).fill(g):o(e)}(e,g,t)},i.allocUnsafe=function(e){return s(e)},i.allocUnsafeSlow=function(e){return s(e)},i.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==i.prototype},i.compare=function(e,g){if(M(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),M(g,Uint8Array)&&(g=i.from(g,g.offset,g.byteLength)),!i.isBuffer(e)||!i.isBuffer(g))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===g)return 0;for(var t=e.length,n=g.length,I=0,C=Math.min(t,n);I<C;++I)if(e[I]!==g[I]){t=e[I],n=g[I];break}return t<n?-1:n<t?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,g){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);var t;if(void 0===g)for(g=0,t=0;t<e.length;++t)g+=e[t].length;var n=i.allocUnsafe(g),I=0;for(t=0;t<e.length;++t){var C=e[t];if(M(C,Uint8Array))I+C.length>n.length?i.from(C).copy(n,I):Uint8Array.prototype.set.call(n,C,I);else{if(!i.isBuffer(C))throw new TypeError('"list" argument must be an Array of Buffers');C.copy(n,I)}I+=C.length}return n},i.byteLength=d,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var g=0;g<e;g+=2)m(this,g,g+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var g=0;g<e;g+=4)m(this,g,g+3),m(this,g+1,g+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var g=0;g<e;g+=8)m(this,g,g+7),m(this,g+1,g+6),m(this,g+2,g+5),m(this,g+3,g+4);return this},i.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):h.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",t=g.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},C&&(i.prototype[C]=i.prototype.inspect),i.prototype.compare=function(e,g,t,n,I){if(M(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===g&&(g=0),void 0===t&&(t=e?e.length:0),void 0===n&&(n=0),void 0===I&&(I=this.length),g<0||t>e.length||n<0||I>this.length)throw new RangeError("out of range index");if(n>=I&&g>=t)return 0;if(n>=I)return-1;if(g>=t)return 1;if(this===e)return 0;for(var C=(I>>>=0)-(n>>>=0),r=(t>>>=0)-(g>>>=0),o=Math.min(C,r),l=this.slice(n,I),a=e.slice(g,t),s=0;s<o;++s)if(l[s]!==a[s]){C=l[s],r=a[s];break}return C<r?-1:r<C?1:0},i.prototype.includes=function(e,g,t){return-1!==this.indexOf(e,g,t)},i.prototype.indexOf=function(e,g,t){return b(this,e,g,t,!0)},i.prototype.lastIndexOf=function(e,g,t){return b(this,e,g,t,!1)},i.prototype.write=function(e,g,t,n){if(void 0===g)n="utf8",t=this.length,g=0;else if(void 0===t&&"string"===typeof g)n=g,t=this.length,g=0;else{if(!isFinite(g))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");g>>>=0,isFinite(t)?(t>>>=0,void 0===n&&(n="utf8")):(n=t,t=void 0)}var I=this.length-g;if((void 0===t||t>I)&&(t=I),e.length>0&&(t<0||g<0)||g>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var C=!1;;)switch(n){case"hex":return Z(this,e,g,t);case"utf8":case"utf-8":return y(this,e,g,t);case"ascii":case"latin1":case"binary":return G(this,e,g,t);case"base64":return B(this,e,g,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f(this,e,g,t);default:if(C)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),C=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var V=4096;function W(e,g,t){var n="";t=Math.min(e.length,t);for(var I=g;I<t;++I)n+=String.fromCharCode(127&e[I]);return n}function R(e,g,t){var n="";t=Math.min(e.length,t);for(var I=g;I<t;++I)n+=String.fromCharCode(e[I]);return n}function k(e,g,t){var n=e.length;(!g||g<0)&&(g=0),(!t||t<0||t>n)&&(t=n);for(var I="",C=g;C<t;++C)I+=T[e[C]];return I}function X(e,g,t){for(var n=e.slice(g,t),I="",C=0;C<n.length-1;C+=2)I+=String.fromCharCode(n[C]+256*n[C+1]);return I}function J(e,g,t){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+g>t)throw new RangeError("Trying to access beyond buffer length")}function w(e,g,t,n,I,C){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>I||g<C)throw new RangeError('"value" argument is out of bounds');if(t+n>e.length)throw new RangeError("Index out of range")}function Y(e,g,t,n,I,C){if(t+n>e.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function H(e,g,t,n,C){return g=+g,t>>>=0,C||Y(e,0,t,4),I.write(e,g,t,n,23,4),t+4}function N(e,g,t,n,C){return g=+g,t>>>=0,C||Y(e,0,t,8),I.write(e,g,t,n,52,8),t+8}i.prototype.slice=function(e,g){var t=this.length;(e=~~e)<0?(e+=t)<0&&(e=0):e>t&&(e=t),(g=void 0===g?t:~~g)<0?(g+=t)<0&&(g=0):g>t&&(g=t),g<e&&(g=e);var n=this.subarray(e,g);return Object.setPrototypeOf(n,i.prototype),n},i.prototype.readUintLE=i.prototype.readUIntLE=function(e,g,t){e>>>=0,g>>>=0,t||J(e,g,this.length);for(var n=this[e],I=1,C=0;++C<g&&(I*=256);)n+=this[e+C]*I;return n},i.prototype.readUintBE=i.prototype.readUIntBE=function(e,g,t){e>>>=0,g>>>=0,t||J(e,g,this.length);for(var n=this[e+--g],I=1;g>0&&(I*=256);)n+=this[e+--g]*I;return n},i.prototype.readUint8=i.prototype.readUInt8=function(e,g){return e>>>=0,g||J(e,1,this.length),this[e]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(e,g){return e>>>=0,g||J(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(e,g){return e>>>=0,g||J(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(e,g){return e>>>=0,g||J(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(e,g){return e>>>=0,g||J(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,g,t){e>>>=0,g>>>=0,t||J(e,g,this.length);for(var n=this[e],I=1,C=0;++C<g&&(I*=256);)n+=this[e+C]*I;return n>=(I*=128)&&(n-=Math.pow(2,8*g)),n},i.prototype.readIntBE=function(e,g,t){e>>>=0,g>>>=0,t||J(e,g,this.length);for(var n=g,I=1,C=this[e+--n];n>0&&(I*=256);)C+=this[e+--n]*I;return C>=(I*=128)&&(C-=Math.pow(2,8*g)),C},i.prototype.readInt8=function(e,g){return e>>>=0,g||J(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,g){e>>>=0,g||J(e,2,this.length);var t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},i.prototype.readInt16BE=function(e,g){e>>>=0,g||J(e,2,this.length);var t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},i.prototype.readInt32LE=function(e,g){return e>>>=0,g||J(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,g){return e>>>=0,g||J(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,g){return e>>>=0,g||J(e,4,this.length),I.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,g){return e>>>=0,g||J(e,4,this.length),I.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,g){return e>>>=0,g||J(e,8,this.length),I.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,g){return e>>>=0,g||J(e,8,this.length),I.read(this,e,!1,52,8)},i.prototype.writeUintLE=i.prototype.writeUIntLE=function(e,g,t,n){(e=+e,g>>>=0,t>>>=0,n)||w(this,e,g,t,Math.pow(2,8*t)-1,0);var I=1,C=0;for(this[g]=255&e;++C<t&&(I*=256);)this[g+C]=e/I&255;return g+t},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(e,g,t,n){(e=+e,g>>>=0,t>>>=0,n)||w(this,e,g,t,Math.pow(2,8*t)-1,0);var I=t-1,C=1;for(this[g+I]=255&e;--I>=0&&(C*=256);)this[g+I]=e/C&255;return g+t},i.prototype.writeUint8=i.prototype.writeUInt8=function(e,g,t){return e=+e,g>>>=0,t||w(this,e,g,1,255,0),this[g]=255&e,g+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(e,g,t){return e=+e,g>>>=0,t||w(this,e,g,2,65535,0),this[g]=255&e,this[g+1]=e>>>8,g+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(e,g,t){return e=+e,g>>>=0,t||w(this,e,g,2,65535,0),this[g]=e>>>8,this[g+1]=255&e,g+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(e,g,t){return e=+e,g>>>=0,t||w(this,e,g,4,4294967295,0),this[g+3]=e>>>24,this[g+2]=e>>>16,this[g+1]=e>>>8,this[g]=255&e,g+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(e,g,t){return e=+e,g>>>=0,t||w(this,e,g,4,4294967295,0),this[g]=e>>>24,this[g+1]=e>>>16,this[g+2]=e>>>8,this[g+3]=255&e,g+4},i.prototype.writeIntLE=function(e,g,t,n){if(e=+e,g>>>=0,!n){var I=Math.pow(2,8*t-1);w(this,e,g,t,I-1,-I)}var C=0,r=1,o=0;for(this[g]=255&e;++C<t&&(r*=256);)e<0&&0===o&&0!==this[g+C-1]&&(o=1),this[g+C]=(e/r>>0)-o&255;return g+t},i.prototype.writeIntBE=function(e,g,t,n){if(e=+e,g>>>=0,!n){var I=Math.pow(2,8*t-1);w(this,e,g,t,I-1,-I)}var C=t-1,r=1,o=0;for(this[g+C]=255&e;--C>=0&&(r*=256);)e<0&&0===o&&0!==this[g+C+1]&&(o=1),this[g+C]=(e/r>>0)-o&255;return g+t},i.prototype.writeInt8=function(e,g,t){return e=+e,g>>>=0,t||w(this,e,g,1,127,-128),e<0&&(e=255+e+1),this[g]=255&e,g+1},i.prototype.writeInt16LE=function(e,g,t){return e=+e,g>>>=0,t||w(this,e,g,2,32767,-32768),this[g]=255&e,this[g+1]=e>>>8,g+2},i.prototype.writeInt16BE=function(e,g,t){return e=+e,g>>>=0,t||w(this,e,g,2,32767,-32768),this[g]=e>>>8,this[g+1]=255&e,g+2},i.prototype.writeInt32LE=function(e,g,t){return e=+e,g>>>=0,t||w(this,e,g,4,2147483647,-2147483648),this[g]=255&e,this[g+1]=e>>>8,this[g+2]=e>>>16,this[g+3]=e>>>24,g+4},i.prototype.writeInt32BE=function(e,g,t){return e=+e,g>>>=0,t||w(this,e,g,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[g]=e>>>24,this[g+1]=e>>>16,this[g+2]=e>>>8,this[g+3]=255&e,g+4},i.prototype.writeFloatLE=function(e,g,t){return H(this,e,g,!0,t)},i.prototype.writeFloatBE=function(e,g,t){return H(this,e,g,!1,t)},i.prototype.writeDoubleLE=function(e,g,t){return N(this,e,g,!0,t)},i.prototype.writeDoubleBE=function(e,g,t){return N(this,e,g,!1,t)},i.prototype.copy=function(e,g,t,n){if(!i.isBuffer(e))throw new TypeError("argument should be a Buffer");if(t||(t=0),n||0===n||(n=this.length),g>=e.length&&(g=e.length),g||(g=0),n>0&&n<t&&(n=t),n===t)return 0;if(0===e.length||0===this.length)return 0;if(g<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-g<n-t&&(n=e.length-g+t);var I=n-t;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(g,t,n):Uint8Array.prototype.set.call(e,this.subarray(t,n),g),I},i.prototype.fill=function(e,g,t,n){if("string"===typeof e){if("string"===typeof g?(n=g,g=0,t=this.length):"string"===typeof t&&(n=t,t=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!i.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var I=e.charCodeAt(0);("utf8"===n&&I<128||"latin1"===n)&&(e=I)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(g<0||this.length<g||this.length<t)throw new RangeError("Out of range index");if(t<=g)return this;var C;if(g>>>=0,t=void 0===t?this.length:t>>>0,e||(e=0),"number"===typeof e)for(C=g;C<t;++C)this[C]=e;else{var r=i.isBuffer(e)?e:i.from(e,n),o=r.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(C=0;C<t-g;++C)this[C+g]=r[C%o]}return this};var F=/[^+/0-9A-Za-z-_]/g;function K(e,g){var t;g=g||1/0;for(var n=e.length,I=null,C=[],r=0;r<n;++r){if((t=e.charCodeAt(r))>55295&&t<57344){if(!I){if(t>56319){(g-=3)>-1&&C.push(239,191,189);continue}if(r+1===n){(g-=3)>-1&&C.push(239,191,189);continue}I=t;continue}if(t<56320){(g-=3)>-1&&C.push(239,191,189),I=t;continue}t=65536+(I-55296<<10|t-56320)}else I&&(g-=3)>-1&&C.push(239,191,189);if(I=null,t<128){if((g-=1)<0)break;C.push(t)}else if(t<2048){if((g-=2)<0)break;C.push(t>>6|192,63&t|128)}else if(t<65536){if((g-=3)<0)break;C.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((g-=4)<0)break;C.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return C}function E(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function x(e,g,t,n){for(var I=0;I<n&&!(I+t>=g.length||I>=e.length);++I)g[I+t]=e[I];return I}function M(e,g){return e instanceof g||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===g.name}function U(e){return e!==e}var T=function(){for(var e="0123456789abcdef",g=new Array(256),t=0;t<16;++t)for(var n=16*t,I=0;I<16;++I)g[n+I]=e[t]+e[I];return g}()},1964:function(e,g,t){var n,I;!function(C,r){"use strict";var o=Math.pow(2,-24),i=Math.pow(2,32),l=Math.pow(2,53);(I="function"===typeof(n={encode:function(e){var g,t=new ArrayBuffer(256),n=new DataView(t),I=0;function C(e){for(var C=t.byteLength,r=I+e;C<r;)C*=2;if(C!==t.byteLength){var o=n;t=new ArrayBuffer(C),n=new DataView(t);for(var i=I+3>>2,l=0;l<i;++l)n.setUint32(4*l,o.getUint32(4*l))}return g=e,n}function o(){I+=g}function a(e){o(C(1).setUint8(I,e))}function s(e){for(var g=C(e.length),t=0;t<e.length;++t)g.setUint8(I+t,e[t]);o()}function c(e,g){g<24?a(e<<5|g):g<256?(a(e<<5|24),a(g)):g<65536?(a(e<<5|25),function(e){o(C(2).setUint16(I,e))}(g)):g<4294967296?(a(e<<5|26),function(e){o(C(4).setUint32(I,e))}(g)):(a(e<<5|27),function(e){var g=e%i,t=(e-g)/i,n=C(8);n.setUint32(I,t),n.setUint32(I+4,g),o()}(g))}if(function e(g){var t;if(!1===g)return a(244);if(!0===g)return a(245);if(null===g)return a(246);if(g===r)return a(247);switch(typeof g){case"number":if(Math.floor(g)===g){if(0<=g&&g<=l)return c(0,g);if(-l<=g&&g<0)return c(1,-(g+1))}return a(251),function(e){o(C(8).setFloat64(I,e))}(g);case"string":var n=[];for(t=0;t<g.length;++t){var i=g.charCodeAt(t);i<128?n.push(i):i<2048?(n.push(192|i>>6),n.push(128|63&i)):i<55296?(n.push(224|i>>12),n.push(128|i>>6&63),n.push(128|63&i)):(i=(1023&i)<<10,i|=1023&g.charCodeAt(++t),i+=65536,n.push(240|i>>18),n.push(128|i>>12&63),n.push(128|i>>6&63),n.push(128|63&i))}return c(3,n.length),s(n);default:var A;if(Array.isArray(g))for(c(4,A=g.length),t=0;t<A;++t)e(g[t]);else if(g instanceof Uint8Array)c(2,g.length),s(g);else{var u=Object.keys(g);for(c(5,A=u.length),t=0;t<A;++t){var d=u[t];e(d),e(g[d])}}}}(e),"slice"in t)return t.slice(0,I);for(var A=new ArrayBuffer(I),u=new DataView(A),d=0;d<I;++d)u.setUint8(d,n.getUint8(d));return A},decode:function(e,g,t){var n=new DataView(e),I=0;function C(e,g){return I+=g,e}function l(g){return C(new Uint8Array(e,I,g),g)}function a(){return C(n.getUint8(I),1)}function s(){return C(n.getUint16(I),2)}function c(){return C(n.getUint32(I),4)}function A(){return 255===n.getUint8(I)&&(I+=1,!0)}function u(e){if(e<24)return e;if(24===e)return a();if(25===e)return s();if(26===e)return c();if(27===e)return c()*i+c();if(31===e)return-1;throw"Invalid length encoding"}function d(e){var g=a();if(255===g)return-1;var t=u(31&g);if(t<0||g>>5!==e)throw"Invalid indefinite length element";return t}function h(e,g){for(var t=0;t<g;++t){var n=a();128&n&&(n<224?(n=(31&n)<<6|63&a(),g-=1):n<240?(n=(15&n)<<12|(63&a())<<6|63&a(),g-=2):(n=(15&n)<<18|(63&a())<<12|(63&a())<<6|63&a(),g-=3)),n<65536?e.push(n):(n-=65536,e.push(55296|n>>10),e.push(56320|1023&n))}}"function"!==typeof g&&(g=function(e){return e}),"function"!==typeof t&&(t=function(){return r});var m=function e(){var i,c,m=a(),b=m>>5,p=31&m;if(7===b)switch(p){case 25:return function(){var e=new ArrayBuffer(4),g=new DataView(e),t=s(),n=32768&t,I=31744&t,C=1023&t;if(31744===I)I=261120;else if(0!==I)I+=114688;else if(0!==C)return C*o;return g.setUint32(0,n<<16|I<<13|C<<13),g.getFloat32(0)}();case 26:return C(n.getFloat32(I),4);case 27:return C(n.getFloat64(I),8)}if((c=u(p))<0&&(b<2||6<b))throw"Invalid length";switch(b){case 0:return c;case 1:return-1-c;case 2:if(c<0){for(var Z=[],y=0;(c=d(b))>=0;)y+=c,Z.push(l(c));var G=new Uint8Array(y),B=0;for(i=0;i<Z.length;++i)G.set(Z[i],B),B+=Z[i].length;return G}return l(c);case 3:var f=[];if(c<0)for(;(c=d(b))>=0;)h(f,c);else h(f,c);return String.fromCharCode.apply(null,f);case 4:var v;if(c<0)for(v=[];!A();)v.push(e());else for(v=new Array(c),i=0;i<c;++i)v[i]=e();return v;case 5:var S={};for(i=0;i<c||c<0&&!A();++i){S[e()]=e()}return S;case 6:return g(e(),c);case 7:switch(c){case 20:return!1;case 21:return!0;case 22:return null;case 23:return r;default:return t(c)}}}();if(I!==e.byteLength)throw"Remaining bytes";return m}})?n.call(g,t,g,e):n)===r||(e.exports=I)}()},4184:function(e,g){var t;!function(){"use strict";var n={}.hasOwnProperty;function I(){for(var e=[],g=0;g<arguments.length;g++){var t=arguments[g];if(t){var C=typeof t;if("string"===C||"number"===C)e.push(t);else if(Array.isArray(t)){if(t.length){var r=I.apply(null,t);r&&e.push(r)}}else if("object"===C)if(t.toString===Object.prototype.toString)for(var o in t)n.call(t,o)&&t[o]&&e.push(o);else e.push(t.toString())}}return e.join(" ")}e.exports?(I.default=I,e.exports=I):void 0===(t=function(){return I}.apply(g,[]))||(e.exports=t)}()},640:function(e,g,t){"use strict";var n=t(1742),I={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,g){var t,C,r,o,i,l,a=!1;g||(g={}),t=g.debug||!1;try{if(r=n(),o=document.createRange(),i=document.getSelection(),(l=document.createElement("span")).textContent=e,l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",(function(n){if(n.stopPropagation(),g.format)if(n.preventDefault(),"undefined"===typeof n.clipboardData){t&&console.warn("unable to use e.clipboardData"),t&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var C=I[g.format]||I.default;window.clipboardData.setData(C,e)}else n.clipboardData.clearData(),n.clipboardData.setData(g.format,e);g.onCopy&&(n.preventDefault(),g.onCopy(n.clipboardData))})),document.body.appendChild(l),o.selectNodeContents(l),i.addRange(o),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");a=!0}catch(s){t&&console.error("unable to copy using execCommand: ",s),t&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(g.format||"text",e),g.onCopy&&g.onCopy(window.clipboardData),a=!0}catch(s){t&&console.error("unable to copy using clipboardData: ",s),t&&console.error("falling back to prompt"),C=function(e){var g=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,g)}("message"in g?g.message:"Copy to clipboard: #{key}, Enter"),window.prompt(C,e)}}finally{i&&("function"==typeof i.removeRange?i.removeRange(o):i.removeAllRanges()),l&&document.body.removeChild(l),r()}return a}},1860:function(e,g,t){"use strict";t.r(g),t.d(g,{crc1:function(){return o},crc16:function(){return h},crc16ccitt:function(){return p},crc16kermit:function(){return V},crc16modbus:function(){return G},crc16xmodem:function(){return f},crc24:function(){return k},crc32:function(){return w},crc8:function(){return a},crc81wire:function(){return A},crcjam:function(){return N},default:function(){return F}});var n=t(8764);var I=n.Buffer.from&&n.Buffer.alloc&&n.Buffer.allocUnsafe&&n.Buffer.allocUnsafeSlow?n.Buffer.from:e=>new n.Buffer(e);function C(e,g){const t=(e,t)=>g(e,t)>>>0;return t.signed=g,t.unsigned=t,t.model=e,t}const r=C("crc1",(function(e,g){n.Buffer.isBuffer(e)||(e=I(e));let t=~~g,C=0;for(let n=0;n<e.length;n++){C+=e[n]}return t+=C%256,t%256}));var o=r;let i=[0,7,14,9,28,27,18,21,56,63,54,49,36,35,42,45,112,119,126,121,108,107,98,101,72,79,70,65,84,83,90,93,224,231,238,233,252,251,242,245,216,223,214,209,196,195,202,205,144,151,158,153,140,139,130,133,168,175,166,161,180,179,186,189,199,192,201,206,219,220,213,210,255,248,241,246,227,228,237,234,183,176,185,190,171,172,165,162,143,136,129,134,147,148,157,154,39,32,41,46,59,60,53,50,31,24,17,22,3,4,13,10,87,80,89,94,75,76,69,66,111,104,97,102,115,116,125,122,137,142,135,128,149,146,155,156,177,182,191,184,173,170,163,164,249,254,247,240,229,226,235,236,193,198,207,200,221,218,211,212,105,110,103,96,117,114,123,124,81,86,95,88,77,74,67,68,25,30,23,16,5,2,11,12,33,38,47,40,61,58,51,52,78,73,64,71,82,85,92,91,118,113,120,127,106,109,100,99,62,57,48,55,34,37,44,43,6,1,8,15,26,29,20,19,174,169,160,167,178,181,188,187,150,145,152,159,138,141,132,131,222,217,208,215,194,197,204,203,230,225,232,239,250,253,244,243];"undefined"!==typeof Int32Array&&(i=new Int32Array(i));const l=C("crc-8",(function(e,g){n.Buffer.isBuffer(e)||(e=I(e));let t=~~g;for(let n=0;n<e.length;n++){const g=e[n];t=255&i[255&(t^g)]}return t}));var a=l;let s=[0,94,188,226,97,63,221,131,194,156,126,32,163,253,31,65,157,195,33,127,252,162,64,30,95,1,227,189,62,96,130,220,35,125,159,193,66,28,254,160,225,191,93,3,128,222,60,98,190,224,2,92,223,129,99,61,124,34,192,158,29,67,161,255,70,24,250,164,39,121,155,197,132,218,56,102,229,187,89,7,219,133,103,57,186,228,6,88,25,71,165,251,120,38,196,154,101,59,217,135,4,90,184,230,167,249,27,69,198,152,122,36,248,166,68,26,153,199,37,123,58,100,134,216,91,5,231,185,140,210,48,110,237,179,81,15,78,16,242,172,47,113,147,205,17,79,173,243,112,46,204,146,211,141,111,49,178,236,14,80,175,241,19,77,206,144,114,44,109,51,209,143,12,82,176,238,50,108,142,208,83,13,239,177,240,174,76,18,145,207,45,115,202,148,118,40,171,245,23,73,8,86,180,234,105,55,213,139,87,9,235,181,54,104,138,212,149,203,41,119,244,170,72,22,233,183,85,11,136,214,52,106,43,117,151,201,74,20,246,168,116,42,200,150,21,75,169,247,182,232,10,84,215,137,107,53];"undefined"!==typeof Int32Array&&(s=new Int32Array(s));const c=C("dallas-1-wire",(function(e,g){n.Buffer.isBuffer(e)||(e=I(e));let t=~~g;for(let n=0;n<e.length;n++){const g=e[n];t=255&s[255&(t^g)]}return t}));var A=c;let u=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];"undefined"!==typeof Int32Array&&(u=new Int32Array(u));const d=C("crc-16",(function(e,g){n.Buffer.isBuffer(e)||(e=I(e));let t=~~g;for(let n=0;n<e.length;n++){const g=e[n];t=65535&(u[255&(t^g)]^t>>8)}return t}));var h=d;let m=[0,4129,8258,12387,16516,20645,24774,28903,33032,37161,41290,45419,49548,53677,57806,61935,4657,528,12915,8786,21173,17044,29431,25302,37689,33560,45947,41818,54205,50076,62463,58334,9314,13379,1056,5121,25830,29895,17572,21637,42346,46411,34088,38153,58862,62927,50604,54669,13907,9842,5649,1584,30423,26358,22165,18100,46939,42874,38681,34616,63455,59390,55197,51132,18628,22757,26758,30887,2112,6241,10242,14371,51660,55789,59790,63919,35144,39273,43274,47403,23285,19156,31415,27286,6769,2640,14899,10770,56317,52188,64447,60318,39801,35672,47931,43802,27814,31879,19684,23749,11298,15363,3168,7233,60846,64911,52716,56781,44330,48395,36200,40265,32407,28342,24277,20212,15891,11826,7761,3696,65439,61374,57309,53244,48923,44858,40793,36728,37256,33193,45514,41451,53516,49453,61774,57711,4224,161,12482,8419,20484,16421,28742,24679,33721,37784,41979,46042,49981,54044,58239,62302,689,4752,8947,13010,16949,21012,25207,29270,46570,42443,38312,34185,62830,58703,54572,50445,13538,9411,5280,1153,29798,25671,21540,17413,42971,47098,34713,38840,59231,63358,50973,55100,9939,14066,1681,5808,26199,30326,17941,22068,55628,51565,63758,59695,39368,35305,47498,43435,22596,18533,30726,26663,6336,2273,14466,10403,52093,56156,60223,64286,35833,39896,43963,48026,19061,23124,27191,31254,2801,6864,10931,14994,64814,60687,56684,52557,48554,44427,40424,36297,31782,27655,23652,19525,15522,11395,7392,3265,61215,65342,53085,57212,44955,49082,36825,40952,28183,32310,20053,24180,11923,16050,3793,7920];"undefined"!==typeof Int32Array&&(m=new Int32Array(m));const b=C("ccitt",(function(e,g){n.Buffer.isBuffer(e)||(e=I(e));let t="undefined"!==typeof g?~~g:65535;for(let n=0;n<e.length;n++){const g=e[n];t=65535&(m[255&(t>>8^g)]^t<<8)}return t}));var p=b;let Z=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];"undefined"!==typeof Int32Array&&(Z=new Int32Array(Z));const y=C("crc-16-modbus",(function(e,g){n.Buffer.isBuffer(e)||(e=I(e));let t="undefined"!==typeof g?~~g:65535;for(let n=0;n<e.length;n++){const g=e[n];t=65535&(Z[255&(t^g)]^t>>8)}return t}));var G=y;const B=C("xmodem",(function(e,g){n.Buffer.isBuffer(e)||(e=I(e));let t="undefined"!==typeof g?~~g:0;for(let n=0;n<e.length;n++){let g=t>>>8&255;g^=255&e[n],g^=g>>>4,t=t<<8&65535,t^=g,g=g<<5&65535,t^=g,g=g<<7&65535,t^=g}return t}));var f=B;let v=[0,4489,8978,12955,17956,22445,25910,29887,35912,40385,44890,48851,51820,56293,59774,63735,4225,264,13203,8730,22181,18220,30135,25662,40137,36160,49115,44626,56045,52068,63999,59510,8450,12427,528,5017,26406,30383,17460,21949,44362,48323,36440,40913,60270,64231,51324,55797,12675,8202,4753,792,30631,26158,21685,17724,48587,44098,40665,36688,64495,60006,55549,51572,16900,21389,24854,28831,1056,5545,10034,14011,52812,57285,60766,64727,34920,39393,43898,47859,21125,17164,29079,24606,5281,1320,14259,9786,57037,53060,64991,60502,39145,35168,48123,43634,25350,29327,16404,20893,9506,13483,1584,6073,61262,65223,52316,56789,43370,47331,35448,39921,29575,25102,20629,16668,13731,9258,5809,1848,65487,60998,56541,52564,47595,43106,39673,35696,33800,38273,42778,46739,49708,54181,57662,61623,2112,6601,11090,15067,20068,24557,28022,31999,38025,34048,47003,42514,53933,49956,61887,57398,6337,2376,15315,10842,24293,20332,32247,27774,42250,46211,34328,38801,58158,62119,49212,53685,10562,14539,2640,7129,28518,32495,19572,24061,46475,41986,38553,34576,62383,57894,53437,49460,14787,10314,6865,2904,32743,28270,23797,19836,50700,55173,58654,62615,32808,37281,41786,45747,19012,23501,26966,30943,3168,7657,12146,16123,54925,50948,62879,58390,37033,33056,46011,41522,23237,19276,31191,26718,7393,3432,16371,11898,59150,63111,50204,54677,41258,45219,33336,37809,27462,31439,18516,23005,11618,15595,3696,8185,63375,58886,54429,50452,45483,40994,37561,33584,31687,27214,22741,18780,15843,11370,7921,3960];"undefined"!==typeof Int32Array&&(v=new Int32Array(v));const S=C("kermit",(function(e,g){n.Buffer.isBuffer(e)||(e=I(e));let t="undefined"!==typeof g?~~g:0;for(let n=0;n<e.length;n++){const g=e[n];t=65535&(v[255&(t^g)]^t>>8)}return t}));var V=S;let W=[0,8801531,9098509,825846,9692897,1419802,1651692,10452759,10584377,2608578,2839604,11344079,3303384,11807523,12104405,4128302,12930697,4391538,5217156,13227903,5679208,13690003,14450021,5910942,6606768,14844747,15604413,6837830,16197969,7431594,8256604,16494759,840169,9084178,8783076,18463,10434312,1670131,1434117,9678590,11358416,2825259,2590173,10602790,4109873,12122826,11821884,3289031,13213536,5231515,4409965,12912278,5929345,14431610,13675660,5693559,6823513,15618722,14863188,6588335,16513208,8238147,7417269,16212302,1680338,10481449,9664223,1391140,9061683,788936,36926,8838341,12067563,4091408,3340262,11844381,2868234,11372785,10555655,2579964,14478683,5939616,5650518,13661357,5180346,13190977,12967607,4428364,8219746,16457881,16234863,7468436,15633027,6866552,6578062,14816117,1405499,9649856,10463030,1698765,8819930,55329,803287,9047340,11858690,3325945,4072975,12086004,2561507,10574104,11387118,2853909,13647026,5664841,5958079,14460228,4446803,12949160,13176670,5194661,7454091,16249200,16476294,8201341,14834538,6559633,6852199,15647388,3360676,11864927,12161705,4185682,10527045,2551230,2782280,11286707,9619101,1346150,1577872,10379115,73852,8875143,9172337,899466,16124205,7357910,8182816,16421083,6680524,14918455,15678145,6911546,5736468,13747439,14507289,5968354,12873461,4334094,5159928,13170435,4167245,12180150,11879232,3346363,11301036,2767959,2532769,10545498,10360692,1596303,1360505,9604738,913813,9157998,8856728,92259,16439492,8164415,7343561,16138546,6897189,15692510,14936872,6662099,5986813,14488838,13733104,5750795,13156124,5174247,4352529,12855018,2810998,11315341,10498427,2522496,12124823,4148844,3397530,11901793,9135439,862644,110658,8912057,1606574,10407765,9590435,1317464,15706879,6940164,6651890,14889737,8145950,16384229,16161043,7394792,5123014,13133629,12910283,4370992,14535975,5997020,5707818,13718737,2504095,10516836,11329682,2796649,11916158,3383173,4130419,12143240,8893606,129117,876971,9121104,1331783,9576124,10389322,1625009,14908182,6633453,6925851,15721184,7380471,16175372,16402682,8127489,4389423,12891860,13119266,5137369,13704398,5722165,6015427,14517560];"undefined"!==typeof Int32Array&&(W=new Int32Array(W));const R=C("crc-24",(function(e,g){n.Buffer.isBuffer(e)||(e=I(e));let t="undefined"!==typeof g?~~g:11994318;for(let n=0;n<e.length;n++){const g=e[n];t=16777215&(W[255&(t>>16^g)]^t<<8)}return t}));var k=R;let X=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];"undefined"!==typeof Int32Array&&(X=new Int32Array(X));const J=C("crc-32",(function(e,g){n.Buffer.isBuffer(e)||(e=I(e));let t=0===g?0:-1^~~g;for(let n=0;n<e.length;n++){const g=e[n];t=X[255&(t^g)]^t>>>8}return-1^t}));var w=J;let Y=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];"undefined"!==typeof Int32Array&&(Y=new Int32Array(Y));const H=C("jam",(function(e,g=-1){n.Buffer.isBuffer(e)||(e=I(e));let t=0===g?0:~~g;for(let n=0;n<e.length;n++){const g=e[n];t=Y[255&(t^g)]^t>>>8}return t}));var N=H,F={crc1:o,crc8:a,crc81wire:A,crc16:h,crc16ccitt:p,crc16modbus:G,crc16xmodem:f,crc16kermit:V,crc24:k,crc32:w,crcjam:H}},1227:function(e,g,t){var n=t(4155);g.formatArgs=function(g){if(g[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+g[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const t="color: "+this.color;g.splice(1,0,t,"color: inherit");let n=0,I=0;g[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(I=n))})),g.splice(I,0,t)},g.save=function(e){try{e?g.storage.setItem("debug",e):g.storage.removeItem("debug")}catch(t){}},g.load=function(){let e;try{e=g.storage.getItem("debug")}catch(t){}!e&&"undefined"!==typeof n&&"env"in n&&(e=n.env.DEBUG);return e},g.useColors=function(){if("undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},g.storage=function(){try{return localStorage}catch(e){}}(),g.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),g.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],g.log=console.debug||console.log||(()=>{}),e.exports=t(2447)(g);const{formatters:I}=e.exports;I.j=function(e){try{return JSON.stringify(e)}catch(g){return"[UnexpectedJSONParseError]: "+g.message}}},2447:function(e,g,t){e.exports=function(e){function g(e){let t,I,C,r=null;function o(...e){if(!o.enabled)return;const n=o,I=Number(new Date),C=I-(t||I);n.diff=C,n.prev=t,n.curr=I,t=I,e[0]=g.coerce(e[0]),"string"!==typeof e[0]&&e.unshift("%O");let r=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((t,I)=>{if("%%"===t)return"%";r++;const C=g.formatters[I];if("function"===typeof C){const g=e[r];t=C.call(n,g),e.splice(r,1),r--}return t})),g.formatArgs.call(n,e);(n.log||g.log).apply(n,e)}return o.namespace=e,o.useColors=g.useColors(),o.color=g.selectColor(e),o.extend=n,o.destroy=g.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==r?r:(I!==g.namespaces&&(I=g.namespaces,C=g.enabled(e)),C),set:e=>{r=e}}),"function"===typeof g.init&&g.init(o),o}function n(e,t){const n=g(this.namespace+("undefined"===typeof t?":":t)+e);return n.log=this.log,n}function I(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return g.debug=g,g.default=g,g.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},g.disable=function(){const e=[...g.names.map(I),...g.skips.map(I).map((e=>"-"+e))].join(",");return g.enable(""),e},g.enable=function(e){let t;g.save(e),g.namespaces=e,g.names=[],g.skips=[];const n=("string"===typeof e?e:"").split(/[\s,]+/),I=n.length;for(t=0;t<I;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?g.skips.push(new RegExp("^"+e.substr(1)+"$")):g.names.push(new RegExp("^"+e+"$")))},g.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=g.skips.length;t<n;t++)if(g.skips[t].test(e))return!1;for(t=0,n=g.names.length;t<n;t++)if(g.names[t].test(e))return!0;return!1},g.humanize=t(7824),g.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((t=>{g[t]=e[t]})),g.names=[],g.skips=[],g.formatters={},g.selectColor=function(e){let t=0;for(let g=0;g<e.length;g++)t=(t<<5)-t+e.charCodeAt(g),t|=0;return g.colors[Math.abs(t)%g.colors.length]},g.enable(g.load()),g}},4020:function(e){"use strict";var g="%[a-f0-9]{2}",t=new RegExp(g,"gi"),n=new RegExp("("+g+")+","gi");function I(e,g){try{return decodeURIComponent(e.join(""))}catch(C){}if(1===e.length)return e;g=g||1;var t=e.slice(0,g),n=e.slice(g);return Array.prototype.concat.call([],I(t),I(n))}function C(e){try{return decodeURIComponent(e)}catch(C){for(var g=e.match(t),n=1;n<g.length;n++)g=(e=I(g,n).join("")).match(t);return e}}e.exports=function(e){if("string"!==typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(g){return function(e){for(var t={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},I=n.exec(e);I;){try{t[I[0]]=decodeURIComponent(I[0])}catch(g){var r=C(I[0]);r!==I[0]&&(t[I[0]]=r)}I=n.exec(e)}t["%C2"]="\ufffd";for(var o=Object.keys(t),i=0;i<o.length;i++){var l=o[i];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},3631:function(e,g,t){"use strict";t.d(g,{qY:function(){return A}});var n=t(4155),I=function(){for(var e=0,g=0,t=arguments.length;g<t;g++)e+=arguments[g].length;var n=Array(e),I=0;for(g=0;g<t;g++)for(var C=arguments[g],r=0,o=C.length;r<o;r++,I++)n[I]=C[r];return n},C=function(e,g,t){this.name=e,this.version=g,this.os=t,this.type="browser"},r=function(e){this.version=e,this.type="node",this.name="node",this.os=n.platform},o=function(e,g,t,n){this.name=e,this.version=g,this.os=t,this.bot=n,this.type="bot-device"},i=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},l=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},a=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,s=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],c=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function A(e){return e?d(e):"undefined"===typeof document&&"undefined"!==typeof navigator&&"ReactNative"===navigator.product?new l:"undefined"!==typeof navigator?d(navigator.userAgent):"undefined"!==typeof n&&n.version?new r(n.version.slice(1)):null}function u(e){return""!==e&&s.reduce((function(g,t){var n=t[0],I=t[1];if(g)return g;var C=I.exec(e);return!!C&&[n,C]}),!1)}function d(e){var g=u(e);if(!g)return null;var t=g[0],n=g[1];if("searchbot"===t)return new i;var r=n[1]&&n[1].split(/[._]/).slice(0,3);r?r.length<3&&(r=I(r,function(e){for(var g=[],t=0;t<e;t++)g.push("0");return g}(3-r.length))):r=[];var l=r.join("."),s=function(e){for(var g=0,t=c.length;g<t;g++){var n=c[g],I=n[0];if(n[1].exec(e))return I}return null}(e),A=a.exec(e);return A&&A[1]?new o(t,l,s,A[1]):new C(t,l,s)}},5987:function(e){"use strict";var g={single_source_shortest_paths:function(e,t,n){var I={},C={};C[t]=0;var r,o,i,l,a,s,c,A=g.PriorityQueue.make();for(A.push(t,0);!A.empty();)for(i in o=(r=A.pop()).value,l=r.cost,a=e[o]||{})a.hasOwnProperty(i)&&(s=l+a[i],c=C[i],("undefined"===typeof C[i]||c>s)&&(C[i]=s,A.push(i,s),I[i]=o));if("undefined"!==typeof n&&"undefined"===typeof C[n]){var u=["Could not find a path from ",t," to ",n,"."].join("");throw new Error(u)}return I},extract_shortest_path_from_predecessor_list:function(e,g){for(var t=[],n=g;n;)t.push(n),e[n],n=e[n];return t.reverse(),t},find_path:function(e,t,n){var I=g.single_source_shortest_paths(e,t,n);return g.extract_shortest_path_from_predecessor_list(I,n)},PriorityQueue:{make:function(e){var t,n=g.PriorityQueue,I={};for(t in e=e||{},n)n.hasOwnProperty(t)&&(I[t]=n[t]);return I.queue=[],I.sorter=e.sorter||n.default_sorter,I},default_sorter:function(e,g){return e.cost-g.cost},push:function(e,g){var t={value:e,cost:g};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=g},7187:function(e){"use strict";var g,t="object"===typeof Reflect?Reflect:null,n=t&&"function"===typeof t.apply?t.apply:function(e,g,t){return Function.prototype.apply.call(e,g,t)};g=t&&"function"===typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var I=Number.isNaN||function(e){return e!==e};function C(){C.init.call(this)}e.exports=C,e.exports.once=function(e,g){return new Promise((function(t,n){function I(t){e.removeListener(g,C),n(t)}function C(){"function"===typeof e.removeListener&&e.removeListener("error",I),t([].slice.call(arguments))}d(e,g,C,{once:!0}),"error"!==g&&function(e,g,t){"function"===typeof e.on&&d(e,"error",g,t)}(e,I,{once:!0})}))},C.EventEmitter=C,C.prototype._events=void 0,C.prototype._eventsCount=0,C.prototype._maxListeners=void 0;var r=10;function o(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function i(e){return void 0===e._maxListeners?C.defaultMaxListeners:e._maxListeners}function l(e,g,t,n){var I,C,r,l;if(o(t),void 0===(C=e._events)?(C=e._events=Object.create(null),e._eventsCount=0):(void 0!==C.newListener&&(e.emit("newListener",g,t.listener?t.listener:t),C=e._events),r=C[g]),void 0===r)r=C[g]=t,++e._eventsCount;else if("function"===typeof r?r=C[g]=n?[t,r]:[r,t]:n?r.unshift(t):r.push(t),(I=i(e))>0&&r.length>I&&!r.warned){r.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(g)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=g,a.count=r.length,l=a,console&&console.warn&&console.warn(l)}return e}function a(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function s(e,g,t){var n={fired:!1,wrapFn:void 0,target:e,type:g,listener:t},I=a.bind(n);return I.listener=t,n.wrapFn=I,I}function c(e,g,t){var n=e._events;if(void 0===n)return[];var I=n[g];return void 0===I?[]:"function"===typeof I?t?[I.listener||I]:[I]:t?function(e){for(var g=new Array(e.length),t=0;t<g.length;++t)g[t]=e[t].listener||e[t];return g}(I):u(I,I.length)}function A(e){var g=this._events;if(void 0!==g){var t=g[e];if("function"===typeof t)return 1;if(void 0!==t)return t.length}return 0}function u(e,g){for(var t=new Array(g),n=0;n<g;++n)t[n]=e[n];return t}function d(e,g,t,n){if("function"===typeof e.on)n.once?e.once(g,t):e.on(g,t);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(g,(function I(C){n.once&&e.removeEventListener(g,I),t(C)}))}}Object.defineProperty(C,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(e){if("number"!==typeof e||e<0||I(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");r=e}}),C.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},C.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||I(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},C.prototype.getMaxListeners=function(){return i(this)},C.prototype.emit=function(e){for(var g=[],t=1;t<arguments.length;t++)g.push(arguments[t]);var I="error"===e,C=this._events;if(void 0!==C)I=I&&void 0===C.error;else if(!I)return!1;if(I){var r;if(g.length>0&&(r=g[0]),r instanceof Error)throw r;var o=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw o.context=r,o}var i=C[e];if(void 0===i)return!1;if("function"===typeof i)n(i,this,g);else{var l=i.length,a=u(i,l);for(t=0;t<l;++t)n(a[t],this,g)}return!0},C.prototype.addListener=function(e,g){return l(this,e,g,!1)},C.prototype.on=C.prototype.addListener,C.prototype.prependListener=function(e,g){return l(this,e,g,!0)},C.prototype.once=function(e,g){return o(g),this.on(e,s(this,e,g)),this},C.prototype.prependOnceListener=function(e,g){return o(g),this.prependListener(e,s(this,e,g)),this},C.prototype.removeListener=function(e,g){var t,n,I,C,r;if(o(g),void 0===(n=this._events))return this;if(void 0===(t=n[e]))return this;if(t===g||t.listener===g)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,t.listener||g));else if("function"!==typeof t){for(I=-1,C=t.length-1;C>=0;C--)if(t[C]===g||t[C].listener===g){r=t[C].listener,I=C;break}if(I<0)return this;0===I?t.shift():function(e,g){for(;g+1<e.length;g++)e[g]=e[g+1];e.pop()}(t,I),1===t.length&&(n[e]=t[0]),void 0!==n.removeListener&&this.emit("removeListener",e,r||g)}return this},C.prototype.off=C.prototype.removeListener,C.prototype.removeAllListeners=function(e){var g,t,n;if(void 0===(t=this._events))return this;if(void 0===t.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==t[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete t[e]),this;if(0===arguments.length){var I,C=Object.keys(t);for(n=0;n<C.length;++n)"removeListener"!==(I=C[n])&&this.removeAllListeners(I);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(g=t[e]))this.removeListener(e,g);else if(void 0!==g)for(n=g.length-1;n>=0;n--)this.removeListener(e,g[n]);return this},C.prototype.listeners=function(e){return c(this,e,!0)},C.prototype.rawListeners=function(e){return c(this,e,!1)},C.listenerCount=function(e,g){return"function"===typeof e.listenerCount?e.listenerCount(g):A.call(e,g)},C.prototype.listenerCount=A,C.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]}},9459:function(e,g,t){"use strict";var n=this&&this.__generator||function(e,g){var t,n,I,C,r={label:0,sent:function(){if(1&I[0])throw I[1];return I[1]},trys:[],ops:[]};return C={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(C[Symbol.iterator]=function(){return this}),C;function o(C){return function(o){return function(C){if(t)throw new TypeError("Generator is already executing.");for(;r;)try{if(t=1,n&&(I=2&C[0]?n.return:C[0]?n.throw||((I=n.return)&&I.call(n),0):n.next)&&!(I=I.call(n,C[1])).done)return I;switch(n=0,I&&(C=[2&C[0],I.value]),C[0]){case 0:case 1:I=C;break;case 4:return r.label++,{value:C[1],done:!1};case 5:r.label++,n=C[1],C=[0];continue;case 7:C=r.ops.pop(),r.trys.pop();continue;default:if(!(I=(I=r.trys).length>0&&I[I.length-1])&&(6===C[0]||2===C[0])){r=0;continue}if(3===C[0]&&(!I||C[1]>I[0]&&C[1]<I[3])){r.label=C[1];break}if(6===C[0]&&r.label<I[1]){r.label=I[1],I=C;break}if(I&&r.label<I[2]){r.label=I[2],r.ops.push(C);break}I[2]&&r.ops.pop(),r.trys.pop();continue}C=g.call(e,r)}catch(o){C=[6,o],n=0}finally{t=I=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([C,o])}}},I=this&&this.__read||function(e,g){var t="function"===typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,I,C=t.call(e),r=[];try{for(;(void 0===g||g-- >0)&&!(n=C.next()).done;)r.push(n.value)}catch(o){I={error:o}}finally{try{n&&!n.done&&(t=C.return)&&t.call(C)}finally{if(I)throw I.error}}return r},C=this&&this.__values||function(e){var g="function"===typeof Symbol&&Symbol.iterator,t=g&&e[g],n=0;if(t)return t.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(g,"__esModule",{value:!0});var r=t(1926),o=t(1772),i=function(){function e(g){var t=this;(this._headers={},this._names=new Map,["Headers","HeadersPolyfill"].includes(null===g||void 0===g?void 0:g.constructor.name)||g instanceof e)?g.forEach((function(e,g){t.append(g,e)}),this):Array.isArray(g)?g.forEach((function(e){var g=I(e,2),n=g[0],C=g[1];t.append(n,Array.isArray(C)?C.join(", "):C)})):g&&Object.getOwnPropertyNames(g).forEach((function(e){var n=g[e];t.append(e,Array.isArray(n)?n.join(", "):n)}))}return e.prototype[Symbol.iterator]=function(){return this.entries()},e.prototype.keys=function(){var e,g,t,I,r;return n(this,(function(n){switch(n.label){case 0:n.trys.push([0,5,6,7]),e=C(Object.keys(this._headers)),g=e.next(),n.label=1;case 1:return g.done?[3,4]:[4,g.value];case 2:n.sent(),n.label=3;case 3:return g=e.next(),[3,1];case 4:return[3,7];case 5:return t=n.sent(),I={error:t},[3,7];case 6:try{g&&!g.done&&(r=e.return)&&r.call(e)}finally{if(I)throw I.error}return[7];case 7:return[2]}}))},e.prototype.values=function(){var e,g,t,I,r;return n(this,(function(n){switch(n.label){case 0:n.trys.push([0,5,6,7]),e=C(Object.values(this._headers)),g=e.next(),n.label=1;case 1:return g.done?[3,4]:[4,g.value];case 2:n.sent(),n.label=3;case 3:return g=e.next(),[3,1];case 4:return[3,7];case 5:return t=n.sent(),I={error:t},[3,7];case 6:try{g&&!g.done&&(r=e.return)&&r.call(e)}finally{if(I)throw I.error}return[7];case 7:return[2]}}))},e.prototype.entries=function(){var e,g,t,I,r,o;return n(this,(function(n){switch(n.label){case 0:n.trys.push([0,5,6,7]),e=C(Object.keys(this._headers)),g=e.next(),n.label=1;case 1:return g.done?[3,4]:[4,[t=g.value,this.get(t)]];case 2:n.sent(),n.label=3;case 3:return g=e.next(),[3,1];case 4:return[3,7];case 5:return I=n.sent(),r={error:I},[3,7];case 6:try{g&&!g.done&&(o=e.return)&&o.call(e)}finally{if(r)throw r.error}return[7];case 7:return[2]}}))},e.prototype.get=function(e){return this._headers[r.normalizeHeaderName(e)]||null},e.prototype.set=function(e,g){var t=r.normalizeHeaderName(e);this._headers[t]=o.normalizeHeaderValue(g),this._names.set(t,e)},e.prototype.append=function(e,g){var t=this.has(e)?this.get(e)+", "+g:g;this.set(e,t)},e.prototype.delete=function(e){if(!this.has(e))return this;var g=r.normalizeHeaderName(e);return delete this._headers[g],this._names.delete(g),this},e.prototype.all=function(){return this._headers},e.prototype.raw=function(){var e=this;return Object.entries(this._headers).reduce((function(g,t){var n=I(t,2),C=n[0],r=n[1];return g[e._names.get(C)]=r,g}),{})},e.prototype.has=function(e){return this._headers.hasOwnProperty(r.normalizeHeaderName(e))},e.prototype.forEach=function(e,g){for(var t in this._headers)this._headers.hasOwnProperty(t)&&e.call(g,this._headers[t],t,this)},e}();g.default=i},3602:function(e,g,t){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.flattenHeadersObject=g.flattenHeadersList=g.reduceHeadersObject=g.objectToHeaders=g.listToHeaders=g.stringToHeaders=g.headersToObject=g.headersToList=g.headersToString=g.Headers=void 0;var n=t(9459);Object.defineProperty(g,"Headers",{enumerable:!0,get:function(){return n.default}});var I=t(5129);Object.defineProperty(g,"headersToString",{enumerable:!0,get:function(){return I.headersToString}});var C=t(7801);Object.defineProperty(g,"headersToList",{enumerable:!0,get:function(){return C.headersToList}});var r=t(398);Object.defineProperty(g,"headersToObject",{enumerable:!0,get:function(){return r.headersToObject}});var o=t(1694);Object.defineProperty(g,"stringToHeaders",{enumerable:!0,get:function(){return o.stringToHeaders}});var i=t(4599);Object.defineProperty(g,"listToHeaders",{enumerable:!0,get:function(){return i.listToHeaders}});var l=t(704);Object.defineProperty(g,"objectToHeaders",{enumerable:!0,get:function(){return l.objectToHeaders}});var a=t(3952);Object.defineProperty(g,"reduceHeadersObject",{enumerable:!0,get:function(){return a.reduceHeadersObject}});var s=t(6223);Object.defineProperty(g,"flattenHeadersList",{enumerable:!0,get:function(){return s.flattenHeadersList}});var c=t(8289);Object.defineProperty(g,"flattenHeadersObject",{enumerable:!0,get:function(){return c.flattenHeadersObject}})},6223:function(e,g){"use strict";var t=this&&this.__read||function(e,g){var t="function"===typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,I,C=t.call(e),r=[];try{for(;(void 0===g||g-- >0)&&!(n=C.next()).done;)r.push(n.value)}catch(o){I={error:o}}finally{try{n&&!n.done&&(t=C.return)&&t.call(C)}finally{if(I)throw I.error}}return r};Object.defineProperty(g,"__esModule",{value:!0}),g.flattenHeadersList=void 0,g.flattenHeadersList=function(e){return e.map((function(e){var g=t(e,2),n=g[0],I=g[1];return[n,[].concat(I).join("; ")]}))}},8289:function(e,g,t){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.flattenHeadersObject=void 0;var n=t(3952);g.flattenHeadersObject=function(e){return n.reduceHeadersObject(e,(function(e,g,t){return e[g]=[].concat(t).join("; "),e}),{})}},7801:function(e,g){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.headersToList=void 0,g.headersToList=function(e){var g=[];return e.forEach((function(e,t){var n=e.includes(",")?e.split(",").map((function(e){return e.trim()})):e;g.push([t,n])})),g}},398:function(e,g){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.headersToObject=void 0;var t=["user-agent"];g.headersToObject=function(e){var g={};return e.forEach((function(e,n){var I=!t.includes(n.toLowerCase())&&e.includes(",");g[n]=I?e.split(",").map((function(e){return e.trim()})):e})),g}},5129:function(e,g,t){"use strict";var n=this&&this.__read||function(e,g){var t="function"===typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,I,C=t.call(e),r=[];try{for(;(void 0===g||g-- >0)&&!(n=C.next()).done;)r.push(n.value)}catch(o){I={error:o}}finally{try{n&&!n.done&&(t=C.return)&&t.call(C)}finally{if(I)throw I.error}}return r};Object.defineProperty(g,"__esModule",{value:!0}),g.headersToString=void 0;var I=t(7801);g.headersToString=function(e){return I.headersToList(e).map((function(e){var g=n(e,2),t=g[0],I=g[1];return t+": "+[].concat(I).join(", ")})).join("\r\n")}},4599:function(e,g,t){"use strict";var n=this&&this.__read||function(e,g){var t="function"===typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,I,C=t.call(e),r=[];try{for(;(void 0===g||g-- >0)&&!(n=C.next()).done;)r.push(n.value)}catch(o){I={error:o}}finally{try{n&&!n.done&&(t=C.return)&&t.call(C)}finally{if(I)throw I.error}}return r};Object.defineProperty(g,"__esModule",{value:!0}),g.listToHeaders=void 0;var I=t(9459);g.listToHeaders=function(e){var g=new I.default;return e.forEach((function(e){var t=n(e,2),I=t[0],C=t[1];[].concat(C).forEach((function(e){g.append(I,e)}))})),g}},704:function(e,g,t){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.objectToHeaders=void 0;var n=t(9459),I=t(3952);g.objectToHeaders=function(e){return I.reduceHeadersObject(e,(function(e,g,t){return[].concat(t).filter(Boolean).forEach((function(t){e.append(g,t)})),e}),new n.default)}},3952:function(e,g){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.reduceHeadersObject=void 0,g.reduceHeadersObject=function(e,g,t){return Object.keys(e).reduce((function(t,n){return g(t,n,e[n])}),t)}},1694:function(e,g,t){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.stringToHeaders=void 0;var n=t(9459);g.stringToHeaders=function(e){return e.trim().split(/[\r\n]+/).reduce((function(e,g){if(""===g.trim())return e;var t=g.split(": "),n=t.shift(),I=t.join(": ");return e.append(n,I),e}),new n.default)}},1926:function(e,g){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.normalizeHeaderName=void 0;var t=/[^a-z0-9\-#$%&'*+.^_`|~]/i;g.normalizeHeaderName=function(e){if("string"!==typeof e&&(e=String(e)),t.test(e)||""===e.trim())throw new TypeError("Invalid character in header field name");return e.toLowerCase()}},1772:function(e,g){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.normalizeHeaderValue=void 0,g.normalizeHeaderValue=function(e){return"string"!==typeof e&&(e=String(e)),e}},645:function(e,g){g.read=function(e,g,t,n,I){var C,r,o=8*I-n-1,i=(1<<o)-1,l=i>>1,a=-7,s=t?I-1:0,c=t?-1:1,A=e[g+s];for(s+=c,C=A&(1<<-a)-1,A>>=-a,a+=o;a>0;C=256*C+e[g+s],s+=c,a-=8);for(r=C&(1<<-a)-1,C>>=-a,a+=n;a>0;r=256*r+e[g+s],s+=c,a-=8);if(0===C)C=1-l;else{if(C===i)return r?NaN:1/0*(A?-1:1);r+=Math.pow(2,n),C-=l}return(A?-1:1)*r*Math.pow(2,C-n)},g.write=function(e,g,t,n,I,C){var r,o,i,l=8*C-I-1,a=(1<<l)-1,s=a>>1,c=23===I?Math.pow(2,-24)-Math.pow(2,-77):0,A=n?0:C-1,u=n?1:-1,d=g<0||0===g&&1/g<0?1:0;for(g=Math.abs(g),isNaN(g)||g===1/0?(o=isNaN(g)?1:0,r=a):(r=Math.floor(Math.log(g)/Math.LN2),g*(i=Math.pow(2,-r))<1&&(r--,i*=2),(g+=r+s>=1?c/i:c*Math.pow(2,1-s))*i>=2&&(r++,i/=2),r+s>=a?(o=0,r=a):r+s>=1?(o=(g*i-1)*Math.pow(2,I),r+=s):(o=g*Math.pow(2,s-1)*Math.pow(2,I),r=0));I>=8;e[t+A]=255&o,A+=u,o/=256,I-=8);for(r=r<<I|o,l+=I;l>0;e[t+A]=255&r,A+=u,r/=256,l-=8);e[t+A-u]|=128*d}},4501:function(e){e.exports=n,n.strict=I,n.loose=C;var g=Object.prototype.toString,t={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function n(e){return I(e)||C(e)}function I(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function C(e){return t[g.call(e)]}},1094:function(e,g,t){var n,I=t(4155);!function(){"use strict";var C="input is invalid type",r="object"===typeof window,o=r?window:{};o.JS_SHA3_NO_WINDOW&&(r=!1);var i=!r&&"object"===typeof self;!o.JS_SHA3_NO_NODE_JS&&"object"===typeof I&&I.versions&&I.versions.node?o=t.g:i&&(o=self);var l=!o.JS_SHA3_NO_COMMON_JS&&e.exports,a=t.amdO,s=!o.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!==typeof ArrayBuffer,c="0123456789abcdef".split(""),A=[4,1024,262144,67108864],u=[0,8,16,24],d=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],h=[224,256,384,512],m=[128,256],b=["hex","buffer","arrayBuffer","array","digest"],p={128:168,256:136};!o.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!s||!o.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"===typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var Z=function(e,g,t){return function(n){return new H(e,g,e).update(n)[t]()}},y=function(e,g,t){return function(n,I){return new H(e,g,I).update(n)[t]()}},G=function(e,g,t){return function(g,n,I,C){return V["cshake"+e].update(g,n,I,C)[t]()}},B=function(e,g,t){return function(g,n,I,C){return V["kmac"+e].update(g,n,I,C)[t]()}},f=function(e,g,t,n){for(var I=0;I<b.length;++I){var C=b[I];e[C]=g(t,n,C)}return e},v=function(e,g){var t=Z(e,g,"hex");return t.create=function(){return new H(e,g,e)},t.update=function(e){return t.create().update(e)},f(t,Z,e,g)},S=[{name:"keccak",padding:[1,256,65536,16777216],bits:h,createMethod:v},{name:"sha3",padding:[6,1536,393216,100663296],bits:h,createMethod:v},{name:"shake",padding:[31,7936,2031616,520093696],bits:m,createMethod:function(e,g){var t=y(e,g,"hex");return t.create=function(t){return new H(e,g,t)},t.update=function(e,g){return t.create(g).update(e)},f(t,y,e,g)}},{name:"cshake",padding:A,bits:m,createMethod:function(e,g){var t=p[e],n=G(e,0,"hex");return n.create=function(n,I,C){return I||C?new H(e,g,n).bytepad([I,C],t):V["shake"+e].create(n)},n.update=function(e,g,t,I){return n.create(g,t,I).update(e)},f(n,G,e,g)}},{name:"kmac",padding:A,bits:m,createMethod:function(e,g){var t=p[e],n=B(e,0,"hex");return n.create=function(n,I,C){return new N(e,g,I).bytepad(["KMAC",C],t).bytepad([n],t)},n.update=function(e,g,t,I){return n.create(e,t,I).update(g)},f(n,B,e,g)}}],V={},W=[],R=0;R<S.length;++R)for(var k=S[R],X=k.bits,J=0;J<X.length;++J){var w=k.name+"_"+X[J];if(W.push(w),V[w]=k.createMethod(X[J],k.padding),"sha3"!==k.name){var Y=k.name+X[J];W.push(Y),V[Y]=V[w]}}function H(e,g,t){this.blocks=[],this.s=[],this.padding=g,this.outputBits=t,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=t>>5,this.extraBytes=(31&t)>>3;for(var n=0;n<50;++n)this.s[n]=0}function N(e,g,t){H.call(this,e,g,t)}H.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var g,t=typeof e;if("string"!==t){if("object"!==t)throw new Error(C);if(null===e)throw new Error(C);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!s||!ArrayBuffer.isView(e)))throw new Error(C);g=!0}for(var n,I,r=this.blocks,o=this.byteCount,i=e.length,l=this.blockCount,a=0,c=this.s;a<i;){if(this.reset)for(this.reset=!1,r[0]=this.block,n=1;n<l+1;++n)r[n]=0;if(g)for(n=this.start;a<i&&n<o;++a)r[n>>2]|=e[a]<<u[3&n++];else for(n=this.start;a<i&&n<o;++a)(I=e.charCodeAt(a))<128?r[n>>2]|=I<<u[3&n++]:I<2048?(r[n>>2]|=(192|I>>6)<<u[3&n++],r[n>>2]|=(128|63&I)<<u[3&n++]):I<55296||I>=57344?(r[n>>2]|=(224|I>>12)<<u[3&n++],r[n>>2]|=(128|I>>6&63)<<u[3&n++],r[n>>2]|=(128|63&I)<<u[3&n++]):(I=65536+((1023&I)<<10|1023&e.charCodeAt(++a)),r[n>>2]|=(240|I>>18)<<u[3&n++],r[n>>2]|=(128|I>>12&63)<<u[3&n++],r[n>>2]|=(128|I>>6&63)<<u[3&n++],r[n>>2]|=(128|63&I)<<u[3&n++]);if(this.lastByteIndex=n,n>=o){for(this.start=n-o,this.block=r[l],n=0;n<l;++n)c[n]^=r[n];F(c),this.reset=!0}else this.start=n}return this},H.prototype.encode=function(e,g){var t=255&e,n=1,I=[t];for(t=255&(e>>=8);t>0;)I.unshift(t),t=255&(e>>=8),++n;return g?I.push(n):I.unshift(n),this.update(I),I.length},H.prototype.encodeString=function(e){var g,t=typeof e;if("string"!==t){if("object"!==t)throw new Error(C);if(null===e)throw new Error(C);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!s||!ArrayBuffer.isView(e)))throw new Error(C);g=!0}var n=0,I=e.length;if(g)n=I;else for(var r=0;r<e.length;++r){var o=e.charCodeAt(r);o<128?n+=1:o<2048?n+=2:o<55296||o>=57344?n+=3:(o=65536+((1023&o)<<10|1023&e.charCodeAt(++r)),n+=4)}return n+=this.encode(8*n),this.update(e),n},H.prototype.bytepad=function(e,g){for(var t=this.encode(g),n=0;n<e.length;++n)t+=this.encodeString(e[n]);var I=g-t%g,C=[];return C.length=I,this.update(C),this},H.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,g=this.lastByteIndex,t=this.blockCount,n=this.s;if(e[g>>2]|=this.padding[3&g],this.lastByteIndex===this.byteCount)for(e[0]=e[t],g=1;g<t+1;++g)e[g]=0;for(e[t-1]|=2147483648,g=0;g<t;++g)n[g]^=e[g];F(n)}},H.prototype.toString=H.prototype.hex=function(){this.finalize();for(var e,g=this.blockCount,t=this.s,n=this.outputBlocks,I=this.extraBytes,C=0,r=0,o="";r<n;){for(C=0;C<g&&r<n;++C,++r)e=t[C],o+=c[e>>4&15]+c[15&e]+c[e>>12&15]+c[e>>8&15]+c[e>>20&15]+c[e>>16&15]+c[e>>28&15]+c[e>>24&15];r%g===0&&(F(t),C=0)}return I&&(e=t[C],o+=c[e>>4&15]+c[15&e],I>1&&(o+=c[e>>12&15]+c[e>>8&15]),I>2&&(o+=c[e>>20&15]+c[e>>16&15])),o},H.prototype.arrayBuffer=function(){this.finalize();var e,g=this.blockCount,t=this.s,n=this.outputBlocks,I=this.extraBytes,C=0,r=0,o=this.outputBits>>3;e=I?new ArrayBuffer(n+1<<2):new ArrayBuffer(o);for(var i=new Uint32Array(e);r<n;){for(C=0;C<g&&r<n;++C,++r)i[r]=t[C];r%g===0&&F(t)}return I&&(i[C]=t[C],e=e.slice(0,o)),e},H.prototype.buffer=H.prototype.arrayBuffer,H.prototype.digest=H.prototype.array=function(){this.finalize();for(var e,g,t=this.blockCount,n=this.s,I=this.outputBlocks,C=this.extraBytes,r=0,o=0,i=[];o<I;){for(r=0;r<t&&o<I;++r,++o)e=o<<2,g=n[r],i[e]=255&g,i[e+1]=g>>8&255,i[e+2]=g>>16&255,i[e+3]=g>>24&255;o%t===0&&F(n)}return C&&(e=o<<2,g=n[r],i[e]=255&g,C>1&&(i[e+1]=g>>8&255),C>2&&(i[e+2]=g>>16&255)),i},N.prototype=new H,N.prototype.finalize=function(){return this.encode(this.outputBits,!0),H.prototype.finalize.call(this)};var F=function(e){var g,t,n,I,C,r,o,i,l,a,s,c,A,u,h,m,b,p,Z,y,G,B,f,v,S,V,W,R,k,X,J,w,Y,H,N,F,K,E,x,M,U,T,z,L,Q,D,j,O,P,_,q,$,ee,ge,te,ne,Ie,Ce,re,oe,ie,le,ae;for(n=0;n<48;n+=2)I=e[0]^e[10]^e[20]^e[30]^e[40],C=e[1]^e[11]^e[21]^e[31]^e[41],r=e[2]^e[12]^e[22]^e[32]^e[42],o=e[3]^e[13]^e[23]^e[33]^e[43],i=e[4]^e[14]^e[24]^e[34]^e[44],l=e[5]^e[15]^e[25]^e[35]^e[45],a=e[6]^e[16]^e[26]^e[36]^e[46],s=e[7]^e[17]^e[27]^e[37]^e[47],g=(c=e[8]^e[18]^e[28]^e[38]^e[48])^(r<<1|o>>>31),t=(A=e[9]^e[19]^e[29]^e[39]^e[49])^(o<<1|r>>>31),e[0]^=g,e[1]^=t,e[10]^=g,e[11]^=t,e[20]^=g,e[21]^=t,e[30]^=g,e[31]^=t,e[40]^=g,e[41]^=t,g=I^(i<<1|l>>>31),t=C^(l<<1|i>>>31),e[2]^=g,e[3]^=t,e[12]^=g,e[13]^=t,e[22]^=g,e[23]^=t,e[32]^=g,e[33]^=t,e[42]^=g,e[43]^=t,g=r^(a<<1|s>>>31),t=o^(s<<1|a>>>31),e[4]^=g,e[5]^=t,e[14]^=g,e[15]^=t,e[24]^=g,e[25]^=t,e[34]^=g,e[35]^=t,e[44]^=g,e[45]^=t,g=i^(c<<1|A>>>31),t=l^(A<<1|c>>>31),e[6]^=g,e[7]^=t,e[16]^=g,e[17]^=t,e[26]^=g,e[27]^=t,e[36]^=g,e[37]^=t,e[46]^=g,e[47]^=t,g=a^(I<<1|C>>>31),t=s^(C<<1|I>>>31),e[8]^=g,e[9]^=t,e[18]^=g,e[19]^=t,e[28]^=g,e[29]^=t,e[38]^=g,e[39]^=t,e[48]^=g,e[49]^=t,u=e[0],h=e[1],D=e[11]<<4|e[10]>>>28,j=e[10]<<4|e[11]>>>28,R=e[20]<<3|e[21]>>>29,k=e[21]<<3|e[20]>>>29,oe=e[31]<<9|e[30]>>>23,ie=e[30]<<9|e[31]>>>23,T=e[40]<<18|e[41]>>>14,z=e[41]<<18|e[40]>>>14,H=e[2]<<1|e[3]>>>31,N=e[3]<<1|e[2]>>>31,m=e[13]<<12|e[12]>>>20,b=e[12]<<12|e[13]>>>20,O=e[22]<<10|e[23]>>>22,P=e[23]<<10|e[22]>>>22,X=e[33]<<13|e[32]>>>19,J=e[32]<<13|e[33]>>>19,le=e[42]<<2|e[43]>>>30,ae=e[43]<<2|e[42]>>>30,ge=e[5]<<30|e[4]>>>2,te=e[4]<<30|e[5]>>>2,F=e[14]<<6|e[15]>>>26,K=e[15]<<6|e[14]>>>26,p=e[25]<<11|e[24]>>>21,Z=e[24]<<11|e[25]>>>21,_=e[34]<<15|e[35]>>>17,q=e[35]<<15|e[34]>>>17,w=e[45]<<29|e[44]>>>3,Y=e[44]<<29|e[45]>>>3,v=e[6]<<28|e[7]>>>4,S=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,Ie=e[16]<<23|e[17]>>>9,E=e[26]<<25|e[27]>>>7,x=e[27]<<25|e[26]>>>7,y=e[36]<<21|e[37]>>>11,G=e[37]<<21|e[36]>>>11,$=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,L=e[8]<<27|e[9]>>>5,Q=e[9]<<27|e[8]>>>5,V=e[18]<<20|e[19]>>>12,W=e[19]<<20|e[18]>>>12,Ce=e[29]<<7|e[28]>>>25,re=e[28]<<7|e[29]>>>25,M=e[38]<<8|e[39]>>>24,U=e[39]<<8|e[38]>>>24,B=e[48]<<14|e[49]>>>18,f=e[49]<<14|e[48]>>>18,e[0]=u^~m&p,e[1]=h^~b&Z,e[10]=v^~V&R,e[11]=S^~W&k,e[20]=H^~F&E,e[21]=N^~K&x,e[30]=L^~D&O,e[31]=Q^~j&P,e[40]=ge^~ne&Ce,e[41]=te^~Ie&re,e[2]=m^~p&y,e[3]=b^~Z&G,e[12]=V^~R&X,e[13]=W^~k&J,e[22]=F^~E&M,e[23]=K^~x&U,e[32]=D^~O&_,e[33]=j^~P&q,e[42]=ne^~Ce&oe,e[43]=Ie^~re&ie,e[4]=p^~y&B,e[5]=Z^~G&f,e[14]=R^~X&w,e[15]=k^~J&Y,e[24]=E^~M&T,e[25]=x^~U&z,e[34]=O^~_&$,e[35]=P^~q&ee,e[44]=Ce^~oe&le,e[45]=re^~ie&ae,e[6]=y^~B&u,e[7]=G^~f&h,e[16]=X^~w&v,e[17]=J^~Y&S,e[26]=M^~T&H,e[27]=U^~z&N,e[36]=_^~$&L,e[37]=q^~ee&Q,e[46]=oe^~le&ge,e[47]=ie^~ae&te,e[8]=B^~u&m,e[9]=f^~h&b,e[18]=w^~v&V,e[19]=Y^~S&W,e[28]=T^~H&F,e[29]=z^~N&K,e[38]=$^~L&D,e[39]=ee^~Q&j,e[48]=le^~ge&ne,e[49]=ae^~te&Ie,e[0]^=d[n],e[1]^=d[n+1]};if(l)e.exports=V;else{for(R=0;R<W.length;++R)o[W[R]]=V[W[R]];a&&(void 0===(n=function(){return V}.call(g,t,g,e))||(e.exports=n))}}()},3434:function(e,g,t){var n,I=t(4155);!function(){"use strict";var g="input is invalid type",C="object"===typeof window,r=C?window:{};r.JS_SHA512_NO_WINDOW&&(C=!1);var o=!C&&"object"===typeof self;!r.JS_SHA512_NO_NODE_JS&&"object"===typeof I&&I.versions&&I.versions.node?r=t.g:o&&(r=self);var i=!r.JS_SHA512_NO_COMMON_JS&&e.exports,l=t.amdO,a=!r.JS_SHA512_NO_ARRAY_BUFFER&&"undefined"!==typeof ArrayBuffer,s="0123456789abcdef".split(""),c=[-2147483648,8388608,32768,128],A=[24,16,8,0],u=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],d=["hex","array","digest","arrayBuffer"],h=[];!r.JS_SHA512_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!a||!r.JS_SHA512_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"===typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var m=function(e,g){return function(t){return new y(g,!0).update(t)[e]()}},b=function(e){var g=m("hex",e);g.create=function(){return new y(e)},g.update=function(e){return g.create().update(e)};for(var t=0;t<d.length;++t){var n=d[t];g[n]=m(n,e)}return g},p=function(e,g){return function(t,n){return new G(t,g,!0).update(n)[e]()}},Z=function(e){var g=p("hex",e);g.create=function(g){return new G(g,e)},g.update=function(e,t){return g.create(e).update(t)};for(var t=0;t<d.length;++t){var n=d[t];g[n]=p(n,e)}return g};function y(e,g){g?(h[0]=h[1]=h[2]=h[3]=h[4]=h[5]=h[6]=h[7]=h[8]=h[9]=h[10]=h[11]=h[12]=h[13]=h[14]=h[15]=h[16]=h[17]=h[18]=h[19]=h[20]=h[21]=h[22]=h[23]=h[24]=h[25]=h[26]=h[27]=h[28]=h[29]=h[30]=h[31]=h[32]=0,this.blocks=h):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],384==e?(this.h0h=3418070365,this.h0l=3238371032,this.h1h=1654270250,this.h1l=914150663,this.h2h=2438529370,this.h2l=812702999,this.h3h=355462360,this.h3l=4144912697,this.h4h=1731405415,this.h4l=4290775857,this.h5h=2394180231,this.h5l=1750603025,this.h6h=3675008525,this.h6l=1694076839,this.h7h=1203062813,this.h7l=3204075428):256==e?(this.h0h=573645204,this.h0l=4230739756,this.h1h=2673172387,this.h1l=3360449730,this.h2h=596883563,this.h2l=1867755857,this.h3h=2520282905,this.h3l=1497426621,this.h4h=2519219938,this.h4l=2827943907,this.h5h=3193839141,this.h5l=1401305490,this.h6h=721525244,this.h6l=746961066,this.h7h=246885852,this.h7l=2177182882):224==e?(this.h0h=2352822216,this.h0l=424955298,this.h1h=1944164710,this.h1l=2312950998,this.h2h=502970286,this.h2l=855612546,this.h3h=1738396948,this.h3l=1479516111,this.h4h=258812777,this.h4l=2077511080,this.h5h=2011393907,this.h5l=79989058,this.h6h=1067287976,this.h6l=1780299464,this.h7h=286451373,this.h7l=2446758561):(this.h0h=1779033703,this.h0l=4089235720,this.h1h=3144134277,this.h1l=2227873595,this.h2h=1013904242,this.h2l=4271175723,this.h3h=2773480762,this.h3l=1595750129,this.h4h=1359893119,this.h4l=2917565137,this.h5h=2600822924,this.h5l=725511199,this.h6h=528734635,this.h6l=4215389547,this.h7h=1541459225,this.h7l=327033209),this.bits=e,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1}function G(e,t,n){var I,C=typeof e;if("string"!==C){if("object"!==C)throw new Error(g);if(null===e)throw new Error(g);if(a&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!a||!ArrayBuffer.isView(e)))throw new Error(g);I=!0}var r=e.length;if(!I){for(var o,i=[],l=(r=e.length,0),s=0;s<r;++s)(o=e.charCodeAt(s))<128?i[l++]=o:o<2048?(i[l++]=192|o>>6,i[l++]=128|63&o):o<55296||o>=57344?(i[l++]=224|o>>12,i[l++]=128|o>>6&63,i[l++]=128|63&o):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++s)),i[l++]=240|o>>18,i[l++]=128|o>>12&63,i[l++]=128|o>>6&63,i[l++]=128|63&o);e=i}e.length>128&&(e=new y(t,!0).update(e).array());var c=[],A=[];for(s=0;s<128;++s){var u=e[s]||0;c[s]=92^u,A[s]=54^u}y.call(this,t,n),this.update(A),this.oKeyPad=c,this.inner=!0,this.sharedMemory=n}y.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var t,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(g);if(null===e)throw new Error(g);if(a&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!a||!ArrayBuffer.isView(e)))throw new Error(g);t=!0}for(var I,C,r=0,o=e.length,i=this.blocks;r<o;){if(this.hashed&&(this.hashed=!1,i[0]=this.block,i[1]=i[2]=i[3]=i[4]=i[5]=i[6]=i[7]=i[8]=i[9]=i[10]=i[11]=i[12]=i[13]=i[14]=i[15]=i[16]=i[17]=i[18]=i[19]=i[20]=i[21]=i[22]=i[23]=i[24]=i[25]=i[26]=i[27]=i[28]=i[29]=i[30]=i[31]=i[32]=0),t)for(C=this.start;r<o&&C<128;++r)i[C>>2]|=e[r]<<A[3&C++];else for(C=this.start;r<o&&C<128;++r)(I=e.charCodeAt(r))<128?i[C>>2]|=I<<A[3&C++]:I<2048?(i[C>>2]|=(192|I>>6)<<A[3&C++],i[C>>2]|=(128|63&I)<<A[3&C++]):I<55296||I>=57344?(i[C>>2]|=(224|I>>12)<<A[3&C++],i[C>>2]|=(128|I>>6&63)<<A[3&C++],i[C>>2]|=(128|63&I)<<A[3&C++]):(I=65536+((1023&I)<<10|1023&e.charCodeAt(++r)),i[C>>2]|=(240|I>>18)<<A[3&C++],i[C>>2]|=(128|I>>12&63)<<A[3&C++],i[C>>2]|=(128|I>>6&63)<<A[3&C++],i[C>>2]|=(128|63&I)<<A[3&C++]);this.lastByteIndex=C,this.bytes+=C-this.start,C>=128?(this.block=i[32],this.start=C-128,this.hash(),this.hashed=!0):this.start=C}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this},y.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,g=this.lastByteIndex;e[32]=this.block,e[g>>2]|=c[3&g],this.block=e[32],g>=112&&(this.hashed||this.hash(),e[0]=this.block,e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=e[16]=e[17]=e[18]=e[19]=e[20]=e[21]=e[22]=e[23]=e[24]=e[25]=e[26]=e[27]=e[28]=e[29]=e[30]=e[31]=e[32]=0),e[30]=this.hBytes<<3|this.bytes>>>29,e[31]=this.bytes<<3,this.hash()}},y.prototype.hash=function(){var e,g,t,n,I,C,r,o,i,l,a,s,c,A,d,h,m,b,p,Z,y,G,B,f,v,S=this.h0h,V=this.h0l,W=this.h1h,R=this.h1l,k=this.h2h,X=this.h2l,J=this.h3h,w=this.h3l,Y=this.h4h,H=this.h4l,N=this.h5h,F=this.h5l,K=this.h6h,E=this.h6l,x=this.h7h,M=this.h7l,U=this.blocks;for(e=32;e<160;e+=2)g=((Z=U[e-30])>>>1|(y=U[e-29])<<31)^(Z>>>8|y<<24)^Z>>>7,t=(y>>>1|Z<<31)^(y>>>8|Z<<24)^(y>>>7|Z<<25),n=((Z=U[e-4])>>>19|(y=U[e-3])<<13)^(y>>>29|Z<<3)^Z>>>6,I=(y>>>19|Z<<13)^(Z>>>29|y<<3)^(y>>>6|Z<<26),Z=U[e-32],y=U[e-31],i=((G=U[e-14])>>>16)+(Z>>>16)+(g>>>16)+(n>>>16)+((o=(65535&G)+(65535&Z)+(65535&g)+(65535&n)+((r=((B=U[e-13])>>>16)+(y>>>16)+(t>>>16)+(I>>>16)+((C=(65535&B)+(65535&y)+(65535&t)+(65535&I))>>>16))>>>16))>>>16),U[e]=i<<16|65535&o,U[e+1]=r<<16|65535&C;var T=S,z=V,L=W,Q=R,D=k,j=X,O=J,P=w,_=Y,q=H,$=N,ee=F,ge=K,te=E,ne=x,Ie=M;for(h=L&D,m=Q&j,e=0;e<160;e+=8)g=(T>>>28|z<<4)^(z>>>2|T<<30)^(z>>>7|T<<25),t=(z>>>28|T<<4)^(T>>>2|z<<30)^(T>>>7|z<<25),n=(_>>>14|q<<18)^(_>>>18|q<<14)^(q>>>9|_<<23),I=(q>>>14|_<<18)^(q>>>18|_<<14)^(_>>>9|q<<23),b=(l=T&L)^T&D^h,p=(a=z&Q)^z&j^m,f=_&$^~_&ge,v=q&ee^~q&te,Z=U[e],y=U[e+1],Z=(i=((G=u[e])>>>16)+(Z>>>16)+(f>>>16)+(n>>>16)+(ne>>>16)+((o=(65535&G)+(65535&Z)+(65535&f)+(65535&n)+(65535&ne)+((r=((B=u[e+1])>>>16)+(y>>>16)+(v>>>16)+(I>>>16)+(Ie>>>16)+((C=(65535&B)+(65535&y)+(65535&v)+(65535&I)+(65535&Ie))>>>16))>>>16))>>>16))<<16|65535&o,y=r<<16|65535&C,G=(i=(b>>>16)+(g>>>16)+((o=(65535&b)+(65535&g)+((r=(p>>>16)+(t>>>16)+((C=(65535&p)+(65535&t))>>>16))>>>16))>>>16))<<16|65535&o,B=r<<16|65535&C,ne=(i=(O>>>16)+(Z>>>16)+((o=(65535&O)+(65535&Z)+((r=(P>>>16)+(y>>>16)+((C=(65535&P)+(65535&y))>>>16))>>>16))>>>16))<<16|65535&o,Ie=r<<16|65535&C,g=((O=(i=(G>>>16)+(Z>>>16)+((o=(65535&G)+(65535&Z)+((r=(B>>>16)+(y>>>16)+((C=(65535&B)+(65535&y))>>>16))>>>16))>>>16))<<16|65535&o)>>>28|(P=r<<16|65535&C)<<4)^(P>>>2|O<<30)^(P>>>7|O<<25),t=(P>>>28|O<<4)^(O>>>2|P<<30)^(O>>>7|P<<25),n=(ne>>>14|Ie<<18)^(ne>>>18|Ie<<14)^(Ie>>>9|ne<<23),I=(Ie>>>14|ne<<18)^(Ie>>>18|ne<<14)^(ne>>>9|Ie<<23),b=(s=O&T)^O&L^l,p=(c=P&z)^P&Q^a,f=ne&_^~ne&$,v=Ie&q^~Ie&ee,Z=U[e+2],y=U[e+3],Z=(i=((G=u[e+2])>>>16)+(Z>>>16)+(f>>>16)+(n>>>16)+(ge>>>16)+((o=(65535&G)+(65535&Z)+(65535&f)+(65535&n)+(65535&ge)+((r=((B=u[e+3])>>>16)+(y>>>16)+(v>>>16)+(I>>>16)+(te>>>16)+((C=(65535&B)+(65535&y)+(65535&v)+(65535&I)+(65535&te))>>>16))>>>16))>>>16))<<16|65535&o,y=r<<16|65535&C,G=(i=(b>>>16)+(g>>>16)+((o=(65535&b)+(65535&g)+((r=(p>>>16)+(t>>>16)+((C=(65535&p)+(65535&t))>>>16))>>>16))>>>16))<<16|65535&o,B=r<<16|65535&C,ge=(i=(D>>>16)+(Z>>>16)+((o=(65535&D)+(65535&Z)+((r=(j>>>16)+(y>>>16)+((C=(65535&j)+(65535&y))>>>16))>>>16))>>>16))<<16|65535&o,te=r<<16|65535&C,g=((D=(i=(G>>>16)+(Z>>>16)+((o=(65535&G)+(65535&Z)+((r=(B>>>16)+(y>>>16)+((C=(65535&B)+(65535&y))>>>16))>>>16))>>>16))<<16|65535&o)>>>28|(j=r<<16|65535&C)<<4)^(j>>>2|D<<30)^(j>>>7|D<<25),t=(j>>>28|D<<4)^(D>>>2|j<<30)^(D>>>7|j<<25),n=(ge>>>14|te<<18)^(ge>>>18|te<<14)^(te>>>9|ge<<23),I=(te>>>14|ge<<18)^(te>>>18|ge<<14)^(ge>>>9|te<<23),b=(A=D&O)^D&T^s,p=(d=j&P)^j&z^c,f=ge&ne^~ge&_,v=te&Ie^~te&q,Z=U[e+4],y=U[e+5],Z=(i=((G=u[e+4])>>>16)+(Z>>>16)+(f>>>16)+(n>>>16)+($>>>16)+((o=(65535&G)+(65535&Z)+(65535&f)+(65535&n)+(65535&$)+((r=((B=u[e+5])>>>16)+(y>>>16)+(v>>>16)+(I>>>16)+(ee>>>16)+((C=(65535&B)+(65535&y)+(65535&v)+(65535&I)+(65535&ee))>>>16))>>>16))>>>16))<<16|65535&o,y=r<<16|65535&C,G=(i=(b>>>16)+(g>>>16)+((o=(65535&b)+(65535&g)+((r=(p>>>16)+(t>>>16)+((C=(65535&p)+(65535&t))>>>16))>>>16))>>>16))<<16|65535&o,B=r<<16|65535&C,$=(i=(L>>>16)+(Z>>>16)+((o=(65535&L)+(65535&Z)+((r=(Q>>>16)+(y>>>16)+((C=(65535&Q)+(65535&y))>>>16))>>>16))>>>16))<<16|65535&o,ee=r<<16|65535&C,g=((L=(i=(G>>>16)+(Z>>>16)+((o=(65535&G)+(65535&Z)+((r=(B>>>16)+(y>>>16)+((C=(65535&B)+(65535&y))>>>16))>>>16))>>>16))<<16|65535&o)>>>28|(Q=r<<16|65535&C)<<4)^(Q>>>2|L<<30)^(Q>>>7|L<<25),t=(Q>>>28|L<<4)^(L>>>2|Q<<30)^(L>>>7|Q<<25),n=($>>>14|ee<<18)^($>>>18|ee<<14)^(ee>>>9|$<<23),I=(ee>>>14|$<<18)^(ee>>>18|$<<14)^($>>>9|ee<<23),b=(h=L&D)^L&O^A,p=(m=Q&j)^Q&P^d,f=$&ge^~$&ne,v=ee&te^~ee&Ie,Z=U[e+6],y=U[e+7],Z=(i=((G=u[e+6])>>>16)+(Z>>>16)+(f>>>16)+(n>>>16)+(_>>>16)+((o=(65535&G)+(65535&Z)+(65535&f)+(65535&n)+(65535&_)+((r=((B=u[e+7])>>>16)+(y>>>16)+(v>>>16)+(I>>>16)+(q>>>16)+((C=(65535&B)+(65535&y)+(65535&v)+(65535&I)+(65535&q))>>>16))>>>16))>>>16))<<16|65535&o,y=r<<16|65535&C,G=(i=(b>>>16)+(g>>>16)+((o=(65535&b)+(65535&g)+((r=(p>>>16)+(t>>>16)+((C=(65535&p)+(65535&t))>>>16))>>>16))>>>16))<<16|65535&o,B=r<<16|65535&C,_=(i=(T>>>16)+(Z>>>16)+((o=(65535&T)+(65535&Z)+((r=(z>>>16)+(y>>>16)+((C=(65535&z)+(65535&y))>>>16))>>>16))>>>16))<<16|65535&o,q=r<<16|65535&C,T=(i=(G>>>16)+(Z>>>16)+((o=(65535&G)+(65535&Z)+((r=(B>>>16)+(y>>>16)+((C=(65535&B)+(65535&y))>>>16))>>>16))>>>16))<<16|65535&o,z=r<<16|65535&C;i=(S>>>16)+(T>>>16)+((o=(65535&S)+(65535&T)+((r=(V>>>16)+(z>>>16)+((C=(65535&V)+(65535&z))>>>16))>>>16))>>>16),this.h0h=i<<16|65535&o,this.h0l=r<<16|65535&C,i=(W>>>16)+(L>>>16)+((o=(65535&W)+(65535&L)+((r=(R>>>16)+(Q>>>16)+((C=(65535&R)+(65535&Q))>>>16))>>>16))>>>16),this.h1h=i<<16|65535&o,this.h1l=r<<16|65535&C,i=(k>>>16)+(D>>>16)+((o=(65535&k)+(65535&D)+((r=(X>>>16)+(j>>>16)+((C=(65535&X)+(65535&j))>>>16))>>>16))>>>16),this.h2h=i<<16|65535&o,this.h2l=r<<16|65535&C,i=(J>>>16)+(O>>>16)+((o=(65535&J)+(65535&O)+((r=(w>>>16)+(P>>>16)+((C=(65535&w)+(65535&P))>>>16))>>>16))>>>16),this.h3h=i<<16|65535&o,this.h3l=r<<16|65535&C,i=(Y>>>16)+(_>>>16)+((o=(65535&Y)+(65535&_)+((r=(H>>>16)+(q>>>16)+((C=(65535&H)+(65535&q))>>>16))>>>16))>>>16),this.h4h=i<<16|65535&o,this.h4l=r<<16|65535&C,i=(N>>>16)+($>>>16)+((o=(65535&N)+(65535&$)+((r=(F>>>16)+(ee>>>16)+((C=(65535&F)+(65535&ee))>>>16))>>>16))>>>16),this.h5h=i<<16|65535&o,this.h5l=r<<16|65535&C,i=(K>>>16)+(ge>>>16)+((o=(65535&K)+(65535&ge)+((r=(E>>>16)+(te>>>16)+((C=(65535&E)+(65535&te))>>>16))>>>16))>>>16),this.h6h=i<<16|65535&o,this.h6l=r<<16|65535&C,i=(x>>>16)+(ne>>>16)+((o=(65535&x)+(65535&ne)+((r=(M>>>16)+(Ie>>>16)+((C=(65535&M)+(65535&Ie))>>>16))>>>16))>>>16),this.h7h=i<<16|65535&o,this.h7l=r<<16|65535&C},y.prototype.hex=function(){this.finalize();var e=this.h0h,g=this.h0l,t=this.h1h,n=this.h1l,I=this.h2h,C=this.h2l,r=this.h3h,o=this.h3l,i=this.h4h,l=this.h4l,a=this.h5h,c=this.h5l,A=this.h6h,u=this.h6l,d=this.h7h,h=this.h7l,m=this.bits,b=s[e>>28&15]+s[e>>24&15]+s[e>>20&15]+s[e>>16&15]+s[e>>12&15]+s[e>>8&15]+s[e>>4&15]+s[15&e]+s[g>>28&15]+s[g>>24&15]+s[g>>20&15]+s[g>>16&15]+s[g>>12&15]+s[g>>8&15]+s[g>>4&15]+s[15&g]+s[t>>28&15]+s[t>>24&15]+s[t>>20&15]+s[t>>16&15]+s[t>>12&15]+s[t>>8&15]+s[t>>4&15]+s[15&t]+s[n>>28&15]+s[n>>24&15]+s[n>>20&15]+s[n>>16&15]+s[n>>12&15]+s[n>>8&15]+s[n>>4&15]+s[15&n]+s[I>>28&15]+s[I>>24&15]+s[I>>20&15]+s[I>>16&15]+s[I>>12&15]+s[I>>8&15]+s[I>>4&15]+s[15&I]+s[C>>28&15]+s[C>>24&15]+s[C>>20&15]+s[C>>16&15]+s[C>>12&15]+s[C>>8&15]+s[C>>4&15]+s[15&C]+s[r>>28&15]+s[r>>24&15]+s[r>>20&15]+s[r>>16&15]+s[r>>12&15]+s[r>>8&15]+s[r>>4&15]+s[15&r];return m>=256&&(b+=s[o>>28&15]+s[o>>24&15]+s[o>>20&15]+s[o>>16&15]+s[o>>12&15]+s[o>>8&15]+s[o>>4&15]+s[15&o]),m>=384&&(b+=s[i>>28&15]+s[i>>24&15]+s[i>>20&15]+s[i>>16&15]+s[i>>12&15]+s[i>>8&15]+s[i>>4&15]+s[15&i]+s[l>>28&15]+s[l>>24&15]+s[l>>20&15]+s[l>>16&15]+s[l>>12&15]+s[l>>8&15]+s[l>>4&15]+s[15&l]+s[a>>28&15]+s[a>>24&15]+s[a>>20&15]+s[a>>16&15]+s[a>>12&15]+s[a>>8&15]+s[a>>4&15]+s[15&a]+s[c>>28&15]+s[c>>24&15]+s[c>>20&15]+s[c>>16&15]+s[c>>12&15]+s[c>>8&15]+s[c>>4&15]+s[15&c]),512==m&&(b+=s[A>>28&15]+s[A>>24&15]+s[A>>20&15]+s[A>>16&15]+s[A>>12&15]+s[A>>8&15]+s[A>>4&15]+s[15&A]+s[u>>28&15]+s[u>>24&15]+s[u>>20&15]+s[u>>16&15]+s[u>>12&15]+s[u>>8&15]+s[u>>4&15]+s[15&u]+s[d>>28&15]+s[d>>24&15]+s[d>>20&15]+s[d>>16&15]+s[d>>12&15]+s[d>>8&15]+s[d>>4&15]+s[15&d]+s[h>>28&15]+s[h>>24&15]+s[h>>20&15]+s[h>>16&15]+s[h>>12&15]+s[h>>8&15]+s[h>>4&15]+s[15&h]),b},y.prototype.toString=y.prototype.hex,y.prototype.digest=function(){this.finalize();var e=this.h0h,g=this.h0l,t=this.h1h,n=this.h1l,I=this.h2h,C=this.h2l,r=this.h3h,o=this.h3l,i=this.h4h,l=this.h4l,a=this.h5h,s=this.h5l,c=this.h6h,A=this.h6l,u=this.h7h,d=this.h7l,h=this.bits,m=[e>>24&255,e>>16&255,e>>8&255,255&e,g>>24&255,g>>16&255,g>>8&255,255&g,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,I>>24&255,I>>16&255,I>>8&255,255&I,C>>24&255,C>>16&255,C>>8&255,255&C,r>>24&255,r>>16&255,r>>8&255,255&r];return h>=256&&m.push(o>>24&255,o>>16&255,o>>8&255,255&o),h>=384&&m.push(i>>24&255,i>>16&255,i>>8&255,255&i,l>>24&255,l>>16&255,l>>8&255,255&l,a>>24&255,a>>16&255,a>>8&255,255&a,s>>24&255,s>>16&255,s>>8&255,255&s),512==h&&m.push(c>>24&255,c>>16&255,c>>8&255,255&c,A>>24&255,A>>16&255,A>>8&255,255&A,u>>24&255,u>>16&255,u>>8&255,255&u,d>>24&255,d>>16&255,d>>8&255,255&d),m},y.prototype.array=y.prototype.digest,y.prototype.arrayBuffer=function(){this.finalize();var e=this.bits,g=new ArrayBuffer(e/8),t=new DataView(g);return t.setUint32(0,this.h0h),t.setUint32(4,this.h0l),t.setUint32(8,this.h1h),t.setUint32(12,this.h1l),t.setUint32(16,this.h2h),t.setUint32(20,this.h2l),t.setUint32(24,this.h3h),e>=256&&t.setUint32(28,this.h3l),e>=384&&(t.setUint32(32,this.h4h),t.setUint32(36,this.h4l),t.setUint32(40,this.h5h),t.setUint32(44,this.h5l)),512==e&&(t.setUint32(48,this.h6h),t.setUint32(52,this.h6l),t.setUint32(56,this.h7h),t.setUint32(60,this.h7l)),g},y.prototype.clone=function(){var e=new y(this.bits,!1);return this.copyTo(e),e},y.prototype.copyTo=function(e){var g=0,t=["h0h","h0l","h1h","h1l","h2h","h2l","h3h","h3l","h4h","h4l","h5h","h5l","h6h","h6l","h7h","h7l","start","bytes","hBytes","finalized","hashed","lastByteIndex"];for(g=0;g<t.length;++g)e[t[g]]=this[t[g]];for(g=0;g<this.blocks.length;++g)e.blocks[g]=this.blocks[g]},G.prototype=new y,G.prototype.finalize=function(){if(y.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();y.call(this,this.bits,this.sharedMemory),this.update(this.oKeyPad),this.update(e),y.prototype.finalize.call(this)}},G.prototype.clone=function(){var e=new G([],this.bits,!1);this.copyTo(e),e.inner=this.inner;for(var g=0;g<this.oKeyPad.length;++g)e.oKeyPad[g]=this.oKeyPad[g];return e};var B=b(512);B.sha512=B,B.sha384=b(384),B.sha512_256=b(256),B.sha512_224=b(224),B.sha512.hmac=Z(512),B.sha384.hmac=Z(384),B.sha512_256.hmac=Z(256),B.sha512_224.hmac=Z(224),i?e.exports=B:(r.sha512=B.sha512,r.sha384=B.sha384,r.sha512_256=B.sha512_256,r.sha512_224=B.sha512_224,l&&(void 0===(n=function(){return B}.call(B,t,B,e))||(e.exports=n)))}()},5362:function(e,g,t){"use strict";var n;!function(I){function C(e,g,t){var n,I,C,r,o,d,h,m,b,p=0,Z=[],y=0,G=!1,B=[],f=[],v=!1,S=!1,V=-1;if(n=(t=t||{}).encoding||"UTF8",(b=t.numRounds||1)!==parseInt(b,10)||1>b)throw Error("numRounds must a integer >= 1");if("SHA-1"===e)o=512,d=x,h=M,r=160,m=function(e){return e.slice()};else if(0===e.lastIndexOf("SHA-",0))if(d=function(g,t){return U(g,t,e)},h=function(g,t,n,I){var C,r;if("SHA-224"===e||"SHA-256"===e)C=15+(t+65>>>9<<4),r=16;else{if("SHA-384"!==e&&"SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");C=31+(t+129>>>10<<5),r=32}for(;g.length<=C;)g.push(0);for(g[t>>>5]|=128<<24-t%32,t+=n,g[C]=4294967295&t,g[C-1]=t/4294967296|0,n=g.length,t=0;t<n;t+=r)I=U(g.slice(t,t+r),I,e);if("SHA-224"===e)g=[I[0],I[1],I[2],I[3],I[4],I[5],I[6]];else if("SHA-256"===e)g=I;else if("SHA-384"===e)g=[I[0].a,I[0].b,I[1].a,I[1].b,I[2].a,I[2].b,I[3].a,I[3].b,I[4].a,I[4].b,I[5].a,I[5].b];else{if("SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");g=[I[0].a,I[0].b,I[1].a,I[1].b,I[2].a,I[2].b,I[3].a,I[3].b,I[4].a,I[4].b,I[5].a,I[5].b,I[6].a,I[6].b,I[7].a,I[7].b]}return g},m=function(e){return e.slice()},"SHA-224"===e)o=512,r=224;else if("SHA-256"===e)o=512,r=256;else if("SHA-384"===e)o=1024,r=384;else{if("SHA-512"!==e)throw Error("Chosen SHA variant is not supported");o=1024,r=512}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("Chosen SHA variant is not supported");var W=6;if(d=T,m=function(e){var g,t=[];for(g=0;5>g;g+=1)t[g]=e[g].slice();return t},V=1,"SHA3-224"===e)o=1152,r=224;else if("SHA3-256"===e)o=1088,r=256;else if("SHA3-384"===e)o=832,r=384;else if("SHA3-512"===e)o=576,r=512;else if("SHAKE128"===e)o=1344,r=-1,W=31,S=!0;else{if("SHAKE256"!==e)throw Error("Chosen SHA variant is not supported");o=1088,r=-1,W=31,S=!0}h=function(e,g,t,n,I){var C,r=W,i=[],l=(t=o)>>>5,a=0,s=g>>>5;for(C=0;C<s&&g>=t;C+=l)n=T(e.slice(C,C+l),n),g-=t;for(e=e.slice(C),g%=t;e.length<l;)e.push(0);for(e[(C=g>>>3)>>2]^=r<<C%4*8,e[l-1]^=2147483648,n=T(e,n);32*i.length<I&&(e=n[a%5][a/5|0],i.push(e.b),!(32*i.length>=I));)i.push(e.a),0===64*(a+=1)%t&&(T(null,n),a=0);return i}}C=u(g,n,V),I=E(e),this.setHMACKey=function(g,t,C){var i;if(!0===G)throw Error("HMAC key already set");if(!0===v)throw Error("Cannot set HMAC key after calling update");if(!0===S)throw Error("SHAKE is not supported for HMAC");for(g=(t=u(t,n=(C||{}).encoding||"UTF8",V)(g)).binLen,t=t.value,C=(i=o>>>3)/4-1,i<g/8&&(t=h(t,g,0,E(e),r));t.length<=C;)t.push(0);for(g=0;g<=C;g+=1)B[g]=909522486^t[g],f[g]=1549556828^t[g];I=d(B,I),p=o,G=!0},this.update=function(e){var g,t,n,r=0,i=o>>>5;for(e=(g=C(e,Z,y)).binLen,t=g.value,g=e>>>5,n=0;n<g;n+=i)r+o<=e&&(I=d(t.slice(n,n+i),I),r+=o);p+=r,Z=t.slice(r>>>5),y=e%o,v=!0},this.getHash=function(g,t){var n,C,o,u;if(!0===G)throw Error("Cannot call getHash after setting HMAC key");if(o=A(t),!0===S){if(-1===o.shakeLen)throw Error("shakeLen must be specified in options");r=o.shakeLen}switch(g){case"HEX":n=function(e){return i(e,r,V,o)};break;case"B64":n=function(e){return l(e,r,V,o)};break;case"BYTES":n=function(e){return a(e,r,V)};break;case"ARRAYBUFFER":try{C=new ArrayBuffer(0)}catch(d){throw Error("ARRAYBUFFER not supported by this environment")}n=function(e){return s(e,r,V)};break;case"UINT8ARRAY":try{C=new Uint8Array(0)}catch(d){throw Error("UINT8ARRAY not supported by this environment")}n=function(e){return c(e,r,V)};break;default:throw Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}for(u=h(Z.slice(),y,p,m(I),r),C=1;C<b;C+=1)!0===S&&0!==r%32&&(u[u.length-1]&=16777215>>>24-r%32),u=h(u,r,0,E(e),r);return n(u)},this.getHMAC=function(g,t){var n,C,u,b;if(!1===G)throw Error("Cannot call getHMAC without first setting HMAC key");switch(u=A(t),g){case"HEX":n=function(e){return i(e,r,V,u)};break;case"B64":n=function(e){return l(e,r,V,u)};break;case"BYTES":n=function(e){return a(e,r,V)};break;case"ARRAYBUFFER":try{n=new ArrayBuffer(0)}catch(B){throw Error("ARRAYBUFFER not supported by this environment")}n=function(e){return s(e,r,V)};break;case"UINT8ARRAY":try{n=new Uint8Array(0)}catch(B){throw Error("UINT8ARRAY not supported by this environment")}n=function(e){return c(e,r,V)};break;default:throw Error("outputFormat must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return C=h(Z.slice(),y,p,m(I),r),b=d(f,E(e)),n(b=h(C,r,o,b,r))}}function r(e,g){this.a=e,this.b=g}function o(e,g,t,n){var I,C,r,o,i;for(g=g||[0],C=(t=t||0)>>>3,i=-1===n?3:0,I=0;I<e.length;I+=1)r=(o=I+C)>>>2,g.length<=r&&g.push(0),g[r]|=e[I]<<8*(i+o%4*n);return{value:g,binLen:8*e.length+t}}function i(e,g,t,n){var I,C,r,o="";for(g/=8,r=-1===t?3:0,I=0;I<g;I+=1)C=e[I>>>2]>>>8*(r+I%4*t),o+="0123456789abcdef".charAt(C>>>4&15)+"0123456789abcdef".charAt(15&C);return n.outputUpper?o.toUpperCase():o}function l(e,g,t,n){var I,C,r,o,i="",l=g/8;for(o=-1===t?3:0,I=0;I<l;I+=3)for(C=I+1<l?e[I+1>>>2]:0,r=I+2<l?e[I+2>>>2]:0,r=(e[I>>>2]>>>8*(o+I%4*t)&255)<<16|(C>>>8*(o+(I+1)%4*t)&255)<<8|r>>>8*(o+(I+2)%4*t)&255,C=0;4>C;C+=1)i+=8*I+6*C<=g?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>>6*(3-C)&63):n.b64Pad;return i}function a(e,g,t){var n,I,C,r="";for(g/=8,C=-1===t?3:0,n=0;n<g;n+=1)I=e[n>>>2]>>>8*(C+n%4*t)&255,r+=String.fromCharCode(I);return r}function s(e,g,t){g/=8;var n,I,C,r=new ArrayBuffer(g);for(C=new Uint8Array(r),I=-1===t?3:0,n=0;n<g;n+=1)C[n]=e[n>>>2]>>>8*(I+n%4*t)&255;return r}function c(e,g,t){g/=8;var n,I,C=new Uint8Array(g);for(I=-1===t?3:0,n=0;n<g;n+=1)C[n]=e[n>>>2]>>>8*(I+n%4*t)&255;return C}function A(e){var g={outputUpper:!1,b64Pad:"=",shakeLen:-1};if(e=e||{},g.outputUpper=e.outputUpper||!1,!0===e.hasOwnProperty("b64Pad")&&(g.b64Pad=e.b64Pad),!0===e.hasOwnProperty("shakeLen")){if(0!==e.shakeLen%8)throw Error("shakeLen must be a multiple of 8");g.shakeLen=e.shakeLen}if("boolean"!==typeof g.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!==typeof g.b64Pad)throw Error("Invalid b64Pad formatting option");return g}function u(e,g,t){switch(g){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":e=function(e,g,n){var I,C,r,o,i,l,a=e.length;if(0!==a%2)throw Error("String of HEX type must be in byte increments");for(g=g||[0],i=(n=n||0)>>>3,l=-1===t?3:0,I=0;I<a;I+=2){if(C=parseInt(e.substr(I,2),16),isNaN(C))throw Error("String of HEX type contains invalid characters");for(r=(o=(I>>>1)+i)>>>2;g.length<=r;)g.push(0);g[r]|=C<<8*(l+o%4*t)}return{value:g,binLen:4*a+n}};break;case"TEXT":e=function(e,n,I){var C,r,o,i,l,a,s,c,A=0;if(n=n||[0],l=(I=I||0)>>>3,"UTF8"===g)for(c=-1===t?3:0,o=0;o<e.length;o+=1)for(r=[],128>(C=e.charCodeAt(o))?r.push(C):2048>C?(r.push(192|C>>>6),r.push(128|63&C)):55296>C||57344<=C?r.push(224|C>>>12,128|C>>>6&63,128|63&C):(o+=1,C=65536+((1023&C)<<10|1023&e.charCodeAt(o)),r.push(240|C>>>18,128|C>>>12&63,128|C>>>6&63,128|63&C)),i=0;i<r.length;i+=1){for(a=(s=A+l)>>>2;n.length<=a;)n.push(0);n[a]|=r[i]<<8*(c+s%4*t),A+=1}else if("UTF16BE"===g||"UTF16LE"===g)for(c=-1===t?2:0,r="UTF16LE"===g&&1!==t||"UTF16LE"!==g&&1===t,o=0;o<e.length;o+=1){for(C=e.charCodeAt(o),!0===r&&(C=(i=255&C)<<8|C>>>8),a=(s=A+l)>>>2;n.length<=a;)n.push(0);n[a]|=C<<8*(c+s%4*t),A+=2}return{value:n,binLen:8*A+I}};break;case"B64":e=function(e,g,n){var I,C,r,o,i,l,a,s,c=0;if(-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(C=e.indexOf("="),e=e.replace(/\=/g,""),-1!==C&&C<e.length)throw Error("Invalid '=' found in base-64 string");for(g=g||[0],l=(n=n||0)>>>3,s=-1===t?3:0,C=0;C<e.length;C+=4){for(i=e.substr(C,4),r=o=0;r<i.length;r+=1)o|=(I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(i.charAt(r)))<<18-6*r;for(r=0;r<i.length-1;r+=1){for(I=(a=c+l)>>>2;g.length<=I;)g.push(0);g[I]|=(o>>>16-8*r&255)<<8*(s+a%4*t),c+=1}}return{value:g,binLen:8*c+n}};break;case"BYTES":e=function(e,g,n){var I,C,r,o,i,l;for(g=g||[0],r=(n=n||0)>>>3,l=-1===t?3:0,C=0;C<e.length;C+=1)I=e.charCodeAt(C),o=(i=C+r)>>>2,g.length<=o&&g.push(0),g[o]|=I<<8*(l+i%4*t);return{value:g,binLen:8*e.length+n}};break;case"ARRAYBUFFER":try{e=new ArrayBuffer(0)}catch(n){throw Error("ARRAYBUFFER not supported by this environment")}e=function(e,g,n){return o(new Uint8Array(e),g,n,t)};break;case"UINT8ARRAY":try{e=new Uint8Array(0)}catch(n){throw Error("UINT8ARRAY not supported by this environment")}e=function(e,g,n){return o(e,g,n,t)};break;default:throw Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return e}function d(e,g){return e<<g|e>>>32-g}function h(e,g){return 32<g?(g-=32,new r(e.b<<g|e.a>>>32-g,e.a<<g|e.b>>>32-g)):0!==g?new r(e.a<<g|e.b>>>32-g,e.b<<g|e.a>>>32-g):e}function m(e,g){return e>>>g|e<<32-g}function b(e,g){var t=null;t=new r(e.a,e.b);return 32>=g?new r(t.a>>>g|t.b<<32-g&4294967295,t.b>>>g|t.a<<32-g&4294967295):new r(t.b>>>g-32|t.a<<64-g&4294967295,t.a>>>g-32|t.b<<64-g&4294967295)}function p(e,g){return 32>=g?new r(e.a>>>g,e.b>>>g|e.a<<32-g&4294967295):new r(0,e.a>>>g-32)}function Z(e,g,t){return e&g^~e&t}function y(e,g,t){return new r(e.a&g.a^~e.a&t.a,e.b&g.b^~e.b&t.b)}function G(e,g,t){return e&g^e&t^g&t}function B(e,g,t){return new r(e.a&g.a^e.a&t.a^g.a&t.a,e.b&g.b^e.b&t.b^g.b&t.b)}function f(e){return m(e,2)^m(e,13)^m(e,22)}function v(e){var g=b(e,28),t=b(e,34);return e=b(e,39),new r(g.a^t.a^e.a,g.b^t.b^e.b)}function S(e){return m(e,6)^m(e,11)^m(e,25)}function V(e){var g=b(e,14),t=b(e,18);return e=b(e,41),new r(g.a^t.a^e.a,g.b^t.b^e.b)}function W(e){return m(e,7)^m(e,18)^e>>>3}function R(e){var g=b(e,1),t=b(e,8);return e=p(e,7),new r(g.a^t.a^e.a,g.b^t.b^e.b)}function k(e){return m(e,17)^m(e,19)^e>>>10}function X(e){var g=b(e,19),t=b(e,61);return e=p(e,6),new r(g.a^t.a^e.a,g.b^t.b^e.b)}function J(e,g){var t=(65535&e)+(65535&g);return((e>>>16)+(g>>>16)+(t>>>16)&65535)<<16|65535&t}function w(e,g,t,n){var I=(65535&e)+(65535&g)+(65535&t)+(65535&n);return((e>>>16)+(g>>>16)+(t>>>16)+(n>>>16)+(I>>>16)&65535)<<16|65535&I}function Y(e,g,t,n,I){var C=(65535&e)+(65535&g)+(65535&t)+(65535&n)+(65535&I);return((e>>>16)+(g>>>16)+(t>>>16)+(n>>>16)+(I>>>16)+(C>>>16)&65535)<<16|65535&C}function H(e,g){var t,n,I;return t=(65535&e.b)+(65535&g.b),I=(65535&(n=(e.b>>>16)+(g.b>>>16)+(t>>>16)))<<16|65535&t,t=(65535&e.a)+(65535&g.a)+(n>>>16),new r((65535&(n=(e.a>>>16)+(g.a>>>16)+(t>>>16)))<<16|65535&t,I)}function N(e,g,t,n){var I,C,o;return I=(65535&e.b)+(65535&g.b)+(65535&t.b)+(65535&n.b),o=(65535&(C=(e.b>>>16)+(g.b>>>16)+(t.b>>>16)+(n.b>>>16)+(I>>>16)))<<16|65535&I,I=(65535&e.a)+(65535&g.a)+(65535&t.a)+(65535&n.a)+(C>>>16),new r((65535&(C=(e.a>>>16)+(g.a>>>16)+(t.a>>>16)+(n.a>>>16)+(I>>>16)))<<16|65535&I,o)}function F(e,g,t,n,I){var C,o,i;return C=(65535&e.b)+(65535&g.b)+(65535&t.b)+(65535&n.b)+(65535&I.b),i=(65535&(o=(e.b>>>16)+(g.b>>>16)+(t.b>>>16)+(n.b>>>16)+(I.b>>>16)+(C>>>16)))<<16|65535&C,C=(65535&e.a)+(65535&g.a)+(65535&t.a)+(65535&n.a)+(65535&I.a)+(o>>>16),new r((65535&(o=(e.a>>>16)+(g.a>>>16)+(t.a>>>16)+(n.a>>>16)+(I.a>>>16)+(C>>>16)))<<16|65535&C,i)}function K(e,g){return new r(e.a^g.a,e.b^g.b)}function E(e){var g,t=[];if("SHA-1"===e)t=[1732584193,4023233417,2562383102,271733878,3285377520];else if(0===e.lastIndexOf("SHA-",0))switch(t=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],g=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],e){case"SHA-224":break;case"SHA-256":t=g;break;case"SHA-384":t=[new r(3418070365,t[0]),new r(1654270250,t[1]),new r(2438529370,t[2]),new r(355462360,t[3]),new r(1731405415,t[4]),new r(41048885895,t[5]),new r(3675008525,t[6]),new r(1203062813,t[7])];break;case"SHA-512":t=[new r(g[0],4089235720),new r(g[1],2227873595),new r(g[2],4271175723),new r(g[3],1595750129),new r(g[4],2917565137),new r(g[5],725511199),new r(g[6],4215389547),new r(g[7],327033209)];break;default:throw Error("Unknown SHA variant")}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("No SHA variants supported");for(e=0;5>e;e+=1)t[e]=[new r(0,0),new r(0,0),new r(0,0),new r(0,0),new r(0,0)]}return t}function x(e,g){var t,n,I,C,r,o,i,l=[];for(t=g[0],n=g[1],I=g[2],C=g[3],r=g[4],i=0;80>i;i+=1)l[i]=16>i?e[i]:d(l[i-3]^l[i-8]^l[i-14]^l[i-16],1),o=20>i?Y(d(t,5),n&I^~n&C,r,1518500249,l[i]):40>i?Y(d(t,5),n^I^C,r,1859775393,l[i]):60>i?Y(d(t,5),G(n,I,C),r,2400959708,l[i]):Y(d(t,5),n^I^C,r,3395469782,l[i]),r=C,C=I,I=d(n,30),n=t,t=o;return g[0]=J(t,g[0]),g[1]=J(n,g[1]),g[2]=J(I,g[2]),g[3]=J(C,g[3]),g[4]=J(r,g[4]),g}function M(e,g,t,n){var I;for(I=15+(g+65>>>9<<4);e.length<=I;)e.push(0);for(e[g>>>5]|=128<<24-g%32,g+=t,e[I]=4294967295&g,e[I-1]=g/4294967296|0,g=e.length,I=0;I<g;I+=16)n=x(e.slice(I,I+16),n);return n}function U(e,g,t){var n,I,C,o,i,l,a,s,c,A,u,d,h,m,b,p,K,E,x,M,U,T,Q,D=[];if("SHA-224"===t||"SHA-256"===t)A=64,d=1,T=Number,h=J,m=w,b=Y,p=W,K=k,E=f,x=S,U=G,M=Z,Q=z;else{if("SHA-384"!==t&&"SHA-512"!==t)throw Error("Unexpected error in SHA-2 implementation");A=80,d=2,T=r,h=H,m=N,b=F,p=R,K=X,E=v,x=V,U=B,M=y,Q=L}for(t=g[0],n=g[1],I=g[2],C=g[3],o=g[4],i=g[5],l=g[6],a=g[7],u=0;u<A;u+=1)16>u?(c=u*d,s=e.length<=c?0:e[c],c=e.length<=c+1?0:e[c+1],D[u]=new T(s,c)):D[u]=m(K(D[u-2]),D[u-7],p(D[u-15]),D[u-16]),s=b(a,x(o),M(o,i,l),Q[u],D[u]),c=h(E(t),U(t,n,I)),a=l,l=i,i=o,o=h(C,s),C=I,I=n,n=t,t=h(s,c);return g[0]=h(t,g[0]),g[1]=h(n,g[1]),g[2]=h(I,g[2]),g[3]=h(C,g[3]),g[4]=h(o,g[4]),g[5]=h(i,g[5]),g[6]=h(l,g[6]),g[7]=h(a,g[7]),g}function T(e,g){var t,n,I,C,o=[],i=[];if(null!==e)for(n=0;n<e.length;n+=2)g[(n>>>1)%5][(n>>>1)/5|0]=K(g[(n>>>1)%5][(n>>>1)/5|0],new r(e[n+1],e[n]));for(t=0;24>t;t+=1){for(C=E("SHA3-"),n=0;5>n;n+=1){I=g[n][0];var l=g[n][1],a=g[n][2],s=g[n][3],c=g[n][4];o[n]=new r(I.a^l.a^a.a^s.a^c.a,I.b^l.b^a.b^s.b^c.b)}for(n=0;5>n;n+=1)i[n]=K(o[(n+4)%5],h(o[(n+1)%5],1));for(n=0;5>n;n+=1)for(I=0;5>I;I+=1)g[n][I]=K(g[n][I],i[n]);for(n=0;5>n;n+=1)for(I=0;5>I;I+=1)C[I][(2*n+3*I)%5]=h(g[n][I],Q[n][I]);for(n=0;5>n;n+=1)for(I=0;5>I;I+=1)g[n][I]=K(C[n][I],new r(~C[(n+1)%5][I].a&C[(n+2)%5][I].a,~C[(n+1)%5][I].b&C[(n+2)%5][I].b));g[0][0]=K(g[0][0],D[t])}return g}var z,L,Q,D;L=[new r((z=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298])[0],3609767458),new r(z[1],602891725),new r(z[2],3964484399),new r(z[3],2173295548),new r(z[4],4081628472),new r(z[5],3053834265),new r(z[6],2937671579),new r(z[7],3664609560),new r(z[8],2734883394),new r(z[9],1164996542),new r(z[10],1323610764),new r(z[11],3590304994),new r(z[12],4068182383),new r(z[13],991336113),new r(z[14],633803317),new r(z[15],3479774868),new r(z[16],2666613458),new r(z[17],944711139),new r(z[18],2341262773),new r(z[19],2007800933),new r(z[20],1495990901),new r(z[21],1856431235),new r(z[22],3175218132),new r(z[23],2198950837),new r(z[24],3999719339),new r(z[25],766784016),new r(z[26],2566594879),new r(z[27],3203337956),new r(z[28],1034457026),new r(z[29],2466948901),new r(z[30],3758326383),new r(z[31],168717936),new r(z[32],1188179964),new r(z[33],1546045734),new r(z[34],1522805485),new r(z[35],2643833823),new r(z[36],2343527390),new r(z[37],1014477480),new r(z[38],1206759142),new r(z[39],344077627),new r(z[40],1290863460),new r(z[41],3158454273),new r(z[42],3505952657),new r(z[43],106217008),new r(z[44],3606008344),new r(z[45],1432725776),new r(z[46],1467031594),new r(z[47],851169720),new r(z[48],3100823752),new r(z[49],1363258195),new r(z[50],3750685593),new r(z[51],3785050280),new r(z[52],3318307427),new r(z[53],3812723403),new r(z[54],2003034995),new r(z[55],3602036899),new r(z[56],1575990012),new r(z[57],1125592928),new r(z[58],2716904306),new r(z[59],442776044),new r(z[60],593698344),new r(z[61],3733110249),new r(z[62],2999351573),new r(z[63],3815920427),new r(3391569614,3928383900),new r(3515267271,566280711),new r(3940187606,3454069534),new r(4118630271,4000239992),new r(116418474,1914138554),new r(174292421,2731055270),new r(289380356,3203993006),new r(460393269,320620315),new r(685471733,587496836),new r(852142971,1086792851),new r(1017036298,365543100),new r(1126000580,2618297676),new r(1288033470,3409855158),new r(1501505948,4234509866),new r(1607167915,987167468),new r(1816402316,1246189591)],D=[new r(0,1),new r(0,32898),new r(2147483648,32906),new r(2147483648,2147516416),new r(0,32907),new r(0,2147483649),new r(2147483648,2147516545),new r(2147483648,32777),new r(0,138),new r(0,136),new r(0,2147516425),new r(0,2147483658),new r(0,2147516555),new r(2147483648,139),new r(2147483648,32905),new r(2147483648,32771),new r(2147483648,32770),new r(2147483648,128),new r(0,32778),new r(2147483648,2147483658),new r(2147483648,2147516545),new r(2147483648,32896),new r(0,2147483649),new r(2147483648,2147516424)],Q=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]],void 0===(n=function(){return C}.call(g,t,g,e))||(e.exports=n)}()},2307:function(e,g,t){e=t.nmd(e);var n="__lodash_hash_undefined__",I=9007199254740991,C="[object Arguments]",r="[object Array]",o="[object Boolean]",i="[object Date]",l="[object Error]",a="[object Function]",s="[object Map]",c="[object Number]",A="[object Object]",u="[object Promise]",d="[object RegExp]",h="[object Set]",m="[object String]",b="[object Symbol]",p="[object WeakMap]",Z="[object ArrayBuffer]",y="[object DataView]",G=/^\[object .+?Constructor\]$/,B=/^(?:0|[1-9]\d*)$/,f={};f["[object Float32Array]"]=f["[object Float64Array]"]=f["[object Int8Array]"]=f["[object Int16Array]"]=f["[object Int32Array]"]=f["[object Uint8Array]"]=f["[object Uint8ClampedArray]"]=f["[object Uint16Array]"]=f["[object Uint32Array]"]=!0,f[C]=f[r]=f[Z]=f[o]=f[y]=f[i]=f[l]=f[a]=f[s]=f[c]=f[A]=f[d]=f[h]=f[m]=f[p]=!1;var v="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g,S="object"==typeof self&&self&&self.Object===Object&&self,V=v||S||Function("return this")(),W=g&&!g.nodeType&&g,R=W&&e&&!e.nodeType&&e,k=R&&R.exports===W,X=k&&v.process,J=function(){try{return X&&X.binding&&X.binding("util")}catch(e){}}(),w=J&&J.isTypedArray;function Y(e,g){for(var t=-1,n=null==e?0:e.length;++t<n;)if(g(e[t],t,e))return!0;return!1}function H(e){var g=-1,t=Array(e.size);return e.forEach((function(e,n){t[++g]=[n,e]})),t}function N(e){var g=-1,t=Array(e.size);return e.forEach((function(e){t[++g]=e})),t}var F,K,E=Array.prototype,x=Function.prototype,M=Object.prototype,U=V["__core-js_shared__"],T=x.toString,z=M.hasOwnProperty,L=function(){var e=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Q=M.toString,D=RegExp("^"+T.call(z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),j=k?V.Buffer:void 0,O=V.Symbol,P=V.Uint8Array,_=M.propertyIsEnumerable,q=E.splice,$=O?O.toStringTag:void 0,ee=Object.getOwnPropertySymbols,ge=j?j.isBuffer:void 0,te=(F=Object.keys,K=Object,function(e){return F(K(e))}),ne=Xe(V,"DataView"),Ie=Xe(V,"Map"),Ce=Xe(V,"Promise"),re=Xe(V,"Set"),oe=Xe(V,"WeakMap"),ie=Xe(Object,"create"),le=He(ne),ae=He(Ie),se=He(Ce),ce=He(re),Ae=He(oe),ue=O?O.prototype:void 0,de=ue?ue.valueOf:void 0;function he(e){var g=-1,t=null==e?0:e.length;for(this.clear();++g<t;){var n=e[g];this.set(n[0],n[1])}}function me(e){var g=-1,t=null==e?0:e.length;for(this.clear();++g<t;){var n=e[g];this.set(n[0],n[1])}}function be(e){var g=-1,t=null==e?0:e.length;for(this.clear();++g<t;){var n=e[g];this.set(n[0],n[1])}}function pe(e){var g=-1,t=null==e?0:e.length;for(this.__data__=new be;++g<t;)this.add(e[g])}function Ze(e){var g=this.__data__=new me(e);this.size=g.size}function ye(e,g){var t=Ke(e),n=!t&&Fe(e),I=!t&&!n&&Ee(e),C=!t&&!n&&!I&&ze(e),r=t||n||I||C,o=r?function(e,g){for(var t=-1,n=Array(e);++t<e;)n[t]=g(t);return n}(e.length,String):[],i=o.length;for(var l in e)!g&&!z.call(e,l)||r&&("length"==l||I&&("offset"==l||"parent"==l)||C&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ye(l,i))||o.push(l);return o}function Ge(e,g){for(var t=e.length;t--;)if(Ne(e[t][0],g))return t;return-1}function Be(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":$&&$ in Object(e)?function(e){var g=z.call(e,$),t=e[$];try{e[$]=void 0;var n=!0}catch(C){}var I=Q.call(e);n&&(g?e[$]=t:delete e[$]);return I}(e):function(e){return Q.call(e)}(e)}function fe(e){return Te(e)&&Be(e)==C}function ve(e,g,t,n,I){return e===g||(null==e||null==g||!Te(e)&&!Te(g)?e!==e&&g!==g:function(e,g,t,n,I,a){var u=Ke(e),p=Ke(g),G=u?r:we(e),B=p?r:we(g),f=(G=G==C?A:G)==A,v=(B=B==C?A:B)==A,S=G==B;if(S&&Ee(e)){if(!Ee(g))return!1;u=!0,f=!1}if(S&&!f)return a||(a=new Ze),u||ze(e)?We(e,g,t,n,I,a):function(e,g,t,n,I,C,r){switch(t){case y:if(e.byteLength!=g.byteLength||e.byteOffset!=g.byteOffset)return!1;e=e.buffer,g=g.buffer;case Z:return!(e.byteLength!=g.byteLength||!C(new P(e),new P(g)));case o:case i:case c:return Ne(+e,+g);case l:return e.name==g.name&&e.message==g.message;case d:case m:return e==g+"";case s:var a=H;case h:var A=1&n;if(a||(a=N),e.size!=g.size&&!A)return!1;var u=r.get(e);if(u)return u==g;n|=2,r.set(e,g);var p=We(a(e),a(g),n,I,C,r);return r.delete(e),p;case b:if(de)return de.call(e)==de.call(g)}return!1}(e,g,G,t,n,I,a);if(!(1&t)){var V=f&&z.call(e,"__wrapped__"),W=v&&z.call(g,"__wrapped__");if(V||W){var R=V?e.value():e,k=W?g.value():g;return a||(a=new Ze),I(R,k,t,n,a)}}if(!S)return!1;return a||(a=new Ze),function(e,g,t,n,I,C){var r=1&t,o=Re(e),i=o.length,l=Re(g).length;if(i!=l&&!r)return!1;var a=i;for(;a--;){var s=o[a];if(!(r?s in g:z.call(g,s)))return!1}var c=C.get(e);if(c&&C.get(g))return c==g;var A=!0;C.set(e,g),C.set(g,e);var u=r;for(;++a<i;){var d=e[s=o[a]],h=g[s];if(n)var m=r?n(h,d,s,g,e,C):n(d,h,s,e,g,C);if(!(void 0===m?d===h||I(d,h,t,n,C):m)){A=!1;break}u||(u="constructor"==s)}if(A&&!u){var b=e.constructor,p=g.constructor;b==p||!("constructor"in e)||!("constructor"in g)||"function"==typeof b&&b instanceof b&&"function"==typeof p&&p instanceof p||(A=!1)}return C.delete(e),C.delete(g),A}(e,g,t,n,I,a)}(e,g,t,n,ve,I))}function Se(e){return!(!Ue(e)||function(e){return!!L&&L in e}(e))&&(xe(e)?D:G).test(He(e))}function Ve(e){if(!function(e){var g=e&&e.constructor,t="function"==typeof g&&g.prototype||M;return e===t}(e))return te(e);var g=[];for(var t in Object(e))z.call(e,t)&&"constructor"!=t&&g.push(t);return g}function We(e,g,t,n,I,C){var r=1&t,o=e.length,i=g.length;if(o!=i&&!(r&&i>o))return!1;var l=C.get(e);if(l&&C.get(g))return l==g;var a=-1,s=!0,c=2&t?new pe:void 0;for(C.set(e,g),C.set(g,e);++a<o;){var A=e[a],u=g[a];if(n)var d=r?n(u,A,a,g,e,C):n(A,u,a,e,g,C);if(void 0!==d){if(d)continue;s=!1;break}if(c){if(!Y(g,(function(e,g){if(r=g,!c.has(r)&&(A===e||I(A,e,t,n,C)))return c.push(g);var r}))){s=!1;break}}else if(A!==u&&!I(A,u,t,n,C)){s=!1;break}}return C.delete(e),C.delete(g),s}function Re(e){return function(e,g,t){var n=g(e);return Ke(e)?n:function(e,g){for(var t=-1,n=g.length,I=e.length;++t<n;)e[I+t]=g[t];return e}(n,t(e))}(e,Le,Je)}function ke(e,g){var t=e.__data__;return function(e){var g=typeof e;return"string"==g||"number"==g||"symbol"==g||"boolean"==g?"__proto__"!==e:null===e}(g)?t["string"==typeof g?"string":"hash"]:t.map}function Xe(e,g){var t=function(e,g){return null==e?void 0:e[g]}(e,g);return Se(t)?t:void 0}he.prototype.clear=function(){this.__data__=ie?ie(null):{},this.size=0},he.prototype.delete=function(e){var g=this.has(e)&&delete this.__data__[e];return this.size-=g?1:0,g},he.prototype.get=function(e){var g=this.__data__;if(ie){var t=g[e];return t===n?void 0:t}return z.call(g,e)?g[e]:void 0},he.prototype.has=function(e){var g=this.__data__;return ie?void 0!==g[e]:z.call(g,e)},he.prototype.set=function(e,g){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=ie&&void 0===g?n:g,this},me.prototype.clear=function(){this.__data__=[],this.size=0},me.prototype.delete=function(e){var g=this.__data__,t=Ge(g,e);return!(t<0)&&(t==g.length-1?g.pop():q.call(g,t,1),--this.size,!0)},me.prototype.get=function(e){var g=this.__data__,t=Ge(g,e);return t<0?void 0:g[t][1]},me.prototype.has=function(e){return Ge(this.__data__,e)>-1},me.prototype.set=function(e,g){var t=this.__data__,n=Ge(t,e);return n<0?(++this.size,t.push([e,g])):t[n][1]=g,this},be.prototype.clear=function(){this.size=0,this.__data__={hash:new he,map:new(Ie||me),string:new he}},be.prototype.delete=function(e){var g=ke(this,e).delete(e);return this.size-=g?1:0,g},be.prototype.get=function(e){return ke(this,e).get(e)},be.prototype.has=function(e){return ke(this,e).has(e)},be.prototype.set=function(e,g){var t=ke(this,e),n=t.size;return t.set(e,g),this.size+=t.size==n?0:1,this},pe.prototype.add=pe.prototype.push=function(e){return this.__data__.set(e,n),this},pe.prototype.has=function(e){return this.__data__.has(e)},Ze.prototype.clear=function(){this.__data__=new me,this.size=0},Ze.prototype.delete=function(e){var g=this.__data__,t=g.delete(e);return this.size=g.size,t},Ze.prototype.get=function(e){return this.__data__.get(e)},Ze.prototype.has=function(e){return this.__data__.has(e)},Ze.prototype.set=function(e,g){var t=this.__data__;if(t instanceof me){var n=t.__data__;if(!Ie||n.length<199)return n.push([e,g]),this.size=++t.size,this;t=this.__data__=new be(n)}return t.set(e,g),this.size=t.size,this};var Je=ee?function(e){return null==e?[]:(e=Object(e),function(e,g){for(var t=-1,n=null==e?0:e.length,I=0,C=[];++t<n;){var r=e[t];g(r,t,e)&&(C[I++]=r)}return C}(ee(e),(function(g){return _.call(e,g)})))}:function(){return[]},we=Be;function Ye(e,g){return!!(g=null==g?I:g)&&("number"==typeof e||B.test(e))&&e>-1&&e%1==0&&e<g}function He(e){if(null!=e){try{return T.call(e)}catch(g){}try{return e+""}catch(g){}}return""}function Ne(e,g){return e===g||e!==e&&g!==g}(ne&&we(new ne(new ArrayBuffer(1)))!=y||Ie&&we(new Ie)!=s||Ce&&we(Ce.resolve())!=u||re&&we(new re)!=h||oe&&we(new oe)!=p)&&(we=function(e){var g=Be(e),t=g==A?e.constructor:void 0,n=t?He(t):"";if(n)switch(n){case le:return y;case ae:return s;case se:return u;case ce:return h;case Ae:return p}return g});var Fe=fe(function(){return arguments}())?fe:function(e){return Te(e)&&z.call(e,"callee")&&!_.call(e,"callee")},Ke=Array.isArray;var Ee=ge||function(){return!1};function xe(e){if(!Ue(e))return!1;var g=Be(e);return g==a||"[object GeneratorFunction]"==g||"[object AsyncFunction]"==g||"[object Proxy]"==g}function Me(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=I}function Ue(e){var g=typeof e;return null!=e&&("object"==g||"function"==g)}function Te(e){return null!=e&&"object"==typeof e}var ze=w?function(e){return function(g){return e(g)}}(w):function(e){return Te(e)&&Me(e.length)&&!!f[Be(e)]};function Le(e){return null!=(g=e)&&Me(g.length)&&!xe(g)?ye(e):Ve(e);var g}e.exports=function(e,g){return ve(e,g)}},7824:function(e){var g=1e3,t=60*g,n=60*t,I=24*n,C=7*I,r=365.25*I;function o(e,g,t,n){var I=g>=1.5*t;return Math.round(e/t)+" "+n+(I?"s":"")}e.exports=function(e,i){i=i||{};var l=typeof e;if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!o)return;var i=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return i*r;case"weeks":case"week":case"w":return i*C;case"days":case"day":case"d":return i*I;case"hours":case"hour":case"hrs":case"hr":case"h":return i*n;case"minutes":case"minute":case"mins":case"min":case"m":return i*t;case"seconds":case"second":case"secs":case"sec":case"s":return i*g;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}(e);if("number"===l&&isFinite(e))return i.long?function(e){var C=Math.abs(e);if(C>=I)return o(e,C,I,"day");if(C>=n)return o(e,C,n,"hour");if(C>=t)return o(e,C,t,"minute");if(C>=g)return o(e,C,g,"second");return e+" ms"}(e):function(e){var C=Math.abs(e);if(C>=I)return Math.round(e/I)+"d";if(C>=n)return Math.round(e/n)+"h";if(C>=t)return Math.round(e/t)+"m";if(C>=g)return Math.round(e/g)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},8079:function(e,g){"use strict";var t=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof t)return t;throw new Error("unable to locate global object")}();e.exports=g=t.fetch,t.fetch&&(g.default=t.fetch.bind(t)),g.Headers=t.Headers,g.Request=t.Request,g.Response=t.Response},4588:function(e,g,t){var n=t(1964),I=t(1860),C=t(3028),r=t(3961);function o(e){var g=function(e){try{var g=C.decode(e);return n.decode(new Uint8Array(g).buffer)}catch(t){return null}}(e);if(!g||!Array.isArray(g)&&2!=g.length)return!1;var t=g[0],r=g[1];return"number"==typeof r&&I.crc32(t)==r}e.exports={isValidAddress:function(e,g,t={}){return o(e)||function(e,g,t){return r.isValidAddress(e,g,t)}(e,g,t)}}},7554:function(e,g,t){const n=t(1661);e.exports={isValidAddress:function(e,g,t={}){const{networkType:n="prod"}=t;return this.verifyChecksum(e)},verifyChecksum:function(e){if(58!==e.length)return!1;{const g=n.base32.b32decode(e),t=g.slice(0,g.length-4),I=n.byteArray2hexStr(g.slice(-4)).toString("HEX");return n.sha512_256(n.byteArray2hexStr(t)).substr(-8)===I}}}},6072:function(e,g,t){const n=t(3028);e.exports={isValidAddress:function(e,g,t={}){try{if(!e||0==e.length)return!1;if(g.minLength&&e.length<g.minLength)return!1;if(g.maxLength&&e.length>g.maxLength)return!1;try{const g=n.decode(e);if(!g||!g.length)return!1}catch(I){return!1}return!0}catch(I){return!1}}}},1859:function(e,g,t){var n=t(1661),I=t(2309),C=t(207);e.exports={isValidAddress:function(e,g,t){return function(e,g,t){var C,r=t?t.networkType:"",o="bitcoincash",i=new RegExp(g.regexp),l=e.split(":");if(1===l.length)C=e;else{if("bitcoincash"!==l[0])return!1;C=l[1]}if(!i.test(C))return!1;if(C.toLowerCase()!=C&&C.toUpperCase()!=C)return!1;var a=n.base32.b32decode(C);"testnet"===r&&(o="bchtest");try{if(I.verifyChecksum(o,a,I.encodings.BECH32))return!1}catch(s){return!1}return!0}(e,g,t)||C.isValidAddress(e,g,t)}}},3961:function(e,g,t){var n=t(2309);e.exports={isValidAddress:function(e,g,t={}){const{networkType:I="prod"}=t,C=n.decode(e,n.encodings.BECH32);if(!C)return!1;const r=C.hrp;let o;if("prod"===I||"testnet"===I)o=g.bech32Hrp[I];else{if(!g.bech32Hrp)return!1;o=g.bech32Hrp.prod.concat(g.bech32Hrp.testnet)}return-1!==o.indexOf(r)}}},207:function(e,g,t){var n=t(8764).Buffer,I=t(3028),C=t(5546),r=t(1661),o="prod";function i(e,g){var t=(g=g||{}).expectedLength||25,C=g.hashFunction||"sha256",o=function(e){try{return I.decode(e)}catch(g){return null}}(e);if(o){var i=o.length;if(i!==t)return null;if(g.regex&&!g.regex.test(e))return!1;var l=r.toHex(o.slice(i-4,i)),a=function(e,g){switch(e){case"blake256keccak256":var t=r.blake2b256(g);return r.keccak256Checksum(n.from(t,"hex"));case"blake256":return r.blake256Checksum(g);case"keccak256":return r.keccak256Checksum(g);default:return r.sha256Checksum(g)}}(C,r.toHex(o.slice(0,i-4)));return l===a?r.toHex(o.slice(0,t-24)):null}return null}e.exports={isValidAddress:function(e,g,t={}){return function(e,g,t){const{networkType:n=o}=t;var I,C=i(e,g);if(C){if("prod"===n||"testnet"===n)I=g.addressTypes[n];else{if(!g.addressTypes)return!1;I=g.addressTypes.prod.concat(g.addressTypes.testnet)}return I.indexOf(C)>=0}return!1}(e,g,t)||C.isValidAddress(e,g,t)}}},4554:function(e){var g="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";e.exports={b32decode:function(e){for(var t=new ArrayBuffer(5*e.length/8),n=new Uint8Array(t),I=0;I<e.length/8;I++){for(var C=[0,0,0,0,0,0,0,0],r=0;r<8;++r)C[r]=g.indexOf(e[8*I+r]);r=0;n[5*I+0]=C[r+0]<<3|C[r+1]>>2,n[5*I+1]=(3&C[r+1])<<6|C[r+2]<<1|C[r+3]>>4,n[5*I+2]=(15&C[r+3])<<4|C[r+4]>>1,n[5*I+3]=(1&C[r+4])<<7|C[r+5]<<2|C[r+6]>>3,n[5*I+4]=(7&C[r+6])<<5|C[r+7]}return n},b32encode:function(e){var t=[],n=Math.floor(e.length/5),I=e.length%5;if(0!=I){for(var C=0;C<5-I;C++)e+="\0";n+=1}for(C=0;C<n;C++)t.push(g.charAt(e.charCodeAt(5*C)>>3)),t.push(g.charAt((7&e.charCodeAt(5*C))<<2|e.charCodeAt(5*C+1)>>6)),t.push(g.charAt((63&e.charCodeAt(5*C+1))>>1)),t.push(g.charAt((1&e.charCodeAt(5*C+1))<<4|e.charCodeAt(5*C+2)>>4)),t.push(g.charAt((15&e.charCodeAt(5*C+2))<<1|e.charCodeAt(5*C+3)>>7)),t.push(g.charAt((127&e.charCodeAt(5*C+3))>>2)),t.push(g.charAt((3&e.charCodeAt(5*C+3))<<3|e.charCodeAt(5*C+4)>>5)),t.push(g.charAt(31&e.charCodeAt(5*C+4)));var r=0;1==I?r=6:2==I?r=4:3==I?r=3:4==I&&(r=1);for(C=0;C<r;C++)t.pop();for(C=0;C<r;C++)t.push("=");return t.join("")}}},3028:function(e){for(var g="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",t={},n=0;n<g.length;++n)t[g.charAt(n)]=n;var I=g.length;e.exports={decode:function(e){if(0===e.length)return[];var g,n,C=[0];for(g=0;g<e.length;++g){var r=e[g];if(!(r in t))throw new Error("Non-base58 character");for(n=0;n<C.length;++n)C[n]*=I;C[0]+=t[r];var o=0;for(n=0;n<C.length;++n)C[n]+=o,o=C[n]>>8,C[n]&=255;for(;o;)C.push(255&o),o>>=8}for(g=0;"1"===e[g]&&g<e.length-1;++g)C.push(0);return C.reverse()}}},2309:function(e){var g="qpzry9x8gf2tvdw0s3jn54khce6mua7l",t=[996825010,642813549,513874426,1027748829,705979059];const n={BECH32:"bech32",BECH32M:"bech32m"};function I(e){return e==n.BECH32?1:e==n.BECH32M?734539939:null}function C(e){for(var g=1,n=0;n<e.length;++n){var I=g>>25;g=(33554431&g)<<5^e[n];for(var C=0;C<5;++C)I>>C&1&&(g^=t[C])}return g}function r(e){var g,t=[];for(g=0;g<e.length;++g)t.push(e.charCodeAt(g)>>5);for(t.push(0),g=0;g<e.length;++g)t.push(31&e.charCodeAt(g));return t}function o(e,g,t){return C(r(e).concat(g))===I(t)}e.exports={decode:function(e,t){var n,I=!1,C=!1;for(n=0;n<e.length;++n){if(e.charCodeAt(n)<33||e.charCodeAt(n)>126)return null;e.charCodeAt(n)>=97&&e.charCodeAt(n)<=122&&(I=!0),e.charCodeAt(n)>=65&&e.charCodeAt(n)<=90&&(C=!0)}if(I&&C)return null;var r=(e=e.toLowerCase()).lastIndexOf("1");if(r<1||r+7>e.length||e.length>110)return null;var i=e.substring(0,r),l=[];for(n=r+1;n<e.length;++n){var a=g.indexOf(e.charAt(n));if(-1===a)return null;l.push(a)}if(!o(i,l,t))return null;return{hrp:i,data:l.slice(0,l.length-6)}},encode:function(e,t,n){for(var o=t.concat(function(e,g,t){for(var n=C(r(e).concat(g).concat([0,0,0,0,0,0]))^I(t),o=[],i=0;i<6;++i)o.push(n>>5*(5-i)&31);return o}(e,t,n)),i=e+"1",l=0;l<o.length;++l)i+=g.charAt(o[l]);return i},encodings:n,verifyChecksum:o}},3041:function(e,g){!function(e){"use strict";var g={};function t(e,n,C){if(C!==g)return e instanceof t?e:"undefined"===typeof e?I:t.parse(e);for(e=e||[];e.length&&!e[e.length-1];)--e.length;this._d=e,this._s=e.length?n||1:0}t._construct=function(e,n){return new t(e,n,g)};var n=1e7;t.base=n,t.base_log10=7;var I=new t([],0,g);t.ZERO=I;var C=new t([1],1,g);t.ONE=C;var r=new t(C._d,-1,g);t.M_ONE=r,t._0=I,t._1=C,t.small=[I,C,new t([2],1,g),new t([3],1,g),new t([4],1,g),new t([5],1,g),new t([6],1,g),new t([7],1,g),new t([8],1,g),new t([9],1,g),new t([10],1,g),new t([11],1,g),new t([12],1,g),new t([13],1,g),new t([14],1,g),new t([15],1,g),new t([16],1,g),new t([17],1,g),new t([18],1,g),new t([19],1,g),new t([20],1,g),new t([21],1,g),new t([22],1,g),new t([23],1,g),new t([24],1,g),new t([25],1,g),new t([26],1,g),new t([27],1,g),new t([28],1,g),new t([29],1,g),new t([30],1,g),new t([31],1,g),new t([32],1,g),new t([33],1,g),new t([34],1,g),new t([35],1,g),new t([36],1,g)],t.digits="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),t.prototype.toString=function(e){if((e=+e||10)<2||e>36)throw new Error("illegal radix "+e+".");if(0===this._s)return"0";if(10===e){var g=this._s<0?"-":"";g+=this._d[this._d.length-1].toString();for(var n=this._d.length-2;n>=0;n--){for(var I=this._d[n].toString();I.length<7;)I="0"+I;g+=I}return g}var C=t.digits;e=t.small[e];for(var r,o=this._s,i=this.abs(),l=[];0!==i._s;){var a=i.divRem(e);i=a[0],r=a[1],l.push(C[r.valueOf()])}return(o<0?"-":"")+l.reverse().join("")},t.radixRegex=[/^$/,/^$/,/^[01]*$/,/^[012]*$/,/^[0-3]*$/,/^[0-4]*$/,/^[0-5]*$/,/^[0-6]*$/,/^[0-7]*$/,/^[0-8]*$/,/^[0-9]*$/,/^[0-9aA]*$/,/^[0-9abAB]*$/,/^[0-9abcABC]*$/,/^[0-9a-dA-D]*$/,/^[0-9a-eA-E]*$/,/^[0-9a-fA-F]*$/,/^[0-9a-gA-G]*$/,/^[0-9a-hA-H]*$/,/^[0-9a-iA-I]*$/,/^[0-9a-jA-J]*$/,/^[0-9a-kA-K]*$/,/^[0-9a-lA-L]*$/,/^[0-9a-mA-M]*$/,/^[0-9a-nA-N]*$/,/^[0-9a-oA-O]*$/,/^[0-9a-pA-P]*$/,/^[0-9a-qA-Q]*$/,/^[0-9a-rA-R]*$/,/^[0-9a-sA-S]*$/,/^[0-9a-tA-T]*$/,/^[0-9a-uA-U]*$/,/^[0-9a-vA-V]*$/,/^[0-9a-wA-W]*$/,/^[0-9a-xA-X]*$/,/^[0-9a-yA-Y]*$/,/^[0-9a-zA-Z]*$/],t.parse=function(e,n){var C;e=e.toString(),"undefined"!==typeof n&&10!==+n||(e=e.replace(/\s*[*xX]\s*10\s*(\^|\*\*)\s*/,"e").replace(/^([+\-])?(\d+)\.?(\d*)[eE]([+\-]?\d+)$/,(function(e,g,t,n,I){var C=(I=+I)<0,r=t.length+I;e=(C?t:n).length,I=(I=Math.abs(I))>=e?I-e+C:0;var o=new Array(I+1).join("0"),i=t+n;return(g||"")+(C?i=o+i:i+=o).substr(0,r+=C?o.length:0)+(r<i.length?"."+i.substr(r):"")}))),C="undefined"===typeof n?"0[xcb]":16==n?"0x":8==n?"0c":2==n?"0b":"";var r=new RegExp("^([+\\-]?)("+C+")?([0-9a-z]*)(?:\\.\\d*)?$","i").exec(e);if(r){var o=r[1]||"+",i=r[2]||"",l=r[3]||"";if("undefined"===typeof n)n="0x"===i||"0X"===i?16:"0c"===i||"0C"===i?8:"0b"===i||"0B"===i?2:10;else if(n<2||n>36)throw new Error("Illegal radix "+n+".");if(n=+n,!t.radixRegex[n].test(l))throw new Error("Bad digit for radix "+n);if(0===(l=l.replace(/^0+/,"").split("")).length)return I;if(o="-"===o?-1:1,10==n){for(var a=[];l.length>=7;)a.push(parseInt(l.splice(l.length-t.base_log10,t.base_log10).join(""),10));return a.push(parseInt(l.join(""),10)),new t(a,o,g)}a=I;n=t.small[n];for(var s=t.small,c=0;c<l.length;c++)a=a.multiply(n).add(s[parseInt(l[c],36)]);return new t(a._d,o,g)}throw new Error("Invalid BigInteger format: "+e)},t.prototype.add=function(e){if(0===this._s)return t(e);if(0===(e=t(e))._s)return this;if(this._s!==e._s)return e=e.negate(),this.subtract(e);for(var I,C=this._d,r=e._d,o=C.length,i=r.length,l=new Array(Math.max(o,i)+1),a=Math.min(o,i),s=0,c=0;c<a;c++)I=C[c]+r[c]+s,l[c]=I%n,s=I/n|0;for(i>o&&(C=r,o=i),c=a;s&&c<o;c++)I=C[c]+s,l[c]=I%n,s=I/n|0;for(s&&(l[c]=s);c<o;c++)l[c]=C[c];return new t(l,this._s,g)},t.prototype.negate=function(){return new t(this._d,0|-this._s,g)},t.prototype.abs=function(){return this._s<0?this.negate():this},t.prototype.subtract=function(e){if(0===this._s)return t(e).negate();if(0===(e=t(e))._s)return this;if(this._s!==e._s)return e=e.negate(),this.add(e);var C=this;this._s<0&&(C=new t(e._d,1,g),e=new t(this._d,1,g));var r=C.compareAbs(e);if(0===r)return I;if(r<0){var o=e;e=C,C=o}var i,l,a=C._d,s=e._d,c=a.length,A=s.length,u=new Array(c),d=0;for(i=0;i<A;i++)(l=a[i]-d-s[i])<0?(l+=n,d=1):d=0,u[i]=l;for(i=A;i<c;i++){if(!((l=a[i]-d)<0)){u[i++]=l;break}l+=n,u[i]=l}for(;i<c;i++)u[i]=a[i];return new t(u,r,g)},function(){function e(e,I){for(var C=e._d,r=C.slice(),o=0;;){var i=(C[o]||0)+1;if(r[o]=i%n,i<=9999999)break;++o}return new t(r,I,g)}function I(e,I){for(var C=e._d,r=C.slice(),o=0;;){var i=(C[o]||0)-1;if(!(i<0)){r[o]=i;break}r[o]=i+n,++o}return new t(r,I,g)}t.prototype.next=function(){switch(this._s){case 0:return C;case-1:return I(this,-1);default:return e(this,1)}},t.prototype.prev=function(){switch(this._s){case 0:return r;case-1:return e(this,-1);default:return I(this,1)}}}(),t.prototype.compareAbs=function(e){if(this===e)return 0;if(!(e instanceof t)){if(!isFinite(e))return isNaN(e)?e:-1;e=t(e)}if(0===this._s)return 0!==e._s?-1:0;if(0===e._s)return 1;var g=this._d.length,n=e._d.length;if(g<n)return-1;if(g>n)return 1;for(var I=this._d,C=e._d,r=g-1;r>=0;r--)if(I[r]!==C[r])return I[r]<C[r]?-1:1;return 0},t.prototype.compare=function(e){return this===e?0:(e=t(e),0===this._s?-e._s:this._s===e._s?this.compareAbs(e)*this._s:this._s)},t.prototype.isUnit=function(){return this===C||this===r||1===this._d.length&&1===this._d[0]},t.prototype.multiply=function(e){if(0===this._s)return I;if(0===(e=t(e))._s)return I;if(this.isUnit())return this._s<0?e.negate():e;if(e.isUnit())return e._s<0?this.negate():this;if(this===e)return this.square();var C,r=this._d.length>=e._d.length,o=(r?this:e)._d,i=(r?e:this)._d,l=o.length,a=i.length,s=l+a,c=new Array(s);for(C=0;C<s;C++)c[C]=0;for(C=0;C<a;C++){for(var A,u=0,d=i[C],h=l+C,m=C;m<h;m++)u=(A=c[m]+d*o[m-C]+u)/n|0,c[m]=A%n|0;u&&(u=(A=c[m]+u)/n|0,c[m]=A%n)}return new t(c,this._s*e._s,g)},t.prototype.multiplySingleDigit=function(e){if(0===e||0===this._s)return I;if(1===e)return this;var C;if(1===this._d.length)return new t((C=this._d[0]*e)>=n?[C%n|0,C/n|0]:[C],1,g);if(2===e)return this.add(this);if(this.isUnit())return new t([e],1,g);for(var r=this._d,o=r.length,i=o+1,l=new Array(i),a=0;a<i;a++)l[a]=0;for(var s=0,c=0;c<o;c++)s=(C=e*r[c]+s)/n|0,l[c]=C%n|0;return s&&(l[c]=s),new t(l,1,g)},t.prototype.square=function(){if(0===this._s)return I;if(this.isUnit())return C;var e,r,o,i,l=this._d,a=l.length,s=new Array(a+a+1);for(i=0;i<a;i++)o=2*i,r=(e=l[i]*l[i])/n|0,s[o]=e%n,s[o+1]=r;for(i=0;i<a;i++){r=0,o=2*i+1;for(var c=i+1;c<a;c++,o++)r=(e=l[c]*l[i]*2+s[o]+r)/n|0,s[o]=e%n;var A=r+s[o=a+i];r=A/n|0,s[o]=A%n,s[o+1]+=r}return new t(s,1,g)},t.prototype.quotient=function(e){return this.divRem(e)[0]},t.prototype.divide=t.prototype.quotient,t.prototype.remainder=function(e){return this.divRem(e)[1]},t.prototype.divRem=function(e){if(0===(e=t(e))._s)throw new Error("Divide by zero");if(0===this._s)return[I,I];if(1===e._d.length)return this.divRemSmall(e._s*e._d[0]);switch(this.compareAbs(e)){case 0:return[this._s===e._s?C:r,I];case-1:return[I,this]}for(var o,i=this._s*e._s,l=e.abs(),a=this._d,s=a.length,c=(e._d.length,[]),A=new t([],0,g);s;)if(A._d.unshift(a[--s]),(A=new t(A._d,1,g)).compareAbs(e)<0)c.push(0);else{if(0===A._s)o=0;else{var u=A._d.length,d=l._d.length,h=A._d[u-1]*n+A._d[u-2],m=l._d[d-1]*n+l._d[d-2];A._d.length>l._d.length&&(h=(h+1)*n),o=Math.ceil(h/m)}do{var b=l.multiplySingleDigit(o);if(b.compareAbs(A)<=0)break;o--}while(o);if(c.push(o),o){var p=A.subtract(b);A._d=p._d.slice()}}return[new t(c.reverse(),i,g),new t(A._d,this._s,g)]},t.prototype.divRemSmall=function(e){var C;if(0===(e=+e))throw new Error("Divide by zero");var r=e<0?-1:1,o=this._s*r;if((e=Math.abs(e))<1||e>=n)throw new Error("Argument out of range");if(0===this._s)return[I,I];if(1===e||-1===e)return[1===o?this.abs():new t(this._d,o,g),I];if(1===this._d.length){var i=new t([this._d[0]/e|0],1,g);return C=new t([this._d[0]%e|0],1,g),o<0&&(i=i.negate()),this._s<0&&(C=C.negate()),[i,C]}for(var l,a=this._d.slice(),s=new Array(a.length),c=0,A=0,u=0;a.length;){if((c=c*n+a[a.length-1])<e)s[u++]=0,a.pop(),A=n*A+c;else A=c-e*(l=0===c?0:c/e|0),s[u++]=l,l?(a.pop(),c=A):a.pop()}return C=new t([A],1,g),this._s<0&&(C=C.negate()),[new t(s.reverse(),o,g),C]},t.prototype.isEven=function(){var e=this._d;return 0===this._s||0===e.length||e[0]%2===0},t.prototype.isOdd=function(){return!this.isEven()},t.prototype.sign=function(){return this._s},t.prototype.isPositive=function(){return this._s>0},t.prototype.isNegative=function(){return this._s<0},t.prototype.isZero=function(){return 0===this._s},t.prototype.exp10=function(e){if(0===(e=+e))return this;if(Math.abs(e)>Number(o))throw new Error("exponent too large in BigInteger.exp10");if(0===this._s)return I;if(e>0){for(var n=new t(this._d.slice(),this._s,g);e>=7;e-=7)n._d.unshift(0);return 0==e?n:(n._s=1,n=n.multiplySingleDigit(Math.pow(10,e)),this._s<0?n.negate():n)}if(-e>=7*this._d.length)return I;n=new t(this._d.slice(),this._s,g);for(e=-e;e>=7;e-=7)n._d.shift();return 0==e?n:n.divRemSmall(Math.pow(10,e))[0]},t.prototype.pow=function(e){if(this.isUnit())return this._s>0||t(e).isOdd()?this:this.negate();if(0===(e=t(e))._s)return C;if(e._s<0){if(0===this._s)throw new Error("Divide by zero");return I}if(0===this._s)return I;if(e.isUnit())return this;if(e.compareAbs(o)>0)throw new Error("exponent too large in BigInteger.pow");for(var g=this,n=C,r=t.small[2];e.isPositive();){if(e.isOdd()&&(n=n.multiply(g),e.isUnit()))return n;g=g.square(),e=e.quotient(r)}return n},t.prototype.modPow=function(e,g){for(var n=C,I=this;e.isPositive();)e.isOdd()&&(n=n.multiply(I).remainder(g)),(e=e.quotient(t.small[2])).isPositive()&&(I=I.square().remainder(g));return n},t.prototype.log=function(){switch(this._s){case 0:return-1/0;case-1:return NaN}var e=this._d.length;if(7*e<30)return Math.log(this.valueOf());var I=Math.ceil(30/7),C=this._d.slice(e-I);return Math.log(new t(C,1,g).valueOf())+(e-I)*Math.log(n)},t.prototype.valueOf=function(){return parseInt(this.toString(),10)},t.prototype.toJSValue=function(){return parseInt(this.toString(),10)},t.prototype.lowVal=function(){return this._d[0]||0};var o=t(2147483647);t.MAX_EXP=o,function(){function e(e){return function(g){return e.call(t(g))}}function g(e){return function(g,n){return e.call(t(g),t(n))}}function n(e){return function(g,n,I){return e.call(t(g),t(n),t(I))}}!function(){var I,C,r="toJSValue,isEven,isOdd,sign,isZero,isNegative,abs,isUnit,square,negate,isPositive,toString,next,prev,log".split(","),o="compare,remainder,divRem,subtract,add,quotient,divide,multiply,pow,compareAbs".split(","),i=["modPow"];for(I=0;I<r.length;I++)t[C=r[I]]=e(t.prototype[C]);for(I=0;I<o.length;I++)t[C=o[I]]=g(t.prototype[C]);for(I=0;I<i.length;I++)t[C=i[I]]=n(t.prototype[C]);t.exp10=function(e,g){return t(e).exp10(g)}}()}(),e.JSBigInt=t}(g)},680:function(e,g,t){"use strict";var n=t(8764).Buffer;i.sigma=[[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],[14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],[11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4],[7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8],[9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13],[2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9],[12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11],[13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10],[6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5],[10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],[14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],[11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4],[7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8],[9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13],[2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]],i.u256=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479],i.padding=n.from([128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),i.prototype._length_carry=function(e){for(var g=0;g<e.length&&!(e[g]<4294967296);++g)e[g]-=4294967296,e[g+1]+=1},i.prototype.update=function(e,g){e=n.from(e,g);for(var t=this._block,I=0;this._blockOffset+e.length-I>=t.length;){for(var C=this._blockOffset;C<t.length;)t[C++]=e[I++];this._length[0]+=8*t.length,this._length_carry(this._length),this._compress(),this._blockOffset=0}for(;I<e.length;)t[this._blockOffset++]=e[I++];return this};var I=n.from([1]),C=n.from([129]);function r(e,g){return(e<<32-g|e>>>g)>>>0}function o(e,g,t,n,I,C,o,l){var a=i.sigma,s=i.u256;e[n]=e[n]+((g[a[t][l]]^s[a[t][l+1]])>>>0)+e[I]>>>0,e[o]=r(e[o]^e[n],16),e[C]=e[C]+e[o]>>>0,e[I]=r(e[I]^e[C],12),e[n]=e[n]+((g[a[t][l+1]]^s[a[t][l]])>>>0)+e[I]>>>0,e[o]=r(e[o]^e[n],8),e[C]=e[C]+e[o]>>>0,e[I]=r(e[I]^e[C],7)}function i(){this._h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this._s=[0,0,0,0],this._block=n.allocUnsafe(64),this._blockOffset=0,this._length=[0,0],this._nullt=!1,this._zo=I,this._oo=C}i.prototype._compress=function(){var e,g=i.u256,t=new Array(16),n=new Array(16);for(e=0;e<16;++e)n[e]=this._block.readUInt32BE(4*e);for(e=0;e<8;++e)t[e]=this._h[e]>>>0;for(e=8;e<12;++e)t[e]=(this._s[e-8]^g[e-8])>>>0;for(e=12;e<16;++e)t[e]=g[e-8];for(this._nullt||(t[12]=(t[12]^this._length[0])>>>0,t[13]=(t[13]^this._length[0])>>>0,t[14]=(t[14]^this._length[1])>>>0,t[15]=(t[15]^this._length[1])>>>0),e=0;e<14;++e)o(t,n,e,0,4,8,12,0),o(t,n,e,1,5,9,13,2),o(t,n,e,2,6,10,14,4),o(t,n,e,3,7,11,15,6),o(t,n,e,0,5,10,15,8),o(t,n,e,1,6,11,12,10),o(t,n,e,2,7,8,13,12),o(t,n,e,3,4,9,14,14);for(e=0;e<16;++e)this._h[e%8]=(this._h[e%8]^t[e])>>>0;for(e=0;e<8;++e)this._h[e]=(this._h[e]^this._s[e%4])>>>0},i.prototype._padding=function(){var e=this._length[0]+8*this._blockOffset,g=this._length[1];e>=4294967296&&(e-=4294967296,g+=1);var t=n.allocUnsafe(8);t.writeUInt32BE(g,0),t.writeUInt32BE(e,4),55===this._blockOffset?(this._length[0]-=8,this.update(this._oo)):(this._blockOffset<55?(0===this._blockOffset&&(this._nullt=!0),this._length[0]-=8*(55-this._blockOffset),this.update(i.padding.slice(0,55-this._blockOffset))):(this._length[0]-=8*(64-this._blockOffset),this.update(i.padding.slice(0,64-this._blockOffset)),this._length[0]-=440,this.update(i.padding.slice(1,56)),this._nullt=!0),this.update(this._zo),this._length[0]-=8),this._length[0]-=64,this.update(t)},i.prototype.digest=function(e){this._padding();for(var g=n.allocUnsafe(32),t=0;t<8;++t)g.writeUInt32BE(this._h[t],4*t);return g.toString(e)},e.exports=i},7817:function(e){"use strict";function g(e,g,t){var n=e[g]+e[t],I=e[g+1]+e[t+1];n>=4294967296&&I++,e[g]=n,e[g+1]=I}function t(e,g,t,n){var I=e[g]+t;t<0&&(I+=4294967296);var C=e[g+1]+n;I>=4294967296&&C++,e[g]=I,e[g+1]=C}function n(e,g){return e[g]^e[g+1]<<8^e[g+2]<<16^e[g+3]<<24}function I(e,n,I,C,r,l){var a=i[r],s=i[r+1],c=i[l],A=i[l+1];g(o,e,n),t(o,e,a,s);var u=o[C]^o[e],d=o[C+1]^o[e+1];o[C]=d,o[C+1]=u,g(o,I,C),u=o[n]^o[I],d=o[n+1]^o[I+1],o[n]=u>>>24^d<<8,o[n+1]=d>>>24^u<<8,g(o,e,n),t(o,e,c,A),u=o[C]^o[e],d=o[C+1]^o[e+1],o[C]=u>>>16^d<<16,o[C+1]=d>>>16^u<<16,g(o,I,C),u=o[n]^o[I],d=o[n+1]^o[I+1],o[n]=d>>>31^u<<1,o[n+1]=u>>>31^d<<1}var C=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),r=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map((function(e){return 2*e}))),o=new Uint32Array(32),i=new Uint32Array(32);function l(e,g){var t=0;for(t=0;t<16;t++)o[t]=e.h[t],o[t+16]=C[t];for(o[24]=o[24]^e.t,o[25]=o[25]^e.t/4294967296,g&&(o[28]=~o[28],o[29]=~o[29]),t=0;t<32;t++)i[t]=n(e.b,4*t);for(t=0;t<12;t++)I(0,8,16,24,r[16*t+0],r[16*t+1]),I(2,10,18,26,r[16*t+2],r[16*t+3]),I(4,12,20,28,r[16*t+4],r[16*t+5]),I(6,14,22,30,r[16*t+6],r[16*t+7]),I(0,10,20,30,r[16*t+8],r[16*t+9]),I(2,12,22,24,r[16*t+10],r[16*t+11]),I(4,14,16,26,r[16*t+12],r[16*t+13]),I(6,8,18,28,r[16*t+14],r[16*t+15]);for(t=0;t<16;t++)e.h[t]=e.h[t]^o[t]^o[t+16]}var a=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function s(e,g,t,I){a.fill(0),this.b=new Uint8Array(128),this.h=new Uint32Array(16),this.t=0,this.c=0,this.outlen=e,a[0]=e,g&&(a[1]=g.length),a[2]=1,a[3]=1,t&&a.set(t,32),I&&a.set(I,48);for(var r=0;r<16;r++)this.h[r]=C[r]^n(a,4*r);g&&(c(this,g),this.c=128)}function c(e,g){for(var t=0;t<g.length;t++)128===e.c&&(e.t+=e.c,l(e,!1),e.c=0),e.b[e.c++]=g[t]}function A(e){return e<16?"0"+e.toString(16):e.toString(16)}s.prototype.update=function(e){return c(this,e),this},s.prototype.digest=function(e){var g=e&&"binary"!==e&&"hex"!==e?e:new Uint8Array(this.outlen);return function(e,g){e.t+=e.c;for(;e.c<128;)e.b[e.c++]=0;l(e,!0);for(var t=0;t<e.outlen;t++)g[t]=e.h[t>>2]>>8*(3&t)}(this,g),"hex"===e?function(e){for(var g="",t=0;t<e.length;t++)g+=A(e[t]);return g}(g):g},s.prototype.final=s.prototype.digest,e.exports=s},7041:function(e,g,t){var n=t(3041).JSBigInt,I=function(){for(var e={},g="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",t=[],I=0;I<g.length;I++)t.push(g.charCodeAt(I));var C=[0,2,3,5,6,7,9,10,11],r=t.length,o=11,i=new n(2).pow(64);return e.encode_block=function(e,g,I){if(e.length<1||e.length>o)throw"Invalid block length: "+e.length;for(var i=function(e){if(e.length<1||e.length>8)throw"Invalid input length";var g=n.ZERO,t=new n(2).pow(8),I=0;switch(9-e.length){case 1:g=g.add(e[I++]);case 2:g=g.multiply(t).add(e[I++]);case 3:g=g.multiply(t).add(e[I++]);case 4:g=g.multiply(t).add(e[I++]);case 5:g=g.multiply(t).add(e[I++]);case 6:g=g.multiply(t).add(e[I++]);case 7:g=g.multiply(t).add(e[I++]);case 8:g=g.multiply(t).add(e[I++]);break;default:throw"Impossible condition"}return g}(e),l=C[e.length]-1;1===i.compare(0);){var a=i.divRem(r),s=a[1];i=a[0],g[I+l]=t[s.toJSValue()],l--}return g},e.encode=function(g){var n=function(e){if(e.length%2!==0)throw"Hex string has invalid length!";for(var g=new Uint8Array(e.length/2),t=0;t<e.length/2;++t)g[t]=parseInt(e.slice(2*t,2*t+2),16);return g}(g);if(0===n.length)return"";var I,r=Math.floor(n.length/8),i=n.length%8,l=r*o+C[i],a=new Uint8Array(l);for(I=0;I<l;++I)a[I]=t[0];for(I=0;I<r;I++)a=e.encode_block(n.subarray(8*I,8*I+8),a,I*o);return i>0&&(a=e.encode_block(n.subarray(8*r,8*r+i),a,r*o)),function(e){for(var g=[],t=0;t<e.length;t++)g.push(String.fromCharCode(e[t]));return g.join("")}(a)},e.decode_block=function(e,g,I){if(e.length<1||e.length>o)throw"Invalid block length: "+e.length;var l=C.indexOf(e.length);if(l<=0)throw"Invalid block size";for(var a=new n(0),s=new n(1),c=e.length-1;c>=0;c--){var A=t.indexOf(e[c]);if(A<0)throw"Invalid symbol";var u=s.multiply(A).add(a);if(1===u.compare(i))throw"Overflow";a=u,s=s.multiply(r)}if(l<8&&new n(2).pow(8*l).compare(a)<=0)throw"Overflow 2";return g.set(function(e,g){var t=new Uint8Array(g);if(g<1||g>8)throw"Invalid input length";for(var I=new n(2).pow(8),C=g-1;C>=0;C--)t[C]=e.remainder(I).toJSValue(),e=e.divide(I);return t}(a,l),I),g},e.decode=function(g){if(g=function(e){for(var g=new Uint8Array(e.length),t=0;t<e.length;t++)g[t]=e.charCodeAt(t);return g}(g),0===g.length)return"";var t=Math.floor(g.length/o),n=g.length%o,I=C.indexOf(n);if(I<0)throw"Invalid encoded length";for(var r=new Uint8Array(8*t+I),i=0;i<t;i++)r=e.decode_block(g.subarray(i*o,i*o+o),r,8*i);return n>0&&(r=e.decode_block(g.subarray(t*o,t*o+n),r,8*t)),function(e){for(var g=[],t=0;t<e.length;++t)g.push(("0"+e[t].toString(16)).slice(-2));return g.join("")}(r)},e}();e.exports=I},5546:function(e,g,t){var n=t(2309);function I(e,g,t,n){for(var I=0,C=0,r=[],o=(1<<t)-1,i=0;i<e.length;++i){var l=e[i];if(l<0||l>>g!==0)return null;for(I=I<<g|l,C+=g;C>=t;)C-=t,r.push(I>>C&o)}if(n)C>0&&r.push(I<<t-C&o);else if(C>=g||I<<t-C&o)return null;return r}function C(e,g){var t=!1,C=n.decode(g,n.encodings.BECH32);if(null===C&&(C=n.decode(g,n.encodings.BECH32M),t=!0),null===C||C.hrp!==e||C.data.length<1||C.data[0]>16)return null;var r=I(C.data.slice(1),5,8,!1);return null===r||r.length<2||r.length>40||0===C.data[0]&&20!==r.length&&32!==r.length||0===C.data[0]&&t?null:0===C.data[0]||t?{version:C.data[0],program:r}:null}function r(e,g,t){var r=n.encodings.BECH32;g>0&&(r=n.encodings.BECH32M);var o=n.encode(e,[g].concat(I(t,8,5,!0)),r);return null===C(e,o)?null:o}var o="prod";e.exports={encode:r,decode:C,isValidAddress:function(e,g,t={}){if(!g.bech32Hrp||0===g.bech32Hrp.length)return!1;const{networkType:n=o}=t;var I;if("prod"===n||"testnet"===n)I=g.bech32Hrp[n];else{if(!g.bech32Hrp)return!1;I=g.bech32Hrp.prod.concat(g.bech32Hrp.testnet)}for(var i of I){var l=C(i,e);if(l)return r(i,l.version,l.program)===e.toLowerCase()}return!1}}},8245:function(e,g,t){"use strict";var n=t(4155),I="input is invalid type",C="object"===typeof window,r=C?window:{};r.JS_SHA3_NO_WINDOW&&(C=!1);var o=!C&&"object"===typeof self;!r.JS_SHA3_NO_NODE_JS&&"object"===typeof n&&n.versions&&n.versions.node?r=t.g:o&&(r=self);var i=!r.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!==typeof ArrayBuffer,l="0123456789abcdef".split(""),a=[4,1024,262144,67108864],s=[0,8,16,24],c=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],A=[224,256,384,512],u=[128,256],d=["hex","buffer","arrayBuffer","array","digest"],h={128:168,256:136};!r.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!i||!r.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"===typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var m=function(e,g,t){return function(n){return new J(e,g,e).update(n)[t]()}},b=function(e,g,t){return function(n,I){return new J(e,g,I).update(n)[t]()}},p=function(e,g,t){return function(g,n,I,C){return f["cshake"+e].update(g,n,I,C)[t]()}},Z=function(e,g,t){return function(g,n,I,C){return f["kmac"+e].update(g,n,I,C)[t]()}},y=function(e,g,t,n){for(var I=0;I<d.length;++I){var C=d[I];e[C]=g(t,n,C)}return e},G=function(e,g){var t=m(e,g,"hex");return t.create=function(){return new J(e,g,e)},t.update=function(e){return t.create().update(e)},y(t,m,e,g)},B=[{name:"keccak",padding:[1,256,65536,16777216],bits:A,createMethod:G},{name:"sha3",padding:[6,1536,393216,100663296],bits:A,createMethod:G},{name:"shake",padding:[31,7936,2031616,520093696],bits:u,createMethod:function(e,g){var t=b(e,g,"hex");return t.create=function(t){return new J(e,g,t)},t.update=function(e,g){return t.create(g).update(e)},y(t,b,e,g)}},{name:"cshake",padding:a,bits:u,createMethod:function(e,g){var t=h[e],n=p(e,0,"hex");return n.create=function(n,I,C){return I||C?new J(e,g,n).bytepad([I,C],t):f["shake"+e].create(n)},n.update=function(e,g,t,I){return n.create(g,t,I).update(e)},y(n,p,e,g)}},{name:"kmac",padding:a,bits:u,createMethod:function(e,g){var t=h[e],n=Z(e,0,"hex");return n.create=function(n,I,C){return new w(e,g,I).bytepad(["KMAC",C],t).bytepad([n],t)},n.update=function(e,g,t,I){return n.create(e,t,I).update(g)},y(n,Z,e,g)}}],f={},v=[],S=0;S<B.length;++S)for(var V=B[S],W=V.bits,R=0;R<W.length;++R){var k=V.name+"_"+W[R];if(v.push(k),f[k]=V.createMethod(W[R],V.padding),"sha3"!==V.name){var X=V.name+W[R];v.push(X),f[X]=f[k]}}function J(e,g,t){this.blocks=[],this.s=[],this.padding=g,this.outputBits=t,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=t>>5,this.extraBytes=(31&t)>>3;for(var n=0;n<50;++n)this.s[n]=0}function w(e,g,t){J.call(this,e,g,t)}J.prototype.update=function(e){if(!this.finalized){var g,t=typeof e;if("string"!==t){if("object"!==t)throw I;if(null===e)throw I;if(i&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!i||!ArrayBuffer.isView(e)))throw I;g=!0}for(var n,C,r=this.blocks,o=this.byteCount,l=e.length,a=this.blockCount,c=0,A=this.s;c<l;){if(this.reset)for(this.reset=!1,r[0]=this.block,n=1;n<a+1;++n)r[n]=0;if(g)for(n=this.start;c<l&&n<o;++c)r[n>>2]|=e[c]<<s[3&n++];else for(n=this.start;c<l&&n<o;++c)(C=e.charCodeAt(c))<128?r[n>>2]|=C<<s[3&n++]:C<2048?(r[n>>2]|=(192|C>>6)<<s[3&n++],r[n>>2]|=(128|63&C)<<s[3&n++]):C<55296||C>=57344?(r[n>>2]|=(224|C>>12)<<s[3&n++],r[n>>2]|=(128|C>>6&63)<<s[3&n++],r[n>>2]|=(128|63&C)<<s[3&n++]):(C=65536+((1023&C)<<10|1023&e.charCodeAt(++c)),r[n>>2]|=(240|C>>18)<<s[3&n++],r[n>>2]|=(128|C>>12&63)<<s[3&n++],r[n>>2]|=(128|C>>6&63)<<s[3&n++],r[n>>2]|=(128|63&C)<<s[3&n++]);if(this.lastByteIndex=n,n>=o){for(this.start=n-o,this.block=r[a],n=0;n<a;++n)A[n]^=r[n];Y(A),this.reset=!0}else this.start=n}return this}},J.prototype.encode=function(e,g){var t=255&e,n=1,I=[t];for(t=255&(e>>=8);t>0;)I.unshift(t),t=255&(e>>=8),++n;return g?I.push(n):I.unshift(n),this.update(I),I.length},J.prototype.encodeString=function(e){var g,t=typeof e;if("string"!==t){if("object"!==t)throw I;if(null===e)throw I;if(i&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!i||!ArrayBuffer.isView(e)))throw I;g=!0}var n=0,C=e.length;if(g)n=C;else for(var r=0;r<e.length;++r){var o=e.charCodeAt(r);o<128?n+=1:o<2048?n+=2:o<55296||o>=57344?n+=3:(o=65536+((1023&o)<<10|1023&e.charCodeAt(++r)),n+=4)}return n+=this.encode(8*n),this.update(e),n},J.prototype.bytepad=function(e,g){for(var t=this.encode(g),n=0;n<e.length;++n)t+=this.encodeString(e[n]);var I=g-t%g,C=[];return C.length=I,this.update(C),this},J.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,g=this.lastByteIndex,t=this.blockCount,n=this.s;if(e[g>>2]|=this.padding[3&g],this.lastByteIndex===this.byteCount)for(e[0]=e[t],g=1;g<t+1;++g)e[g]=0;for(e[t-1]|=2147483648,g=0;g<t;++g)n[g]^=e[g];Y(n)}},J.prototype.toString=J.prototype.hex=function(){this.finalize();for(var e,g=this.blockCount,t=this.s,n=this.outputBlocks,I=this.extraBytes,C=0,r=0,o="";r<n;){for(C=0;C<g&&r<n;++C,++r)e=t[C],o+=l[e>>4&15]+l[15&e]+l[e>>12&15]+l[e>>8&15]+l[e>>20&15]+l[e>>16&15]+l[e>>28&15]+l[e>>24&15];r%g===0&&(Y(t),C=0)}return I&&(e=t[C],o+=l[e>>4&15]+l[15&e],I>1&&(o+=l[e>>12&15]+l[e>>8&15]),I>2&&(o+=l[e>>20&15]+l[e>>16&15])),o},J.prototype.arrayBuffer=function(){this.finalize();var e,g=this.blockCount,t=this.s,n=this.outputBlocks,I=this.extraBytes,C=0,r=0,o=this.outputBits>>3;e=I?new ArrayBuffer(n+1<<2):new ArrayBuffer(o);for(var i=new Uint32Array(e);r<n;){for(C=0;C<g&&r<n;++C,++r)i[r]=t[C];r%g===0&&Y(t)}return I&&(i[C]=t[C],e=e.slice(0,o)),e},J.prototype.buffer=J.prototype.arrayBuffer,J.prototype.digest=J.prototype.array=function(){this.finalize();for(var e,g,t=this.blockCount,n=this.s,I=this.outputBlocks,C=this.extraBytes,r=0,o=0,i=[];o<I;){for(r=0;r<t&&o<I;++r,++o)e=o<<2,g=n[r],i[e]=255&g,i[e+1]=g>>8&255,i[e+2]=g>>16&255,i[e+3]=g>>24&255;o%t===0&&Y(n)}return C&&(e=o<<2,g=n[r],i[e]=255&g,C>1&&(i[e+1]=g>>8&255),C>2&&(i[e+2]=g>>16&255)),i},w.prototype=new J,w.prototype.finalize=function(){return this.encode(this.outputBits,!0),J.prototype.finalize.call(this)};var Y=function(e){var g,t,n,I,C,r,o,i,l,a,s,A,u,d,h,m,b,p,Z,y,G,B,f,v,S,V,W,R,k,X,J,w,Y,H,N,F,K,E,x,M,U,T,z,L,Q,D,j,O,P,_,q,$,ee,ge,te,ne,Ie,Ce,re,oe,ie,le,ae;for(n=0;n<48;n+=2)I=e[0]^e[10]^e[20]^e[30]^e[40],C=e[1]^e[11]^e[21]^e[31]^e[41],r=e[2]^e[12]^e[22]^e[32]^e[42],o=e[3]^e[13]^e[23]^e[33]^e[43],i=e[4]^e[14]^e[24]^e[34]^e[44],l=e[5]^e[15]^e[25]^e[35]^e[45],a=e[6]^e[16]^e[26]^e[36]^e[46],s=e[7]^e[17]^e[27]^e[37]^e[47],g=(A=e[8]^e[18]^e[28]^e[38]^e[48])^(r<<1|o>>>31),t=(u=e[9]^e[19]^e[29]^e[39]^e[49])^(o<<1|r>>>31),e[0]^=g,e[1]^=t,e[10]^=g,e[11]^=t,e[20]^=g,e[21]^=t,e[30]^=g,e[31]^=t,e[40]^=g,e[41]^=t,g=I^(i<<1|l>>>31),t=C^(l<<1|i>>>31),e[2]^=g,e[3]^=t,e[12]^=g,e[13]^=t,e[22]^=g,e[23]^=t,e[32]^=g,e[33]^=t,e[42]^=g,e[43]^=t,g=r^(a<<1|s>>>31),t=o^(s<<1|a>>>31),e[4]^=g,e[5]^=t,e[14]^=g,e[15]^=t,e[24]^=g,e[25]^=t,e[34]^=g,e[35]^=t,e[44]^=g,e[45]^=t,g=i^(A<<1|u>>>31),t=l^(u<<1|A>>>31),e[6]^=g,e[7]^=t,e[16]^=g,e[17]^=t,e[26]^=g,e[27]^=t,e[36]^=g,e[37]^=t,e[46]^=g,e[47]^=t,g=a^(I<<1|C>>>31),t=s^(C<<1|I>>>31),e[8]^=g,e[9]^=t,e[18]^=g,e[19]^=t,e[28]^=g,e[29]^=t,e[38]^=g,e[39]^=t,e[48]^=g,e[49]^=t,d=e[0],h=e[1],D=e[11]<<4|e[10]>>>28,j=e[10]<<4|e[11]>>>28,R=e[20]<<3|e[21]>>>29,k=e[21]<<3|e[20]>>>29,oe=e[31]<<9|e[30]>>>23,ie=e[30]<<9|e[31]>>>23,T=e[40]<<18|e[41]>>>14,z=e[41]<<18|e[40]>>>14,H=e[2]<<1|e[3]>>>31,N=e[3]<<1|e[2]>>>31,m=e[13]<<12|e[12]>>>20,b=e[12]<<12|e[13]>>>20,O=e[22]<<10|e[23]>>>22,P=e[23]<<10|e[22]>>>22,X=e[33]<<13|e[32]>>>19,J=e[32]<<13|e[33]>>>19,le=e[42]<<2|e[43]>>>30,ae=e[43]<<2|e[42]>>>30,ge=e[5]<<30|e[4]>>>2,te=e[4]<<30|e[5]>>>2,F=e[14]<<6|e[15]>>>26,K=e[15]<<6|e[14]>>>26,p=e[25]<<11|e[24]>>>21,Z=e[24]<<11|e[25]>>>21,_=e[34]<<15|e[35]>>>17,q=e[35]<<15|e[34]>>>17,w=e[45]<<29|e[44]>>>3,Y=e[44]<<29|e[45]>>>3,v=e[6]<<28|e[7]>>>4,S=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,Ie=e[16]<<23|e[17]>>>9,E=e[26]<<25|e[27]>>>7,x=e[27]<<25|e[26]>>>7,y=e[36]<<21|e[37]>>>11,G=e[37]<<21|e[36]>>>11,$=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,L=e[8]<<27|e[9]>>>5,Q=e[9]<<27|e[8]>>>5,V=e[18]<<20|e[19]>>>12,W=e[19]<<20|e[18]>>>12,Ce=e[29]<<7|e[28]>>>25,re=e[28]<<7|e[29]>>>25,M=e[38]<<8|e[39]>>>24,U=e[39]<<8|e[38]>>>24,B=e[48]<<14|e[49]>>>18,f=e[49]<<14|e[48]>>>18,e[0]=d^~m&p,e[1]=h^~b&Z,e[10]=v^~V&R,e[11]=S^~W&k,e[20]=H^~F&E,e[21]=N^~K&x,e[30]=L^~D&O,e[31]=Q^~j&P,e[40]=ge^~ne&Ce,e[41]=te^~Ie&re,e[2]=m^~p&y,e[3]=b^~Z&G,e[12]=V^~R&X,e[13]=W^~k&J,e[22]=F^~E&M,e[23]=K^~x&U,e[32]=D^~O&_,e[33]=j^~P&q,e[42]=ne^~Ce&oe,e[43]=Ie^~re&ie,e[4]=p^~y&B,e[5]=Z^~G&f,e[14]=R^~X&w,e[15]=k^~J&Y,e[24]=E^~M&T,e[25]=x^~U&z,e[34]=O^~_&$,e[35]=P^~q&ee,e[44]=Ce^~oe&le,e[45]=re^~ie&ae,e[6]=y^~B&d,e[7]=G^~f&h,e[16]=X^~w&v,e[17]=J^~Y&S,e[26]=M^~T&H,e[27]=U^~z&N,e[36]=_^~$&L,e[37]=q^~ee&Q,e[46]=oe^~le&ge,e[47]=ie^~ae&te,e[8]=B^~d&m,e[9]=f^~h&b,e[18]=w^~v&V,e[19]=Y^~S&W,e[28]=T^~H&F,e[29]=z^~N&K,e[38]=$^~L&D,e[39]=ee^~Q&j,e[48]=le^~ge&ne,e[49]=ae^~te&Ie,e[0]^=c[n],e[1]^=c[n+1]};e.exports=f},1661:function(e,g,t){var n=t(8764).Buffer,I=t(5362),C=t(3434).sha512_256,r=t(680),o=t(8245).keccak256,i=t(7817),l=t(3028),a=t(4554),s=t(299);function c(e,g){var t=e.toString(16);return t.length%2===1&&(t="0"+t),t.padStart(g,"0")}function A(e){return e>="A"&&e<="F"||e>="a"&&e<="f"||e>="0"&&e<="9"?1:0}function u(e){var g=0;return e>="A"&&e<="F"?g=e.charCodeAt(0)-"A".charCodeAt(0)+10:e>="a"&&e<="f"?g=e.charCodeAt(0)-"a".charCodeAt(0)+10:e>="0"&&e<="9"&&(g=e.charCodeAt(0)-"0".charCodeAt(0)),g}function d(e){var g="0123456789ABCDEF",t="";return t+=g.charAt(e>>4),t+=g.charAt(15&e)}e.exports={numberToHex:c,toHex:function(e){for(var g="",t=0;t<e.length;t++)g+=c(e[t]);return g},sha256:function(e,g="HEX"){var t=new I("SHA-256",g);return t.update(e),t.getHash(g)},sha256x2:function(e,g="HEX"){return this.sha256(this.sha256(e,g),g)},sha256Checksum:function(e){return this.sha256(this.sha256(e)).substr(0,8)},sha512_256:function(e,g="HEX"){const t=C.create();return t.update(n.from(e,g)),t.hex().toUpperCase()},blake256:function(e){return(new r).update(e,"hex").digest("hex")},blake256Checksum:function(e){return this.blake256(this.blake256(e)).substr(0,8)},blake2b:function(e,g){return new i(g).update(n.from(e,"hex")).digest("hex")},keccak256:function(e){return o(e)},keccak256Checksum:function(e){return o(e).toString().substr(0,8)},blake2b256:function(e){return new i(32).update(n.from(e,"hex"),32).digest("hex")},base58:l.decode,byteArray2hexStr:function(e){for(var g="",t=0;t<e.length-1;t++)g+=d(e[t]);return g+=d(e[t])},hexStr2byteArray:function(e){var g=Array(),t=0,n=0,I=0,C=0;for(n=0;n<e.length;n++){var r=e.charAt(n);A(r)&&(t<<=4,t+=u(r),0===++I%2&&(g[C++]=t,t=0))}return g},bigNumberToBuffer:function(e,g){return new s(e).toBuffer({size:g,endian:"big"})},base32:a}},3444:function(e,g,t){var n=t(8433),I=t(9947),C=t(207),r=t(4588),o=t(9738),i=t(6937),l=t(2548),a=t(4740),s=t(7409),c=t(2179),A=t(1859),u=t(7201),d=t(4370),h=t(1935),m=t(3585),b=t(7554),p=t(4292),Z=[{name:"Bitcoin",symbol:"btc",addressTypes:{prod:["00","05"],testnet:["6f","c4","3c","26"]},bech32Hrp:{prod:["bc"],testnet:["tb"]},validator:C},{name:"BitcoinCash",symbol:"bch",regexp:"^[qQpP]{1}[0-9a-zA-Z]{41}$",addressTypes:{prod:["00","05"],testnet:["6f","c4"]},validator:A},{name:"Bitcoin SV",symbol:"bsv",regexp:"^[qQ]{1}[0-9a-zA-Z]{41}$",addressTypes:{prod:["00","05"],testnet:["6f","c4"]},validator:A},{name:"LiteCoin",symbol:"ltc",addressTypes:{prod:["30","05","32"],testnet:["6f","c4","3a"]},bech32Hrp:{prod:["ltc"],testnet:["tltc"]},validator:C},{name:"PeerCoin",symbol:"ppc",addressTypes:{prod:["37","75"],testnet:["6f","c4"]},validator:C},{name:"DogeCoin",symbol:"doge",addressTypes:{prod:["1e","16"],testnet:["71","c4"]},validator:C},{name:"BeaverCoin",symbol:"bvc",addressTypes:{prod:["19","05"],testnet:["6f","c4"]},validator:C},{name:"FreiCoin",symbol:"frc",addressTypes:{prod:["00","05"],testnet:["6f","c4"]},validator:C},{name:"ProtoShares",symbol:"pts",addressTypes:{prod:["38","05"],testnet:["6f","c4"]},validator:C},{name:"MegaCoin",symbol:"mec",addressTypes:{prod:["32","05"],testnet:["6f","c4"]},validator:C},{name:"PrimeCoin",symbol:"xpm",addressTypes:{prod:["17","53"],testnet:["6f","c4"]},validator:C},{name:"AuroraCoin",symbol:"aur",addressTypes:{prod:["17","05"],testnet:["6f","c4"]},validator:C},{name:"NameCoin",symbol:"nmc",addressTypes:{prod:["34"],testnet:[]},validator:C},{name:"BioCoin",symbol:"bio",addressTypes:{prod:["19","14"],testnet:["6f","c4"]},validator:C},{name:"GarliCoin",symbol:"grlc",addressTypes:{prod:["26","05"],testnet:["6f","c4"]},validator:C},{name:"VertCoin",symbol:"vtc",addressTypes:{prod:["0x","47","71","05"],testnet:["6f","c4"]},validator:C},{name:"BitcoinGold",symbol:"btg",addressTypes:{prod:["26","17"],testnet:["6f","c4"]},validator:C},{name:"Komodo",symbol:"kmd",addressTypes:{prod:["3c","55"],testnet:["0","5"]},validator:C},{name:"BitcoinZ",symbol:"btcz",expectedLength:26,addressTypes:{prod:["1cb8","1cbd"],testnet:["1d25","1cba"]},validator:C},{name:"BitcoinPrivate",symbol:"btcp",expectedLength:26,addressTypes:{prod:["1325","13af"],testnet:["1957","19e0"]},validator:C},{name:"Hush",symbol:"hush",expectedLength:26,addressTypes:{prod:["1cb8","1cbd"],testnet:["1d25","1cba"]},validator:C},{name:"SnowGem",symbol:"sng",expectedLength:26,addressTypes:{prod:["1c28","1c2d"],testnet:["1d25","1cba"]},validator:C},{name:"ZCash",symbol:"zec",expectedLength:26,addressTypes:{prod:["1cb8","1cbd"],testnet:["1d25","1cba"]},validator:C},{name:"ZClassic",symbol:"zcl",expectedLength:26,addressTypes:{prod:["1cb8","1cbd"],testnet:["1d25","1cba"]},validator:C},{name:"ZenCash",symbol:"zen",expectedLength:26,addressTypes:{prod:["2089","2096"],testnet:["2092","2098"]},validator:C},{name:"VoteCoin",symbol:"vot",expectedLength:26,addressTypes:{prod:["1cb8","1cbd"],testnet:["1d25","1cba"]},validator:C},{name:"Decred",symbol:"dcr",addressTypes:{prod:["073f","071a"],testnet:["0f21","0efc"]},hashFunction:"blake256",expectedLength:26,validator:C},{name:"GameCredits",symbol:"game",addressTypes:{prod:["26","05"],testnet:[]},validator:I},{name:"PIVX",symbol:"pivx",addressTypes:{prod:["1e","0d"],testnet:[]},validator:C},{name:"SolarCoin",symbol:"slr",addressTypes:{prod:["12","05"],testnet:[]},validator:C},{name:"MonaCoin",symbol:"mona",addressTypes:{prod:["32","37"],testnet:[]},validator:C},{name:"DigiByte",symbol:"dgb",addressTypes:{prod:["1e","3f"],testnet:[]},bech32Hrp:{prod:["dgb","S"],testnet:[]},validator:C},{name:"Tether",symbol:"usdt",addressTypes:{prod:["00","05"],testnet:["6f","c4"]},validator:m},{name:"Ripple",symbol:"xrp",validator:n},{name:"Dash",symbol:"dash",addressTypes:{prod:["4c","10"],testnet:["8c","13"]},validator:C},{name:"Neo",symbol:"neo",addressTypes:{prod:["17"],testnet:[]},validator:C},{name:"NeoGas",symbol:"gas",addressTypes:{prod:["17"],testnet:[]},validator:C},{name:"Qtum",symbol:"qtum",addressTypes:{prod:["3a","32"],testnet:["78","6e"]},validator:C},{name:"Waves",symbol:"waves",addressTypes:{prod:["0157"],testnet:["0154"]},expectedLength:26,hashFunction:"blake256keccak256",regex:/^[a-zA-Z0-9]{35}$/,validator:C},{name:"Ethereum",symbol:"eth",validator:I},{name:"EtherZero",symbol:"etz",validator:I},{name:"EthereumClassic",symbol:"etc",validator:I},{name:"Callisto",symbol:"clo",validator:I},{name:"Bankex",symbol:"bkx",validator:I},{name:"Cardano",symbol:"ada",bech32Hrp:{prod:["addr"],testnet:["addr"]},validator:r},{name:"Monero",symbol:"xmr",addressTypes:{prod:["18","42"],testnet:["53","63"],stagenet:["24"]},iAddressTypes:{prod:["19"],testnet:["54"],stagenet:["25"]},validator:o},{name:"Aragon",symbol:"ant",validator:I},{name:"Basic Attention Token",symbol:"bat",validator:I},{name:"Bancor",symbol:"bnt",validator:I},{name:"Civic",symbol:"cvc",validator:I},{name:"District0x",symbol:"dnt",validator:I},{name:"Gnosis",symbol:"gno",validator:I},{name:"Golem (GNT)",symbol:"gnt",validator:I},{name:"Golem",symbol:"glm",validator:I},{name:"Matchpool",symbol:"gup",validator:I},{name:"Melon",symbol:"mln",validator:I},{name:"Numeraire",symbol:"nmr",validator:I},{name:"OmiseGO",symbol:"omg",validator:I},{name:"TenX",symbol:"pay",validator:I},{name:"Ripio Credit Network",symbol:"rcn",validator:I},{name:"Augur",symbol:"rep",validator:I},{name:"iExec RLC",symbol:"rlc",validator:I},{name:"Salt",symbol:"salt",validator:I},{name:"Status",symbol:"snt",validator:I},{name:"Storj",symbol:"storj",validator:I},{name:"Swarm City",symbol:"swt",validator:I},{name:"TrueUSD",symbol:"tusd",validator:I},{name:"Wings",symbol:"wings",validator:I},{name:"0x",symbol:"zrx",validator:I},{name:"Expanse",symbol:"exp",validator:I},{name:"Viberate",symbol:"vib",validator:I},{name:"Odyssey",symbol:"ocn",validator:I},{name:"Polymath",symbol:"poly",validator:I},{name:"Storm",symbol:"storm",validator:I},{name:"Nano",symbol:"nano",validator:i},{name:"RaiBlocks",symbol:"xrb",validator:i},{name:"Siacoin",symbol:"sc",validator:l},{name:"HyperSpace",symbol:"xsc",validator:l},{name:"loki",symbol:"loki",addressTypes:{prod:["114","115","116"],testnet:[]},iAddressTypes:{prod:["115"],testnet:[]},validator:o},{name:"LBRY Credits",symbol:"lbc",addressTypes:{prod:["55"],testnet:[]},validator:C},{name:"Tron",symbol:"trx",addressTypes:{prod:[65],testnet:[160]},validator:a},{name:"Nem",symbol:"xem",validator:s},{name:"Lisk",symbol:"lsk",validator:c},{name:"Stellar",symbol:"xlm",validator:u},{name:"BTU Protocol",symbol:"btu",validator:I},{name:"Crypto.com Coin",symbol:"cro",bech32Hrp:{prod:["cro"],testnet:["tcro"]},validator:t(3961)},{name:"Multi-collateral DAI",symbol:"dai",validator:I},{name:"Enjin Coin",symbol:"enj",validator:I},{name:"HedgeTrade",symbol:"hedg",validator:I},{name:"Cred",symbol:"lba",validator:I},{name:"Chainlink",symbol:"link",validator:I},{name:"Loom Network",symbol:"loom",validator:I},{name:"Maker",symbol:"mkr",validator:I},{name:"Metal",symbol:"mtl",validator:I},{name:"Ocean Protocol",symbol:"ocean",validator:I},{name:"Quant",symbol:"qnt",validator:I},{name:"Synthetix Network",symbol:"snx",validator:I},{name:"SOLVE",symbol:"solve",validator:I},{name:"Spendcoin",symbol:"spnd",validator:I},{name:"TEMCO",symbol:"temco",validator:I},{name:"EOS",symbol:"eos",validator:d},{name:"Tezos",symbol:"xtz",validator:h},{name:"VeChain",symbol:"vet",validator:I},{name:"StormX",symbol:"stmx",validator:I},{name:"AugurV2",symbol:"repv2",validator:I},{name:"FirmaChain",symbol:"fct",validator:I},{name:"BlockTrade",symbol:"btt",validator:I},{name:"Quantum Resistant Ledger",symbol:"qrl",validator:I},{name:"Serve",symbol:"serv",validator:I},{name:"Tap",symbol:"xtp",validator:I},{name:"Compound",symbol:"comp",validator:I},{name:"Paxos",symbol:"pax",validator:I},{name:"USD Coin",symbol:"usdc",validator:I},{name:"CUSD",symbol:"cusd",validator:I},{name:"Algorand",symbol:"algo",validator:b},{name:"Polkadot",symbol:"dot",validator:p},{name:"Uniswap Coin",symbol:"uni",validator:I},{name:"Aave Coin",symbol:"aave",validator:I},{name:"Matic",symbol:"matic",validator:I},{name:"Decentraland",symbol:"mana",validator:I},{name:"Solana",symbol:"sol",validator:t(6072),maxLength:44,minLength:43},{name:"Binance",symbol:"bnb",validator:I},{name:"Avalanche",symbol:"avax",validator:I}];e.exports={getByNameOrSymbol:function(e){var g=e.toLowerCase();return Z.find((function(e){return e.name.toLowerCase()===g||e.symbol.toLowerCase()===g}))},getAll:function(){return Z}}},4292:function(e,g,t){const n=t(1661),I=[{addressLength:3,accountIndexLength:1,checkSumLength:1},{addressLength:4,accountIndexLength:2,checkSumLength:1},{addressLength:5,accountIndexLength:2,checkSumLength:2},{addressLength:6,accountIndexLength:4,checkSumLength:1},{addressLength:7,accountIndexLength:4,checkSumLength:2},{addressLength:8,accountIndexLength:4,checkSumLength:3},{addressLength:9,accountIndexLength:4,checkSumLength:4},{addressLength:10,accountIndexLength:8,checkSumLength:1},{addressLength:11,accountIndexLength:8,checkSumLength:2},{addressLength:12,accountIndexLength:8,checkSumLength:3},{addressLength:13,accountIndexLength:8,checkSumLength:4},{addressLength:14,accountIndexLength:8,checkSumLength:5},{addressLength:15,accountIndexLength:8,checkSumLength:6},{addressLength:16,accountIndexLength:8,checkSumLength:7},{addressLength:17,accountIndexLength:8,checkSumLength:8},{addressLength:34,accountIndexLength:32,checkSumLength:2}];e.exports={isValidAddress:function(e,g,t={}){const{networkType:n="prod"}=t;return this.verifyChecksum(e)},verifyChecksum:function(e){try{const g="53533538505245",t=n.base58(e),C=n.byteArray2hexStr(t.slice(0,1)),r=t.slice(1),o=I.find((e=>e.addressLength===r.length));if(!o)throw new Error("Invalid address length");const i=n.byteArray2hexStr(r.slice(0,o.accountIndexLength)),l=n.byteArray2hexStr(r.slice(-o.checkSumLength));return n.blake2b(g+C+i,64).substr(0,2*o.checkSumLength).toUpperCase()==l}catch(g){return!1}}}},4370:function(e){e.exports={isValidAddress:function(e,g,t){return function(e,g,t){return-1!==e.search(/^[a-z0-9.]+$/g)&&12===e.length}(e)}}},9947:function(e,g,t){var n=t(1661);e.exports={isValidAddress:function(e){return!!/^0x[0-9a-fA-F]{40}$/.test(e)&&(!(!/^0x[0-9a-f]{40}$/.test(e)&&!/^0x?[0-9A-F]{40}$/.test(e))||this.verifyChecksum(e))},verifyChecksum:function(e){e=e.replace("0x","");for(var g=n.keccak256(e.toLowerCase()),t=0;t<40;t++)if(parseInt(g[t],16)>7&&e[t].toUpperCase()!==e[t]||parseInt(g[t],16)<=7&&e[t].toLowerCase()!==e[t])return!1;return!0}}},2179:function(e,g,t){var n=t(8764).Buffer,I=t(1661),C=new RegExp("^[0-9]{1,20}L$");e.exports={isValidAddress:function(e){return!!C.test(e)&&this.verifyAddress(e)},verifyAddress:function(e){var g=e.substring(0,e.length-1),t=I.bigNumberToBuffer(g);return n.from(t).slice(0,8).equals(t)}}},9738:function(e,g,t){var n=t(1661),I=t(7041),C="prod",r=new RegExp("^[123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]{95}$"),o=new RegExp("^[123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz]{106}$");e.exports={isValidAddress:function(e,g,t={}){const{networkType:i=C}=t;var l="standard";if(!r.test(e)){if(!o.test(e))return!1;l="integrated"}var a=I.decode(e);return!!a&&(!!function(e,g,t,n){var I=g.addressTypes;"integrated"==n&&(I=g.iAddressTypes);var C=parseInt(e.substr(0,2),16).toString();switch(t){case"prod":return I.prod.indexOf(C)>=0;case"testnet":return I.testnet.indexOf(C)>=0;case"stagenet":return I.stagenet.indexOf(C)>=0;case"both":return I.prod.indexOf(C)>=0||I.testnet.indexOf(C)>=0||I.stagenet.indexOf(C)>=0;default:return!1}}(a,g,i,l)&&a.slice(-8)===n.keccak256Checksum(function(e){if(e.length%2!==0)return null;for(var g=new Uint8Array(e.length/2),t=0;t<e.length/2;++t)g[t]=parseInt(e.slice(2*t,2*t+2),16);return g}(a.slice(0,-8))))}}},6937:function(e,g,t){var n=t(1661),I="13456789abcdefghijkmnopqrstuwxyz",C=t(8162)(I),r=new RegExp("^(xrb|nano)_(["+I+"]{60})$");e.exports={isValidAddress:function(e){return!!r.test(e)&&this.verifyChecksum(e)},verifyChecksum:function(e){var g=C.decode(r.exec(e)[2]).slice(-37);return n.blake2b(n.toHex(g.slice(0,-5)),5)===n.toHex(g.slice(-5).reverse())}}},7409:function(e,g,t){var n=t(8764).Buffer,I=t(1661);e.exports={isValidAddress:function(e){var g=e.toString().toUpperCase().replace(/-/g,"");if(!g||40!==g.length)return!1;var t=I.toHex(I.base32.b32decode(g));return I.keccak256Checksum(n.from(t.slice(0,42),"hex"))===t.slice(42)}}},8433:function(e,g,t){var n=t(1661),I="rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz",C=t(8162)(I),r=new RegExp("^r["+I+"]{27,35}$");e.exports={isValidAddress:function(e){return!!r.test(e)&&this.verifyChecksum(e)},verifyChecksum:function(e){var g=C.decode(e);return n.sha256Checksum(n.toHex(g.slice(0,-4)))===n.toHex(g.slice(-4))}}},2548:function(e,g,t){var n=t(1661),I=t(2307);e.exports={isValidAddress:function(e){return 76===e.length&&this.verifyChecksum(e)},verifyChecksum:function(e){var g=e.slice(0,64),t=e.slice(64,76),C=n.blake2b(g,32).slice(0,12);return!!I(C,t)}}},7201:function(e,g,t){var n=t(8162),I=t(1860),C=t(1661),r="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",o=n(r),i=new RegExp("^["+r+"]{56}$");e.exports={isValidAddress:function(e){return!!i.test(e)&&this.verifyChecksum(e)},verifyChecksum:function(e){var g,t=o.decode(e);return 48===t[0]&&C.numberToHex((255&(g=I.crc16xmodem(t.slice(0,-2))))<<8|g>>8&255,4)===C.toHex(t.slice(-2))}}},1935:function(e,g,t){const n=t(3028),I=t(1661),C=new Uint8Array([6,161,159]);e.exports={isValidAddress:function(e){try{let g=function(e){let g=e.slice(0,-4),t=e.slice(-4),n=I.hexStr2byteArray(I.sha256x2(I.byteArray2hexStr(g)));if(!(t[0]^n[0]|t[1]^n[1]|t[2]^n[2]|t[3]^n[3]))return g}(n.decode(e));return!!g&&(g.slice(C.length),!0)}catch(g){return!1}}}},4740:function(e,g,t){var n=t(1661);e.exports={isValidAddress:function(e,g,t){var I=t?t.networkType:"",C=function(e){if("string"!==typeof e)return!1;if(e.length<=4)return!1;try{var g=n.base58(e)}catch(o){return!1}var t=g.length-4,I=g.slice(t);g=g.slice(0,t);var C=n.sha256(n.byteArray2hexStr(g)),r=n.hexStr2byteArray(n.sha256(C)).slice(0,4);return I[0]===r[0]&&I[1]===r[1]&&I[2]===r[2]&&I[3]===r[3]&&g}(e);return!!C&&(21===C.length&&function(e,g){var t=g||"prod";return"prod"!==t&&"testnet"!==t&&(t="prod"),e.addressTypes[t][0]}(g,I)===C[0])}}},3585:function(e,g,t){var n=t(207),I=t(9947);e.exports={isValidAddress:function(e,g,t){if(t){if("erc20"===t.chainType)return I.isValidAddress(e,g,t.networkType);if("omni"===t.chainType)return n.isValidAddress(e,g,t.networkType)}return function(e,g,t){return n.isValidAddress(e,g,t)||I.isValidAddress(e,g,t)}(e,g,t)}}},4423:function(e,g,t){var n=t(3444);e.exports={validate:function(e,g,t){var I=n.getByNameOrSymbol(g||"bitcoin");if(I&&I.validator)return t&&"string"===typeof t?I.validator.isValidAddress(e,I,{networkType:t}):I.validator.isValidAddress(e,I,t);throw new Error("Missing validator for currency: "+g)},getCurrencies:function(){return n.getAll()},findCurrency:function(e){return n.getByNameOrSymbol(e)||null}}},6840:function(e,g,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return t(1101)}])},9016:function(e,g,t){"use strict";t.d(g,{K:function(){return Lt}});var n=t(4155),I={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a Teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"};const C=(e,g)=>t=>(t.status=e,t.statusText=g||I[String(e)],t);var r="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t.g?t.g:"undefined"!==typeof self?self:{},o={},i={},l={};Object.defineProperty(l,"__esModule",{value:!0}),l.normalizeHeaderName=void 0;var a=/[^a-z0-9\-#$%&'*+.^_`|~]/i;l.normalizeHeaderName=function(e){if("string"!==typeof e&&(e=String(e)),a.test(e)||""===e.trim())throw new TypeError("Invalid character in header field name");return e.toLowerCase()};var s={};Object.defineProperty(s,"__esModule",{value:!0}),s.normalizeHeaderValue=void 0,s.normalizeHeaderValue=function(e){return"string"!==typeof e&&(e=String(e)),e};var c=r&&r.__generator||function(e,g){var t,n,I,C,r={label:0,sent:function(){if(1&I[0])throw I[1];return I[1]},trys:[],ops:[]};return C={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(C[Symbol.iterator]=function(){return this}),C;function o(C){return function(o){return function(C){if(t)throw new TypeError("Generator is already executing.");for(;r;)try{if(t=1,n&&(I=2&C[0]?n.return:C[0]?n.throw||((I=n.return)&&I.call(n),0):n.next)&&!(I=I.call(n,C[1])).done)return I;switch(n=0,I&&(C=[2&C[0],I.value]),C[0]){case 0:case 1:I=C;break;case 4:return r.label++,{value:C[1],done:!1};case 5:r.label++,n=C[1],C=[0];continue;case 7:C=r.ops.pop(),r.trys.pop();continue;default:if(!(I=(I=r.trys).length>0&&I[I.length-1])&&(6===C[0]||2===C[0])){r=0;continue}if(3===C[0]&&(!I||C[1]>I[0]&&C[1]<I[3])){r.label=C[1];break}if(6===C[0]&&r.label<I[1]){r.label=I[1],I=C;break}if(I&&r.label<I[2]){r.label=I[2],r.ops.push(C);break}I[2]&&r.ops.pop(),r.trys.pop();continue}C=g.call(e,r)}catch(o){C=[6,o],n=0}finally{t=I=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([C,o])}}},A=r&&r.__read||function(e,g){var t="function"===typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,I,C=t.call(e),r=[];try{for(;(void 0===g||g-- >0)&&!(n=C.next()).done;)r.push(n.value)}catch(o){I={error:o}}finally{try{n&&!n.done&&(t=C.return)&&t.call(C)}finally{if(I)throw I.error}}return r},u=r&&r.__values||function(e){var g="function"===typeof Symbol&&Symbol.iterator,t=g&&e[g],n=0;if(t)return t.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(i,"__esModule",{value:!0});var d=l,h=s,m=function(){function e(g){var t=this;(this._headers={},this._names=new Map,["Headers","HeadersPolyfill"].includes(null===g||void 0===g?void 0:g.constructor.name)||g instanceof e)?g.forEach((function(e,g){t.append(g,e)}),this):Array.isArray(g)?g.forEach((function(e){var g=A(e,2),n=g[0],I=g[1];t.append(n,Array.isArray(I)?I.join(", "):I)})):g&&Object.getOwnPropertyNames(g).forEach((function(e){var n=g[e];t.append(e,Array.isArray(n)?n.join(", "):n)}))}return e.prototype[Symbol.iterator]=function(){return this.entries()},e.prototype.keys=function(){var e,g,t,n,I;return c(this,(function(C){switch(C.label){case 0:C.trys.push([0,5,6,7]),e=u(Object.keys(this._headers)),g=e.next(),C.label=1;case 1:return g.done?[3,4]:[4,g.value];case 2:C.sent(),C.label=3;case 3:return g=e.next(),[3,1];case 4:return[3,7];case 5:return t=C.sent(),n={error:t},[3,7];case 6:try{g&&!g.done&&(I=e.return)&&I.call(e)}finally{if(n)throw n.error}return[7];case 7:return[2]}}))},e.prototype.values=function(){var e,g,t,n,I;return c(this,(function(C){switch(C.label){case 0:C.trys.push([0,5,6,7]),e=u(Object.values(this._headers)),g=e.next(),C.label=1;case 1:return g.done?[3,4]:[4,g.value];case 2:C.sent(),C.label=3;case 3:return g=e.next(),[3,1];case 4:return[3,7];case 5:return t=C.sent(),n={error:t},[3,7];case 6:try{g&&!g.done&&(I=e.return)&&I.call(e)}finally{if(n)throw n.error}return[7];case 7:return[2]}}))},e.prototype.entries=function(){var e,g,t,n,I,C;return c(this,(function(r){switch(r.label){case 0:r.trys.push([0,5,6,7]),e=u(Object.keys(this._headers)),g=e.next(),r.label=1;case 1:return g.done?[3,4]:[4,[t=g.value,this.get(t)]];case 2:r.sent(),r.label=3;case 3:return g=e.next(),[3,1];case 4:return[3,7];case 5:return n=r.sent(),I={error:n},[3,7];case 6:try{g&&!g.done&&(C=e.return)&&C.call(e)}finally{if(I)throw I.error}return[7];case 7:return[2]}}))},e.prototype.get=function(e){return this._headers[d.normalizeHeaderName(e)]||null},e.prototype.set=function(e,g){var t=d.normalizeHeaderName(e);this._headers[t]=h.normalizeHeaderValue(g),this._names.set(t,e)},e.prototype.append=function(e,g){var t=this.has(e)?this.get(e)+", "+g:g;this.set(e,t)},e.prototype.delete=function(e){if(!this.has(e))return this;var g=d.normalizeHeaderName(e);return delete this._headers[g],this._names.delete(g),this},e.prototype.all=function(){return this._headers},e.prototype.raw=function(){var e=this;return Object.entries(this._headers).reduce((function(g,t){var n=A(t,2),I=n[0],C=n[1];return g[e._names.get(I)]=C,g}),{})},e.prototype.has=function(e){return this._headers.hasOwnProperty(d.normalizeHeaderName(e))},e.prototype.forEach=function(e,g){for(var t in this._headers)this._headers.hasOwnProperty(t)&&e.call(g,this._headers[t],t,this)},e}();i.default=m;var b={},p={};Object.defineProperty(p,"__esModule",{value:!0}),p.headersToList=void 0,p.headersToList=function(e){var g=[];return e.forEach((function(e,t){var n=e.includes(",")?e.split(",").map((function(e){return e.trim()})):e;g.push([t,n])})),g};var Z=r&&r.__read||function(e,g){var t="function"===typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,I,C=t.call(e),r=[];try{for(;(void 0===g||g-- >0)&&!(n=C.next()).done;)r.push(n.value)}catch(o){I={error:o}}finally{try{n&&!n.done&&(t=C.return)&&t.call(C)}finally{if(I)throw I.error}}return r};Object.defineProperty(b,"__esModule",{value:!0}),b.headersToString=void 0;var y=p;b.headersToString=function(e){return y.headersToList(e).map((function(e){var g=Z(e,2),t=g[0],n=g[1];return t+": "+[].concat(n).join(", ")})).join("\r\n")};var G={};Object.defineProperty(G,"__esModule",{value:!0}),G.headersToObject=void 0;var B=["user-agent"];G.headersToObject=function(e){var g={};return e.forEach((function(e,t){var n=!B.includes(t.toLowerCase())&&e.includes(",");g[t]=n?e.split(",").map((function(e){return e.trim()})):e})),g};var f={};Object.defineProperty(f,"__esModule",{value:!0}),f.stringToHeaders=void 0;var v=i;f.stringToHeaders=function(e){return e.trim().split(/[\r\n]+/).reduce((function(e,g){if(""===g.trim())return e;var t=g.split(": "),n=t.shift(),I=t.join(": ");return e.append(n,I),e}),new v.default)};var S={},V=r&&r.__read||function(e,g){var t="function"===typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,I,C=t.call(e),r=[];try{for(;(void 0===g||g-- >0)&&!(n=C.next()).done;)r.push(n.value)}catch(o){I={error:o}}finally{try{n&&!n.done&&(t=C.return)&&t.call(C)}finally{if(I)throw I.error}}return r};Object.defineProperty(S,"__esModule",{value:!0}),S.listToHeaders=void 0;var W=i;S.listToHeaders=function(e){var g=new W.default;return e.forEach((function(e){var t=V(e,2),n=t[0],I=t[1];[].concat(I).forEach((function(e){g.append(n,e)}))})),g};var R={},k={};Object.defineProperty(k,"__esModule",{value:!0}),k.reduceHeadersObject=void 0,k.reduceHeadersObject=function(e,g,t){return Object.keys(e).reduce((function(t,n){return g(t,n,e[n])}),t)},Object.defineProperty(R,"__esModule",{value:!0}),R.objectToHeaders=void 0;var X=i,J=k;R.objectToHeaders=function(e){return J.reduceHeadersObject(e,(function(e,g,t){return[].concat(t).filter(Boolean).forEach((function(t){e.append(g,t)})),e}),new X.default)};var w={},Y=r&&r.__read||function(e,g){var t="function"===typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,I,C=t.call(e),r=[];try{for(;(void 0===g||g-- >0)&&!(n=C.next()).done;)r.push(n.value)}catch(o){I={error:o}}finally{try{n&&!n.done&&(t=C.return)&&t.call(C)}finally{if(I)throw I.error}}return r};Object.defineProperty(w,"__esModule",{value:!0}),w.flattenHeadersList=void 0,w.flattenHeadersList=function(e){return e.map((function(e){var g=Y(e,2),t=g[0],n=g[1];return[t,[].concat(n).join("; ")]}))};var H={};Object.defineProperty(H,"__esModule",{value:!0}),H.flattenHeadersObject=void 0;var N=k;function F(...e){return g=>{const[t,n]=e;if("string"===typeof t)g.headers.append(t,n);else{o.objectToHeaders(t).forEach(((e,t)=>{g.headers.append(t,e)}))}return g}}H.flattenHeadersObject=function(e){return N.reduceHeadersObject(e,(function(e,g,t){return e[g]=[].concat(t).join("; "),e}),{})},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.flattenHeadersObject=e.flattenHeadersList=e.reduceHeadersObject=e.objectToHeaders=e.listToHeaders=e.stringToHeaders=e.headersToObject=e.headersToList=e.headersToString=e.Headers=void 0;var g=i;Object.defineProperty(e,"Headers",{enumerable:!0,get:function(){return g.default}});var t=b;Object.defineProperty(e,"headersToString",{enumerable:!0,get:function(){return t.headersToString}});var n=p;Object.defineProperty(e,"headersToList",{enumerable:!0,get:function(){return n.headersToList}});var I=G;Object.defineProperty(e,"headersToObject",{enumerable:!0,get:function(){return I.headersToObject}});var C=f;Object.defineProperty(e,"stringToHeaders",{enumerable:!0,get:function(){return C.stringToHeaders}});var r=S;Object.defineProperty(e,"listToHeaders",{enumerable:!0,get:function(){return r.listToHeaders}});var o=R;Object.defineProperty(e,"objectToHeaders",{enumerable:!0,get:function(){return o.objectToHeaders}});var l=k;Object.defineProperty(e,"reduceHeadersObject",{enumerable:!0,get:function(){return l.reduceHeadersObject}});var a=w;Object.defineProperty(e,"flattenHeadersList",{enumerable:!0,get:function(){return a.flattenHeadersList}});var s=H;Object.defineProperty(e,"flattenHeadersObject",{enumerable:!0,get:function(){return s.flattenHeadersObject}})}(o);var K=function(e,g){if("string"!==typeof e)throw new TypeError("argument str must be a string");for(var t={},n=g||{},I=e.split(";"),C=n.decode||x,r=0;r<I.length;r++){var o=I[r],i=o.indexOf("=");if(!(i<0)){var l=o.substring(0,i).trim();if(void 0==t[l]){var a=o.substring(i+1,o.length).trim();'"'===a[0]&&(a=a.slice(1,-1)),t[l]=T(a,C)}}}return t},E=function(e,g,t){var n=t||{},I=n.encode||M;if("function"!==typeof I)throw new TypeError("option encode is invalid");if(!U.test(e))throw new TypeError("argument name is invalid");var C=I(g);if(C&&!U.test(C))throw new TypeError("argument val is invalid");var r=e+"="+C;if(null!=n.maxAge){var o=n.maxAge-0;if(isNaN(o)||!isFinite(o))throw new TypeError("option maxAge is invalid");r+="; Max-Age="+Math.floor(o)}if(n.domain){if(!U.test(n.domain))throw new TypeError("option domain is invalid");r+="; Domain="+n.domain}if(n.path){if(!U.test(n.path))throw new TypeError("option path is invalid");r+="; Path="+n.path}if(n.expires){if("function"!==typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");r+="; Expires="+n.expires.toUTCString()}n.httpOnly&&(r+="; HttpOnly");n.secure&&(r+="; Secure");if(n.sameSite){switch("string"===typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return r},x=decodeURIComponent,M=encodeURIComponent,U=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function T(e,g){try{return g(e)}catch(t){return e}}const z=(e,g,t)=>n=>{const I=E(e,g,t);return n.headers.set("Set-Cookie",I),"undefined"!==typeof document&&(document.cookie=I),n};function L(e){try{return JSON.parse(e)}catch(g){return}}const Q=e=>g=>(g.headers.set("Content-Type","application/json"),g.body=JSON.stringify(e),g);var D={exports:{}};(function(e){function g(){return"undefined"!==typeof navigator&&"ReactNative"===navigator.product||!("undefined"===typeof n||!n.versions||!n.versions.node)}e.isNodeProcess=g,Object.defineProperty(e,"__esModule",{value:!0})})(D.exports);const j=2147483647,O=()=>D.exports.isNodeProcess()?5:Math.floor(300*Math.random()+100),P=e=>g=>{let t;if("string"===typeof e)switch(e){case"infinite":t=j;break;case"real":t=O();break;default:throw new Error(`Failed to delay a response: unknown delay mode "${e}". Please make sure you provide one of the supported modes ("real", "infinite") or a number to "ctx.delay".`)}else if("undefined"===typeof e)t=O();else{if(e>j)throw new Error(`Failed to delay a response: provided delay duration (${e}) exceeds the maximum allowed duration for "setTimeout" (2147483647). This will cause the response to be returned immediately. Please use a number within the allowed range to delay the response by exact duration, or consider the "infinite" delay mode to delay the response indefinitely.`);t=e}return g.delay=t,g},_=D.exports.isNodeProcess()?t(8079):window.fetch,q=e=>{const g=new o.Headers(e.headers);return g.set("x-msw-bypass","true"),Object.assign(Object.assign({},e),{headers:g.all()})},$=(e,g={})=>{if("string"===typeof e)return _(e,q(g));const t=(e=>{const{body:g,method:t}=e,n=Object.assign(Object.assign({},e),{body:void 0});return["GET","HEAD"].includes(t)||(n.body="object"===typeof g||"number"===typeof g||"boolean"===typeof g?JSON.stringify(g):g),n})(e),n=q(t);return _(e.url.href,n)};var ee=t(7941);function ge(e,g,t,n){return new(t||(t=Promise))((function(I,C){function r(e){try{i(n.next(e))}catch(g){C(g)}}function o(e){try{i(n.throw(e))}catch(g){C(g)}}function i(e){var g;e.done?I(e.value):(g=e.value,g instanceof t?g:new t((function(e){e(g)}))).then(r,o)}i((n=n.apply(e,g||[])).next())}))}var te={},ne={},Ie={};Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.format=void 0;var Ce=/(%?)(%([sdjo]))/g;function re(e,g){switch(g){case"s":return e;case"d":case"i":return Number(e);case"j":return JSON.stringify(e);case"o":if("string"===typeof e)return e;var t=JSON.stringify(e);return"{}"===t||"[]"===t||/^\[object .+?\]$/.test(t)?e:t}}Ie.format=function(e){for(var g=[],t=1;t<arguments.length;t++)g[t-1]=arguments[t];if(0===g.length)return e;var n=0,I=e.replace(Ce,(function(e,t,I,C){var r=re(g[n],C);return t?e:(n++,r)}));return n<g.length&&(I+=" "+g.slice(n).join(" ")),I=I.replace(/%{2,2}/g,"%")};var oe=r&&r.__extends||function(){var e=function(g,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,g){e.__proto__=g}||function(e,g){for(var t in g)Object.prototype.hasOwnProperty.call(g,t)&&(e[t]=g[t])},e(g,t)};return function(g,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=g}e(g,t),g.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ie=r&&r.__spreadArray||function(e,g){for(var t=0,n=g.length,I=e.length;t<n;t++,I++)e[I]=g[t];return e};Object.defineProperty(ne,"__esModule",{value:!0}),ne.invariant=ne.InvariantError=void 0;var le=Ie,ae=function(e){function g(g){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var I=e.call(this,g)||this;if(I.name="Invariant Violation",I.message=le.format.apply(void 0,ie([g],t)),I.stack){var C=I.stack.split("\n");C.splice(1,2),I.stack=C.join("\n")}return I}return oe(g,e),g}(Error);ne.InvariantError=ae,ne.invariant=function(e,g){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];if(!e)throw new(ae.bind.apply(ae,ie([void 0,g],t)))},function(e){var g=r&&r.__createBinding||(Object.create?function(e,g,t,n){void 0===n&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return g[t]}})}:function(e,g,t,n){void 0===n&&(n=t),e[n]=g[t]}),t=r&&r.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||g(t,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),t(ne,e),t(Ie,e)}(te);function se(e,...g){return`[MSW] ${te.format(e,...g)}`}const ce={formatMessage:se,warn:function(e,...g){console.warn(se(e,...g))},error:function(e,...g){console.error(se(e,...g))}};class Ae extends Error{constructor(e){super(e),this.name="NetworkError"}}function ue(e){var g,t;const n=o.stringToHeaders(e),I=n.get("content-type")||"text/plain",C=n.get("content-disposition");if(!C)throw new Error('"Content-Disposition" header is required.');const r=C.split(";").reduce(((e,g)=>{const[t,...n]=g.trim().split("=");return e[t]=n.join("="),e}),{});return{name:null===(g=r.name)||void 0===g?void 0:g.slice(1,-1),filename:null===(t=r.filename)||void 0===t?void 0:t.slice(1,-1),contentType:I}}function de(e,g){var t;if(!e)return e;const n=(null===(t=null===g||void 0===g?void 0:g.get("content-type"))||void 0===t?void 0:t.toLowerCase())||"";if(n.startsWith("multipart/form-data")&&"object"!==typeof e)return function(e,g){const t=null===g||void 0===g?void 0:g.get("content-type");if(!t)return;const[,...n]=t.split(/; */),I=n.filter((e=>e.startsWith("boundary="))).map((e=>e.replace(/^boundary=/,"")))[0];if(!I)return;const C=new RegExp(`--+${I}`),r=e.split(C).filter((e=>e.startsWith("\r\n")&&e.endsWith("\r\n"))).map((e=>e.trimStart().replace(/\r\n$/,"")));if(!r.length)return;const o={};try{for(const e of r){const[g,...t]=e.split("\r\n\r\n"),n=t.join("\r\n\r\n"),{contentType:I,filename:C,name:r}=ue(g),i=void 0===C?n:new File([n],C,{type:I}),l=o[r];void 0===l?o[r]=i:Array.isArray(l)?o[r]=[...l,i]:o[r]=[l,i]}return o}catch(i){return}}(e.toString(),g)||e;return n.includes("json")&&"object"!==typeof e&&L(e.toString())||e}const he=e=>e.referrer.startsWith(e.url.origin)?e.url.pathname:new URL(e.url.pathname,`${e.url.protocol}//${e.url.host}`).href;var me;function be(e){return e<300?me.Success:e<400?me.Warning:me.Danger}function pe(){const e=new Date;return[e.getHours(),e.getMinutes(),e.getSeconds()].map(String).map((e=>e.slice(0,2))).map((e=>e.padStart(2,"0"))).join(":")}function Ze(e){return Object.assign(Object.assign({},e),{headers:e.headers.all()})}function ye(e){const g=o.objectToHeaders(e.headers);return Object.assign(Object.assign({},e),{body:de(e.body,g)})}function Ge(e,g){void 0===g&&(g={});for(var t=function(e){for(var g=[],t=0;t<e.length;){var n=e[t];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)g.push({type:"CHAR",index:t,value:e[t++]});else{var I=1,C="";if("?"===e[o=t+1])throw new TypeError('Pattern cannot start with "?" at '+o);for(;o<e.length;)if("\\"!==e[o]){if(")"===e[o]){if(0===--I){o++;break}}else if("("===e[o]&&(I++,"?"!==e[o+1]))throw new TypeError("Capturing groups are not allowed at "+o);C+=e[o++]}else C+=e[o++]+e[o++];if(I)throw new TypeError("Unbalanced pattern at "+t);if(!C)throw new TypeError("Missing pattern at "+t);g.push({type:"PATTERN",index:t,value:C}),t=o}else{for(var r="",o=t+1;o<e.length;){var i=e.charCodeAt(o);if(!(i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122||95===i))break;r+=e[o++]}if(!r)throw new TypeError("Missing parameter name at "+t);g.push({type:"NAME",index:t,value:r}),t=o}else g.push({type:"CLOSE",index:t,value:e[t++]});else g.push({type:"OPEN",index:t,value:e[t++]});else g.push({type:"ESCAPED_CHAR",index:t++,value:e[t++]});else g.push({type:"MODIFIER",index:t,value:e[t++]})}return g.push({type:"END",index:t,value:""}),g}(e),n=g.prefixes,I=void 0===n?"./":n,C="[^"+fe(g.delimiter||"/#?")+"]+?",r=[],o=0,i=0,l="",a=function(e){if(i<t.length&&t[i].type===e)return t[i++].value},s=function(e){var g=a(e);if(void 0!==g)return g;var n=t[i],I=n.type,C=n.index;throw new TypeError("Unexpected "+I+" at "+C+", expected "+e)},c=function(){for(var e,g="";e=a("CHAR")||a("ESCAPED_CHAR");)g+=e;return g};i<t.length;){var A=a("CHAR"),u=a("NAME"),d=a("PATTERN");if(u||d){var h=A||"";-1===I.indexOf(h)&&(l+=h,h=""),l&&(r.push(l),l=""),r.push({name:u||o++,prefix:h,suffix:"",pattern:d||C,modifier:a("MODIFIER")||""})}else{var m=A||a("ESCAPED_CHAR");if(m)l+=m;else if(l&&(r.push(l),l=""),a("OPEN")){h=c();var b=a("NAME")||"",p=a("PATTERN")||"",Z=c();s("CLOSE"),r.push({name:b||(p?o++:""),pattern:b&&!p?C:p,prefix:h,suffix:Z,modifier:a("MODIFIER")||""})}else s("END")}}return r}function Be(e,g){var t=[];return function(e,g,t){void 0===t&&(t={});var n=t.decode,I=void 0===n?function(e){return e}:n;return function(t){var n=e.exec(t);if(!n)return!1;for(var C=n[0],r=n.index,o=Object.create(null),i=function(e){if(void 0===n[e])return"continue";var t=g[e-1];"*"===t.modifier||"+"===t.modifier?o[t.name]=n[e].split(t.prefix+t.suffix).map((function(e){return I(e,t)})):o[t.name]=I(n[e],t)},l=1;l<n.length;l++)i(l);return{path:C,index:r,params:o}}}(Ve(e,t,g),t,g)}function fe(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function ve(e){return e&&e.sensitive?"":"i"}function Se(e,g,t){return function(e,g,t){void 0===t&&(t={});for(var n=t.strict,I=void 0!==n&&n,C=t.start,r=void 0===C||C,o=t.end,i=void 0===o||o,l=t.encode,a=void 0===l?function(e){return e}:l,s="["+fe(t.endsWith||"")+"]|$",c="["+fe(t.delimiter||"/#?")+"]",A=r?"^":"",u=0,d=e;u<d.length;u++){var h=d[u];if("string"===typeof h)A+=fe(a(h));else{var m=fe(a(h.prefix)),b=fe(a(h.suffix));if(h.pattern)if(g&&g.push(h),m||b)if("+"===h.modifier||"*"===h.modifier){var p="*"===h.modifier?"?":"";A+="(?:"+m+"((?:"+h.pattern+")(?:"+b+m+"(?:"+h.pattern+"))*)"+b+")"+p}else A+="(?:"+m+"("+h.pattern+")"+b+")"+h.modifier;else A+="("+h.pattern+")"+h.modifier;else A+="(?:"+m+b+")"+h.modifier}}if(i)I||(A+=c+"?"),A+=t.endsWith?"(?="+s+")":"$";else{var Z=e[e.length-1],y="string"===typeof Z?c.indexOf(Z[Z.length-1])>-1:void 0===Z;I||(A+="(?:"+c+"(?="+s+"))?"),y||(A+="(?="+c+"|"+s+")")}return new RegExp(A,ve(t))}(Ge(e,t),g,t)}function Ve(e,g,t){return e instanceof RegExp?function(e,g){if(!g)return e;for(var t=/\((?:\?<(.*?)>)?(?!\?)/g,n=0,I=t.exec(e.source);I;)g.push({name:I[1]||n++,prefix:"",suffix:"",modifier:"",pattern:""}),I=t.exec(e.source);return e}(e,g):Array.isArray(e)?function(e,g,t){var n=e.map((function(e){return Ve(e,g,t).source}));return new RegExp("(?:"+n.join("|")+")",ve(t))}(e,g,t):Se(e,g,t)}!function(e){e.Success="#69AB32",e.Warning="#F0BB4B",e.Danger="#E95F5D"}(me||(me={}));const We=/[\?|#].*$/g;function Re(e){return e.replace(We,"")}function ke(e,g){if(e instanceof RegExp)return e;const t=function(e,g){if(/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e))return e;if(e.startsWith("*"))return e;const t=g||"undefined"!==typeof document&&document.baseURI;return t?decodeURI(new URL(encodeURI(e),t).href):e}(e,g);return Re(t)}function Xe(e,g,t){const n=ke(g,t),I="string"===typeof n?function(e){return e.replace(/([:a-zA-Z_-]*)(\*{1,2})+/g,((e,g,t)=>{const n="(.*)";return g?g.startsWith(":")?`${g}${t}`:`${g}(.*)`:n})).replace(/([^\/])(:)(?=\d+)/,"$1\\$2").replace(/^([^\/]+)(:)(?=\/\/)/,"$1\\$2")}(n):n,C=(0,ee.getCleanUrl)(e),r=Be(I,{decode:decodeURIComponent})(C);return{matches:!1!==r,params:r&&r.params||{}}}const Je={status:200,statusText:"OK",body:null,delay:0,once:!1},we=[];function Ye(e,g=we){return(...t)=>ge(this,void 0,void 0,(function*(){const n=Object.assign({},Je,{headers:new o.Headers({"x-powered-by":"msw"})},e),I=[...g,...t].filter(Boolean);return I.length>0?function(...e){return(...g)=>e.reduceRight(((e,g)=>e instanceof Promise?Promise.resolve(e).then(g):g(e)),g[0])}(...I)(n):n}))}const He=Object.assign(Ye(),{once:Ye({once:!0}),networkError(e){throw new Ae(e)}}),Ne=/(node_modules)?[\/\\]lib[\/\\](umd|esm|iief|cjs)[\/\\]|^[^\/\\]*$/;const Fe={status:C,set:F,delay:P,fetch:$};class Ke{constructor(e){this.shouldSkip=!1,this.ctx=e.ctx||Fe,this.resolver=e.resolver;const g=function(e){const g=e.stack;if(!g)return;const t=g.split("\n").slice(1).find((e=>!Ne.test(e)));if(!t)return;return t.replace(/\s*at [^()]*\(([^)]+)\)/,"$1").replace(/^@/,"")}(new Error);this.info=Object.assign(Object.assign({},e.info),{callFrame:g})}parse(e,g){return null}test(e,g){return this.predicate(e,this.parse(e,g),g)}getPublicRequest(e,g){return e}markAsSkipped(e=!0){this.shouldSkip=e}run(e,g){return ge(this,void 0,void 0,(function*(){if(this.shouldSkip)return null;const t=this.parse(e,g);if(!this.predicate(e,t,g))return null;const n=this.getPublicRequest(e,t),I=this.wrapResolver(this.resolver),C=yield I(n,He,this.ctx);return this.createExecutionResult(t,n,C)}))}wrapResolver(e){return(g,t,n)=>ge(this,void 0,void 0,(function*(){const I=this.resolverGenerator||(yield e(g,t,n));if((C=I)&&"function"==typeof C[Symbol.iterator]){const{value:e,done:g}=I[Symbol.iterator]().next(),t=yield e;return!t&&g?this.resolverGeneratorResult:(this.resolverGenerator||(this.resolverGenerator=I),this.resolverGeneratorResult=t,t)}var C;return I}))}createExecutionResult(e,g,t){return{handler:this,parsedResult:e||null,request:g,response:t||null}}}var Ee=t(8612);function xe(e,g){return e.toLowerCase()===g.toLowerCase()}var Me;!function(e){e.HEAD="HEAD",e.GET="GET",e.POST="POST",e.PUT="PUT",e.PATCH="PATCH",e.OPTIONS="OPTIONS",e.DELETE="DELETE"}(Me||(Me={}));const Ue={set:F,status:C,cookie:z,body:e=>g=>(g.body=e,g),text:e=>g=>(g.headers.set("Content-Type","text/plain"),g.body=e,g),json:Q,xml:e=>g=>(g.headers.set("Content-Type","text/xml"),g.body=e,g),delay:P,fetch:$};class Te extends Ke{constructor(e,g,t){super({info:{header:`${e} ${g}`,path:g,method:e},ctx:Ue,resolver:t}),this.checkRedundantQueryParameters()}checkRedundantQueryParameters(){const{method:e,path:g}=this.info;if(g instanceof RegExp)return;if(Re(g)===g)return;const t=function(e){return new URL(`/${e}`,"http://localhost").searchParams}(g);t.forEach(((e,g)=>{})),ce.warn(`Found a redundant usage of query parameters in the request handler URL for "${e} ${g}". Please match against a path instead and access query parameters in the response resolver function using "req.url.searchParams".`)}parse(e,g){return Xe(e.url,this.info.path,null===g||void 0===g?void 0:g.baseUrl)}getPublicRequest(e,g){return Object.assign(Object.assign({},e),{params:g.params||{}})}predicate(e,g){return(this.info.method instanceof RegExp?this.info.method.test(e.method):xe(this.info.method,e.method))&&g.matches}log(e,g){const t=he(e),n=Ze(e),I=ye(g),C=be(g.status);console.groupCollapsed(ce.formatMessage("%s %s %s (%c%s%c)"),pe(),e.method,t,`color:${C}`,`${g.status} ${g.statusText}`,"color:inherit"),console.log("Request",n),console.log("Handler:",{mask:this.info.path,resolver:this.resolver}),console.log("Response",I),console.groupEnd()}}function ze(e){return(g,t)=>new Te(e,g,t)}const Le={all:ze(/.+/),head:ze(Me.HEAD),get:ze(Me.GET),post:ze(Me.POST),put:ze(Me.PUT),delete:ze(Me.DELETE),patch:ze(Me.PATCH),options:ze(Me.OPTIONS)};function Qe(e){return null!=e&&"object"===typeof e&&!Array.isArray(e)}function De(e,g){return Object.entries(g).reduce(((e,[g,t])=>{const n=e[g];return Array.isArray(n)&&Array.isArray(t)?(e[g]=n.concat(t),e):Qe(n)&&Qe(t)?(e[g]=De(n,t),e):(e[g]=t,e)}),Object.assign({},e))}function je(e,g){if(!Boolean(e))throw new Error(g)}function Oe(e,g){if(!Boolean(e))throw new Error(null!=g?g:"Unexpected invariant triggered.")}const Pe=/\r\n|[\n\r]/g;function _e(e,g){let t=0,n=1;for(const I of e.body.matchAll(Pe)){if("number"===typeof I.index||Oe(!1),I.index>=g)break;t=I.index+I[0].length,n+=1}return{line:n,column:g+1-t}}function qe(e){return $e(e.source,_e(e.source,e.start))}function $e(e,g){const t=e.locationOffset.column-1,n="".padStart(t)+e.body,I=g.line-1,C=e.locationOffset.line-1,r=g.line+C,o=1===g.line?t:0,i=g.column+o,l=`${e.name}:${r}:${i}\n`,a=n.split(/\r\n|[\n\r]/g),s=a[I];if(s.length>120){const e=Math.floor(i/80),g=i%80,t=[];for(let n=0;n<s.length;n+=80)t.push(s.slice(n,n+80));return l+eg([[`${r} |`,t[0]],...t.slice(1,e+1).map((e=>["|",e])),["|","^".padStart(g)],["|",t[e+1]]])}return l+eg([[r-1+" |",a[I-1]],[`${r} |`,s],["|","^".padStart(i)],[`${r+1} |`,a[I+1]]])}function eg(e){const g=e.filter((([e,g])=>void 0!==g)),t=Math.max(...g.map((([e])=>e.length)));return g.map((([e,g])=>e.padStart(t)+(g?" "+g:""))).join("\n")}class gg extends Error{constructor(e,...g){var t,n,I;const{nodes:C,source:r,positions:o,path:i,originalError:l,extensions:a}=function(e){const g=e[0];return null==g||"kind"in g||"length"in g?{nodes:g,source:e[1],positions:e[2],path:e[3],originalError:e[4],extensions:e[5]}:g}(g);super(e),this.name="GraphQLError",this.path=null!==i&&void 0!==i?i:void 0,this.originalError=null!==l&&void 0!==l?l:void 0,this.nodes=tg(Array.isArray(C)?C:C?[C]:void 0);const s=tg(null===(t=this.nodes)||void 0===t?void 0:t.map((e=>e.loc)).filter((e=>null!=e)));this.source=null!==r&&void 0!==r?r:null===s||void 0===s||null===(n=s[0])||void 0===n?void 0:n.source,this.positions=null!==o&&void 0!==o?o:null===s||void 0===s?void 0:s.map((e=>e.start)),this.locations=o&&r?o.map((e=>_e(r,e))):null===s||void 0===s?void 0:s.map((e=>_e(e.source,e.start)));const c="object"==typeof(A=null===l||void 0===l?void 0:l.extensions)&&null!==A?null===l||void 0===l?void 0:l.extensions:void 0;var A;this.extensions=null!==(I=null!==a&&void 0!==a?a:c)&&void 0!==I?I:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!==l&&void 0!==l&&l.stack?Object.defineProperty(this,"stack",{value:l.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,gg):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(const g of this.nodes)g.loc&&(e+="\n\n"+qe(g.loc));else if(this.source&&this.locations)for(const g of this.locations)e+="\n\n"+$e(this.source,g);return e}toJSON(){const e={message:this.message};return null!=this.locations&&(e.locations=this.locations),null!=this.path&&(e.path=this.path),null!=this.extensions&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function tg(e){return void 0===e||0===e.length?void 0:e}function ng(e,g,t){return new gg(`Syntax Error: ${t}`,void 0,e,[g])}class Ig{constructor(e,g,t){this.start=e.start,this.end=g.end,this.startToken=e,this.endToken=g,this.source=t}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class Cg{constructor(e,g,t,n,I,C){this.kind=e,this.start=g,this.end=t,this.line=n,this.column=I,this.value=C,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}let rg,og,ig,lg;function ag(e){return e>=48&&e<=57}function sg(e){return e>=97&&e<=122||e>=65&&e<=90}function cg(e){return sg(e)||95===e}function Ag(e){return sg(e)||ag(e)||95===e}function ug(e){var g;let t=Number.MAX_SAFE_INTEGER,n=null,I=-1;for(let r=0;r<e.length;++r){var C;const g=e[r],o=dg(g);o!==g.length&&(n=null!==(C=n)&&void 0!==C?C:r,I=r,0!==r&&o<t&&(t=o))}return e.map(((e,g)=>0===g?e:e.slice(t))).slice(null!==(g=n)&&void 0!==g?g:0,I+1)}function dg(e){let g=0;for(;g<e.length&&(9===(t=e.charCodeAt(g))||32===t);)++g;var t;return g}!function(e){e.QUERY="query",e.MUTATION="mutation",e.SUBSCRIPTION="subscription"}(rg||(rg={})),function(e){e.QUERY="QUERY",e.MUTATION="MUTATION",e.SUBSCRIPTION="SUBSCRIPTION",e.FIELD="FIELD",e.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",e.FRAGMENT_SPREAD="FRAGMENT_SPREAD",e.INLINE_FRAGMENT="INLINE_FRAGMENT",e.VARIABLE_DEFINITION="VARIABLE_DEFINITION",e.SCHEMA="SCHEMA",e.SCALAR="SCALAR",e.OBJECT="OBJECT",e.FIELD_DEFINITION="FIELD_DEFINITION",e.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",e.INTERFACE="INTERFACE",e.UNION="UNION",e.ENUM="ENUM",e.ENUM_VALUE="ENUM_VALUE",e.INPUT_OBJECT="INPUT_OBJECT",e.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"}(og||(og={})),function(e){e.NAME="Name",e.DOCUMENT="Document",e.OPERATION_DEFINITION="OperationDefinition",e.VARIABLE_DEFINITION="VariableDefinition",e.SELECTION_SET="SelectionSet",e.FIELD="Field",e.ARGUMENT="Argument",e.FRAGMENT_SPREAD="FragmentSpread",e.INLINE_FRAGMENT="InlineFragment",e.FRAGMENT_DEFINITION="FragmentDefinition",e.VARIABLE="Variable",e.INT="IntValue",e.FLOAT="FloatValue",e.STRING="StringValue",e.BOOLEAN="BooleanValue",e.NULL="NullValue",e.ENUM="EnumValue",e.LIST="ListValue",e.OBJECT="ObjectValue",e.OBJECT_FIELD="ObjectField",e.DIRECTIVE="Directive",e.NAMED_TYPE="NamedType",e.LIST_TYPE="ListType",e.NON_NULL_TYPE="NonNullType",e.SCHEMA_DEFINITION="SchemaDefinition",e.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",e.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",e.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",e.FIELD_DEFINITION="FieldDefinition",e.INPUT_VALUE_DEFINITION="InputValueDefinition",e.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",e.UNION_TYPE_DEFINITION="UnionTypeDefinition",e.ENUM_TYPE_DEFINITION="EnumTypeDefinition",e.ENUM_VALUE_DEFINITION="EnumValueDefinition",e.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",e.DIRECTIVE_DEFINITION="DirectiveDefinition",e.SCHEMA_EXTENSION="SchemaExtension",e.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",e.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",e.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",e.UNION_TYPE_EXTENSION="UnionTypeExtension",e.ENUM_TYPE_EXTENSION="EnumTypeExtension",e.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"}(ig||(ig={})),function(e){e.SOF="<SOF>",e.EOF="<EOF>",e.BANG="!",e.DOLLAR="$",e.AMP="&",e.PAREN_L="(",e.PAREN_R=")",e.SPREAD="...",e.COLON=":",e.EQUALS="=",e.AT="@",e.BRACKET_L="[",e.BRACKET_R="]",e.BRACE_L="{",e.PIPE="|",e.BRACE_R="}",e.NAME="Name",e.INT="Int",e.FLOAT="Float",e.STRING="String",e.BLOCK_STRING="BlockString",e.COMMENT="Comment"}(lg||(lg={}));class hg{constructor(e){const g=new Cg(lg.SOF,0,0,0,0);this.source=e,this.lastToken=g,this.token=g,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){this.lastToken=this.token;return this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==lg.EOF)do{if(e.next)e=e.next;else{const g=Bg(this,e.end);e.next=g,g.prev=e,e=g}}while(e.kind===lg.COMMENT);return e}}function mg(e){return e>=0&&e<=55295||e>=57344&&e<=1114111}function bg(e,g){return pg(e.charCodeAt(g))&&Zg(e.charCodeAt(g+1))}function pg(e){return e>=55296&&e<=56319}function Zg(e){return e>=56320&&e<=57343}function yg(e,g){const t=e.source.body.codePointAt(g);if(void 0===t)return lg.EOF;if(t>=32&&t<=126){const e=String.fromCodePoint(t);return'"'===e?"'\"'":`"${e}"`}return"U+"+t.toString(16).toUpperCase().padStart(4,"0")}function Gg(e,g,t,n,I){const C=e.line,r=1+t-e.lineStart;return new Cg(g,t,n,C,r,I)}function Bg(e,g){const t=e.source.body,n=t.length;let I=g;for(;I<n;){const g=t.charCodeAt(I);switch(g){case 65279:case 9:case 32:case 44:++I;continue;case 10:++I,++e.line,e.lineStart=I;continue;case 13:10===t.charCodeAt(I+1)?I+=2:++I,++e.line,e.lineStart=I;continue;case 35:return fg(e,I);case 33:return Gg(e,lg.BANG,I,I+1);case 36:return Gg(e,lg.DOLLAR,I,I+1);case 38:return Gg(e,lg.AMP,I,I+1);case 40:return Gg(e,lg.PAREN_L,I,I+1);case 41:return Gg(e,lg.PAREN_R,I,I+1);case 46:if(46===t.charCodeAt(I+1)&&46===t.charCodeAt(I+2))return Gg(e,lg.SPREAD,I,I+3);break;case 58:return Gg(e,lg.COLON,I,I+1);case 61:return Gg(e,lg.EQUALS,I,I+1);case 64:return Gg(e,lg.AT,I,I+1);case 91:return Gg(e,lg.BRACKET_L,I,I+1);case 93:return Gg(e,lg.BRACKET_R,I,I+1);case 123:return Gg(e,lg.BRACE_L,I,I+1);case 124:return Gg(e,lg.PIPE,I,I+1);case 125:return Gg(e,lg.BRACE_R,I,I+1);case 34:return 34===t.charCodeAt(I+1)&&34===t.charCodeAt(I+2)?wg(e,I):Vg(e,I)}if(ag(g)||45===g)return vg(e,I,g);if(cg(g))return Yg(e,I);throw ng(e.source,I,39===g?"Unexpected single quote character ('), did you mean to use a double quote (\")?":mg(g)||bg(t,I)?`Unexpected character: ${yg(e,I)}.`:`Invalid character: ${yg(e,I)}.`)}return Gg(e,lg.EOF,n,n)}function fg(e,g){const t=e.source.body,n=t.length;let I=g+1;for(;I<n;){const e=t.charCodeAt(I);if(10===e||13===e)break;if(mg(e))++I;else{if(!bg(t,I))break;I+=2}}return Gg(e,lg.COMMENT,g,I,t.slice(g+1,I))}function vg(e,g,t){const n=e.source.body;let I=g,C=t,r=!1;if(45===C&&(C=n.charCodeAt(++I)),48===C){if(C=n.charCodeAt(++I),ag(C))throw ng(e.source,I,`Invalid number, unexpected digit after 0: ${yg(e,I)}.`)}else I=Sg(e,I,C),C=n.charCodeAt(I);if(46===C&&(r=!0,C=n.charCodeAt(++I),I=Sg(e,I,C),C=n.charCodeAt(I)),69!==C&&101!==C||(r=!0,C=n.charCodeAt(++I),43!==C&&45!==C||(C=n.charCodeAt(++I)),I=Sg(e,I,C),C=n.charCodeAt(I)),46===C||cg(C))throw ng(e.source,I,`Invalid number, expected digit but got: ${yg(e,I)}.`);return Gg(e,r?lg.FLOAT:lg.INT,g,I,n.slice(g,I))}function Sg(e,g,t){if(!ag(t))throw ng(e.source,g,`Invalid number, expected digit but got: ${yg(e,g)}.`);const n=e.source.body;let I=g+1;for(;ag(n.charCodeAt(I));)++I;return I}function Vg(e,g){const t=e.source.body,n=t.length;let I=g+1,C=I,r="";for(;I<n;){const n=t.charCodeAt(I);if(34===n)return r+=t.slice(C,I),Gg(e,lg.STRING,g,I+1,r);if(92!==n){if(10===n||13===n)break;if(mg(n))++I;else{if(!bg(t,I))throw ng(e.source,I,`Invalid character within String: ${yg(e,I)}.`);I+=2}}else{r+=t.slice(C,I);const g=117===t.charCodeAt(I+1)?123===t.charCodeAt(I+2)?Wg(e,I):Rg(e,I):Jg(e,I);r+=g.value,I+=g.size,C=I}}throw ng(e.source,I,"Unterminated string.")}function Wg(e,g){const t=e.source.body;let n=0,I=3;for(;I<12;){const e=t.charCodeAt(g+I++);if(125===e){if(I<5||!mg(n))break;return{value:String.fromCodePoint(n),size:I}}if(n=n<<4|Xg(e),n<0)break}throw ng(e.source,g,`Invalid Unicode escape sequence: "${t.slice(g,g+I)}".`)}function Rg(e,g){const t=e.source.body,n=kg(t,g+2);if(mg(n))return{value:String.fromCodePoint(n),size:6};if(pg(n)&&92===t.charCodeAt(g+6)&&117===t.charCodeAt(g+7)){const e=kg(t,g+8);if(Zg(e))return{value:String.fromCodePoint(n,e),size:12}}throw ng(e.source,g,`Invalid Unicode escape sequence: "${t.slice(g,g+6)}".`)}function kg(e,g){return Xg(e.charCodeAt(g))<<12|Xg(e.charCodeAt(g+1))<<8|Xg(e.charCodeAt(g+2))<<4|Xg(e.charCodeAt(g+3))}function Xg(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function Jg(e,g){const t=e.source.body;switch(t.charCodeAt(g+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:"\n",size:2};case 114:return{value:"\r",size:2};case 116:return{value:"\t",size:2}}throw ng(e.source,g,`Invalid character escape sequence: "${t.slice(g,g+2)}".`)}function wg(e,g){const t=e.source.body,n=t.length;let I=e.lineStart,C=g+3,r=C,o="";const i=[];for(;C<n;){const n=t.charCodeAt(C);if(34===n&&34===t.charCodeAt(C+1)&&34===t.charCodeAt(C+2)){o+=t.slice(r,C),i.push(o);const n=Gg(e,lg.BLOCK_STRING,g,C+3,ug(i).join("\n"));return e.line+=i.length-1,e.lineStart=I,n}if(92!==n||34!==t.charCodeAt(C+1)||34!==t.charCodeAt(C+2)||34!==t.charCodeAt(C+3))if(10!==n&&13!==n)if(mg(n))++C;else{if(!bg(t,C))throw ng(e.source,C,`Invalid character within String: ${yg(e,C)}.`);C+=2}else o+=t.slice(r,C),i.push(o),13===n&&10===t.charCodeAt(C+1)?C+=2:++C,o="",r=C,I=C;else o+=t.slice(r,C),r=C+1,C+=4}throw ng(e.source,C,"Unterminated string.")}function Yg(e,g){const t=e.source.body,n=t.length;let I=g+1;for(;I<n;){if(!Ag(t.charCodeAt(I)))break;++I}return Gg(e,lg.NAME,g,I,t.slice(g,I))}function Hg(e){return Ng(e,[])}function Ng(e,g){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return function(e,g){if(null===e)return"null";if(g.includes(e))return"[Circular]";const t=[...g,e];if(function(e){return"function"===typeof e.toJSON}(e)){const g=e.toJSON();if(g!==e)return"string"===typeof g?g:Ng(g,t)}else if(Array.isArray(e))return function(e,g){if(0===e.length)return"[]";if(g.length>2)return"[Array]";const t=Math.min(10,e.length),n=e.length-t,I=[];for(let C=0;C<t;++C)I.push(Ng(e[C],g));1===n?I.push("... 1 more item"):n>1&&I.push(`... ${n} more items`);return"["+I.join(", ")+"]"}(e,t);return function(e,g){const t=Object.entries(e);if(0===t.length)return"{}";if(g.length>2)return"["+function(e){const g=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===g&&"function"===typeof e.constructor){const g=e.constructor.name;if("string"===typeof g&&""!==g)return g}return g}(e)+"]";const n=t.map((([e,t])=>e+": "+Ng(t,g)));return"{ "+n.join(", ")+" }"}(e,t)}(e,g);default:return String(e)}}class Fg{constructor(e,g="GraphQL request",t={line:1,column:1}){"string"===typeof e||je(!1,`Body must be a string. Received: ${Hg(e)}.`),this.body=e,this.name=g,this.locationOffset=t,this.locationOffset.line>0||je(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||je(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function Kg(e){return function(e,g){if(e instanceof g)return!0;if("object"===typeof e&&null!==e){var t;const n=g.prototype[Symbol.toStringTag];if(n===(Symbol.toStringTag in e?e[Symbol.toStringTag]:null===(t=e.constructor)||void 0===t?void 0:t.name)){const g=Hg(e);throw new Error(`Cannot use ${n} "${g}" from another module or realm.\n\nEnsure that there is only one instance of "graphql" in the node_modules\ndirectory. If different versions of "graphql" are the dependencies of other\nrelied on modules, use "resolutions" to ensure only one version is installed.\n\nhttps://yarnpkg.com/en/docs/selective-version-resolutions\n\nDuplicate "graphql" modules cannot be used at the same time since different\nversions may have different capabilities and behavior. The data from one\nversion used in the function from another could produce confusing and\nspurious results.`)}}return!1}(e,Fg)}class Eg{constructor(e,g){const t=Kg(e)?e:new Fg(e);this._lexer=new hg(t),this._options=g}parseName(){const e=this.expectToken(lg.NAME);return this.node(e,{kind:ig.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:ig.DOCUMENT,definitions:this.many(lg.SOF,this.parseDefinition,lg.EOF)})}parseDefinition(){if(this.peek(lg.BRACE_L))return this.parseOperationDefinition();const e=this.peekDescription(),g=e?this._lexer.lookahead():this._lexer.token;if(g.kind===lg.NAME){switch(g.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw ng(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(g.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(g)}parseOperationDefinition(){const e=this._lexer.token;if(this.peek(lg.BRACE_L))return this.node(e,{kind:ig.OPERATION_DEFINITION,operation:rg.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const g=this.parseOperationType();let t;return this.peek(lg.NAME)&&(t=this.parseName()),this.node(e,{kind:ig.OPERATION_DEFINITION,operation:g,name:t,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const e=this.expectToken(lg.NAME);switch(e.value){case"query":return rg.QUERY;case"mutation":return rg.MUTATION;case"subscription":return rg.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(lg.PAREN_L,this.parseVariableDefinition,lg.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:ig.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(lg.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(lg.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const e=this._lexer.token;return this.expectToken(lg.DOLLAR),this.node(e,{kind:ig.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:ig.SELECTION_SET,selections:this.many(lg.BRACE_L,this.parseSelection,lg.BRACE_R)})}parseSelection(){return this.peek(lg.SPREAD)?this.parseFragment():this.parseField()}parseField(){const e=this._lexer.token,g=this.parseName();let t,n;return this.expectOptionalToken(lg.COLON)?(t=g,n=this.parseName()):n=g,this.node(e,{kind:ig.FIELD,alias:t,name:n,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(lg.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){const g=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(lg.PAREN_L,g,lg.PAREN_R)}parseArgument(e=!1){const g=this._lexer.token,t=this.parseName();return this.expectToken(lg.COLON),this.node(g,{kind:ig.ARGUMENT,name:t,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const e=this._lexer.token;this.expectToken(lg.SPREAD);const g=this.expectOptionalKeyword("on");return!g&&this.peek(lg.NAME)?this.node(e,{kind:ig.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:ig.INLINE_FRAGMENT,typeCondition:g?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){var e;const g=this._lexer.token;return this.expectKeyword("fragment"),!0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacyFragmentVariables)?this.node(g,{kind:ig.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(g,{kind:ig.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()}parseValueLiteral(e){const g=this._lexer.token;switch(g.kind){case lg.BRACKET_L:return this.parseList(e);case lg.BRACE_L:return this.parseObject(e);case lg.INT:return this._lexer.advance(),this.node(g,{kind:ig.INT,value:g.value});case lg.FLOAT:return this._lexer.advance(),this.node(g,{kind:ig.FLOAT,value:g.value});case lg.STRING:case lg.BLOCK_STRING:return this.parseStringLiteral();case lg.NAME:switch(this._lexer.advance(),g.value){case"true":return this.node(g,{kind:ig.BOOLEAN,value:!0});case"false":return this.node(g,{kind:ig.BOOLEAN,value:!1});case"null":return this.node(g,{kind:ig.NULL});default:return this.node(g,{kind:ig.ENUM,value:g.value})}case lg.DOLLAR:if(e){if(this.expectToken(lg.DOLLAR),this._lexer.token.kind===lg.NAME){const e=this._lexer.token.value;throw ng(this._lexer.source,g.start,`Unexpected variable "$${e}" in constant value.`)}throw this.unexpected(g)}return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const e=this._lexer.token;return this._lexer.advance(),this.node(e,{kind:ig.STRING,value:e.value,block:e.kind===lg.BLOCK_STRING})}parseList(e){return this.node(this._lexer.token,{kind:ig.LIST,values:this.any(lg.BRACKET_L,(()=>this.parseValueLiteral(e)),lg.BRACKET_R)})}parseObject(e){return this.node(this._lexer.token,{kind:ig.OBJECT,fields:this.any(lg.BRACE_L,(()=>this.parseObjectField(e)),lg.BRACE_R)})}parseObjectField(e){const g=this._lexer.token,t=this.parseName();return this.expectToken(lg.COLON),this.node(g,{kind:ig.OBJECT_FIELD,name:t,value:this.parseValueLiteral(e)})}parseDirectives(e){const g=[];for(;this.peek(lg.AT);)g.push(this.parseDirective(e));return g}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){const g=this._lexer.token;return this.expectToken(lg.AT),this.node(g,{kind:ig.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){const e=this._lexer.token;let g;if(this.expectOptionalToken(lg.BRACKET_L)){const t=this.parseTypeReference();this.expectToken(lg.BRACKET_R),g=this.node(e,{kind:ig.LIST_TYPE,type:t})}else g=this.parseNamedType();return this.expectOptionalToken(lg.BANG)?this.node(e,{kind:ig.NON_NULL_TYPE,type:g}):g}parseNamedType(){return this.node(this._lexer.token,{kind:ig.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(lg.STRING)||this.peek(lg.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const e=this._lexer.token,g=this.parseDescription();this.expectKeyword("schema");const t=this.parseConstDirectives(),n=this.many(lg.BRACE_L,this.parseOperationTypeDefinition,lg.BRACE_R);return this.node(e,{kind:ig.SCHEMA_DEFINITION,description:g,directives:t,operationTypes:n})}parseOperationTypeDefinition(){const e=this._lexer.token,g=this.parseOperationType();this.expectToken(lg.COLON);const t=this.parseNamedType();return this.node(e,{kind:ig.OPERATION_TYPE_DEFINITION,operation:g,type:t})}parseScalarTypeDefinition(){const e=this._lexer.token,g=this.parseDescription();this.expectKeyword("scalar");const t=this.parseName(),n=this.parseConstDirectives();return this.node(e,{kind:ig.SCALAR_TYPE_DEFINITION,description:g,name:t,directives:n})}parseObjectTypeDefinition(){const e=this._lexer.token,g=this.parseDescription();this.expectKeyword("type");const t=this.parseName(),n=this.parseImplementsInterfaces(),I=this.parseConstDirectives(),C=this.parseFieldsDefinition();return this.node(e,{kind:ig.OBJECT_TYPE_DEFINITION,description:g,name:t,interfaces:n,directives:I,fields:C})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(lg.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(lg.BRACE_L,this.parseFieldDefinition,lg.BRACE_R)}parseFieldDefinition(){const e=this._lexer.token,g=this.parseDescription(),t=this.parseName(),n=this.parseArgumentDefs();this.expectToken(lg.COLON);const I=this.parseTypeReference(),C=this.parseConstDirectives();return this.node(e,{kind:ig.FIELD_DEFINITION,description:g,name:t,arguments:n,type:I,directives:C})}parseArgumentDefs(){return this.optionalMany(lg.PAREN_L,this.parseInputValueDef,lg.PAREN_R)}parseInputValueDef(){const e=this._lexer.token,g=this.parseDescription(),t=this.parseName();this.expectToken(lg.COLON);const n=this.parseTypeReference();let I;this.expectOptionalToken(lg.EQUALS)&&(I=this.parseConstValueLiteral());const C=this.parseConstDirectives();return this.node(e,{kind:ig.INPUT_VALUE_DEFINITION,description:g,name:t,type:n,defaultValue:I,directives:C})}parseInterfaceTypeDefinition(){const e=this._lexer.token,g=this.parseDescription();this.expectKeyword("interface");const t=this.parseName(),n=this.parseImplementsInterfaces(),I=this.parseConstDirectives(),C=this.parseFieldsDefinition();return this.node(e,{kind:ig.INTERFACE_TYPE_DEFINITION,description:g,name:t,interfaces:n,directives:I,fields:C})}parseUnionTypeDefinition(){const e=this._lexer.token,g=this.parseDescription();this.expectKeyword("union");const t=this.parseName(),n=this.parseConstDirectives(),I=this.parseUnionMemberTypes();return this.node(e,{kind:ig.UNION_TYPE_DEFINITION,description:g,name:t,directives:n,types:I})}parseUnionMemberTypes(){return this.expectOptionalToken(lg.EQUALS)?this.delimitedMany(lg.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const e=this._lexer.token,g=this.parseDescription();this.expectKeyword("enum");const t=this.parseName(),n=this.parseConstDirectives(),I=this.parseEnumValuesDefinition();return this.node(e,{kind:ig.ENUM_TYPE_DEFINITION,description:g,name:t,directives:n,values:I})}parseEnumValuesDefinition(){return this.optionalMany(lg.BRACE_L,this.parseEnumValueDefinition,lg.BRACE_R)}parseEnumValueDefinition(){const e=this._lexer.token,g=this.parseDescription(),t=this.parseEnumValueName(),n=this.parseConstDirectives();return this.node(e,{kind:ig.ENUM_VALUE_DEFINITION,description:g,name:t,directives:n})}parseEnumValueName(){if("true"===this._lexer.token.value||"false"===this._lexer.token.value||"null"===this._lexer.token.value)throw ng(this._lexer.source,this._lexer.token.start,`${xg(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const e=this._lexer.token,g=this.parseDescription();this.expectKeyword("input");const t=this.parseName(),n=this.parseConstDirectives(),I=this.parseInputFieldsDefinition();return this.node(e,{kind:ig.INPUT_OBJECT_TYPE_DEFINITION,description:g,name:t,directives:n,fields:I})}parseInputFieldsDefinition(){return this.optionalMany(lg.BRACE_L,this.parseInputValueDef,lg.BRACE_R)}parseTypeSystemExtension(){const e=this._lexer.lookahead();if(e.kind===lg.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const g=this.parseConstDirectives(),t=this.optionalMany(lg.BRACE_L,this.parseOperationTypeDefinition,lg.BRACE_R);if(0===g.length&&0===t.length)throw this.unexpected();return this.node(e,{kind:ig.SCHEMA_EXTENSION,directives:g,operationTypes:t})}parseScalarTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const g=this.parseName(),t=this.parseConstDirectives();if(0===t.length)throw this.unexpected();return this.node(e,{kind:ig.SCALAR_TYPE_EXTENSION,name:g,directives:t})}parseObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const g=this.parseName(),t=this.parseImplementsInterfaces(),n=this.parseConstDirectives(),I=this.parseFieldsDefinition();if(0===t.length&&0===n.length&&0===I.length)throw this.unexpected();return this.node(e,{kind:ig.OBJECT_TYPE_EXTENSION,name:g,interfaces:t,directives:n,fields:I})}parseInterfaceTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const g=this.parseName(),t=this.parseImplementsInterfaces(),n=this.parseConstDirectives(),I=this.parseFieldsDefinition();if(0===t.length&&0===n.length&&0===I.length)throw this.unexpected();return this.node(e,{kind:ig.INTERFACE_TYPE_EXTENSION,name:g,interfaces:t,directives:n,fields:I})}parseUnionTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const g=this.parseName(),t=this.parseConstDirectives(),n=this.parseUnionMemberTypes();if(0===t.length&&0===n.length)throw this.unexpected();return this.node(e,{kind:ig.UNION_TYPE_EXTENSION,name:g,directives:t,types:n})}parseEnumTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const g=this.parseName(),t=this.parseConstDirectives(),n=this.parseEnumValuesDefinition();if(0===t.length&&0===n.length)throw this.unexpected();return this.node(e,{kind:ig.ENUM_TYPE_EXTENSION,name:g,directives:t,values:n})}parseInputObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const g=this.parseName(),t=this.parseConstDirectives(),n=this.parseInputFieldsDefinition();if(0===t.length&&0===n.length)throw this.unexpected();return this.node(e,{kind:ig.INPUT_OBJECT_TYPE_EXTENSION,name:g,directives:t,fields:n})}parseDirectiveDefinition(){const e=this._lexer.token,g=this.parseDescription();this.expectKeyword("directive"),this.expectToken(lg.AT);const t=this.parseName(),n=this.parseArgumentDefs(),I=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const C=this.parseDirectiveLocations();return this.node(e,{kind:ig.DIRECTIVE_DEFINITION,description:g,name:t,arguments:n,repeatable:I,locations:C})}parseDirectiveLocations(){return this.delimitedMany(lg.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const e=this._lexer.token,g=this.parseName();if(Object.prototype.hasOwnProperty.call(og,g.value))return g;throw this.unexpected(e)}node(e,g){var t;return!0!==(null===(t=this._options)||void 0===t?void 0:t.noLocation)&&(g.loc=new Ig(e,this._lexer.lastToken,this._lexer.source)),g}peek(e){return this._lexer.token.kind===e}expectToken(e){const g=this._lexer.token;if(g.kind===e)return this._lexer.advance(),g;throw ng(this._lexer.source,g.start,`Expected ${Mg(e)}, found ${xg(g)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e&&(this._lexer.advance(),!0)}expectKeyword(e){const g=this._lexer.token;if(g.kind!==lg.NAME||g.value!==e)throw ng(this._lexer.source,g.start,`Expected "${e}", found ${xg(g)}.`);this._lexer.advance()}expectOptionalKeyword(e){const g=this._lexer.token;return g.kind===lg.NAME&&g.value===e&&(this._lexer.advance(),!0)}unexpected(e){const g=null!==e&&void 0!==e?e:this._lexer.token;return ng(this._lexer.source,g.start,`Unexpected ${xg(g)}.`)}any(e,g,t){this.expectToken(e);const n=[];for(;!this.expectOptionalToken(t);)n.push(g.call(this));return n}optionalMany(e,g,t){if(this.expectOptionalToken(e)){const e=[];do{e.push(g.call(this))}while(!this.expectOptionalToken(t));return e}return[]}many(e,g,t){this.expectToken(e);const n=[];do{n.push(g.call(this))}while(!this.expectOptionalToken(t));return n}delimitedMany(e,g){this.expectOptionalToken(e);const t=[];do{t.push(g.call(this))}while(this.expectOptionalToken(e));return t}}function xg(e){const g=e.value;return Mg(e.kind)+(null!=g?` "${g}"`:"")}function Mg(e){return function(e){return e===lg.BANG||e===lg.DOLLAR||e===lg.AMP||e===lg.PAREN_L||e===lg.PAREN_R||e===lg.SPREAD||e===lg.COLON||e===lg.EQUALS||e===lg.AT||e===lg.BRACKET_L||e===lg.BRACKET_R||e===lg.BRACE_L||e===lg.PIPE||e===lg.BRACE_R}(e)?`"${e}"`:e}function Ug(e){var g;const t=e.definitions.find((e=>"OperationDefinition"===e.kind));return{operationType:null===t||void 0===t?void 0:t.operation,operationName:null===(g=null===t||void 0===t?void 0:t.name)||void 0===g?void 0:g.value}}function Tg(e){try{return Ug(new Eg(e,g).parseDocument())}catch(t){return t}var g}function zg(e){var g,t;switch(e.method){case"GET":return{query:e.url.searchParams.get("query"),variables:L(e.url.searchParams.get("variables")||"")};case"POST":if(null===(g=e.body)||void 0===g?void 0:g.query){const{query:g,variables:t}=e.body;return{query:g,variables:t}}if(null===(t=e.body)||void 0===t?void 0:t.operations){const g=e.body,{operations:t,map:n}=g,I=function(e,g){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&g.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var I=0;for(n=Object.getOwnPropertySymbols(e);I<n.length;I++)g.indexOf(n[I])<0&&Object.prototype.propertyIsEnumerable.call(e,n[I])&&(t[n[I]]=e[n[I]])}return t}(g,["operations","map"]),C=L(t)||{};if(!C.query)return null;const r=L(n||"")||{},o=C.variables?function(e,g,t){const n={variables:e};for(const[I,C]of Object.entries(g)){if(!(I in t))throw new Error(`Given files do not have a key '${I}' .`);for(const e of C){const[g,...C]=e.split(".").reverse(),r=C.reverse();let o=n;for(const e of r){if(!(e in o))throw new Error(`Property '${r}' is not in operations.`);o=o[e]}o[g]=t[I]}}return n.variables}(C.variables,r,I):{};return{query:C.query,variables:o}}default:return null}}function Lg(e){const g=zg(e);if(!g||!g.query)return;const{query:t,variables:n}=g,I=Tg(t);if(I instanceof Error){const g=he(e);throw new Error(ce.formatMessage('Failed to intercept a GraphQL request to "%s %s": cannot parse query. See the error message from the parser below.\n\n%s',e.method,g,I.message))}return{operationType:I.operationType,operationName:I.operationName,variables:n}}function Qg(e,g){try{return e()}catch(t){null===g||void 0===g||g(t)}}const Dg={set:F,status:C,delay:P,fetch:$,data:e=>g=>{const t=De(L(g.body)||{},{data:e});return Q(t)(g)},extensions:e=>g=>{const t=De(L(g.body)||{},{extensions:e});return Q(t)(g)},errors:e=>g=>{if(null==e)return g;const t=De(L(g.body)||{},{errors:e});return Q(t)(g)},cookie:z};class jg extends Ke{constructor(e,g,t,n){let I=g;if(null!=(C=g)&&"object"===typeof C&&"kind"in C&&"definitions"in C){const t=Ug(g);if(t.operationType!==e)throw new Error(`Failed to create a GraphQL handler: provided a DocumentNode with a mismatched operation type (expected "${e}", but got "${t.operationType}").`);if(!t.operationName)throw new Error("Failed to create a GraphQL handler: provided a DocumentNode with no operation name.");I=t.operationName}var C;super({info:{header:"all"===e?`${e} (origin: ${t.toString()})`:`${e} ${I} (origin: ${t.toString()})`,operationType:e,operationName:I},ctx:Dg,resolver:n}),this.endpoint=t}parse(e){return Qg((()=>Lg(e)),(e=>console.error(e.message)))}getPublicRequest(e,g){return Object.assign(Object.assign({},e),{variables:(null===g||void 0===g?void 0:g.variables)||{}})}predicate(e,g){if(!g)return!1;if(!g.operationName&&"all"!==this.info.operationType){const g=he(e);return ce.warn(`Failed to intercept a GraphQL request at "${e.method} ${g}": anonymous GraphQL operations are not supported.\n\nConsider naming this operation or using "graphql.operation" request handler to intercept GraphQL requests regardless of their operation name/type. Read more: https://mswjs.io/docs/api/graphql/operation      `),!1}const t=Xe(e.url,this.endpoint),n="all"===this.info.operationType||g.operationType===this.info.operationType,I=this.info.operationName instanceof RegExp?this.info.operationName.test(g.operationName||""):g.operationName===this.info.operationName;return t.matches&&n&&I}log(e,g,t,n){const I=Ze(e),C=ye(g),r=be(g.status),o=(null===n||void 0===n?void 0:n.operationName)?`${null===n||void 0===n?void 0:n.operationType} ${null===n||void 0===n?void 0:n.operationName}`:`anonymous ${null===n||void 0===n?void 0:n.operationType}`;console.groupCollapsed(ce.formatMessage("%s %s (%c%s%c)"),pe(),`${o}`,`color:${r}`,`${g.status} ${g.statusText}`,"color:inherit"),console.log("Request:",I),console.log("Handler:",this),console.log("Response:",C),console.groupEnd()}}function Og(e,g){return(t,n)=>new jg(e,t,g,n)}function Pg(e){return g=>new jg("all",new RegExp(".*"),e,g)}const _g={operation:Pg("*"),query:Og(rg.QUERY,"*"),mutation:Og(rg.MUTATION,"*")};Object.assign(Object.assign({},_g),{link:function(e){return{operation:Pg(e),query:Og(rg.QUERY,e),mutation:Og(rg.MUTATION,e)}}});var qg,$g=t(2247),et=t(5344),gt=t(6237),tt={},nt={},It={exports:{}},Ct="object"===typeof Reflect?Reflect:null,rt=Ct&&"function"===typeof Ct.apply?Ct.apply:function(e,g,t){return Function.prototype.apply.call(e,g,t)};qg=Ct&&"function"===typeof Ct.ownKeys?Ct.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var ot=Number.isNaN||function(e){return e!==e};function it(){it.init.call(this)}It.exports=it,It.exports.once=function(e,g){return new Promise((function(t,n){function I(t){e.removeListener(g,C),n(t)}function C(){"function"===typeof e.removeListener&&e.removeListener("error",I),t([].slice.call(arguments))}bt(e,g,C,{once:!0}),"error"!==g&&function(e,g,t){"function"===typeof e.on&&bt(e,"error",g,t)}(e,I,{once:!0})}))},it.EventEmitter=it,it.prototype._events=void 0,it.prototype._eventsCount=0,it.prototype._maxListeners=void 0;var lt=10;function at(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function st(e){return void 0===e._maxListeners?it.defaultMaxListeners:e._maxListeners}function ct(e,g,t,n){var I,C,r,o;if(at(t),void 0===(C=e._events)?(C=e._events=Object.create(null),e._eventsCount=0):(void 0!==C.newListener&&(e.emit("newListener",g,t.listener?t.listener:t),C=e._events),r=C[g]),void 0===r)r=C[g]=t,++e._eventsCount;else if("function"===typeof r?r=C[g]=n?[t,r]:[r,t]:n?r.unshift(t):r.push(t),(I=st(e))>0&&r.length>I&&!r.warned){r.warned=!0;var i=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(g)+" listeners added. Use emitter.setMaxListeners() to increase limit");i.name="MaxListenersExceededWarning",i.emitter=e,i.type=g,i.count=r.length,o=i,console&&console.warn&&console.warn(o)}return e}function At(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ut(e,g,t){var n={fired:!1,wrapFn:void 0,target:e,type:g,listener:t},I=At.bind(n);return I.listener=t,n.wrapFn=I,I}function dt(e,g,t){var n=e._events;if(void 0===n)return[];var I=n[g];return void 0===I?[]:"function"===typeof I?t?[I.listener||I]:[I]:t?function(e){for(var g=new Array(e.length),t=0;t<g.length;++t)g[t]=e[t].listener||e[t];return g}(I):mt(I,I.length)}function ht(e){var g=this._events;if(void 0!==g){var t=g[e];if("function"===typeof t)return 1;if(void 0!==t)return t.length}return 0}function mt(e,g){for(var t=new Array(g),n=0;n<g;++n)t[n]=e[n];return t}function bt(e,g,t,n){if("function"===typeof e.on)n.once?e.once(g,t):e.on(g,t);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(g,(function I(C){n.once&&e.removeEventListener(g,I),t(C)}))}}Object.defineProperty(it,"defaultMaxListeners",{enumerable:!0,get:function(){return lt},set:function(e){if("number"!==typeof e||e<0||ot(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");lt=e}}),it.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},it.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||ot(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},it.prototype.getMaxListeners=function(){return st(this)},it.prototype.emit=function(e){for(var g=[],t=1;t<arguments.length;t++)g.push(arguments[t]);var n="error"===e,I=this._events;if(void 0!==I)n=n&&void 0===I.error;else if(!n)return!1;if(n){var C;if(g.length>0&&(C=g[0]),C instanceof Error)throw C;var r=new Error("Unhandled error."+(C?" ("+C.message+")":""));throw r.context=C,r}var o=I[e];if(void 0===o)return!1;if("function"===typeof o)rt(o,this,g);else{var i=o.length,l=mt(o,i);for(t=0;t<i;++t)rt(l[t],this,g)}return!0},it.prototype.addListener=function(e,g){return ct(this,e,g,!1)},it.prototype.on=it.prototype.addListener,it.prototype.prependListener=function(e,g){return ct(this,e,g,!0)},it.prototype.once=function(e,g){return at(g),this.on(e,ut(this,e,g)),this},it.prototype.prependOnceListener=function(e,g){return at(g),this.prependListener(e,ut(this,e,g)),this},it.prototype.removeListener=function(e,g){var t,n,I,C,r;if(at(g),void 0===(n=this._events))return this;if(void 0===(t=n[e]))return this;if(t===g||t.listener===g)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,t.listener||g));else if("function"!==typeof t){for(I=-1,C=t.length-1;C>=0;C--)if(t[C]===g||t[C].listener===g){r=t[C].listener,I=C;break}if(I<0)return this;0===I?t.shift():function(e,g){for(;g+1<e.length;g++)e[g]=e[g+1];e.pop()}(t,I),1===t.length&&(n[e]=t[0]),void 0!==n.removeListener&&this.emit("removeListener",e,r||g)}return this},it.prototype.off=it.prototype.removeListener,it.prototype.removeAllListeners=function(e){var g,t,n;if(void 0===(t=this._events))return this;if(void 0===t.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==t[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete t[e]),this;if(0===arguments.length){var I,C=Object.keys(t);for(n=0;n<C.length;++n)"removeListener"!==(I=C[n])&&this.removeAllListeners(I);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(g=t[e]))this.removeListener(e,g);else if(void 0!==g)for(n=g.length-1;n>=0;n--)this.removeListener(e,g[n]);return this},it.prototype.listeners=function(e){return dt(this,e,!0)},it.prototype.rawListeners=function(e){return dt(this,e,!1)},it.listenerCount=function(e,g){return"function"===typeof e.listenerCount?e.listenerCount(g):ht.call(e,g)},it.prototype.listenerCount=ht,it.prototype.eventNames=function(){return this._eventsCount>0?qg(this._events):[]};var pt=r&&r.__extends||function(){var e=function(g,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,g){e.__proto__=g}||function(e,g){for(var t in g)Object.prototype.hasOwnProperty.call(g,t)&&(e[t]=g[t])},e(g,t)};return function(g,t){function n(){this.constructor=g}e(g,t),g.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Zt=r&&r.__spreadArrays||function(){for(var e=0,g=0,t=arguments.length;g<t;g++)e+=arguments[g].length;var n=Array(e),I=0;for(g=0;g<t;g++)for(var C=arguments[g],r=0,o=C.length;r<o;r++,I++)n[I]=C[r];return n};nt.__esModule=!0,nt.StrictEventEmitter=void 0;var yt=function(e){function g(){return e.call(this)||this}return pt(g,e),g.prototype.on=function(g,t){return e.prototype.on.call(this,g.toString(),t)},g.prototype.once=function(g,t){return e.prototype.on.call(this,g.toString(),t)},g.prototype.off=function(g,t){return e.prototype.off.call(this,g.toString(),t)},g.prototype.emit=function(g){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.prototype.emit.apply(this,Zt([g.toString()],t))},g.prototype.addListener=function(g,t){return e.prototype.addListener.call(this,g.toString(),t)},g.prototype.removeListener=function(g,t){return e.prototype.removeListener.call(this,g.toString(),t)},g}(It.exports.EventEmitter);nt.StrictEventEmitter=yt,function(e){var g=r&&r.__createBinding||(Object.create?function(e,g,t,n){void 0===n&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return g[t]}})}:function(e,g,t,n){void 0===n&&(n=t),e[n]=g[t]});e.__esModule=!0,e.StrictEventEmitter=void 0,g(e,nt,"StrictEventEmitter")}(tt);var Gt={},Bt={};Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.until=async e=>{try{const g=await e().catch((e=>{throw e}));return[null,g]}catch(g){return[g,null]}},Object.defineProperty(Gt,"__esModule",{value:!0});var ft=Bt,vt=Gt.until=ft.until;const St=(e,g,t)=>{const n=[e.active,e.installing,e.waiting].filter(Boolean).find((e=>t(e.scriptURL,g)));return n||null};const Vt=(e,g={},t)=>ge(void 0,void 0,void 0,(function*(){const n=new URL(e,location.origin).href;const I=yield navigator.serviceWorker.getRegistrations().then((e=>e.filter((e=>St(e,n,t)))));!navigator.serviceWorker.controller&&I.length>0&&location.reload();const[C]=I;if(C)return C.update().then((()=>[St(C,n,t),C]));const[r,o]=yield vt((()=>ge(void 0,void 0,void 0,(function*(){const I=yield navigator.serviceWorker.register(e,g);return[St(I,n,t),I]}))));if(r){if(r.message.includes("(404)")){const e=new URL((null===g||void 0===g?void 0:g.scope)||"/",location.href);throw new Error(ce.formatMessage(`Failed to register a Service Worker for scope ('${e.href}') with script ('${n}'): Service Worker script does not exist at the given path.\n\nDid you forget to run "npx msw init <PUBLIC_DIR>"?\n\nLearn more about creating the Service Worker script: https://mswjs.io/docs/cli/init`))}throw new Error(ce.formatMessage("Failed to register the Service Worker:\n\n%s",r.message))}return o}));function Wt(e={}){if(e.quiet)return;const g=e.message||"Mocking enabled.";console.groupCollapsed(`%c${ce.formatMessage(g)}`,"color:orangered;font-weight:bold;"),console.log("%cDocumentation: %chttps://mswjs.io/docs","font-weight:bold","font-weight:normal"),console.log("Found an issue? https://github.com/mswjs/msw/issues"),console.groupEnd()}function Rt(){return K(document.cookie)}function kt(e){var g;const t=e.headers.get("cookie");Ee.store.hydrate();const n=Array.from(null===(g=Ee.store.get(Object.assign(Object.assign({},e),{url:e.url.toString()})))||void 0===g?void 0:g.entries()).reduce(((e,[g,{value:t}])=>Object.assign(e,{[g.trim()]:t})),{}),I=function(e){if("undefined"===typeof document||"undefined"===typeof location)return{};switch(e.credentials){case"same-origin":return location.origin===e.url.origin?Rt():{};case"include":return Rt();default:return{}}}(e),C=Object.assign(Object.assign({},I),n);for(const[o,i]of Object.entries(C))e.headers.append("cookie",`${o}=${i}`);const r=t?K(t):{};e.cookies=Object.assign(Object.assign(Object.assign({},e.cookies),C),r)}function Xt(e){if(!e.method||!xe(e.method,"GET")||""!==e.body)return e.body}var Jt=function(){function e(e,g,t,n,I){return e<g||t<g?e>t?t+1:e+1:n===I?g:g+1}return function(g,t){if(g===t)return 0;if(g.length>t.length){var n=g;g=t,t=n}for(var I=g.length,C=t.length;I>0&&g.charCodeAt(I-1)===t.charCodeAt(C-1);)I--,C--;for(var r=0;r<I&&g.charCodeAt(r)===t.charCodeAt(r);)r++;if(C-=r,0===(I-=r)||C<3)return C;var o,i,l,a,s,c,A,u,d,h,m,b,p=0,Z=[];for(o=0;o<I;o++)Z.push(o+1),Z.push(g.charCodeAt(r+o));for(var y=Z.length-1;p<C-3;)for(d=t.charCodeAt(r+(i=p)),h=t.charCodeAt(r+(l=p+1)),m=t.charCodeAt(r+(a=p+2)),b=t.charCodeAt(r+(s=p+3)),c=p+=4,o=0;o<y;o+=2)i=e(A=Z[o],i,l,d,u=Z[o+1]),l=e(i,l,a,h,u),a=e(l,a,s,m,u),c=e(a,s,c,b,u),Z[o]=c,s=a,a=l,l=i,i=A;for(;p<C;)for(d=t.charCodeAt(r+(i=p)),c=++p,o=0;o<y;o+=2)A=Z[o],Z[o]=c=e(A,i,c,d,Z[o+1]),i=A;return c}}();function wt(e,g,t="warn"){const n=Qg((()=>Lg(e)));function I(){const t=function(e){return e.reduce(((e,g)=>(g instanceof Te&&e.rest.push(g),g instanceof jg&&e.graphql.push(g),e)),{rest:[],graphql:[]})}(g),I=n?t.graphql:t.rest,C=function(e,g,t){return g.reduce(((g,n)=>{const I=t(e,n);return g.concat([[I,n]])}),[]).sort((([e],[g])=>e-g)).filter((([e])=>e<=3)).slice(0,4).map((([,e])=>e))}(e,I,n?(r=n,(e,g)=>{if("undefined"===typeof r.operationName)return 1/0;const{operationType:t,operationName:n}=g.info;if("string"!==typeof n)return 1/0;const I=r.operationType===t?.5:0;return Jt(r.operationName,n)-I}):(e,g)=>{const{path:t,method:n}=g.info;if(t instanceof RegExp||n instanceof RegExp)return 1/0;const I=xe(e.method,n)?.5:0,C=he(e);return Jt(C,t)-I});var r;return C.length>0?function(e){return e.length>1?`Did you mean to request one of the following resources instead?\n\n${e.map((e=>`  \u2022 ${e.info.header}`)).join("\n")}`:`Did you mean to request "${e[0].info.header}" instead?`}(C):""}function C(g){const t=function(){const g=he(e);return["captured a request without a matching request handler:","  \u2022 "+(n?`${n.operationType} ${n.operationName} (${e.method} ${g})`:`${e.method} ${g}`),I(),"If you still wish to intercept this unhandled request, please create a request handler for it.\nRead more: https://mswjs.io/docs/getting-started/mocks"].filter(Boolean).join("\n\n")}();switch(g){case"error":throw ce.error("Error: %s",t),new Error(ce.formatMessage('Cannot bypass a request when using the "error" strategy for the "onUnhandledRequest" option.'));case"warn":ce.warn("Warning: %s",t);break;case"bypass":break;default:throw new Error(ce.formatMessage('Failed to react to an unhandled request: unknown strategy "%s". Please provide one of the supported strategies ("bypass", "warn", "error") or a custom callback function as the value of the "onUnhandledRequest" option.',g))}}"function"!==typeof t?C(t):t(e,{warning:C.bind(null,"warn"),error:C.bind(null,"error")})}function Yt(e,g,t,n,I){var C,r,o;return ge(this,void 0,void 0,(function*(){if(n.emit("request:start",e),"true"===e.headers.get("x-msw-bypass"))return n.emit("request:end",e),void(null===(C=null===I||void 0===I?void 0:I.onBypassResponse)||void 0===C||C.call(I,e));const i=yield((e,g,t)=>ge(void 0,void 0,void 0,(function*(){const n=g.filter((g=>g.test(e,t)));if(0===n.length)return{handler:void 0,response:void 0};const I=yield n.reduce(((g,n)=>ge(void 0,void 0,void 0,(function*(){const I=yield g;if(null===I||void 0===I?void 0:I.response)return g;const C=yield n.run(e,t);return null===C||C.handler.shouldSkip?null:C.response?(C.response.once&&n.markAsSkipped(!0),C):{request:C.request,handler:C.handler,response:void 0,parsedResult:C.parsedResult}}))),Promise.resolve(null));return I?{handler:I.handler,publicRequest:I.request,parsedRequest:I.parsedResult,response:I.response}:{handler:void 0,response:void 0}})))(e,g,null===I||void 0===I?void 0:I.resolutionContext),{handler:l,response:a}=i;return l?a?(function(e,g){Ee.store.add(Object.assign(Object.assign({},e),{url:e.url.toString()}),g),Ee.store.persist()}(e,a),n.emit("request:match",e),new Promise((g=>{var t,C,r;const o=i,l=(null===(t=null===I||void 0===I?void 0:I.transformResponse)||void 0===t?void 0:t.call(I,a))||a;null===(C=null===I||void 0===I?void 0:I.onMockedResponse)||void 0===C||C.call(I,l,o),setTimeout((()=>{var t;null===(t=null===I||void 0===I?void 0:I.onMockedResponseSent)||void 0===t||t.call(I,l,o),n.emit("request:end",e),g(l)}),null!==(r=a.delay)&&void 0!==r?r:0)}))):(ce.warn("Expected response resolver to return a mocked response Object, but got %s. The original response is going to be used instead.\n\n  \u2022 %s\n    %s",a,l.info.header,l.info.callFrame),n.emit("request:end",e),void(null===(o=null===I||void 0===I?void 0:I.onBypassResponse)||void 0===o||o.call(I,e))):(wt(e,g,t.onUnhandledRequest),n.emit("request:unhandled",e),n.emit("request:end",e),void(null===(r=null===I||void 0===I?void 0:I.onBypassResponse)||void 0===r||r.call(I,e)))}))}const Ht=(e,g)=>(t,n)=>ge(void 0,void 0,void 0,(function*(){const I=(e=>{const g=e.ports[0];return{send(e){g&&g.postMessage(e)}}})(t);try{const t=function(e){const g={id:e.id,cache:e.cache,credentials:e.credentials,method:e.method,url:new URL(e.url),referrer:e.referrer,referrerPolicy:e.referrerPolicy,redirect:e.redirect,mode:e.mode,params:{},cookies:{},integrity:e.integrity,keepalive:e.keepalive,destination:e.destination,body:Xt(e),bodyUsed:e.bodyUsed,headers:new o.Headers(e.headers)};return kt(g),g.body=de(g.body,g.headers),g}(n.payload);yield Yt(t,e.requestHandlers,g,e.emitter,{transformResponse:e=>Object.assign(Object.assign({},e),{headers:e.headers.all()}),onBypassResponse:()=>I.send({type:"MOCK_NOT_FOUND"}),onMockedResponse(e){I.send({type:"MOCK_SUCCESS",payload:e})},onMockedResponseSent(e,{handler:t,publicRequest:n,parsedRequest:I}){g.quiet||t.log(n,e,t,I)}})}catch(C){if(C instanceof Ae)return I.send({type:"NETWORK_ERROR",payload:{name:C.name,message:C.message}});I.send({type:"INTERNAL_ERROR",payload:{status:500,body:JSON.stringify({errorType:C.constructor.name,message:C.message,location:C.stack})}})}}));const Nt=e=>function(g,t){const n=(()=>ge(this,void 0,void 0,(function*(){e.events.removeAllListeners(),e.workerChannel.on("REQUEST",Ht(e,g)),e.workerChannel.on("RESPONSE",function(e){return(g,t)=>{var n;const{payload:I}=t;if(null===(n=I.type)||void 0===n?void 0:n.includes("opaque"))return;const C=new Response(I.body||null,I);"msw"===C.headers.get("x-powered-by")?e.emitter.emit("response:mocked",C,I.requestId):e.emitter.emit("response:bypass",C,I.requestId)}}(e));const n=yield Vt(g.serviceWorker.url,g.serviceWorker.options,g.findWorker),[I,C]=n;if(!I){const e=(null===t||void 0===t?void 0:t.findWorker)?ce.formatMessage('Failed to locate the Service Worker registration using a custom "findWorker" predicate.\n\nPlease ensure that the custom predicate properly locates the Service Worker registration at "%s".\nMore details: https://mswjs.io/docs/api/setup-worker/start#findworker\n',g.serviceWorker.url):ce.formatMessage('Failed to locate the Service Worker registration.\n\nThis most likely means that the worker script URL "%s" cannot resolve against the actual public hostname (%s). This may happen if your application runs behind a proxy, or has a dynamic hostname.\n\nPlease consider using a custom "serviceWorker.url" option to point to the actual worker script location, or a custom "findWorker" option to resolve the Service Worker registration manually. More details: https://mswjs.io/docs/api/setup-worker/start',g.serviceWorker.url,location.host);throw new Error(e)}e.worker=I,e.registration=C,e.events.addListener(window,"beforeunload",(()=>{"redundant"!==I.state&&e.workerChannel.send("CLIENT_CLOSED"),window.clearInterval(e.keepAliveInterval)}));const[r]=yield vt((()=>function(e,g){return ge(this,void 0,void 0,(function*(){e.workerChannel.send("INTEGRITY_CHECK_REQUEST");const{payload:t}=yield e.events.once("INTEGRITY_CHECK_RESPONSE");if("02f4ad4a2797f85668baf196e553d929"!==t)throw new Error(`Currently active Service Worker (${t}) is behind the latest published one (02f4ad4a2797f85668baf196e553d929).`);return g}))}(e,I)));return r&&ce.error(`Detected outdated Service Worker: ${r.message}\n\nThe mocking is still enabled, but it's highly recommended that you update your Service Worker by running:\n\n$ npx msw init <PUBLIC_DIR>\n\nThis is necessary to ensure that the Service Worker is in sync with the library to guarantee its stability.\nIf this message still persists after updating, please report an issue: https://github.com/open-draft/msw/issues      `),e.keepAliveInterval=window.setInterval((()=>e.workerChannel.send("KEEPALIVE_REQUEST")),5e3),function(e,g){(null===g||void 0===g?void 0:g.quiet)||location.href.startsWith(e.scope)||ce.warn(`Cannot intercept requests on this page because it's outside of the worker's scope ("${e.scope}"). If you wish to mock API requests on this page, you must resolve this scope issue.\n\n- (Recommended) Register the worker at the root level ("/") of your application.\n- Set the "Service-Worker-Allowed" response header to allow out-of-scope workers.`)}(C,e.startOptions),C})))().then((t=>ge(this,void 0,void 0,(function*(){const n=t.installing||t.waiting;return n&&(yield new Promise((e=>{n.addEventListener("statechange",(()=>{if("activated"===n.state)return e()}))}))),yield function(e,g){return ge(this,void 0,void 0,(function*(){return e.workerChannel.send("MOCK_ACTIVATE"),e.events.once("MOCKING_ENABLED").then((()=>{Wt({quiet:g.quiet})}))}))}(e,g).catch((e=>{throw new Error(`Failed to enable mocking: ${null===e||void 0===e?void 0:e.message}`)})),t}))));return g.waitUntilReady&&function(e){const g=window.XMLHttpRequest.prototype.send;window.XMLHttpRequest.prototype.send=function(...t){vt((()=>e)).then((()=>{window.XMLHttpRequest.prototype.send=g,this.send(...t)}))};const t=window.fetch;window.fetch=(...g)=>ge(this,void 0,void 0,(function*(){return yield vt((()=>e)),window.fetch=t,window.fetch(...g)}))}(n),n};function Ft(e={}){e.quiet||console.log(`%c${ce.formatMessage("Mocking disabled.")}`,"color:orangered;font-weight:bold;")}const Kt={serviceWorker:{url:"/mockServiceWorker.js",options:null},quiet:!1,waitUntilReady:!0,onUnhandledRequest:"warn",findWorker:(e,g)=>e===g};function Et(e,g){return t=>(g.startOptions=function(e){return De(Kt,e||{})}(t),e(g.startOptions,t||{}))}function xt(e,g){const t=(0,$g.createInterceptor)({modules:[et.interceptFetch,gt.T],resolver(t){return ge(this,void 0,void 0,(function*(){const n=function(e){const g={id:e.id,url:e.url,method:e.method,body:de(e.body,e.headers),credentials:e.credentials||"same-origin",headers:e.headers,cookies:{},redirect:"manual",referrer:"",keepalive:!1,cache:"default",mode:"cors",referrerPolicy:"no-referrer",integrity:"",destination:"document",bodyUsed:!1};return kt(g),g}(t);return Yt(n,e.requestHandlers,g,e.emitter,{transformResponse:e=>({status:e.status,statusText:e.statusText,headers:e.headers.all(),body:e.body}),onMockedResponseSent(e,{handler:t,publicRequest:n,parsedRequest:I}){g.quiet||t.log(n,e,t,I)}})}))}});return t.apply(),t}let Mt=[];var Ut=[Le.get("https://my.backend/book",(function(e,g,t){return g(t.json({title:"Lord of the Rings",imageUrl:"/book-cover.jpg",description:"The Lord of the Rings is an epic high-fantasy novel written by English author and scholar J. R. R. Tolkien."}))})),Le.get("/reviews",(function(e,g,t){return g(t.json([{id:"60333292-7ca1-4361-bf38-b6b43b90cb16",author:"John Maverick",text:"Lord of The Rings, is with no absolute hesitation, my most favored and adored book by\u2011far. The triology is wonderful\u2011 and I really consider this a legendary fantasy series. It will always keep you at the edge of your seat\u2011 and the characters you will grow and fall in love with!"}]))}))];function Tt(e,g){(null==g||g>e.length)&&(g=e.length);for(var t=0,n=new Array(g);t<g;t++)n[t]=e[t];return n}var zt,Lt=function(...e){if(e.forEach((e=>{if(Array.isArray(e))throw new Error(ce.formatMessage('Failed to call "setupWorker" given an Array of request handlers (setupWorker([a, b])), expected to receive each handler individually: setupWorker(a, b).'))})),D.exports.isNodeProcess())throw new Error(ce.formatMessage("Failed to execute `setupWorker` in a non-browser environment. Consider using `setupServer` for Node.js environment instead."));const g=new tt.StrictEventEmitter,t=new tt.StrictEventEmitter;!function(e,g){const t=e.emit;t._isPiped||(e.emit=function(e,...n){return g.emit(e,...n),t.call(this,e,...n)},e.emit._isPiped=!0)}(g,t);const n={startOptions:void 0,worker:null,registration:null,requestHandlers:[...e],emitter:g,workerChannel:{on(e,g){n.events.addListener(navigator.serviceWorker,"message",(t=>{if(t.source!==n.worker)return;const I=L(t.data);I&&I.type===e&&g(t,I)}))},send(e){var g;null===(g=n.worker)||void 0===g||g.postMessage(e)}},events:{addListener:(e,g,t)=>(e.addEventListener(g,t),Mt.push({eventType:g,target:e,callback:t}),()=>{e.removeEventListener(g,t)}),removeAllListeners(){for(const{target:e,eventType:g,callback:t}of Mt)e.removeEventListener(g,t);Mt=[]},once(e){const g=[];return new Promise(((t,I)=>{g.push(n.events.addListener(navigator.serviceWorker,"message",(g=>{try{const n=JSON.parse(g.data);n.type===e&&t(n)}catch(n){I(n)}})),n.events.addListener(navigator.serviceWorker,"messageerror",I))})).finally((()=>{g.forEach((e=>e()))}))}},useFallbackMode:!("serviceWorker"in navigator)||"file:"===location.protocol},I=n.useFallbackMode?function(e){return function(g){return ge(this,void 0,void 0,(function*(){e.fallbackInterceptor=xt(e,g),Wt({message:"Mocking enabled (fallback mode).",quiet:g.quiet})}))}}(n):Nt(n),C=n.useFallbackMode?function(e){return function(){var g,t;null===(g=e.fallbackInterceptor)||void 0===g||g.restore(),Ft({quiet:null===(t=e.startOptions)||void 0===t?void 0:t.quiet})}}(n):(e=>function(){var g;e.workerChannel.send("MOCK_DEACTIVATE"),window.clearInterval(e.keepAliveInterval),Ft({quiet:null===(g=e.startOptions)||void 0===g?void 0:g.quiet})})(n);return{start:Et(I,n),stop(){n.events.removeAllListeners(),n.emitter.removeAllListeners(),t.removeAllListeners(),C()},use(...e){!function(e,...g){e.unshift(...g)}(n.requestHandlers,...e)},restoreHandlers(){!function(e){e.forEach((e=>{e.markAsSkipped(!1)}))}(n.requestHandlers)},resetHandlers(...g){n.requestHandlers=function(e,...g){return g.length>0?[...g]:[...e]}(e,...g)},printHandlers(){n.requestHandlers.forEach((e=>{const{header:g,callFrame:t}=e.info,n=e.info.hasOwnProperty("operationType")?"[graphql]":"[rest]";console.groupCollapsed(`${n} ${g}`),t&&console.log(`Declaration: ${t}`),console.log("Handler:",e),e instanceof Te&&console.log("Match:",`https://mswjs.io/repl?path=${e.info.path}`),console.groupEnd()}))},events:{on:(...e)=>t.on(...e),removeListener:(...e)=>t.removeListener(...e),removeAllListeners:(...e)=>t.removeAllListeners(...e)}}}.apply(void 0,function(e){if(Array.isArray(e))return Tt(e)}(zt=Ut)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(zt)||function(e,g){if(e){if("string"===typeof e)return Tt(e,g);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Tt(e,g):void 0}}(zt)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())},520:function(e,g,t){"use strict";t.r(g),t(9016).K.start()},1551:function(e,g,t){"use strict";function n(e,g){(null==g||g>e.length)&&(g=e.length);for(var t=0,n=new Array(g);t<g;t++)n[t]=e[t];return n}function I(e,g){return function(e){if(Array.isArray(e))return e}(e)||function(e,g){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,I,C=[],r=!0,o=!1;try{for(t=t.call(e);!(r=(n=t.next()).done)&&(C.push(n.value),!g||C.length!==g);r=!0);}catch(i){o=!0,I=i}finally{try{r||null==t.return||t.return()}finally{if(o)throw I}}return C}}(e,g)||function(e,g){if(!e)return;if("string"===typeof e)return n(e,g);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return n(e,g)}(e,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Object.defineProperty(g,"__esModule",{value:!0}),g.default=void 0;var C,r=(C=t(7294))&&C.__esModule?C:{default:C},o=t(1003),i=t(880),l=t(9246);function a(e,g){if(null==e)return{};var t,n,I=function(e,g){if(null==e)return{};var t,n,I={},C=Object.keys(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||(I[t]=e[t]);return I}(e,g);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(I[t]=e[t])}return I}var s={};function c(e,g,t,n){if(e&&o.isLocalURL(g)){e.prefetch(g,t,n).catch((function(e){0}));var I=n&&"undefined"!==typeof n.locale?n.locale:e&&e.locale;s[g+"%"+t+(I?"%"+I:"")]=!0}}var A=r.default.forwardRef((function(e,g){var t,n=e.legacyBehavior,C=void 0===n?!0!==Boolean(!1):n,A=e.href,u=e.as,d=e.children,h=e.prefetch,m=e.passHref,b=e.replace,p=e.shallow,Z=e.scroll,y=e.locale,G=e.onClick,B=e.onMouseEnter,f=a(e,["href","as","children","prefetch","passHref","replace","shallow","scroll","locale","onClick","onMouseEnter"]);t=d,C&&"string"===typeof t&&(t=r.default.createElement("a",null,t));var v,S=!1!==h,V=i.useRouter(),W=r.default.useMemo((function(){var e=I(o.resolveHref(V,A,!0),2),g=e[0],t=e[1];return{href:g,as:u?o.resolveHref(V,u):t||g}}),[V,A,u]),R=W.href,k=W.as,X=r.default.useRef(R),J=r.default.useRef(k);C&&(v=r.default.Children.only(t));var w=C?v&&"object"===typeof v&&v.ref:g,Y=I(l.useIntersection({rootMargin:"200px"}),3),H=Y[0],N=Y[1],F=Y[2],K=r.default.useCallback((function(e){J.current===k&&X.current===R||(F(),J.current=k,X.current=R),H(e),w&&("function"===typeof w?w(e):"object"===typeof w&&(w.current=e))}),[k,w,R,F,H]);r.default.useEffect((function(){var e=N&&S&&o.isLocalURL(R),g="undefined"!==typeof y?y:V&&V.locale,t=s[R+"%"+k+(g?"%"+g:"")];e&&!t&&c(V,R,k,{locale:g})}),[k,R,N,y,S,V]);var E={ref:K,onClick:function(e){C||"function"!==typeof G||G(e),C&&v.props&&"function"===typeof v.props.onClick&&v.props.onClick(e),e.defaultPrevented||function(e,g,t,n,I,C,r,i){("A"!==e.currentTarget.nodeName.toUpperCase()||!function(e){var g=e.currentTarget.target;return g&&"_self"!==g||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&o.isLocalURL(t))&&(e.preventDefault(),g[I?"replace":"push"](t,n,{shallow:C,locale:i,scroll:r}))}(e,V,R,k,b,p,Z,y)},onMouseEnter:function(e){C||"function"!==typeof B||B(e),C&&v.props&&"function"===typeof v.props.onMouseEnter&&v.props.onMouseEnter(e),o.isLocalURL(R)&&c(V,R,k,{priority:!0})}};if(!C||m||"a"===v.type&&!("href"in v.props)){var x="undefined"!==typeof y?y:V&&V.locale,M=V&&V.isLocaleDomain&&o.getDomainLocale(k,x,V&&V.locales,V&&V.domainLocales);E.href=M||o.addBasePath(o.addLocale(k,x,V&&V.defaultLocale))}return C?r.default.cloneElement(v,E):r.default.createElement("a",Object.assign({},f,E),t)}));g.default=A,("function"===typeof g.default||"object"===typeof g.default&&null!==g.default)&&(Object.assign(g.default,g),e.exports=g.default)},9246:function(e,g,t){"use strict";function n(e,g){(null==g||g>e.length)&&(g=e.length);for(var t=0,n=new Array(g);t<g;t++)n[t]=e[t];return n}function I(e,g){return function(e){if(Array.isArray(e))return e}(e)||function(e,g){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,I,C=[],r=!0,o=!1;try{for(t=t.call(e);!(r=(n=t.next()).done)&&(C.push(n.value),!g||C.length!==g);r=!0);}catch(i){o=!0,I=i}finally{try{r||null==t.return||t.return()}finally{if(o)throw I}}return C}}(e,g)||function(e,g){if(!e)return;if("string"===typeof e)return n(e,g);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return n(e,g)}(e,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Object.defineProperty(g,"__esModule",{value:!0}),g.useIntersection=function(e){var g=e.rootRef,t=e.rootMargin,n=e.disabled||!o,a=C.useRef(),s=I(C.useState(!1),2),c=s[0],A=s[1],u=I(C.useState(g?g.current:null),2),d=u[0],h=u[1],m=C.useCallback((function(e){a.current&&(a.current(),a.current=void 0),n||c||e&&e.tagName&&(a.current=function(e,g,t){var n=function(e){var g,t={root:e.root||null,margin:e.rootMargin||""},n=l.find((function(e){return e.root===t.root&&e.margin===t.margin}));n?g=i.get(n):(g=i.get(t),l.push(t));if(g)return g;var I=new Map,C=new IntersectionObserver((function(e){e.forEach((function(e){var g=I.get(e.target),t=e.isIntersecting||e.intersectionRatio>0;g&&t&&g(t)}))}),e);return i.set(t,g={id:t,observer:C,elements:I}),g}(t),I=n.id,C=n.observer,r=n.elements;return r.set(e,g),C.observe(e),function(){if(r.delete(e),C.unobserve(e),0===r.size){C.disconnect(),i.delete(I);var g=l.findIndex((function(e){return e.root===I.root&&e.margin===I.margin}));g>-1&&l.splice(g,1)}}}(e,(function(e){return e&&A(e)}),{root:d,rootMargin:t}))}),[n,d,t,c]),b=C.useCallback((function(){A(!1)}),[]);return C.useEffect((function(){if(!o&&!c){var e=r.requestIdleCallback((function(){return A(!0)}));return function(){return r.cancelIdleCallback(e)}}}),[c]),C.useEffect((function(){g&&h(g.current)}),[g]),[m,c,b]};var C=t(7294),r=t(4686),o="undefined"!==typeof IntersectionObserver;var i=new Map,l=[];("function"===typeof g.default||"object"===typeof g.default&&null!==g.default)&&(Object.assign(g.default,g),e.exports=g.default)},1101:function(e,g,t){"use strict";t.r(g),t.d(g,{default:function(){return m}});var n=t(5893),I=t(7294),C=t(4931),r=t(1422);function o(e){var g=e.children,t=(0,I.useState)(!1),C=t[0],o=t[1];return(0,I.useEffect)((function(){top!=self&&o(!0)}),[]),C?(0,n.jsx)("div",{className:"flex h-screen w-screen",children:(0,n.jsx)("div",{className:"flex flex-1 justify-center items-center",children:(0,n.jsx)(r.ee,{href:self.location.href,onClick:function(e){e.preventDefault(),window&&top&&self&&(top.location.href=self.location.href)},children:"Go to website"})})}):(0,n.jsx)(n.Fragment,{children:g})}var i=t(2197);t(4051);var l=t(1163),a=function(e){var g=e.children,t=(0,l.useRouter)().isReady,C=(0,I.useState)(!1),r=C[0],o=C[1];return(0,I.useEffect)((function(){o(!0)}),[]),r&&t?(0,n.jsx)("div",{suppressHydrationWarning:!0,children:"undefined"===typeof document?(0,n.jsx)(n.Fragment,{}):g}):(0,n.jsx)(n.Fragment,{})},s=t(287),c=(t(7107),"1.1.0"),A=t(9008),u=t.n(A);function d(e,g,t){return g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}function h(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(g){d(e,g,t[g])}))}return e}"true"===t(4155).env.NEXT_PUBLIC_API_MOCKING&&t(520);var m=function(e){var g=e.Component,t=e.pageProps;return(0,I.useEffect)((function(){console.info("%cApp Version: ".concat(c),"font-size: 18px")}),[]),(0,n.jsx)(a,{children:(0,n.jsxs)(o,{children:[(0,n.jsxs)(u(),{children:[(0,n.jsx)("title",{children:"Decash send platform"}),(0,n.jsx)("meta",{name:"description",content:"Decash send platform"}),(0,n.jsx)("link",{rel:"shortcut icon",href:"/favicon.ico"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, user-scalable=no, initial-scale=0.8, height=device-height"})]}),(0,n.jsxs)(i.DY,{children:[(0,n.jsx)(i.u_,{}),(0,n.jsx)(s.Ho,{children:(0,n.jsx)(g,h({},t))})]}),(0,n.jsx)(C.x7,{})]})})}},1422:function(e,g,t){"use strict";t.d(g,{ee:function(){return A},pG:function(){return d},zx:function(){return c},MN:function(){return m},LA:function(){return h}});var n=t(5893),I=t(7294),C=t(4184),r=t.n(C),o=t(5775),i=t.n(o);function l(e,g,t){return g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}function a(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(g){l(e,g,t[g])}))}return e}function s(e,g){if(null==e)return{};var t,n,I=function(e,g){if(null==e)return{};var t,n,I={},C=Object.keys(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||(I[t]=e[t]);return I}(e,g);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(I[t]=e[t])}return I}var c=(0,I.forwardRef)((function(e,g){var t=e.variant,I=void 0===t?"primary":t,C=e.className,o=void 0===C?"":C,l=s(e,["variant","className"]),c=r()(i().base,i()[I],o);return(0,n.jsx)("button",a({className:c,ref:g},l))})),A=(0,I.forwardRef)((function(e,g){var t=e.variant,I=void 0===t?"text":t,C=e.className,o=void 0===C?"":C,c=s(e,["variant","className"]),A=r()(l({},i().base,"text"!==I),i()[I],o);return(0,n.jsx)("a",a({className:A,ref:g},c))}));function u(e){var g=e.href,t=e.children,I=e.topText,C=e.bottomText,o=e.additionalClassName,i=void 0===o?"w-48 h-14 bg-black":o,l=e.topTextClassName,a=void 0===l?"text-xs":l,s=e.bottomTextClassName,c=void 0===s?"text-lg font-semibold font-sans":s;return(0,n.jsxs)("a",{className:r()("flex flex-row text-white rounded-lg items-center justify-center",i),target:"_blank",href:g,rel:"noreferrer",children:[(0,n.jsx)("div",{className:"flex w-1/4 items-center justify-center",children:t}),(0,n.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,n.jsx)("div",{className:r()(a),children:I}),(0,n.jsx)("div",{className:r()(c),children:C})]})]})}function d(e){var g=e.href;return(0,n.jsx)(u,{href:g,topText:"Download on the",bottomText:"App Store",children:(0,n.jsx)("svg",{viewBox:"0 0 384 512",width:"30",children:(0,n.jsx)("path",{fill:"currentColor",d:"M318.7 268.7c-.2-36.7 16.4-64.4 50-84.8-18.8-26.9-47.2-41.7-84.7-44.6-35.5-2.8-74.3 20.7-88.5 20.7-15 0-49.4-19.7-76.4-19.7C63.3 141.2 4 184.8 4 273.5q0 39.3 14.4 81.2c12.8 36.7 59 126.7 107.2 125.2 25.2-.6 43-17.9 75.8-17.9 31.8 0 48.3 17.9 76.4 17.9 48.6-.7 90.4-82.5 102.6-119.3-65.2-30.7-61.7-90-61.7-91.9zm-56.6-164.2c27.3-32.4 24.8-61.9 24-72.5-24.1 1.4-52 16.4-67.9 34.9-17.5 19.8-27.8 44.3-25.6 71.9 26.1 2 49.9-11.4 69.5-34.3z"})})})}function h(e){var g=e.href;return(0,n.jsx)(u,{href:g,topText:"GET IT ON",bottomText:"Google Play",children:(0,n.jsxs)("svg",{viewBox:"30 336.7 120.9 129.2",width:"30",children:[(0,n.jsx)("path",{fill:"#FFD400",d:"M119.2,421.2c15.3-8.4,27-14.8,28-15.3c3.2-1.7,6.5-6.2,0-9.7 c-2.1-1.1-13.4-7.3-28-15.3l-20.1,20.2L119.2,421.2z"}),(0,n.jsx)("path",{fill:"#FF3333",d:"M99.1,401.1l-64.2,64.7c1.5,0.2,3.2-0.2,5.2-1.3 c4.2-2.3,48.8-26.7,79.1-43.3L99.1,401.1L99.1,401.1z"}),(0,n.jsx)("path",{fill:"#48FF48",d:"M99.1,401.1l20.1-20.2c0,0-74.6-40.7-79.1-43.1 c-1.7-1-3.6-1.3-5.3-1L99.1,401.1z"}),(0,n.jsx)("path",{fill:"#3BCCFF",d:"M99.1,401.1l-64.3-64.3c-2.6,0.6-4.8,2.9-4.8,7.6 c0,7.5,0,107.5,0,113.8c0,4.3,1.7,7.4,4.9,7.7L99.1,401.1z"})]})})}function m(e){var g=e.href;return(0,n.jsx)(u,{href:g,additionalClassName:"w-52 h-14 bg-blue-600",topText:"Available in the",bottomText:"Chrome Web Store",bottomTextClassName:"text-md font-medium",children:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"48",height:"48",viewBox:"0 0 48 48",style:{fill:"#000000"},children:[(0,n.jsx)("path",{fill:"#c0c9cc",d:"M42.39,11.07V37c0,1.66-1.34,3-3,3H8.38c-1.66,0-3-1.34-3-3V11.07H42.39z"}),(0,n.jsxs)("linearGradient",{id:"s1KY5cWnBSx6qWb48gxgFa_GsBZ74FbIf7a_gr1",x1:"23.885",x2:"23.885",y1:"2.953",y2:"29.195",gradientUnits:"userSpaceOnUse",children:[(0,n.jsx)("stop",{offset:"0",stopColor:"#bac1c6"}),(0,n.jsx)("stop",{offset:".703",stopColor:"#9ca5ad"})]}),(0,n.jsx)("polygon",{fill:"url(#s1KY5cWnBSx6qWb48gxgFa_GsBZ74FbIf7a_gr1)",points:"42.39,11.07 42.39,26 5.38,26 5.38,11.07 15,11.07 15,9 18,6 18,11.07 29,11.07 29,6 32,9 32,11.07"}),(0,n.jsxs)("linearGradient",{id:"s1KY5cWnBSx6qWb48gxgFb_GsBZ74FbIf7a_gr2",x1:"23.5",x2:"23.5",y1:"2.477",y2:"11.251",gradientUnits:"userSpaceOnUse",children:[(0,n.jsx)("stop",{offset:".117",stopColor:"#889097"}),(0,n.jsx)("stop",{offset:".465",stopColor:"#64717c"})]}),(0,n.jsx)("rect",{width:"11",height:"3",x:"18",y:"6",fill:"url(#s1KY5cWnBSx6qWb48gxgFb_GsBZ74FbIf7a_gr2)"}),(0,n.jsx)("path",{fill:"#fff",d:"M16.03,37.66L17.42,40h-0.84C16.29,39.27,16.09,38.48,16.03,37.66z"}),(0,n.jsx)("path",{fill:"#fff",d:"M17.46,40c-0.08-0.14-0.14-0.29-0.19-0.44c0-0.02-0.01-0.05-0.03-0.08c-0.07-0.2-0.14-0.41-0.19-0.62 c-0.04-0.13-0.07-0.25-0.09-0.38c-0.01-0.01-0.01-0.03-0.01-0.04c-0.05-0.23-0.09-0.46-0.11-0.7C16.81,37.5,16.8,37.25,16.8,37 c0-3.98,3.22-7.2,7.2-7.2V29c1.25,0,2.44,0.29,3.49,0.8C30.16,31.09,32,33.83,32,37c0,1.06-0.21,2.07-0.58,3H17.47"}),(0,n.jsxs)("linearGradient",{id:"s1KY5cWnBSx6qWb48gxgFc_GsBZ74FbIf7a_gr3",x1:"7.819",x2:"18.057",y1:"33.359",y2:"38.803",gradientUnits:"userSpaceOnUse",children:[(0,n.jsx)("stop",{offset:"0",stopColor:"#4caf50"}),(0,n.jsx)("stop",{offset:".489",stopColor:"#4aaf50"}),(0,n.jsx)("stop",{offset:".665",stopColor:"#43ad50"}),(0,n.jsx)("stop",{offset:".79",stopColor:"#38aa50"}),(0,n.jsx)("stop",{offset:".892",stopColor:"#27a550"}),(0,n.jsx)("stop",{offset:".978",stopColor:"#11a050"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#0a9e50"})]}),(0,n.jsx)("path",{fill:"url(#s1KY5cWnBSx6qWb48gxgFc_GsBZ74FbIf7a_gr3)",d:"M17.42,40H8.29C8.1,39.03,8,38.03,8,37 c0-3.16,0.92-6.11,2.51-8.59h0.02l5.5,9.25L17.42,40z"}),(0,n.jsxs)("linearGradient",{id:"s1KY5cWnBSx6qWb48gxgFd_GsBZ74FbIf7a_gr4",x1:"32",x2:"32",y1:"40",y2:"26.321",gradientUnits:"userSpaceOnUse",children:[(0,n.jsx)("stop",{offset:"0",stopColor:"#ffd747"}),(0,n.jsx)("stop",{offset:".482",stopColor:"#ffd645"}),(0,n.jsx)("stop",{offset:".655",stopColor:"#fed43e"}),(0,n.jsx)("stop",{offset:".779",stopColor:"#fccf33"}),(0,n.jsx)("stop",{offset:".879",stopColor:"#fac922"}),(0,n.jsx)("stop",{offset:".964",stopColor:"#f7c10c"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#f5bc00"})]}),(0,n.jsx)("path",{fill:"url(#s1KY5cWnBSx6qWb48gxgFd_GsBZ74FbIf7a_gr4)",d:"M40,37c0,1.02-0.1,2.03-0.28,3h-9.19 c0.43-0.91,0.67-1.93,0.67-3c0-3.98-3.22-7.2-7.2-7.2V21c4.29,0,8.18,1.69,11.05,4.45c0.27,0.25,0.52,0.51,0.76,0.77 c0.49,0.54,0.94,1.11,1.35,1.7c0.21,0.3,0.4,0.61,0.59,0.92s0.37,0.63,0.53,0.96C39.37,31.97,40,34.41,40,37z"}),(0,n.jsxs)("linearGradient",{id:"s1KY5cWnBSx6qWb48gxgFe_GsBZ74FbIf7a_gr5",x1:"20.091",x2:"27.909",y1:"32.992",y2:"40.811",gradientUnits:"userSpaceOnUse",children:[(0,n.jsx)("stop",{offset:"0",stopColor:"#2aa4f4"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#007ad9"})]}),(0,n.jsx)("path",{fill:"url(#s1KY5cWnBSx6qWb48gxgFe_GsBZ74FbIf7a_gr5)",d:"M29.6,37c0,1.1-0.32,2.13-0.88,3h-9.44 c-0.56-0.87-0.88-1.9-0.88-3c0-3.09,2.51-5.6,5.6-5.6S29.6,33.91,29.6,37z"}),(0,n.jsxs)("linearGradient",{id:"s1KY5cWnBSx6qWb48gxgFf_GsBZ74FbIf7a_gr6",x1:"17.397",x2:"17.336",y1:"39.763",y2:"39.801",gradientUnits:"userSpaceOnUse",children:[(0,n.jsx)("stop",{offset:"0",stopColor:"#f7572f"}),(0,n.jsx)("stop",{offset:".523",stopColor:"#f7552d"}),(0,n.jsx)("stop",{offset:".712",stopColor:"#f75026"}),(0,n.jsx)("stop",{offset:".846",stopColor:"#f7461b"}),(0,n.jsx)("stop",{offset:".954",stopColor:"#f7390a"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#f73100"})]}),(0,n.jsx)("path",{fill:"url(#s1KY5cWnBSx6qWb48gxgFf_GsBZ74FbIf7a_gr6)",d:"M17.46,40c-0.08-0.14-0.14-0.29-0.19-0.44 c0.06,0.15,0.13,0.3,0.2,0.44"}),(0,n.jsxs)("linearGradient",{id:"s1KY5cWnBSx6qWb48gxgFg_GsBZ74FbIf7a_gr7",x1:"33.704",x2:"14.065",y1:"22.36",y2:"34.631",gradientUnits:"userSpaceOnUse",children:[(0,n.jsx)("stop",{offset:"0",stopColor:"#f7572f"}),(0,n.jsx)("stop",{offset:".523",stopColor:"#f7552d"}),(0,n.jsx)("stop",{offset:".712",stopColor:"#f75026"}),(0,n.jsx)("stop",{offset:".846",stopColor:"#f7461b"}),(0,n.jsx)("stop",{offset:".954",stopColor:"#f7390a"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#f73100"})]}),(0,n.jsx)("path",{fill:"url(#s1KY5cWnBSx6qWb48gxgFg_GsBZ74FbIf7a_gr7)",d:"M38.27,29.8H24c-3.98,0-7.2,3.22-7.2,7.2 c0,0.25,0.01,0.5,0.04,0.74c0.02,0.24,0.06,0.47,0.11,0.7c0,0.01,0,0.03,0.01,0.04c0.02,0.13,0.05,0.25,0.09,0.38 c0.05,0.21,0.11,0.42,0.19,0.62c0.02,0.03,0.03,0.06,0.03,0.08c0.05,0.15,0.11,0.3,0.19,0.44h-0.04l-1.39-2.34l-5.5-9.25h-0.02 c0.16-0.25,0.33-0.5,0.5-0.75c0.21-0.29,0.43-0.57,0.66-0.85c0.2-0.24,0.4-0.47,0.61-0.7c0.17-0.18,0.33-0.35,0.5-0.51 c0.12-0.12,0.25-0.24,0.37-0.35c0.44-0.41,0.9-0.79,1.38-1.14c0.23-0.18,0.47-0.34,0.71-0.5c0.89-0.59,1.85-1.08,2.85-1.48 c0.23-0.09,0.46-0.18,0.7-0.26c0.08-0.03,0.17-0.06,0.26-0.09c0.28-0.09,0.56-0.17,0.85-0.25c0.32-0.09,0.65-0.16,0.99-0.23 c0.34-0.06,0.67-0.12,1.02-0.16c0.27-0.04,0.54-0.07,0.81-0.09c0.13-0.01,0.26-0.02,0.39-0.02C23.41,21.01,23.7,21,24,21 c4.29,0,8.18,1.69,11.05,4.45c0.27,0.25,0.52,0.51,0.76,0.77c0.49,0.54,0.94,1.11,1.35,1.7c0.21,0.3,0.4,0.61,0.59,0.92 C37.93,29.15,38.11,29.47,38.27,29.8z"})]})})}},5734:function(e,g,t){"use strict";t.d(g,{Z:function(){return B}});var n,I,C=t(7294);function r(){return r=Object.assign||function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},r.apply(this,arguments)}var o;function i(){return i=Object.assign||function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},i.apply(this,arguments)}var l,a;function s(){return s=Object.assign||function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},s.apply(this,arguments)}var c,A;function u(){return u=Object.assign||function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},u.apply(this,arguments)}var d;function h(){return h=Object.assign||function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},h.apply(this,arguments)}var m;function b(){return b=Object.assign||function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},b.apply(this,arguments)}function p(e,g,t){return g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}function Z(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(g){p(e,g,t[g])}))}return e}function y(e,g){if(null==e)return{};var t,n,I=function(e,g){if(null==e)return{};var t,n,I={},C=Object.keys(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||(I[t]=e[t]);return I}(e,g);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(I[t]=e[t])}return I}var G={algoSigner:function(e){return C.createElement("svg",r({viewBox:"0 0 26 26",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e),n||(n=C.createElement("path",{fill:"url(#algo-signer_svg__a)",d:"M0 0h26v26H0z"})),I||(I=C.createElement("defs",null,C.createElement("pattern",{id:"algo-signer_svg__a",patternContentUnits:"objectBoundingBox",width:1,height:1},C.createElement("use",{xlinkHref:"#algo-signer_svg__b",transform:"scale(.00781)"})),C.createElement("image",{id:"algo-signer_svg__b",width:128,height:128,xlinkHref:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAIAAABMXPacAAAMbGlDQ1BJQ0MgUHJvZmlsZQAASImVVwdYU8kWnluSkJDQAhGQEnoTRHqREkILQUCqYCMkgYQSY0JQsWFZVHDtIoIVXRVRdHUFZFERe1kUe18sqCjroi6KovImJKDrvvK9k2/u/Dlz5j/lztx7BwDtXp5UmovqAJAnyZfFR4Qwx6WmMUlPAQp/moAAvHl8uZQVFxcNoAz2f5d3NwCi7K86K7n+Of5fRU8glPMBQCZAnCGQ8/MgbgYA38CXyvIBICr1VtPypUpcBLG+DAYI8RolzlLhXUqcocJNAzaJ8WyILwOgQeXxZFkAaN2DemYBPwvyaH2C2FUiEEsA0B4BcSBfxBNArIx9RF7eFCUuh9ge2kshhvEAn4xvOLP+xp8xxM/jZQ1hVV4DohEqlktzeTP+z9L8b8nLVQz6sIWNKpJFxivzhzW8lTOFq8RUiLskGTGxylpD3CsWqOoOAEoRKSKTVPaoCV/OhvUDDIhdBbxQLsQmEIdLcmOi1fqMTHE4B2K4WtDp4nxOIsSGEC8WysMS1DZbZFPi1b7QukwZm6XWn+XJBvwqfT1Q5CSx1PxvREKOmh/TKhQlpkBMgdi6QJwcA7EWxC7ynASu2mZ0oYgdM2gjU8Qr47eGOF4oiQhR8WMFmbLweLV9SZ58MF9si0jMiVHjA/mixEhVfbCTfN5A/DAX7LJQwkoa5BHKx0UP5iIQhoapcseeCyVJCWqeXml+SLxqLk6R5sap7XFLYW6EUm8JsYe8IEE9F0/Oh4tTxY9nSvPjElVx4oXZvKg4VTz4ChAN2CAUMIECtgwwBWQDcWtXfRf8pxoJBzwgA1lACJzVmsEZKQMjEnhNAIXgD4iEQD40L2RgVAgKoP7zkFZ1dQaZA6MFAzNywFOI8wAX5ML/ioFZkiFvyeAJ1Ij/4Z0HGx/Gmwubcvzf6we1XzUsqIlWaxSDHpnag5bEMGIoMZIYTnTAjfFA3B+Phtdg2NxwH9x3MI+v9oSnhDbCI8J1Qjvh9mTxfNl3UY4B7ZA/XF2LjG9rgdtCTk88BA+A7JAZZ+DGwBn3gH5YeBD07Am1bHXcyqowv+P+Wwbf3A21HdmVjJKHkYPJ9t/P1HLU8hxiUdb62/qoYs0Yqjd7aOR7/+xvqi+APfd7S2wxdhA7gx3HzmFNWD1gYsewBuwidkSJh1bXk4HVNegtfiCeHMgj/oc/ntqnspJy1xrXTtdPqrF84fR85cZjT5HOkImzRPlMFnw7CJkcCd9lBNPN1c0NAOW7RvX4essYeIcgjPNfdQssAAiY0d/f3/RVx4XP3INH4Pa/81Vn1wEfE+cBOLuOr5AVqHS48kKATwltuNOMgBmwAvYwHzfgBfxBMAgDUSAWJIJUMAlWWQTXuQxMA7PAPFAMSsEKsBZUgM1gG9gF9oIDoB40gePgNLgALoPr4C5cPR3gJegG70AfgiAkhIbQESPEHLFBnBA3xAcJRMKQaCQeSUXSkSxEgiiQWcgCpBRZhVQgW5Fq5GfkMHIcOYe0IbeRh0gn8gb5iGIoFdVHTVFbdCTqg7JQLpqITkSz0KloIboQXYaWo1XoHrQOPY5eQK+j7ehLtAcDmCbGwCwwZ8wHY2OxWBqWicmwOVgJVoZVYbVYI7zPV7F2rAv7gBNxOs7EneEKjsSTcD4+FZ+DL8Ur8F14HX4Sv4o/xLvxLwQawYTgRPAjcAjjCFmEaYRiQhlhB+EQ4RTcSx2Ed0QikUG0I3rDvZhKzCbOJC4lbiTuIzYT24iPiT0kEsmI5EQKIMWSeKR8UjFpPWkP6RjpCqmD1KuhqWGu4aYRrpGmIdGYr1GmsVvjqMYVjWcafWQdsg3ZjxxLFpBnkJeTt5MbyZfIHeQ+ii7FjhJASaRkU+ZRyim1lFOUe5S3mpqalpq+mmM1xZpFmuWa+zXPaj7U/EDVozpS2dQJVAV1GXUntZl6m/qWRqPZ0oJpabR82jJaNe0E7QGtV4uu5aLF0RJozdWq1KrTuqL1SpusbaPN0p6kXahdpn1Q+5J2lw5Zx1aHrcPTmaNTqXNY56ZOjy5dd5RurG6e7lLd3brndJ/rkfRs9cL0BHoL9bbpndB7TMfoVnQ2nU9fQN9OP0Xv0Cfq2+lz9LP1S/X36rfqdxvoGXgYJBtMN6g0OGLQzsAYtgwOI5exnHGAcYPxcZjpMNYw4bAlw2qHXRn23nC4YbCh0LDEcJ/hdcOPRkyjMKMco5VG9Ub3jXFjR+OxxtOMNxmfMu4arj/cfzh/eMnwA8PvmKAmjibxJjNNtplcNOkxNTONMJWarjc9YdplxjALNss2W2N21KzTnG4eaC42X2N+zPwF04DJYuYyy5knmd0WJhaRFgqLrRatFn2WdpZJlvMt91net6JY+VhlWq2xarHqtja3HmM9y7rG+o4N2cbHRmSzzuaMzXtbO9sU20W29bbP7QztOHaFdjV29+xp9kH2U+2r7K85EB18HHIcNjpcdkQdPR1FjpWOl5xQJy8nsdNGp7YRhBG+IyQjqkbcdKY6s5wLnGucH7owXKJd5rvUu7waaT0ybeTKkWdGfnH1dM113e56d5TeqKhR80c1jnrj5ujGd6t0u+ZOcw93n+ve4P7aw8lD6LHJ45Yn3XOM5yLPFs/PXt5eMq9ar05va+907w3eN330feJ8lvqc9SX4hvjO9W3y/eDn5Zfvd8DvT39n/xz/3f7PR9uNFo7ePvpxgGUAL2BrQHsgMzA9cEtge5BFEC+oKuhRsFWwIHhH8DOWAyubtYf1KsQ1RBZyKOQ92489m90cioVGhJaEtobphSWFVYQ9CLcMzwqvCe+O8IyYGdEcSYjkRq6MvMkx5fA51ZzuKO+o2VEnuVRuAreC+yjaMVoW3TgGHRM1ZvWYezE2MZKY+lgQy4ldHXs/zi5uatyvY4lj48ZWjn0aPyp+VvyZBHrC5ITdCe8SQxKXJ95Nsk9SJLUkaydPSK5Ofp8SmrIqpX3cyHGzx11INU4VpzakkdKS03ak9YwPG792fMcEzwnFE25MtJs4feK5ScaTcicdmaw9mTf5YDohPSV9d/onXiyviteTwcnYkNHNZ/PX8V8KggVrBJ3CAOEq4bPMgMxVmc+zArJWZ3WKgkRloi4xW1whfp0dmb05+31ObM7OnP7clNx9eRp56XmHJXqSHMnJKWZTpk9pkzpJi6XtU/2mrp3aLePKdsgR+UR5Q74+/Ki/qLBX/KB4WBBYUFnQOy152sHputMl0y/OcJyxZMazwvDCn2biM/kzW2ZZzJo36+Fs1uytc5A5GXNa5lrNXTi3oyiiaNc8yryceb/Nd52/av5fC1IWNC40XVi08PEPET/UFGsVy4pvLvJftHkxvli8uHWJ+5L1S76UCErOl7qWlpV+Wspfev7HUT+W/9i/LHNZ63Kv5ZtWEFdIVtxYGbRy1yrdVYWrHq8es7puDXNNyZq/1k5ee67Mo2zzOso6xbr28ujyhvXW61es/1QhqrheGVK5b4PJhiUb3m8UbLyyKXhT7WbTzaWbP24Rb7m1NWJrXZVtVdk24raCbU+3J28/85PPT9U7jHeU7vi8U7KzfVf8rpPV3tXVu012L69BaxQ1nXsm7Lm8N3RvQ61z7dZ9jH2l+8F+xf4XP6f/fOMA90DLQZ+Dtb/Y/LLhEP1QSR1SN6Ouu15U396Q2tB2OOpwS6N/46FfXX7d2WTRVHnE4Mjyo5SjC4/2Hys81tMsbe46nnX8ccvklrsnxp24dnLsydZT3FNnT4efPnGGdebY2YCzTef8zh0+73O+/oLXhbqLnhcP/eb526FWr9a6S96XGi77Xm5sG9129ErQleNXQ6+evsa5duF6zPW2G0k3bt2ccLP9luDW89u5t1/fKbjTd7foHuFeyX2d+2UPTB5U/e7w+752r/YjD0MfXnyU8OjuY/7jl0/kTz51LHxKe1r2zPxZ9XO3502d4Z2XX4x/0fFS+rKvq/gP3T82vLJ/9cufwX9e7B7X3fFa9rr/zdK3Rm93/uXxV0tPXM+Dd3nv+t6X9Br17vrg8+HMx5SPz/qmfSJ9Kv/s8LnxC/fLvf68/n4pT8Yb+BTAYEMzMwF4sxMAWioAdPgNQRmvOgsOCKI6vw4g8J+w6rw4IF4A1MJO+RnPbgZgP2y2RZAb9spP+MRggLq7DzW1yDPd3VRcVHgSIvT29781BYDUCMBnWX9/38b+/s/bYbC3AWieqjqDKoUIzwxbQpXo9mpuEfhOVOfTb3L8vgfKCDzA9/2/APBykTupIC/1AAAAOGVYSWZNTQAqAAAACAABh2kABAAAAAEAAAAaAAAAAAACoAIABAAAAAEAAACAoAMABAAAAAEAAACAAAAAAGtGJk0AACVlSURBVHgB7Z0JnBxVve9P7dXds8SwBMISDEtQAZElXERQ2YwJm2wJi48H8uF6FVDfu1wVwYcLqHj1uny4XNmEBAgkAZElIQl5kYA+ZNEgYd8CIUEy2Wamp7uWU3Xe91+T5MPHZObeSDed9z59aCY9Vd11qv7r77+cM5YxRrVH6yhgt27q9sxCgTYDWiwHbQa0GdBiCrR4+rYGtBnQYgq0ePq2BrQZ0GIKtHj6tga0GdBiCrR4+rYGtBnQYgq0ePq2BrQZ0GIKtHj6tga0GdBiCrR4+rYGtBnQYgq0ePq2BrQZ0GIKtHj6tga0GdBiCrR4+rYGtBmwCQXyPE/T9N0NS1mWGZUXL52rNDeJUrnWWjWup8moAW6E68oltVKR5n2q6oqXXpdlab/cZ65VrPL83fcmh9/D2Bo1AHI7jmNZFpwYfDT51di88ow3rm25cMS2bWW9h0f/269WCvpyyZpxB1To2qnyVNanSkqPyB2vU9eMsl3jpLa2dMMmthrIzL99or/rd+4H0vPVQTYMXgNht3h62zYq46xlu4PHTa6sRolQrJSTKMfPMpW7sZcHogvOgDIVlSvj5NxAHRFQjmdibQX+3/V0m35p/ZNseqJVR/6G+oP8cF0XcmRaO65nNqjFuzn03u8WA2e7EDm1TJqpMiIAafpUxZ13u161Wu13eGXf/Usa41S13A4/yZXfGM5vdQyAlFieQTbwfpABaIDr8J/cbZbbjo2WGMcxWR45dvjeqc8VkpAuQc/PezOvOzRK69Q4nnp01tsPXecP9HqrF3eN/Z6yR9RLHUGe+f7/vybo3UQXY2PbSDoakKoBW7n4BBdLkWqOOOutT2MkUZuqYzpQgWLkuW1XF97Z86Mv9Eb1Di/PfWXvPH6Pq++xRuxo4Z19bqQx8zbmKoN33aif0B0lwPEyBu0MepCY0sq10crV9dS4ygrxwwClRlGBO3ctGKr1G0vWTvtm35Nz0jefXfqTKa4VeUHuBp6TqmT54hUPTQUGZT6GaD2j3vsjb3UmaNDmQHfP88TyuC5H7rnnnjtnLXvhhSVa18aN22XiZz5x3nmTPM8RoAhUachISrWVzz198b6j65h55bjK06rXz7pT9Y6bBZlXySxv2dNOvkYlI1M3UjaoqQFjq0NBqc5dV1vovKWMJQT+py9f97tFf7KcJM+147lJPfeUe8BHd/v1TZdVSnVlSuvJYGEW6nkuoMVy1kOpTSnEBW0grJNZqZt5SHLdzUqp0+elXS+fu13cs6rctXff2hc6AqUHVGwJyrLcMEsiy/f2/ObN9qemeMAxowqktunlt/jIVmeCPBe0Y8uqEQtKqiuvvPHRRx+NkwIBKhXXI5QDA7X46WcvvfSHBpBu5YDRYkAWh9iAF458KEpw4RgbB9IBZOa9KVeoKy/reulfT3F6nT3+feGor19Z9rmHisktVVFO4JecqMtR5fFHlz95egjv8r6hLz/UtEMe3+oYIFbFYJAJd1XP6v7fzHykXq+7npVDMsARNHZt23PTzJ47/48vvNKXG205hKbEDdAWoyScgytDPbET11xbdCQhyrIroYoB+mvmTteP3N3x2QvysZ964z++HidKW3XLC7zET9Isj5XucPe87P7MAg0bZYI46Rvq+lt6fKtjAPJcgH4Les+csaBeh9pYldSxXNeC9rZrO8ZkpXKnsTpuvvl+ywKRSKJCKJ9LuMCASEMRwvHKfp5nrvJVmuJ6MUirn1nxy3PiD+66/fnfrX7z1PD15dg4y3NLJrIy0GlmSv7oHz6GmjAHgYKygiAsOD3UHFtyfKtjgKQZyPVkrrHs6XfMxagQhlo2iQd5rCJMxoJYA/U4zb05c3/fXzNRqpVtHHs9Nkd1hmEAZzHqBX/ikJyP9l77OmY9/dg1z66b/ZPep+6t25qw14mTXkeljmSgRpz7/XCPA5UtsNeCcWogsRrjgXmirY4ByniAT8dRjz/54sqVgA2hVckvZSZL8wwFABShB5IHspz+gWju3D/6XgmHLUK/wTOSMBB2bW7wRQQ5VahRh7aznl9cmL/5/JgfzDbVZMU1l/RpzEzamZk0VyFxh6OCg47d/qRLXDc2/EaS0FKxXfF0wcHNXX9Lj22FDOARRNmnTp1nHDfNExBhVNcAcUGoyk4TrbMUT2DsDPZMn37/hmcGmvA9mMSBoeG1ifG/pdwSUj46Y/VD15RO+XK4zyefO/vD+NeKC9SyE2MZ8RCh5Vb2uPQWS9cSFaBfxng45oB87IaAbcPUf/+/Wx0DDGZB5ev6BhbMewprTyyWpFWRcVTBNjqXZBzyH8cDOAY+sOQvr762dJXIPx8olIBc0YZ00Wboklu5V9gqb9WKFd85U3eP2f6C7yy/6qKg2uNb2jV2XMoT25QTP1PZLpfNSLp2iIOyLxIfxyiE+IHYxzA2aDTsQu/xfpBuBhexHMhYunPWwpyss3KNzlwHMIhwk/1yMPTIPjDU84D/rslUVanbb51vI7HyfVGKXPU7RtXkhsjdp1mR1+eiCH6mVUS8m/fyy6v//Imq7e1z29L0d/NWPnFTjOxbduq5ISWAXCXlcKdTvuSMn4jJD+S2+D+QrBMEc0QbGjVaxoBBOL/xMcSxWhahr6HQkqu7Zt6fGz5C2CSGPUlJFm9++G5w730Pis3CLBA6AKJIz2EoFOm0gAqL7ajM4zq5kwFh05IJXKu8/N8vzFYv/chl96r66p6ffcmpKWo86JeXJIJmy12dYz/ygfOuLnHZJo+WMQDbIp60GMguQs1bDlqeWfznt95YuhZ+cBCzj1UePLtZUji2W6uaB2Y/hvgTExTlKinUgGSQ0yj0QEyO0gRfHFKpjZswTz205sFr1KHn+x//1PNfGN9bWzvCtshrgHwH4Fzoetra+YezSLlFopPNHS1jgFicwubwfNB6kBm84ZFvuumu0N82E7ILV7D+5IWGIoPn+Gnm3nLrvTkhsDVYSsOKMSxAfmErmKaUyNs+4zqZri359iTTse1el1634pfn2yuWe6GqWSaSOoxviIEH7DHfu16F2wCVhvHlQ93Plh5vJQMgN7e7Ubp5E8fx6t5k0aNPJVqSObZj+b6LWmz8zKaPR5zsB6Wnl7y+dFkv7MqzGHMPWsqB8MSsGH6rjD8IYKzusKz6sov/oTPr2PfWF6pP373uwdssL9ZRBz4Wn6vLqcorYzD9Bx2v8sAEujGlhk1v+l1HWsaAjfZn8A0Sy5sgCB6Y/WSEEwCDuz48IOsvriARbLTZ4dlOLa46fucdd8yDzrBL6pTECBIeEx5kmWVX8pToF1D7zu3fz159xv7IAWl/37pLTiGvkVuenw5koBpfJbEZtdNe5QuvcjKpzmjlSsKoyaNlDOC5NrY+iL0otIE3t02dD/5TTqqJu7JUXhoDNTSut3JtoijNZs16iGuiRQSsYrqJpPkBQ+Soh2qseWL2qtt/UkuVPeHcVZdN7rPCzpgqZ2qX3NQi8e+6dueOP5pl5WAoyYO6Kn8fqPM+TAEBNj8gOgPzAif4BJK+ZMmS119fS7ErSQfAm0h3RgraoRY5ZA2cb5XKVAgdUPpD8x/HD2zIxLl4EXEpum8d7MucNb/6RhDHO5/7L86rz6x95c/GinpLdlxGVVKLKmOq9/qfN6ptd9G2j/oEWUKm3ipubPN336CjLWOAGGdgiZgJ7bs+PT7aVr+e+nvt1TD+AeVZMegUAcDxtZx+FIHgZTsLsVR0qCg+gqXPan4lz5PuPK/W6v03T12kySCTNeXTuSJ1l1g6tztGZMqE0TYXfGfURdcHnZVVM/9thJ05pkx12Seyy1xbB+XjLy8ddlhd2TFxHMQVjTTJ0M6/QfQHPG+AIo264n/xOgVBkVCRAKw2/1br6vDDpvTrimByyJ0HwMrcjmGU74/QCWiy7rt2RDzqAdCpDWqJz2yqB91xus4je2ySOXN+MXbXbpW5sRMR1tq5b0nyOVexW/dVaKV/OWkbq17Ds/hWt4l7I4o7lgp32Gfsr/63CjoGTKmC0nBDhHRSuQEs/xcf6O/8WJMvP/RdFfUuO00j+YiTAvfvvff3tQjBowQux+hM4AfJUaAQZr4zsH5w5UX/9pN/3n23UXRHxVHV8y0DfcnSOEkQogh5lOR33bVQCGglQRJa2se29Fsp/KBwSVPJ0nM/otf1d2B0iJiTXiZytKK0PPbKWQPBdjWSfvJlXhqeGQv4JXfS1NFCBmC9AfiSeWAQRt1+6xxllYqMszhOcm14CNfyEcd6re+cs4876bjDjjlq/+9e8TXbRMD/ei0mNWYTvaZVvDSxguP6v/3NIk3VXrIYoPgk9kwngFLEOXv7xyfW3n65XHb786ATTwFODWxCrbFfvaG20zgIUc6lvmyY3IVpVp2Jmz9axoBMcsuQAUkjf2C9/NoKXvT8IMjke8Qw4p4lkgKM5JXQmjzlWNLBZCXGH7zTttt5vuN7bnmwTQunjRsHLVHBX7W6uvDhPyHZsR3bqe8oN7L7SO/3Lrh93SP3JqhXapXtGOdaszsS2x0x8exgwhdCKstFFM188IpCP3U2jNfQWe2GcaZlDLAL3ClgEYmz3Jt//VsK7pKAxxnT/1l4JjQAQ+zY2fjxe++wY5nUG6VC7PoZZ35WCvROUKuv41eKxFIeIFOdgzGd22+bU2TlcOTKraaB6spWL+/50XlhTF8RgCet4xSME5hquON2u3/1ZmXh/jNAEZaQ9/iLvJ772qNqExfeqGHE3tyFWsgAV8hrATTjalXNeeDxelLTBhQvio91LgqAAlJ915w++VhcQo6nBvyo/HMnT/Q8IHxULpfTpO5ZJdEieoeyOjHB44+9vGxFrazWKStWFS9P1PKvHpE5upfUXOYmFCMd4Wuvrfa4/AGV91NpKWKuMtEHAAp+WgETCY6C25sjWiOPNX2CoW8W0aX+Lk0M8+f9PqrZgSBM2qMySCnARRhh033oeurIow4SYCi6IgdHjgj2/9iHYRWNC35Ah5bmIqB2Dx2Ccbr0H9feaMwIOupAPyt/+cW0dzXMJtnQCaCl4Qj/EqQ7f/kOd5ePZv4IF4REsg7IhPMgXPacmk0iGz8sdzf0/TfmTNMnGPo2Nf4TPALiu3n63IyiI/n4hN9JF5Ppp/IdpE6UefrkkyZ1OIlDHUVcI9AoD5z886dNUBrmBImdmlKoMxxn1JWXNOkfp3e3PT4m2MdJ9B9u7l1waxrXJSzISnEHOdJswHd2HH/q9p+dXKPHTtUcA94N0AoJnQG2SkKJwMeTk9NuOn2aPsFQDMAJE0jR7P3q6ytfful15FbqAJKRtshBkBbgV5KbeVY/8YSjJbmDPKIZgkyQdvvTRx3Y1e2l9SzMPFvEl/6eytqQgo0+/sSJ/3jOoeQ13bXLX/zehaXc0SYZIFEdREyIjekMd+24YhpQCn0xqkwHCmigVaNlDHAoJyKlSk2bOse2ApMnoEj8sIBT4QwSTQnM3Wv3Hffdbzt8Na0SEhVIZ47ccylUEyb8A2A0oD7lRBXd0e/02Um89wf3vPLKMwW+5PHKi04kYqjmfYGxymGg6iT8pB4/+qoZkRNkruQ6M5XQeBjblMFaM1rGAASZHrP+SM2e/TiEEYNOKZwhkMYGb0oWOk4nn/ZZoA9WfhAAaYqKiC2pY12dMmWCnadV3au1XzWrgjT4gGt+fvNXShFrW1TtZ//yTs9z5OZIclDsSqLYeLYH6v/SL+zdDwgpstGRQs3FkCelx31Df+P7zoWWMUCIasz8BU/2VU2UJABBbJLQnXYHMTNA+7ijrE464UhbpZ4Xwg+I49CzjxkhYnKtfT405oNjtq3mvufXLb/Dzu2f/uSiMdt00ktlLbzrrfm/JJIjyPNDy6eni5qwnXePP6N86kUeUYAJAsrDRdxrpAH4fSf8hglbxgB6GCwrvGXab5TtUwUkby+rwgTpFBDIqET3H3H4PtuMEJdcgB9hkURmsMGlhCkR65lnHutZdhSpLtf+7+efcOTh42Gd3//iSz8/Py3q9ETIVixl5iBwfW/UqG9fyyWUG+CT87wD1KusyKHfnDJOi0brGOC6y5ZVn3/prdSkSSo9DMi/JpIS6J9TAyiHzplnTZBOn9zDMuE9MU1CJShoZXaRojhu0iGh64YVPW73nb/xtRP5oJ3Gyy7/b6q+DruTkWnONC3QZauUGj3ixzNsr5vkK6dI6CEBjsQcoSH/70jnQ0tGyxgAFafdMksqf7hF4I6Q18bOSBuiVMfcru7SoYfuNyj7RdoaHCTiL0PSzS68GTky2HmvHUu5O/36r8QuhDT903741xeXssSL6MHPyh7BlfGqJu6+4PJt9j5A1bD7bhLW/DgWhBXTXE1CCXYPXrcFP0FizR20tDkei37R+UAkWB4V4+8M5PZdv12g0rLneAl9I7kKoJaOs1Ili9Z2O9ufdfIkF9RvCKbIDomgkGzYcK8BvwCISPVccs6ElTXldoU0upnFT/XMuCIkfMgrvjMQ2xJM9Zt0230+s9MpV/Qq3Q26xyuoMghf3oncB+JbWjeazoBiYV1h2wvqgXKQZIzM/HlPxlERClA/R+zFwdKTTmNOQpaNxqrjT/iMQH7gP7m6oQl0zAmHEeIqTevQuhe+O5GILQ2zjvpAgv0hTDb2trbe9cqpKlnX7XalkpbeusZGmWr+bUFFeWHOxdbMuHNeIpk1THFO0aPoR4HWNo1WrgrG7b3DmDGdUvOiQ7nAP0Pen0HFYtb3vvWtM4Jar7ayzkitxW2TEbVJLiWjvnO/y4oLt4uqAKm4Ia/TohNN1wCeSwIrnpx/EH46K3X29vK1Tz31siLUQgA20ITWB1LROqZEYk05a6J0tJHad7FXJCGGJA9lE6283ulXD7y4CFYCmiIW0pHjoAyZ53uc/k1n/DFxYcNoCWWt45AXatGJpt8QcZDQXfrUoKK0upHumj7j/gFKIQRcBrgo+IdBL6L4Ycvq7LAnHXc4ZSmXTDQZoqGpD9ECmplfWrT89m/5SVH/IuVsPBr/E6e00wf3U+d/38ntZ//0Jly2rPj9ELctZGTTGSBw710DMMkCoNkPPOoHFSie5rFgHrZ/kAHAl/LLUcceWPKkWoPndpz/LEatr377a1OCSMdBvWIqQR7VPV3JnJD1R1fPp7I/c+5TUy64VL9BFQDl2upG0xmAgxVfWiRweHrSO79b+OeenhoRUmYS6eZENMl+CvQkNUbHuTpt8tGojJguXHZCVo4a/QY7tQkBe269SptVLCl1qC6HGB651lpv5J7fvd6tbL92lXXFd2+kjHPbH+bausvV6za5QIsPNJ0BPB+Yp7D+vJXp7pxxt22FQnpLEFHBG3pmxU+w8mL0qB0OPGBPPjZolzhPpqDgE8c2M9b+8W7KkWtZTGG5SRbR00Y4MG7C8fqQyYRc5178U13rr/nezNue4MsZrngrGw1jQEwWjQKehEw4QQoashA00+xqsU7qSqAcWRqavvVO7f88/iKZSJPXgZu+15lkCYZI2R55eSKFMyfvh1eV/LJFoYrKrCzqYs2cFMikW0VWMPJvJD0TeX3FqoGepShNt524umxSL03UjnseWLroRtoefvbrRUuWPMf6sSByli3961PPLafImOlIyr6iUdQTBiNw3g+pYZxr6mgYAzwkj/SAAHfFbgpB7kFHOkqctCLYTxqwAPve3TMfspywFvfbNmlIoQFVYTQDLWFpAMjxhEkT3KIgyFHyQlwNDWJzDkdHCRY9CYrCbTVMYHM+8Px9pagc+FZSyqtBn5+lO7Dw99uzlbN68TNvXHfdDZpSvSYVlJDlnjHjfnpwxbdwaakuWI4tDXeFk/9/nwF0fvBQg9IvKUtSwm6cOHXtedRLMlsUYs06de01t9qaFirC2xSbn8X1EvAwjx3WJlrpwQfsO2qnkQBPGmuhPUhSioIszJP2OX7vI36t04FC7d7z3dTVTzwSEG/VfBLU6IF/4CeCqc8E23fqZORFX/pWbSAipUECVfYd8PzZsx+uD+aAREagOyEwWT15LwLSotE4YEaJ19DOwQORWubR6IclwpJAi+o7CF/bweLnl44cvXvmlS2WQNArsnEvDjpkZR2wfeo551B5kWo9ROFqSCiUKV7aoWZMWGYc2SrGpYBS8nRt8dx+E5dJ6ARq7PlTR3zyrLSyjj7Pk7/6i1U9RHDSZ8VE6Fg9jpzUueeeRz4/+VAK/oWiitOHw8VUhaq1ggcNa03ELlNSJAtGYsvNkszxpfNThEslkQ5KEI+UL88cYHlsR+q5uIYkovpI860gHqq1ELsgCJnnYn2AhfuVIIo6jGxYkpU4rdgxDACrvGTpE69dON7WnaWJR4865+eljtHYJ6T6V7cs+OmP7qSt2ivZLFNCBhw3j2k6UdbeHx5136yrip47LlvojZgjohOWzrQmIdowDWCts4d5zd1alnfVV9qlIKoFllcOnAGXcovTCRExTZbroShUyAd7Lv2QDWmoTmUedRhjgYJoWSAkhmiwhKowhgVNsYSQvhX3mS4+bNOx26XXrJpzmzdqh73+8cf1g08PaHWgQyKP//TcO7+4elpAy2Gp3F9d09XVRa05Ae6CAYx+8RW2XHln3IdGZSZivbDsO1eICG1ChSFqgQo0jAGE/yau+k4YLP3Lny8/3o/X+iwnZ0lvgAuo0AZHlTCknSFVZHt0HJHywQqjDRiiKIoCmtwoyuR0mMhB+tFhAIk5iC/u2ZggypIRXe5Abny3nK5ZnpjR/+OaXb641Hjkjsho1327ZGXe6O0qwFaae2q1vkqlUq/3cynXCShASgtXbs2c+eBl3z6HeLtYNsldoXWUmos3LaB/A7ujBUdQi/XWPPvYim8cHiY6onBYYlsxJNrBBxqgI844ZycC6lOKMpbnsSySbI/j4hNkNalEDIV5pi/flEpiE2SBhmzeJEBRU8hXeWJYb+Tvcsb37XMvKRvWY0RBXmblOjiJgiZ46Vvfu2HqzCdlwUuUlDvI+oMMWGrvVGs9QdD1ASd++A/TQsQC6MUSWLyBOIrC67SCAY3jfBZr2Viy3sWWGgP06Shyv3jeNKHIzkKXAd+TTWiMo21PRewISaKf5lyqgcZEJontPIK4FMmF1LJdW6JjXtSJMQ4EAZCYbA/hrmeckVO+4p77T+QoAKiS3Jc9BTQ+ltgAS3PyyUd2sbyYPjqOprLqlRqPTqMAIdBpTxTOmfd7h1XHYvakB1rgW+uypI1jgOPT4EdvZpyy0t9FGah1kUagh1ZkMFfVaorFhQeSLoA9vks6jv0CIHdCupIGHV9VAmqN0tq86auMx/Yj23e2m3Ru93nfCLXQn9I9l8J2yRVdWdQHvP3w3mN33W07LFsQ4LQFXGFvGNwGqBQlmz79t1Ji4NGL/EezVwDIvQ09GseAIqBiNyma9q1yN4aCZwRqx6n2QyyQFNZlv08OFbl/9AEHLSGb7XcGAXvOsJCaTXExNpt9xXkQWN3qoOO2v/inYTIycSkCSPObIMkCG8kzoj4YQVed9LlPE5jHdTbZQntYACBZOJgBpMLeLVny1tI3e7MsYsOIJNHEaPK1Fo2GwVBMCfUtAGW+Zm20aDqthMpHzd0Sy0xk0LhJOwiQJPV9FiSx9IV9gYiDSFAgBHaNPbFIPoP9B3dy2IQcmamVrC5/4tkOSoU20IVChBalOfv34QAw4kTh4Cubte569Spz5LFfzlJqZSz9kMQ3MbncBHN5FuBs8umH/q/LzioQkOiEKNMw6wA3uZkGHmgYAzJJs2A5WLmOYWD3zZB6uMfuF1mNHa54OxhPieIPDjoSJAEH4SjK80bOi/Vn14fNDVZ7EVtXoBUdK06dtdcBYs0CC+JkaeWywUqQOTMx4UWeB+ecf9XTi9/CjWQuQRh7QNDdjno5wABb+93d9ScenwrUlYlJAspGdQ0DhJu7/SGPNWxWcl6y0BNfCSGdEoVc/CthwXOry7Nnz3PItcmuwKINfAqwkyHwuYn6ez5z5EH77zsG4w0U3MidTe/Xz1zZq5acs699OnmcNGIVJd5a+ul4oX4wx2Mi6Tc02VlnT3r04Ssdv1tAJjDTpukxkehCpD2r1vMH5y0+7pj9hekU0lpEfR6zYQyQpehINDRClk2xry8a7qp//cG1ix5+lP1taSoUlJlltHMSG9Us2rGcwO77+MF78iXMAOpTND9zoc0NwThevcxuSugTcCcLrbxOVzPQVihMuDb4LXBX5HnlIz653+idt1nxNl0nSDfrnKT+bNnYIFc8sfFuvOHuCZ/en7hQ7rh1YxiZ28Kbyj2sMjvtkC4WiCHUjFcn6x753UL8oJTFwIwcQ1wllmIfONdPzf57jzv8kP3IXwBF4AH1SpzF5l+Gxl3VCVSVDbXJXbCZm+dj9bA7Yr6gI7IsBgrq8y/J2EkTj5E8hPRcsIZAtpEQRQEhW2kUp0//5bW3367SH8+HaYpp1WgYAwjmaQ1XUeYPkpunUvldtz2Z6tByyrU4kSWpYodcZDGlQdCXnWlO+9wEmlFII6E6RFlwRxi32RdHRcbZtrwin+DGictoES0+zdrKwS6fjV8mZDv1tPEomcsWpMXuQcTV6ABDx5Tj8BsdU2c8kJCwM2yK0Cr6D2d1t/SeMDC0ecq2prhLlMCY0qyZ90o9S/ZX8gA/XFEAkdhhiOlWOp0Jn/24+AxqCcXAfzZq4G/H7rbzXuN2RPCz1PjoleSf2XlCNkWGgeT+7rt/PrlaeIZ7aNS8W3qdxj0xOV56zPMY+yrNr0Y/99xf33ijZ/CG4AE7oYA+RQJFaKXmdcQR+3R2wBPsCVk60hLsWdDIJlnmOfmUT0NeKqDss456pQnbUZKOlYxtbqdrVtcXLXwJqMqyzC0lXKM+30AGkHFE+vF1WAPBNHew8IjWV9p6wPaCQ8QcwwkJAhhJdNaZx0GXQQzK87A4iyipUQ8G4OLZjj/h0ExXfZslGtgfoBBIjfQ3t8Nc6EQZV1xEEQ2kw5Y9QcMmJu9ZmGOhIN60dyC7/76H5dhgHgD3Kj5QtiGDH6VSacwuH6D4zjJ4Pl8AJLlv7IL804jBdACBrg77mGMPEVyE6Be9L2T9ijU4shqBzRgXL35p2fK1sg97i0bDGACkBGOKbRdM4tzzm4VsNI8yQHS6FpB4WUudpgggA3942qlHrY95QSYSiAoBiB4aRgeWx4sSmMlTJvgebepkYan+kxYkuS1iQZ7OCz1yrXfPeogdyxo27xZeqGEMKGJgoH6hAbmaMX0eyJ7tfmEAt4TU8xPSI5iyF7TrnnTiYZJDE+sPV4rdunEMDfTCSEGhkuPH77XNyErJHyHBMi0R7CDhBXgrugKYmtfdsx4ulgduIeUa9PGGMQCxJ7AtAGT+6qtvvv56D6Sn1IesDd4qSgDdB38eeOCB229PfhNrRT6e6JmPcQFY1bj7GZxVtjuJTzxpYhzJzRQ+Bl2UmIB8NStkHM965+3q4398qUH03OLLNO6BoWBG3M9yuuyWW+ZLoJrpwLLY+ySkB8KuOxTCshpxUMmMOOuMj7En0vq0p+oAxcOl9YXyLX6Eob9gV+lGotnujCmfCAI2eg11nrA1MTeJHJicBFGJaoUpu9fetICtQqk64L3o10MQKEPoDHlqeoTWMAZgvUmFYoNS7c15cAHbjvlhkMomzF6tptnOqlAFwtm83Fn91KcOHppsDTojiifrOGhLGT16m49+dHc0kowIO5KBS9mLg4ZU6qOezd5Y5onHnlrdIyExmFWgAMCIMjaYrfmZ6oYxAJGRbTlVcP99T1ZrVAbtWoy4s96cLThC3+tGvhy77Pvlo47en7xDg8g89GVggGxDv74r8tTJR5P/oBDGxpUEZbQh8ZNV4Lw6KqTw9B3TFxb2j6BhfX4M3m38g2VDT/NezzSMAYg/KR30YNq0+2wnpHJItTwIQ8urU6dk/YpL3xqF4oHq5z9/YolPN33I+iQsSsZy2Dw99jOHlH0En5y09K/T4Cj9R3bIm3okubmZMxdheVL+K0bRESyJi2bfZsMYwIOivC+90vP8i6/xmLRdkuSJo1pOgp6UO5hQs8uS2vtDO4/baxRP3OwHw6XLom5adqVjxfBXG44+5pCADYSgKv1iKAMVHDJFPkiUrsf4nZW9f3hsCR13UqMHsBVRS4HgmnunDWMAifi/vqN/de0MNm+m5zL0KzT/y6ZXaWjnnWwo4MofBzSTJ5+Ag9v4xxaa93DFShDxpYUV8lj4esaZE1xKoPRJ0iuAS2JnUPZLlL/e5pLCYvXA9TdMG8zoFcvxuTXpB2j2aJgpQOoXLnji8T8+HbLTPN5Yp53dYVwD/TlhubMerWFbh3KgJk36uKzIE7o099FofGMCWRJIbhyP5Pr77Tt63N47vfI6fxoVTytBCT8H3/PTlJJnn3ltxdt9O+/QVRStAcXkbCUB29TRMAY4dv9Ou2533vmTyyPCesTOGz5/gEXKhKA+NlRyqirvqJSD7i4eHn9Nh0LTWwGxirK1QcYmUAEJWnYpvujiL7657BWiQmJyQA4D0sMiAFJmlQf6BqhcwjAkBPskC6iaSvvi4jJ382dpzzAkBRrmA4acoX1iWAq0GTAseZp/ss2A5tN42BnaDBiWPM0/2WZA82k87AxtBgxLnuafbDOg+TQedoY2A4YlT/NPthnQfBoPO0ObAcOSp/kn2wxoPo2HnaHNgGHJ0/yTbQY0n8bDztBmwLDkaf7JNgOaT+NhZ2gzYFjyNP9kmwHNp/GwM7QZMCx5mn+yzYDm03jYGdoMGJY8zT/ZZkDzaTzsDG0GDEue5p9sM6D5NB52hv8L0ZFXSMPBIIQAAAAASUVORK5CYII="}))))},peraWallet:function(e){return C.createElement("svg",h({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor"},e),d||(d=C.createElement("g",{fill:"#000"},C.createElement("path",{d:"M240.7 73.1c-.9.5-2.6 2.7-3.6 4.7-8.6 16.9-2.8 62 11.8 90.9 23.1 46 43.3 15.8 28.9-43.2-8.6-35.6-25.4-59.2-37.1-52.4zM373.4 144c-16 2.3-31.5 11-45 25.2-21.4 22.5-27.6 52.5-14.8 71.5 11.4 16.8 35.7 20 59.9 7.8 21.3-10.6 37.5-30 43.6-52 2.9-10.9 2.4-23.5-1.3-31.7-5.3-11.6-14.8-18.6-27.9-20.7-7-1.2-7.1-1.2-14.5-.1zM106.5 165.6C96.2 167.2 90 171.5 90 177c0 6.5 10.2 16.3 24.7 23.7 46 23.8 106.8 23.5 90.6-.5-11-16.1-53-33.1-85.8-34.6-5.5-.2-11.3-.2-13 0zM171.9 274.4c-14.6 6-27.9 15.5-43.4 31.1-37.5 37.7-37.6 68.8-.1 50.1 33.4-16.8 70.2-61.3 64.6-78.2-.7-1.9-2-3.9-3-4.4-3.3-1.8-12.2-1.1-18.1 1.4zM312.8 291.1c-20.8 3-20.9 14.7-.2 28.5 20.2 13.5 52.5 23.7 78.9 25.1 19.9 1 29.7-2.4 30.3-10.2.2-3.1-.3-4.9-2.5-7.8-11.5-15.4-52.5-32.1-87.2-35.6-11.4-1.2-11.2-1.2-19.3 0zM238 314.3c-6.9 3.5-9.6 14.1-8.7 35.1 1.3 29.8 11.9 64 25.5 81.9 4.4 5.8 8.8 8.7 13.1 8.7 13.9 0 15.7-38.2 3.7-79-6.8-23.1-18.3-42.9-27.3-46.6-3.9-1.7-3.2-1.7-6.3-.1z"}))))},decash:function(e){return C.createElement("svg",s({viewBox:"0 0 21 21",xmlns:"http://www.w3.org/2000/svg"},e),l||(l=C.createElement("path",{d:"M10.5.84c5.323 0 9.66 4.337 9.66 9.66s-4.337 9.66-9.66 9.66c-5.324 0-9.66-4.337-9.66-9.66C.84 5.176 5.177.84 10.5.84Zm0-.84C4.704 0 0 4.704 0 10.5S4.704 21 10.5 21 21 16.296 21 10.5 16.296 0 10.5 0Z",fill:"#263E8A"})),a||(a=C.createElement("path",{d:"m16.034 13.86-1.796-3.675a.232.232 0 0 0-.42 0l-.598 1.229a.514.514 0 0 0 0 .43l1.133 2.31c.063.116-.031.262-.157.262h-3.307l3.633-7.413a.308.308 0 0 0-.137-.409.308.308 0 0 0-.41.136l-.703 1.439-2.005-4.095a.83.83 0 0 0-1.491 0l-4.81 9.786a.83.83 0 0 0 .746 1.197h3.045a.316.316 0 0 0 .315-.315.316.316 0 0 0-.315-.315H5.67c-.136 0-.22-.136-.157-.262L9.764 5.47c.063-.137.252-.137.325 0l2.248 4.588-3.171 6.458a.308.308 0 0 0 .136.409.323.323 0 0 0 .137.032c.115 0 .22-.063.273-.168l.85-1.733h4.725c.62 0 1.018-.64.745-1.197Z",fill:"#263E8A"})))},myAlgoWallet:function(e){return C.createElement("svg",u({viewBox:"0 0 22 22",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},e),c||(c=C.createElement("path",{fill:"url(#my-algo-wallet_svg__a)",d:"M0 0h22v22H0z"})),A||(A=C.createElement("defs",null,C.createElement("pattern",{id:"my-algo-wallet_svg__a",patternContentUnits:"objectBoundingBox",width:1,height:1},C.createElement("use",{xlinkHref:"#my-algo-wallet_svg__b",transform:"scale(.00333)"})),C.createElement("image",{id:"my-algo-wallet_svg__b",width:300,height:300,xlinkHref:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAIAAAD2HxkiAAAMbGlDQ1BJQ0MgUHJvZmlsZQAASImVVwdYU8kWnluSkJDQAhGQEnoTRHqREkILQUCqYCMkgYQSY0JQsWFZVHDtIoIVXRVRdHUFZFERe1kUe18sqCjroi6KovImJKDrvvK9k2/u/Dlz5j/lztx7BwDtXp5UmovqAJAnyZfFR4Qwx6WmMUlPAQp/moAAvHl8uZQVFxcNoAz2f5d3NwCi7K86K7n+Of5fRU8glPMBQCZAnCGQ8/MgbgYA38CXyvIBICr1VtPypUpcBLG+DAYI8RolzlLhXUqcocJNAzaJ8WyILwOgQeXxZFkAaN2DemYBPwvyaH2C2FUiEEsA0B4BcSBfxBNArIx9RF7eFCUuh9ge2kshhvEAn4xvOLP+xp8xxM/jZQ1hVV4DohEqlktzeTP+z9L8b8nLVQz6sIWNKpJFxivzhzW8lTOFq8RUiLskGTGxylpD3CsWqOoOAEoRKSKTVPaoCV/OhvUDDIhdBbxQLsQmEIdLcmOi1fqMTHE4B2K4WtDp4nxOIsSGEC8WysMS1DZbZFPi1b7QukwZm6XWn+XJBvwqfT1Q5CSx1PxvREKOmh/TKhQlpkBMgdi6QJwcA7EWxC7ynASu2mZ0oYgdM2gjU8Qr47eGOF4oiQhR8WMFmbLweLV9SZ58MF9si0jMiVHjA/mixEhVfbCTfN5A/DAX7LJQwkoa5BHKx0UP5iIQhoapcseeCyVJCWqeXml+SLxqLk6R5sap7XFLYW6EUm8JsYe8IEE9F0/Oh4tTxY9nSvPjElVx4oXZvKg4VTz4ChAN2CAUMIECtgwwBWQDcWtXfRf8pxoJBzwgA1lACJzVmsEZKQMjEnhNAIXgD4iEQD40L2RgVAgKoP7zkFZ1dQaZA6MFAzNywFOI8wAX5ML/ioFZkiFvyeAJ1Ij/4Z0HGx/Gmwubcvzf6we1XzUsqIlWaxSDHpnag5bEMGIoMZIYTnTAjfFA3B+Phtdg2NxwH9x3MI+v9oSnhDbCI8J1Qjvh9mTxfNl3UY4B7ZA/XF2LjG9rgdtCTk88BA+A7JAZZ+DGwBn3gH5YeBD07Am1bHXcyqowv+P+Wwbf3A21HdmVjJKHkYPJ9t/P1HLU8hxiUdb62/qoYs0Yqjd7aOR7/+xvqi+APfd7S2wxdhA7gx3HzmFNWD1gYsewBuwidkSJh1bXk4HVNegtfiCeHMgj/oc/ntqnspJy1xrXTtdPqrF84fR85cZjT5HOkImzRPlMFnw7CJkcCd9lBNPN1c0NAOW7RvX4essYeIcgjPNfdQssAAiY0d/f3/RVx4XP3INH4Pa/81Vn1wEfE+cBOLuOr5AVqHS48kKATwltuNOMgBmwAvYwHzfgBfxBMAgDUSAWJIJUMAlWWQTXuQxMA7PAPFAMSsEKsBZUgM1gG9gF9oIDoB40gePgNLgALoPr4C5cPR3gJegG70AfgiAkhIbQESPEHLFBnBA3xAcJRMKQaCQeSUXSkSxEgiiQWcgCpBRZhVQgW5Fq5GfkMHIcOYe0IbeRh0gn8gb5iGIoFdVHTVFbdCTqg7JQLpqITkSz0KloIboQXYaWo1XoHrQOPY5eQK+j7ehLtAcDmCbGwCwwZ8wHY2OxWBqWicmwOVgJVoZVYbVYI7zPV7F2rAv7gBNxOs7EneEKjsSTcD4+FZ+DL8Ur8F14HX4Sv4o/xLvxLwQawYTgRPAjcAjjCFmEaYRiQhlhB+EQ4RTcSx2Ed0QikUG0I3rDvZhKzCbOJC4lbiTuIzYT24iPiT0kEsmI5EQKIMWSeKR8UjFpPWkP6RjpCqmD1KuhqWGu4aYRrpGmIdGYr1GmsVvjqMYVjWcafWQdsg3ZjxxLFpBnkJeTt5MbyZfIHeQ+ii7FjhJASaRkU+ZRyim1lFOUe5S3mpqalpq+mmM1xZpFmuWa+zXPaj7U/EDVozpS2dQJVAV1GXUntZl6m/qWRqPZ0oJpabR82jJaNe0E7QGtV4uu5aLF0RJozdWq1KrTuqL1SpusbaPN0p6kXahdpn1Q+5J2lw5Zx1aHrcPTmaNTqXNY56ZOjy5dd5RurG6e7lLd3brndJ/rkfRs9cL0BHoL9bbpndB7TMfoVnQ2nU9fQN9OP0Xv0Cfq2+lz9LP1S/X36rfqdxvoGXgYJBtMN6g0OGLQzsAYtgwOI5exnHGAcYPxcZjpMNYw4bAlw2qHXRn23nC4YbCh0LDEcJ/hdcOPRkyjMKMco5VG9Ub3jXFjR+OxxtOMNxmfMu4arj/cfzh/eMnwA8PvmKAmjibxJjNNtplcNOkxNTONMJWarjc9YdplxjALNss2W2N21KzTnG4eaC42X2N+zPwF04DJYuYyy5knmd0WJhaRFgqLrRatFn2WdpZJlvMt91net6JY+VhlWq2xarHqtja3HmM9y7rG+o4N2cbHRmSzzuaMzXtbO9sU20W29bbP7QztOHaFdjV29+xp9kH2U+2r7K85EB18HHIcNjpcdkQdPR1FjpWOl5xQJy8nsdNGp7YRhBG+IyQjqkbcdKY6s5wLnGucH7owXKJd5rvUu7waaT0ybeTKkWdGfnH1dM113e56d5TeqKhR80c1jnrj5ujGd6t0u+ZOcw93n+ve4P7aw8lD6LHJ45Yn3XOM5yLPFs/PXt5eMq9ar05va+907w3eN330feJ8lvqc9SX4hvjO9W3y/eDn5Zfvd8DvT39n/xz/3f7PR9uNFo7ePvpxgGUAL2BrQHsgMzA9cEtge5BFEC+oKuhRsFWwIHhH8DOWAyubtYf1KsQ1RBZyKOQ92489m90cioVGhJaEtobphSWFVYQ9CLcMzwqvCe+O8IyYGdEcSYjkRq6MvMkx5fA51ZzuKO+o2VEnuVRuAreC+yjaMVoW3TgGHRM1ZvWYezE2MZKY+lgQy4ldHXs/zi5uatyvY4lj48ZWjn0aPyp+VvyZBHrC5ITdCe8SQxKXJ95Nsk9SJLUkaydPSK5Ofp8SmrIqpX3cyHGzx11INU4VpzakkdKS03ak9YwPG792fMcEzwnFE25MtJs4feK5ScaTcicdmaw9mTf5YDohPSV9d/onXiyviteTwcnYkNHNZ/PX8V8KggVrBJ3CAOEq4bPMgMxVmc+zArJWZ3WKgkRloi4xW1whfp0dmb05+31ObM7OnP7clNx9eRp56XmHJXqSHMnJKWZTpk9pkzpJi6XtU/2mrp3aLePKdsgR+UR5Q74+/Ki/qLBX/KB4WBBYUFnQOy152sHputMl0y/OcJyxZMazwvDCn2biM/kzW2ZZzJo36+Fs1uytc5A5GXNa5lrNXTi3oyiiaNc8yryceb/Nd52/av5fC1IWNC40XVi08PEPET/UFGsVy4pvLvJftHkxvli8uHWJ+5L1S76UCErOl7qWlpV+Wspfev7HUT+W/9i/LHNZ63Kv5ZtWEFdIVtxYGbRy1yrdVYWrHq8es7puDXNNyZq/1k5ee67Mo2zzOso6xbr28ujyhvXW61es/1QhqrheGVK5b4PJhiUb3m8UbLyyKXhT7WbTzaWbP24Rb7m1NWJrXZVtVdk24raCbU+3J28/85PPT9U7jHeU7vi8U7KzfVf8rpPV3tXVu012L69BaxQ1nXsm7Lm8N3RvQ61z7dZ9jH2l+8F+xf4XP6f/fOMA90DLQZ+Dtb/Y/LLhEP1QSR1SN6Ouu15U396Q2tB2OOpwS6N/46FfXX7d2WTRVHnE4Mjyo5SjC4/2Hys81tMsbe46nnX8ccvklrsnxp24dnLsydZT3FNnT4efPnGGdebY2YCzTef8zh0+73O+/oLXhbqLnhcP/eb526FWr9a6S96XGi77Xm5sG9129ErQleNXQ6+evsa5duF6zPW2G0k3bt2ccLP9luDW89u5t1/fKbjTd7foHuFeyX2d+2UPTB5U/e7w+752r/YjD0MfXnyU8OjuY/7jl0/kTz51LHxKe1r2zPxZ9XO3502d4Z2XX4x/0fFS+rKvq/gP3T82vLJ/9cufwX9e7B7X3fFa9rr/zdK3Rm93/uXxV0tPXM+Dd3nv+t6X9Br17vrg8+HMx5SPz/qmfSJ9Kv/s8LnxC/fLvf68/n4pT8Yb+BTAYEMzMwF4sxMAWioAdPgNQRmvOgsOCKI6vw4g8J+w6rw4IF4A1MJO+RnPbgZgP2y2RZAb9spP+MRggLq7DzW1yDPd3VRcVHgSIvT29781BYDUCMBnWX9/38b+/s/bYbC3AWieqjqDKoUIzwxbQpXo9mpuEfhOVOfTb3L8vgfKCDzA9/2/APBykTupIC/1AAAAOGVYSWZNTQAqAAAACAABh2kABAAAAAEAAAAaAAAAAAACoAIABAAAAAEAAAEsoAMABAAAAAEAAAEsAAAAAPuooN0AAEAASURBVHgB7Z0HfJzFmf9Vd1e9Wpas4iK54W4MNsXY9Ho0AwYuBwRILgkkgdiQS/6Xz+U+10IxBAgXQjAQLgUwNWBMCwZTbGMwGBvcmyRLsnqXVlv0/64W5I129933nX333XdXo/hD3n3feWeeeWZ+78w8NXFwcDBB/kkOSA5EjwNJ0Wtatiw5IDng4YAEoZwHkgNR5oAEYZQHQDYvOSBBKOeA5ECUOSBBGOUBkM1LDkgQyjkgORBlDkgQRnkAZPOSAxKEcg5IDkSZAylRbl82H4QD/QNu/nX1urr7nT397t5+Lly9dm66+vmvY9DpdDtcg06Xx9YiJTkxNTkxJSXJlpposybZLMnp1qRMW3K6LTnDlpSZlpKVlmyzcF9+c4OwO6q3JQijyv6EBJDW2D7Q2O6oaeyvax2oa7Y3tA40dTg6epygzj7gtjvcA/xzekyb+J/nv56Lob+hO1wlDv1v6CIhkR9Dv/mvJSXRkppkTfXAL8OWnJORMiYntTjfUlpoLcm3lBfZinJTi3ItEpxedkbrv4nSbM1I1rvcg/UtA/vq+nbX9B5s6DvUAPDsLR2Orj4XYHO6EpISE5KSEpKTEvmXxD8vohIBlAda6v88KB3CKuMLaN38cw/SOv/cbs/PlOQEwJmVllKYk1KSb51QbJtYnDatIr2yJK2kwELr6tuSJcPkgARhmAwM/Xp7t3Pvkb4dh7q37u3eU9tb22Rv63awsjHN2UZ6/4G3oeUrdG16lQClHnC6PRta7z/usHLmZaaWjbFOLU+fV5U5a0JmVWlabqbcLunF9cD1SBAG5kuYd1s6HV8e6vl0b9ene7oAXkPbAMc5VhdLSlJqimeV07SshUmM+teBJUslHwiH082CmW5LKs63Ti1Lmz856/gpWTMnZORnpaqvTZZUyQEJQpWMCl2Mufvloe5NOzs37+zcfrCnvtU+4BhkobOmekQmsbi/Y9eK+MeOEMg1SC+KC6yzJmQsOi570fScGeMz+JqEZoosoYIDEoQqmKRYpLnD8fHuzg1ftH+8q3N/fV9Pnzs5ORFRB+JKcy53ir0J+pBFEmEsslmXKyEjLblyXNrCaVmnzco9YWp2YY5cHoPyTc0DCUI1XApQBhnmhu3tf/usbcvuziPNdpc7AeAh6ojFFS9A9xRvsUIiRkKum5yUgKAVHJ45L++02bnFeRbF9+TDwByQIAzMl2B3u/tcH+zoWLu5ecMXHXUtdta6NGsyG7PRuTNDluNwDvbZXayT4wqsS2bnXLCocPHMHNQhwRgo7/tzQILQnycB7jDbWPFe29zy9qdtKBiQXjDP5KHIl1OgsaffxVa8alza2cfnXXBiASukbwF5HYwDEoTBOPP1/ca2gVc3t7zwftO2A919dneaNclqGQ1bzhBsCfaYJZGdKoxCsjpnUuayxUUXLMzHHiBYeXkfDkgQBp0GSDifeffo2s0tNY12S2oi204JvqDM8nvAuZFtKvLhiiLrBQsLli8dO2tihl8pecPDAQnCAPPgnc/a/vTO0fWft3X0uDLTklDuBSgkb6njwIDT3d3nzslIPmNu3j+eOfb0uXnq3htFpSQIjw02R5q1m1r+9E7Dx7u6OPVlpiXLte8Yd8K7gp/ItNCaclD81pljL1xUiIl5eFXGz9sShJ6xxFnh6XePPvVWw67qXiYKQpdRKu6M8MTmxMiXDtX/9Ir0684pvnrpWL50EW4zBqof7SDk8/znd47+4c2GXTU9aZZk5C4xMGixTyKSm74B1/SKjOvPKb72jLGjXKUxekGISJ3V79FX676q7kHokiZ97QzHdt8AclTXjAkZ372wdPmSolGr8hmlIHxlY/NDL9fi1mBLTZKrn+Ho+7sGe+24cQ0ePznrh5eWXrSo8O+ejY4fow6EW/Z03v9c7d+2tqJWHuW7IFPN8J4+F3Y3Z87P/8my8gVTskxFW6SJGUUgrG8d+PXzNX9ZfxSjx+z00WppFukJFUb9iG06e52cC645Y+xtl5cTASCMymLp1VEBQhTHT7xR/5uXaqsb+wnxkJKUiBma/DMhBzDBdboHCe0xvsh266Vl3z63ZDSIqeMfhHjW/ucfD23Y3kHII06AEn4mxN4IkoBiv8ONMmPJ7LxffGv8vKo4353GMwhRP9z/fM1j6+q8+88RIy1/mp8Dnt2pNfk755fctqw8jg/wcQtCvGz/7amD2/Z3s//Ev1YugOaHnD+FLIl4ErM7ZTH89+snnDoz179MHNyJQxASzeWupw8/tq6eKEbE25Twi4NpyqYGafbN55f8dPn4+FMpxRsICaz088cP4PtHjDApgIkD+Hm74BXYELcO09P/vmkSSsW46RodiSsQ/ubl2lVrajCJyk6XC2A8zdJjfcHKl5Vw5VUVt1xceuxujF/FCQgPH+3/2er9b2xpzcpIscgTYIxPSgXyWRKJatfV6zz/xAKWxIoim0LhWHkUDyB8ZVPzz1cfIPKSDFMbK9MufDrZmhIp/H9uqrxwYUH4tUW3hpgH4f/85fCDL9Zyasc/DZML+TdKOIASv7ffjZsitjU/vboipnsdwyA82jaw4pF9r33cImUwMT0FhYkfltZctLBg1feqxsRsJJtYBSHyzx89vHdvbV9elsyUIDyN4+TFti4HyTMe+MGUBVNjUmoakyDEDfdfHz+AN1oWUlC5BY0TKIl3g62pV2r6XzdOuub0seIVRenN2APhf/3p0AMv1mJrT+hBicAoTRvTNQsOyeXId/m2y8t+fu0E09GnSFAsgRCL3p/8dt+zGxrzM2MzwYriSMiH4XMAOQ1S06uWFN33/ckxFEgqZkDY1O74zv27sAjNz07lRC7/JAcCcoDTSWunY+mcvEdvnxormWpiA4To4r99z84vDvTkZ6XIM2DAySdv+nKgrcs5tzLziTumlxdZfe+b8zoGQPjl4R4QSGZpVBHyEGjOaWQ2qjgisi+dVGIDh8R0Mxt5I+gxOwg37+q86d5dzZ0OjzmoXARHjJ78GZwD4LCzx1WUl/r4ymkLppg6NY2pQcgJ8Ob7duHGQohYicDg800+CcwBcMjkQY/1+Irpp8zMCVzIBHfNC0JSQdy8ajdhDghLIRFogqkSkySAw55+Nwqtx1ZMRVpjzj6YFISkZLlp1S7i85JhSyLQnFMnVqgCh1iZkldr9Ypp5kxHY8ao7+8N7UIlAmNllpucTj7ifMpJ0sZnnQOOCak1HQg/+rIDSQw+Y3INNOF0iVGSfHG48asOs/XCXCAkOMW3792F8ZH0SzLbRIl1erw4JP7Qjffu+mxvl6m6YyIQfnW45/q7d+I0LSUxppoicUMMOGRqEbvt+nt27qzuMU+/zAJCdPHX3bUTfaDURphncsQfJeCQCdbY7mCyYYZlkg6aAoStXY4bV+0kRr3UyJtkWsQxGeCQaQYCkdO0dTvN0NPogxAZzPcf2EOUXmmVZoYJMRpoAIdMts/2dd3y4G6E8FHvcvRB+NPf73vr09b8rFRYI/8kB4zhAJONKbduSytB+oxpUaGVKIOQXBGkqsY7SYFE+UhyIEIcKMhKffz1egKFRah+ldVGE4Qvfdj0q6cPszGQ/oEqR0sW05cDGNPkZqT8158Pv/xRs741a6otaiD84kD3yt/tt6YmEaxeE8WysOSAjhxISU60piau/N2+7Qe7daxWU1XRAWFrl/MHD+4hXIWNODGa6JWFJQd05QDTj0mIswUTEim9rnWrrSwKIKTbt/92787qXhkrTe0oyXKR5ABCGqbiV4d7f/LIvki2E7TuKICQxPGvbGz2BKqQi2DQcZEPDOXAkLA05a8fNT/wQo2hDQ81ZjQI129ru+fZ6pxMGbHX+LGWLYbgAPlk73q2GieeEOX0fmwoCMnZQszCxMTEVCmM0XsgZX3hc4CMzokJiWxKybAQfm3qazAUhHc8uq+mye6xz1ZPoCwpOWAUB5iWTE4s2u581FANvnEgfOil2rWbW/JkxDSjppRsR4ADHA6ZoiTb++1fjwi8LvaKQSDcsrvr7meq2XOLUSnfkhwwkgPZGSmYkWw1yu3QCBCihGEj6nQNsuc2kpWyLckBMQ6Q7Bm/ghW/24cqW6wGTW8ZAcL//vOhbQe6swhbqIk0WVhyIEocYKIyXfHswaLNABIiDkIEvk+80UAKF4lAA4ZTNqEXB5iuWDU/8Xq9AbGhIgtCNqK/eOIAct8kqZPQa3bIeoziQHIS2rSEXzx5oDvCm9LIgnDVmuodh3oybclG8U22IzmgJweYutsP9ty3JrJmNBEE4ad7ux5bV4+riNyI6jkvZF0GcoCpi0j/sdfqtu6LYIC2SIGQqAH/9uQB/ouriIFMk01JDujMAUT6SEp/+YdDiPd1rvqb6iIFwifeqP/oq06Pn8Q3Lcn/lxyIRQ4wgZnGH+xo/8Ob9RGiPyIgrG8dIGQAseUiRLSsVnLAYA4wmR94obYhMjalEQHhPc8eBof4ShrMKdmc5ECEOGBLTTrSYr93TXUk6tcfJ5/s6Xrm3aacDJlRMBLjJeuMDge8Eppn1jd+tk//KBj6g/DeZ6udTjc6luhwS7YqORAZDjCl7Q433rC6V68zCN/Y0vrO521Z6dJQW/eRkhVGnwPZ6Slvb21985NWfUnREy3IcO9/ocZrZ6AvlTFdG1YXXb2uAadbSy8S2c+j3TFDBBAyqLjcGoTcTAC8EOJyI8RQ0rv7nq85Y16ejro3PUH4/PtNuCwRPEbLbIv/sp29rktPLlw4PVt9V/mc4c9GpgQdR1p968Ml+QSQrvwH/1A6vtg2fDPkRVO749G1daCWKRt/f4hJP9ndxVRfvrRIr97pBhgyv/3m5VqSg+tFWXzUQ67FiiLrfd+bTM5TTT3a9FXnq5uaWVI0vaVjYRDU0eskv/Qvr5+otdpXN7UcbOiLV/G41ZL0v3+tvfikwjSrtjENxkZ9aqH2p9cf/fJQj15kBSM35u732V23XV6uFYF088Rp2S5NG1i9WcMWlNDMP11eIVDxvKrM/oGoUi9AtOpXyGC742DP0+8eVf1GiIL6gBDfx9Xr6tKlofbfc7urz3XScTli+5YTp2UBXS1nsb9vO7xfLIPtPa6rlhTNn5wlUBO91nCIFGgg2q+k2ZJXr6vvtevj8qsPCJ99r3FnTa/ci/rODa9M5c7lFRzlfe+rvJ5WnlFRZHM4orOeYC1ZlJt6+7JyldSOKHbScdnkWnFFzNhyRHPG/2Sqk+t3zXuNujStAwjZeOD7mG6RRmrHRsRzoOpxXrSw4LRZucfuarliYz9nUiZyES0v6Va2s9f53QvHlY2xitU4fqztuPHp0SJejGatb9ksyXiroznU+qJ/eR1A+NeNzYQQl6dBX+Y6XINY/d5xVYXvTa3XCFSjsh3tG3BNLU//zgXjtBLsW/7UWTl2RzzvST0nw0M9aze1+PZa7DpcEHJ8f/LNBkuqyI5LjGLzvwUvOnuc/3RWMVM5HGoXTM0isbNbh0+tNir67W42omHa3586MzfNYgo9p7bOaylNPCi8hcL/UIYLwne3tX+6p0uKZHzHjm1YeZHt1kvLfG8KXE8pTZ9YnKbLhkd96wiTTp6Ru2zxGPWvBCw5e2LmBMOJD0hJ5G4y7T/e3bVhW1uYTYQLwv97q2FwcFCug77D0NPnuuWS0jE54aYfRlM/tzLTSBDyUWcohYVJvkzgeHLClKw4VlTQWawRmPxPvdXg23GB67BA+NXhHlbCMPctAkSb+RW0NXOrsq47u1gXIhEz6lKPmkq8u+iLTy48dWaOmvIhy5w2O9eD6bj+Y/Kv39aOpDScXoYFwr+sP8ruRUwEHw7Rpn0XQQQimZVXlqPm1oVI1HREZddkuincLpRnZyBMElRL+LeLYIntQOSiQvi3aPwdJj9miX9+JyzFvfhcaetyIBqSy+DwwHtXkrPn559/YsHwzTAvJoy1VZUacSyEeHQq159dUjUuLGGSb3/HFVhnTczEcM/3ZvxdA4HXNre2dzuFuyYOQrK7HG7st8SnubwIP51Ddl53LtdtJYEI4rWyGBog6+9zuCcU2zjKivQ8+DvsbB3a3EeC12XWJ0CARE5rNzcLEygIQsxBnnu/yZIi+LowuaZ90buSXLW0aG6liJ2XQr8WTc8WMrlRqDLAI46yt15SVpAdrjBpRNWLZ+Zk2JLDF+KPqNZsP1NTEp/f0JwgqhYVRBFh+gkrKjUTw7NhyM7Lcvvlei6D3srnVWUVZkf2ZAUCj5+c9a2zxg53R6+LGRMyK8cZsZ3Wi2CxegDCJ3s7tx0UjHwhCMIXP2zq7Xcb8IUWY4rBb3lOg71OTEyE7bwUCC4ttE4pT4+cooLPN7KTlVdWRGJfwxJx4tTs+FZUMHYAoaff/dKHTQrjqPBIBIRkmHjjk1ZymirUO6oe4Us5rSIdY8sI9fqEKdkDkTEB8wqTzjk+/9wF+REifsmcXOao6E4tQkTpXy1wILYLewqBqkWAtGF7+4H6PotOUngBos32CiYybEQjJyhG1p+SEhETMIRJOASgnY8cS1HZF+dbnM44hyFKqf11fR/s6BDgpAgIkYvCUT6i8g8OdPU6T5mZs+y0cO28FJg5pzJzbK5Fd4WbV5h09eljZ0/KVGg9zEdjci24g8S9ogIuIX96bbOIPbdmEDZ3OD7c0ZFhlY5LnsnpsfNKSrzzqgqyaIU5WRVeR+U9PQKeQXanuzjPiuO/QtO6PFo8K1f3L4guhOlbCeIZNomtXQ6t1WoGIc0cabZz4NbaUvyVhwV4S1xyUuEpM/Sx81Jg0QlTs8iuo1BA6yOIJwbcP180rqTAovVdreXRFuLY5Y53TQUKw9pm+/vbNe9INYPwrU9bI/nR1zq+0SyPnRd5s1aG5zSosgMLp+VYU/U8FiJMmjE+46bzS1QSEE6xKWXpUzx2P3p+RMKhJ6LvCkQl1QbCti7npp2daXIvOnQk9th5nVNcNS5NYFC1BhSdNTEDKzCHfrGfUBvcfkU5mnQB4rUuabiDEHUm7hUVcDLdmrxxZ2d7lzYTNm0g3LSzg72oNFWD3UhEhe28Pt7V+aTGPFssuTMnZPQP6LOYoNVcPDv3slNEhEnPbWgiCrVW6BLmI0ICXq2URLQ8x7QjTfZNuzo1taINhO9+0a71E66JmhgqjNMgdl75WSJ2Xr96+vArGzWbGhIEkVDY4bPIPTiI7T/CJIFjBXqwf3vq4Edfaj72zJ+SVVpg0XElD58PkaiBk7ZrcPBdjW6+GkCI0QYRaeM1oqumIfHYeU3J/taZInZer3vSdbRXN9pZjjQ1ihFp+HaYzJKOHtdlp44R81T83dq6vbW9hBTSRDmFccjC/m407EjRu27e2TmgJQCUBhAS1kbq6JlP7AUI5rfyqnIBcwXEIXc9fZhxIn8jAWQ1TeUZEzImlaRpGl3/+hEmgYeVV4ioJQ429D/yyhH0fviwHtWeLhNFhR4LuX+fzHWHWbG/vu/LwxoGVwMI2YQwh0a5vahHLdHrPHtBPqZeAoP/+Lq6bQe6s9KSWRM2azw5YJOBW1M4i8nQMui84ZySiSUiwiSygrV2Ooky1tg+sHVfl9bunzwjOzfDIAdlrbTpWN5rR6ppx64BhMhFU5MZx1H9h50XG3KxWIYNrQOPvFpH3jikK5zgEc9oZeWiaWFFu8BsBfj9QMhpcONXnRgo52R6cmOwoH2o/VhYOS6d8HPhfES0sita5YEJBzf1rasFIal22I6O8gOh90B19dIi7LDUs3i45IMv1da32q1Ddg6kX955uBfzo+Gnai4Qb+SGEe2CsO0/urSM7aiatnzLsAO/d81htO3efRBr8pZdXVqDbvAui2Hk3EF8CY7uNTDZfqinuVPt4KoF4faD3RwDkDJHt3vRbd3uHBybl3qbUHB4gmIRiQRNg1fJACcb2gfYmmrq0cRi25B7noiiAmHSginZ154hIkx6+aPmDV90DOd+xWxgX13fviN9moinMMdCABz3Anb0ooBlh2r3QrUgJBM9hvCjGoJDttr4K6E01zr5KH/vmmq0GinfHKnhJOaUiNE0VYVqARmjwGLCvB9yGiwXsDfss7vvf77a19sQMjq6MdvQrqioyiLBhsZ8qZo4ZIrC6H6wMQQyKqlRC8Kte7sExk8lETFRjLk4vSJDLDg8gSGxrx9eBr39xeZhy25tIORFgWgXAB5h0rknFJwtJEwiyPT2gz0jsrslJSV89KVm4vH2mj85nrOmDc9kdjqf7dUVhARW23OkV0AiP0xTHFwgUbhtWZmAnRdnJ5ZBIsWOUI6zMdtd24sFkibmkPoPCwFNTglep8E7rhRxGkQQ+sirR7LSRh4jOfZ8vr8LE3BNxFMY0xmtVm9amzBDeU7+e2r72ntUqYJVrYRU19jmGM2iUWYbGU7EgsOTQAvRImqJEZODkwOCmc80yvrLx9imlGmI2sIyiHZ+yGkwYwQBan4+9GJtbZOdQ+CIwuxOa5rsX6g+9gy/jhFpQVZKHGdN8/Y0NSWpoW1A5bFZFQi3H+pmHRjxIR9ma9xfIBVMTEpALSHgNIjL7wMv1gZLWcWaoEmWDasZheOnZKmPdjHkNJh62+VlAsO0q6b3Tz7CJN8aIAOvCE3aMO/rQ1nTMoiw6Ftb/F3DH84v29UJ3tSB8EDPqEXg0IHKJew0+PvX6ncHT59qTUlC6611e7ZoWk7yyGU16DQechosLREVJvF6sB0QZ1pUx0EbDv4A90v1H5Hg1Zj9CZBRKf0ODULWgb1HRm9EmaHg8CkrhA5UnPceW+fRzgebL1ZLIjuWgw3aZP1EuyjKURXtAsXgceMzbhZyGnx/e/urm1qyv9Gp+HeBYyH2a1rPtNSDAweGe3GvqECGwjlOzRc2NAibOhy1Tf2jUzQ6dKAiOHzx5FIRO69fv1B7tM3hf6AantDI+tu6nUieh++ouSBu0tQKVaYn7BjJNCgQHhZhEkZqEPONSiUAXd4zrXpB/HAVnqxpY21hGsEO12baC3YQtc39Te0DISkMDUKMtlu7nMMKrpA1xlMBr9PgrUJ2Xl8c6H7m3cacjOSQn3ytx0I4vGBK6GgX7CRPm5WDw4TAiDz/fhMaCH9h0oiq+MwTcGjEzZA/PVnTpmXFfegnPlIA52B9f0iGhAYhe1G0w6PzTEiE1VtwGhQKDs9K0j9wTDsfbCSsyPr3dWuNH7Noeg57EwXDGY+J2dfCpGAtB71Prx94oVaNiSJlPtmjzW3H2ypZ0+J+RtFB+4B7X11ot6/QIMRASWGwg45k7D8gpjJeC2JOg29tbSXWSPaQrbYyJ1AoHTzat/dI6KHyrYdoFwrBPL3CJDINog/wfUvl9ep1dRz2gkl0fSthp72/vh/Jk+9NNdcLp8V/1jT4AHDUaClCg5D1dBTuRYfsvNz43aFSVzOrfMuwrN37bA0JldR87CnW2ePaslvbsZDMLcdVEO0isKD/6whUQsKkuhb7o2sRJqkSv9JFlk2iqvh2X801pn8zR0HWNICDE2ZIhoSYYeQ5qRmVUhn0e2fNzz9PKNPg0+uPIq5QH5CbfaNW30LGdQFBEAM5yXqWwTAiULERbUCYpDrfFiefj77SfCyE/lNnkDUtzvdYHBmAT8huhgAhsp2WTgeMDonmeCqAbBD5slhweJJF4rKE56t6huDWhBSnz67NBIzY+GmWAFIfhEnjRTMN4q329Lu4eiSrBwfKBlTShOFT319vSSyQyN+gRoKvtWbzlPcIkDsdzZ0hBKQh5goeGQT2Q5Juno5FmhL2kHT5qiVkGhRxGsTSkpwEaqQawx1JTU2qbuzfqfFkNWsCQRAt/l9ZXJaEI1Dd+2w1wRM0nT6YZ3UtA9iRDndH5QUKTKJ1CHiEqKzfDMU4a2AziJpKmZgQIMRu0BOzdRRhMAFjjqJcy+3LROy8Dh3tf+L1BuQxykwf8ZRPHHnmtmh0tMcGwBME0fF36ycInF9FpsHiEU2o+fnOZ23rtrTmqBAm+dbGN4sPgYCjPYdtFvNgx1rfJmL3GtwgIEVbqNyFECA80mLHYH80YdDj9YPTYNkYmzLjAj69/7kath8CcVkxQxM4Fp44Pdvlg8FvnAbJNKh5xBhldCp8DtQIk0b03ZKaCPEh1aEj3uInHhXJSfGcNc3zhXIN1jWHtx0lLMpo2oomoEGeVp4u5jRI6uLnP2ga4TToP/MC3uFYuONQL+r1gE+D3ST/Jm5+w8cqPh+eTIMn5Acrr3Afu4KPd3eqFyb5VgXxe2p6ydvue1PNNZFUi/PiPGsa8CGynjI3QqyEvC/waVRu0sxP++04DQpmGrz7mWqH082nXeAPz5cjzf07DmmLdoGTMY7qjiGPBIRJHETFIlBxBn7wRYRJqtQS/r1LHjINEVjJyTZFVjZMGvzrjJs7wKe+JYTLaIgpg2gUFscNR5Q7wkJEJKIrFovYeb32cQtnKgVbbeWmGSpOR1q1hejTCTmFOJQRAkjLiUAlJExCMYi1gCZh0sjuJIrEX6MSos78/al2ZMWx/hv4hAznpQRClIT41GuSlcUuyzjSgASP06D2/TcivlVraljNwvlc8bpAEEQCabMdHYpAZRHLNIhgdvW6eq3CpBEDnZaahBm6gDko+VWz4zprmtdG31+I7ctAJRD29rs6e10Ck9K3gZi49q4kF59UyIdZgOA/vt3w+b4utF4C7w6/YktNJGxzq+o4ed4XF0zNzklPbu92IEwqLRSJQPXr52twlBGQ5QxTzgVqVc6EXx7SEHba+/rUsnQ8VFjMfWuLp2tAyFkdnzKFTinNG+/LYX3eFVo20yNEWBhqrbiyXIAoduwPv3xEIPbMiLZSkpMQg32hMTY+idmKC6yVJWk3nz9uRIVqfn62r3vNBkFhkm/9bCJwJN+o3XQGNSOhq+w6ZZvyJckk18AHzrCYKdATAoRoOeIehN5l8Lqzi8llqcCpYI8e/usR1IM4QwQroPI+85j9v1bxBpMY2cb3/qFUTLCJWoK9tJgwaUS/iC8mZr922uw83hXQcIwgwJw/vad91jMF8pTUyrgRMC0ELJgV2jPhI/ZCyBhxWRKgDReTp95sQC0h8K7/K+wJP9EeBPH2y8vENqLkhyLTYJinweFeoKj46lAPkdrH5GpLF4dvJKY/LZ3OMLfEw5SY6gIbd+KscrJToErp+02wWvZpcW8uM+Q0WIq4XIFNwR5h54VYMlgUlmBvBbvPckpsJaJ0BSsQ8D4LuMBmmAWQZZCFlE+1Ln8wAcpRlmqtjcD+WPn0K56atNZpovJDFkXdfUqHXiUQsoYODsa5uQx2XkTyZC8qMGw4lRMfXiEKi9Y6gQQrybb92rSFWlvxln/qrQaiLQqgN2hziYKJYqgQH1++9nH5xyeOrKxdfUrbUSUQYssbrzt173gz7iz1P7miQmDLjes62nn4o+OZmQHDfExrbHyBuYvmCmGS2DFSoTl8fNGyYDagUCbgI5yP4zhrGpNEfDuK+Ugcg5AZ39XjOnNe3oULCwLODOWbCBU/+JIcKYJWJsEqxw7z072dmmdxsOqC3H/gxZqaxn5OcUGeC97mW7bvSK8aX/IRDSDjxVowjo25lbumNAx9A/G6R/DMgSGnQU/q9hETQs1PJM73P1+jJgCEmtp8y3AsJE4eziu+N/W93lXd+8e/HcsPpWPl6MQ6el1aBbwQwLkUq4N4DUbKSiYOQo8TU6S/yTpOAS1VsQzi6HXlkiKiyGh57+uyj649sqe2F39WgXeVX8HqBsWj1iCIynWOeIo8prvXxflzxH1dfrI5FwjLTdMcC9kFxOXOCwwpu00qTSOBzb0uA2lAJUiNkaT/RCjTIHZej70Wrp2XQh85UgksJgoV+j5a/3n7Wr/8UL4FwrzGAPWz/d0InLXWM7cyizQb8Zk1jbx0iufkECCM16WQ/ST+SmVjROy8VuE0GLadl8IcRbxBVi0EPwplxB55nQbZ++mllvAng0QxtY39AoliOF2TY0N52+bfXKzc8XX79KdZCYRuJd2Gf1Uxcwc7Y5Knf+fCEgGKcXR4zmPnpSEKi9ZWPOKNOmLja3bPC9kQEahYY3UXivq2C7w5xWzUnrqQSghVHIEvjy910blmJVPeVCqBMDokR75VpL4Eh/fPuaem5XuePcx6ElGjdsQbRIvS/VhIneSH0hSBSg1D/MsQYkzAiJR6PFnTsuM/a5o/x5RAOORJGJHjuz8dht3p6hN3GkQ1z5lKd7VEwL5v0hhyJmAlvjd/+4onAlUkhEm+rXDNsXBndS/xS0fcD/kzfrOmJfJhVei+Igg5PCi8GoOP2O3QozuuGi+wlGELv2pNNRI8A3jCjtQTG18/DREJRR5/vV5H4x6FwffY/XQMaHVQ9lYYl1nTmDCEllX4U3oYZz718AI7z3/wOA0KBocnLKdwDAiFMfB/BAjJl4bi2/+R2J1719SQ/skwC2k0DR9+2S5AKv6ccZg1LTFB2d9bCYSeJPUGfPYFxkroFRYW/F9XCjkN1rfaH3m1LmSWIiG6ArzEhxP5rdhi4l8diruXPhwSJukvcPVvzXMHk4NPdncJ6BtmT8yYUGwju3DgemPzLhhS9nRTAiHfpLjBIB0hOPx155SIOQ0SHB4cKrNS3xkC68XEGyPIwAQf7TyCboFc3yOqUv+TLDcH6vsJwab+FW/JNGsynk1IzrS+aOryiQnKR3ElEHLCNuIAZAj/cBosH2u75eJSgdaIUf9nb+p2o1YSiIT5n+/vxslDgGDfV8g0+P52/W1cfZvwv+bILZYohqownYmn/Rc9YgGwWZRsjJVAyPknbkDInCDXZ6GQ0+DdnkyDuJ8bui3waL2b7F8d1hy1xRcS9Pq+52vAs+9NY64JZyxmv0a0C3w70QMZQ2ekW6EbgIjwsAoNKT1DFo/LZxwwY8hpMOufhILDv/HJUKZBnXznFUZixCNGDleyMN2afv9aHebakTA0H0Gt/0+QT7wclJP+j5TvkDVt1gSCkcbPjpT9pHIsTCUQZqQle8x8YxyFSOr4rK68SiTTIHa3+M7DBEMXwW8mKb7q4RiRspASUJSAgt/UZ+j/pyYn1TXbBRLFQCUJm4irYii5kWtsMAHrhUzhlTDDmoxQm5N95Cg0oGbiA5Bp8PwTRJwG//j2USxX9HQ/19JhVjCOhYRg0/LSsbJsRBvbiWWo9J09VlrvK75bBNsk8b1AxafOzI2brGm45DIEylNIaYT4iLKpiGlzPmz20LmJOQ1ipf2bl2vZDghMI11egXgOomKrMN+ONe814q4exS+oJ1HMTpFEMTMmpFeOi5OsaSxhgAgzCYUpoQRCgoghMo5dELKHxGnQk2mwSiTTIAgkoC0YVmBfRB8hVrnlktKxeRaBVu56pnpAp1iGAq17X2Hy7arpEUgUw9JBrpv4OBaiHEIqo3woUJphvIx2OxI+NcLjqulFzhVFuanYamt6y1t4d00voZD0imUoQIBXmCQWgerVTUOJMaK6DNJllvHWLifJngS6j6IiMl7HArSE9YprcJCgkixmCrUogZAPUl5WqrI/okLVUX/EaXAo06CI0yAKbvLD6BXLUCsrvMKkO4SESThqeWxcU8S2sVopDV2emHShC/mVOHFq1tj8AHmI/Qqa/QZnCj7lyhNJCYT0D8WaKzY1NgTI8TgNXiASHP7dbe0sJvAuWgcqrzDpPCFh0h/erN92oDvdpvTpNWzmYimydV+XwMZyTK6FhFMCGWYM65rKhoBPyJC2IUBYkm+JUeGo12lQwIEVfQbaedaRaC0lfDs5Tf10eYXKYfYt1tg28L9/JZahkhjAt3ykrzE/JkcAiW4EGlo8MzcOVPbAp6QgxF4sNAhjUTAz5DSYu0wo0yA5azfv7BBAr8A883/FK0wSzjT44Eu1qAdtlqjoNf174/mQEXJzk/ZEMdR1yixv1rQA1cbQLeDDSqZMcAgQjiu0sp2NrcWQbjMH71xeLmBoFmbOWmVeq3k6lGkw9ceXiwiTcKX9kzeWYbS20YF6iNb+o69EZDNEIh3Kmhau9Wwgogy6B3CAT8hMISFAWFZoJe6QmcY0BPuAH94SFy0qQOEbomigx7971ZOzVtnmPdB7ut3r8gqThDINEnoDrYayDEA3QlVXZLMm7TjYTQpE1W98XZBv6KLpOTGdNQ3g4HlTWhjeSliUa0HAGkNaCpwGMXldeaXIgQqN1up1dca4nweckX12F59/sUyD67e1vba5NYrCpIA94iZGfySKEQuZg6KC12NrI+bLB4CDkg8Q+d70vw6xEiLYKYgdk3bvMoihNnJR/66GvHPfczUE3rVETz+FFPG2ZeUCx1EEGPc8E01hkgJvGRQC/n24Q8TR/vjJmeMKLQ5XrBpzMy7AZ0xOeCBEusWOVDnjtsIAGPzI4zRYZLv1UpFMg5/s6cL1LoorCcKkU2bkXiEsTIpwLMNwhtJqSfx4dxdSX62VoKaeV5lFdB+tL5qkPMAhojEG3Mr0hFgJeXliiS1W9PUkVMTOK6RaJiBH7n7mMF9cgQBQAWvTetMrTLpjebkAAUPCpBpjgt9o7Ze3PKZ/e4/0EetN4HUCAsVu/FuAM7HYFrLXoUFYNU5kaxeyYd0LYOc1p1Iw0+ArGz2xDPXKWau1a95d9MUnFYoJk4hlyBSPojApZH8RsfClEHPLOmVmbk5misAqGpIqAwowsgh4QzYUGoTUQg4tkx+O2eggkllxpUimQU5iRLY3LBKZ/5BAOQa+K4QiUB1q6DcslqE/5ervEJbgwy9F7Ndwp0BYZY9BH18gg2i0qjT0GhYahJNK0vKyTP0p8q4kwpkGn3yznigyyh5f6meb1pIQzyrxT2cXi0WgWvVcdWtUhUkq+4sN0LZ9IiFzQO/Jx+V4EoTF2h9SmfysFH22ozgilI+xmtnTmZ23x2lQzM6rfeC3HjuvCOaWUJ48CJOIPH3rJSLCJNLivvBBNIVJyl3zfYozQHVTPx8735sqrxfPzonFrGlscMoKbRjBhuxm6JUQUcHk0nSc00LWFZUCGEaxklxx2pj5VSKZBn/z0pGapgHdc9aqZ8VQBKoysQhUuHo4XUR3ZjU1+x/DxLZ/o5DpzLwqsqaxDJh0BgZjPZCZUpamZnBCg5A2Zk/KNO2ZkPSu6GHEnAYJgvR/b+M0GLVl0Os0+K2zxgYbSIX7JMbA20PZW1ThdeMfsRhu3ClyLCTm8vGTY8/HF8gAHDV8VgXCWRMziHdiThzi9XPzBSUVRaEFwf7suGdNdRTtvDjlcGwgIriA8z62NZwGPSHSY+ePY+GXh3oEEsXQxdNm55hz+gVjP9QCGYATrIDvfVWjOLksnZOhCQ0X8DdDnoHnrm+XVF6/90Vkc9Yqk8EOsqtnKALViSIRqB5/o2HHwZ4Mq6rhU6bEsKcYoBG2B6MIgRYXHZeTnxVLrq2AhbgknOPUdFbVKOZlpoBDNn5qajSyDE6Dt11eJqDfQ+/EgQpSo+U0iDCJdQxXDwF2YYr5yCtH2KSZbjxCdYb1QczRfsJY23Hj0/vMKpjw7zd25xwIczNVOXaqAiFtIPYwm/Eadl5Ea75ySZE/C0Leefa9RpzcDEvwMoIer1riyiVjSNQ+4pGanw++WMumTmATq6byiJaBZlZCsYl08owcEy4DwdjFQWP+ZLWDqxaEpOnABM48n17vCeGO5RUCToMkPPr1C7U2xdg7wZiry330PUiubxdyGuRY9Wev06AupBhbCcrr/fV9u2s1J4qBTDwqsAqKiZMhRAIWIKOSu2pBOGtiZlGexWmOuMjeleTChQVLSB6i/e/RtUf21kbTadAjTDq/BFtz7bQnsIvGV105351Atca8gry+u9clFtsfSaMna1os7EhZBjkQzpygSjQK59WCcExu6szxGQIReyIxuqhBUa+LOQ1WN/Y/9lq9wDFSr44gTMLTSkyY9M5nba9vaYmix2P4TCBRjJj9GsugJ2taLNivQSRyUfW6X7UghPscwJj94Q9DmDUgSsF3/ltnFU+vUCV6GtHc/c/X4OUdRUvRIWFSucBXgO8ryyARuaMlTBrBSbGf2EVgN4N9hcDrYhsfgYbCfAWYEBNAfSUaQHjSjJx0E2gL+cyUjbH+8FKRTIOfeoLDN0UxOHxXn/Ok47Kx71E/QsMln15/FK88AZff4RrMcJGaknSkhUQxIvZrC6dlsyPjY2SGjgSjAa80EmkgRgpWwP++BhDOnJiBMXfUN+Wo139wcWnIkAH+XeUO7udYPyVr6HTAagRvcl4nkOIdV4kIk1g6EIryERRs2zSvsYw7HINiigrCjpE1zeTBSAcG3JUlaaTTUM9yDYPKRoIdaXQ35cgkOKBff06J+h4Ol1y7ueVvn7exD4zKh/RrYdKiAk8mWu1/RKDaV2dqp0H1ffIkitnVKTYKp8zMEdNwqCcvzJIoMzEtwEZPfT0ailLp0jm5agxS1TevqSTDhnAfeQwGUJpepDAOaQSHJxJZtA5UnBOIQMUyqJVyynsiUL1eH9PyGN9e8zXfVdNbfbTf96bKaxztTZ41jX3WkjnavrPaZjMQLxtji4pbk8fOq9d5+tw8whmqHDDfYk+93cA5JGpOg0OuHp4IVGUadinD9BOBCoOvKEagGqZEl4vk5ER8ILcIJYqZMd5zJjKtTw/QwH2Js6smRmkDIfZrC6dnYz2sqQ1dChNxizCyYk6DzOCHh5wGdaFEoBL28JiY33qJiDBpKAJVIwZQYvs3AWqNeeUDoUQx2PoxxaN7JlLgT6/dY8UFTBTK+D/SBkLeP+f4vKhYLSBXvPG8EvVWCL5dJTg8mx+BTaxvJcLXsAt7q3+5pkKNf6d/K3c9fZhTUPTiMPpTpMMdxgJJtVhFF51UaOZgpOcsyNfaL22QpfbFs3IJ693e7QwZyE0rKQrlyTmMaH78WOvbW9s0pe/mCEgoUdJLeGIZRmkpwVi8pMBC7vG3Pm1V6KP/I7x1MVIjhnxWlIRJ/iTpdYcF7UizffW6eiyzGVz11TKgzR0D7AuQ0nPAV/+iASX5VhIflFOr1rZEUtLf+tCeZ4ZSMWttLJzyMJxAIw7t7tUMMZ5d2HlpGOpwCA30LsQTPFMsZBixDE022QL1UPs9hoNzjRYAft0G1sIeI1LtLUb6DVama84Y++Atk7U2pHklpAGMNvFCgAtGfogYLWSbqVg9af9jEkd3zCBe0OkBxaL2/sbEG/QrzSIymvQuuqMZjL0oDoBGsKcK90VAyI4UCZXx3jQxvSDENPEKEyicR/HEE3RgRGc8dabmvSgM1CyY4R2OZ5w+e/tjLPBOONNFvis5oMyBHrv73BPyxXRgIiCEmstOGcNBS3tyAeWOyKeSAzHJAa+96KWniJgE02FBEM6tzDx+ShZGZDHJM0m05ICuHAAIC6Zkz1EXW82/ZUEQspsnf1DMhYL077+8IzkQPgdQToil0/I2LQhCXkYQNL4oOiZs4XNN1iA5oBcHsMQghvoFQnJRLw3iICR33IWLCnAs0qszsh7JgVjkQHe/CwSqDKwWsIPiIKS6a88YS8AyMR10QGrkTcmB2OIAkx/nmGvPEAn5N9zTsEA4vSID5ya5GA5zU16MNg4w+U+fkwsQwul4WCCk4evOLsacT8D4KByi5buSA2bgANOeyQ8EwiQmXBAunZt3wtQsEpuESYd8XXIg5jjAtD9xWtaSOXlhUh4uCLGXu+n8EpPH3gmTR/J1yYGAHGDa33z+uPBjTYQLQoi7aGHh7EkZuDMGJFTelByISw6goJ9TmXmBUD6fEQzRAYQ4Ft543rj+AXOato/or/wpOaAPB3Csu+n8cbp41eoAQvq0bPEYT9IcuzTp1meAZS0m5wCekDMmZlx2SqEudOoDQqIV3HhuidyR6jIkshLzc4D15qbzSvQKmKIPCOHaVUuLZkzIkIuh+SeQpDBMDvTa3TMnZYrl5AvYtG4gxJPqlkvKTB4dOSAL5E3JAU0cwH/31otLCbGh6S2FwrpVRBsYkp8wJQtTOoX25CPJgZjmACYyKMYvO1XQdTBg3/UEIYHobr+i3EXwHikoDchseTPGOcDExlj0tmXlTHUdu6InCCHr3AX5Z87PJwmmjiTKqiQHTMIBJvZZ8/OZ5PrSozMIIe6OK8uJKildK/QdJ1lb1DnAlCZknlg2EWXi9Qfh/MlZVy8tIpWXngu2cifkU8mBCHOAycyUvvr0onlVapNgq6dIfxDS9oory0sKrP2xkF5cPadkydHMASbzuALriitFkmqF5FtEQFiSb/3xZWXSzzAk92WBWOEAk/m2y8uL8yyRIDgiIITQb59bQsbgrl6X3JRGYthknYZxgAmMPIYMEzecG67fYDCaIwVCZLj/fv1EzFull1Mw1sv7McEBsrsij/n36yaRAyNCBEcKhJB7/OQsXA3bpYQmQkMnq408B4AdaV6+e+G4uRGQxwyTH0EQ0gaprWdOyJA2NMPslhexxQGmLk6Dt19eHlGyIwtCslb8x7cnYWfglhHzIzqMsvIIcIBJy9T9jxsmZaQJZo9SSVRkQQgRS2bnIqRp65ZqQ5UjIouZggNsRJm03z6vRCDpp9YORByEEPSza8d7N6WROthq7bQsLzmgyAEmale/a+bEzJ9dPV6xoD4PjQAhAYJ/dXMlHUPQpA/VshbJgUhygImKKPSumysJ7BvJdr6u2wgQ0hQ6wx9fXo6k1IAuySYkB8LkABMV1fxJx2WHWY/K1w0CIdT85IryM+bmeWxK5a5U5eDIYoZzgMmJTuKseXlMV8MaNw6EqO9Xfa9qTI5FhsAwbHRlQ5o4wOpA6IqxeZZV/1wVOdW8P0nGgZC2J4y13f3dSrIaSo2F/0jIO1HngNM96HQO3vvPlRVjbUYSYygI6RhZDW+9pAzhr5GdlG1JDqjhQFuX88eXl513QoGawjqWMRqEkP6za8afMS/PozmUh0MdR1JWFQYHmIog8JwF+Xcuj4izkjJpUQAhh8OHbp0yqcTW1eeSOFQeHvnUAA4wCXH3qSpNe+jWyUYeBYe7FgUQ0nZJvuWRH09NtyT1D7jlcjg8GPLCeA4w/ZiE6bbkR26bWpQbEXfBkJ2KDgghiygY931vMvm+pa9TyEGSBSLHAaYfk/C+71XNrdQ/boVKsqMGQui75JRCLNpQjGImK/8kB4znABOP6ffza8dfcrI+WSXEuhBNEEIxUTAw727pdIhRL9+SHAiHA0w8pt+PLisLp5Lw340yCOnAr75TedGigtYuhxTShD+csgaVHGCyMeWYeEw/la9Erlj0QZianPjwj6acOC0bGbHEYeRGWtY8zAGmGZNt4fTsh380lek3fD9aF9EHIT3PTk95fOX0qeXp0rI0WvNg9LQLAplmTLbHV0zPNsRJIiRvTQFCqERp8eSd0wnt6AnQFv1vU0i+yQIxyQGmFhOstND61J3Ti/Ojo5DwZ5xZQAhlVePSnrhjWk5GSk+/W+LQf6jknTA5wKRiauVmpjxxx/RJ49LCrE3H100EQno1tzLr8TumkfkNY3aJQx2HWVbFdOrtd6dbkx5fOW3OpKipBAMOhLlACIknH5fz2IppluREicOAAyZvCnDAi0DyFK1eMe2k43IEaojoK6YDIb1dOifXg8OURD5dcj2M6PCPhsq/QWDi6hVTT5uda8IuJ5o2o+e7n7fdtGo3iTgybEnSpMaEUycmSAKBnAM54Dy2YurSOXnmpNm8IIRf729vv2nVLnJxEL9U4tCcE8jMVIFAJg9xxlavnHbqTDOugV7umRqEkLhld+eN9+5q6nCg0pE4NPOMNxttILCzx1mUZ+EceMJUg0I2iTHB7CCkV18d7rnhnp2HGvoRLkscig3zaHsLBGITUzku7ck7pk+rSDd592MAhHCwurH/5lW7Pt3blZ+VanKGSvLMwAHsQhdMyUa8Vz7GagZ6lGmIDRDSBwLRff/B3a9vaS3ISuU7J/8kBwJygL0SCLzgxAIMkjH8CFjGbDdjBoQwbsA5eOej+556q4F9aVTCEJht8CQ9Izjgcg/yscY76a7vVBJFZcRT0/6MJRB6mXjvmuq7n6m2WZL4J4+Ipp1YBhPG5ogoFfYB951Xj19hYNxeXboZeyCk239Zf/T/PX6AIMKkCpA41GUexHQlIBCz7DRr0n/fNOnqpWNjri8xCUK4vGV3148f3rPnSF9eZmzs+2NuZsQQwW3djill6Q/8YMoJU7NiiOxhUmMVhHSgsX3g9t/uW/dxC0fElKREGadmeFBHyQVnPmJmcwhEDHPf96uiFSstfG7HMAjpPMD71V8OP/BiLf7R7Ebk1jT8CRErNbAFxcTf5RokZva/XD0+VsgOSGdsg9DbpVc2Nf9s9YGjbQO5MSKSDjgS8qYmDhAlrTjP8j83V1600Oio9ZroVFM4HkBIP/fX9d35+/3rP29DNcSqKLemasY+FsuwBSWDJ/EpzpyXd/d3qyYWG5q5JUIcixMQwh10RKguHn651uVOwGZX4jBCMyaK1YJAUiegALzlktI7r6pIIptuXPzFDwi9w/Hhjo5fPHng8/3dUloTF/Pz604My2DmVWX9xw0TSfwcV70zrT+hMJe7+133PFO9el09a6NcEoXZaKoX8UjCRuqm80vImpRhMyKPvJHdj7eVcJh3+CL+8qmDn+3rlqfEYZ7E3MXwCXBeVeYvr5+42MQ+geHwNm5BCFN6+lz3PV+zel1d34Cb0KbhsEm+GxUOdPY606zJLIA/WVYefwvgMEvjGYTeTuIA9Z9/PLRhewdhMmypSVJgMzz2pr1gASSsCWEplszO+dd/nEACL9OSqgth8Q9C2IQS/4nX6x96uRa/RHan0rxGl6kTiUq8Ahg0EOOLbD+8tOyGc0tGg9vaqAChd7rUtwzc/0LN0+uPYm7P7nQ0jG4kcBK5OvlWevafluRrzii67fJy80TIjlyXvTWPIhB6O/zJns77nqv929bW5OTEOD5mRHre6F4/B3jX4OBZ8/M5/h0/Jc73nyO4N+pA6O3/Kxub2Z1u3dttS8XoNN5E3iPG2OQ/++yufsfg8ZOzfnhp6UWLopmsM1qMGqUghN0O5+DT7x59dG0dgaTAIaEpozUGo7ZdpNYgcMb4jO9eOG750rGpKRwJR+Pf6AWhd7TRAv/pnaN/eLN+d02vhKJhCMAhu2/ANa0i44azi685YyxxZQ1r2oQNjXYQeocEv2xWxT+82bCruteSKs+KEZyoPf0uYgVNL0+//pziq08f7fDzMlqC8NiEY1V88cOm/3urAdNTZKeZtuS4MRE+1skoXbndg5gTIv+cW5V53dkll51SKKViw0MhQTjMiq8vnK7B1za3PPte4wc7OoBlRlqSJUUeF0dySf3vAae7p8/NhvPUmTnLlxadf2JBDMVBU9/NcEpKEAbl3uf7utdsaHzt45aaRjt7VE6M8eI6E7TLOj5wDyYgdBlwDJYXWS9cWHDFaUVzK82VFVDHzoZZlQRhCAY2tQ+8srnlhfebtu3vRpxAEA2rRYIxKNOwCiTuoJdRcyozly0eg+f7mFyzJKYOSndUH0gQqmI/c+uT3Z1rN7e89WkbXvw4SXGkGbUi9YAsQ+WD0IXdQlVp2lnz81j9TJ6GJWAvonJTglAb2zklclZcu7l5wxcddS125DdsU0Hj6NRw8W0Ce2w7kbiMK7Bib33BwsLFs3Kk0EXTrJIg1MSuY4UbWgc2fNH+t8/atuzpPNJsJ6YGEcGtqaNCnsp5z+5wY4KbnJRQWmhlxSPiC0lwibx0jEHySjUHJAhVsypIweYOx8e7O9//on3zrs799f3YQGKVCiCJNxVP6yNrHRGW+gdcLldCRlpy5TjbwmnZi2flnjg1uzBHpsoKMjnU3ZYgVMcnFaXYmH15qGfjzo7NOzu3H+ypb7WjlcZtympJJH9NLApzWPGcTrfdMYjaxpqaWFxgnTUhY+H07JOm58yYkCGPxComhaoiEoRFEQpUAAACDUlEQVSq2KS1UEunY8ehnk/3dG3d27W7tpeYqESqBYeoHJm7SC/MuUiy3CFz4tvhcLrd7oR0WxL+RESYx7qafzMnZsj8kFpngpryEoRquBRWmbZu574jvTsO9mzd172ntre2yU7uBCY6shzU1t5/LJTA0kjpDjIVIIchC6uc9x93LCmJeZmpZWOsAG/+5MxZEzIRdRK3Lqz+y5dDcUCCMBSHdH3OOoNvMUqOXTW9Bxv6yAFe12pv6XAQThNRh9OVwGqZlJTAUgk4ASbXoFMYn16kEVCPZc096AEbBAxdg/8ExEhZaSkFOSnj8q0Tim0Ti9OmlaeTYrqkwCLtEnQd9hCVSRCGYFCkHyNjJLNNY7ujphFADtQ125G7NnU4SDeLOqQXXzu7G4kIxzOwxNrFH//1/C/QH6upd6PrwS0YTkxg94uUKN2ajOEYm8kxuanIMBFpluRbyotsRbmp5FGhQKDK5D2DOCBBaBCjtTYD/ABhW5eTgCucJ7nu6nP29nsUAzgBYQ4GCn23r96fXvM64llxnGOVA3jp1iTC6uRlea9HtceQ1iEwrLwEoWGslg1JDgTmgNyHBOaLvCs5YBgHJAgNY7VsSHIgMAckCAPzRd6VHDCMAxKEhrFaNiQ5EJgDEoSB+SLvSg4YxgEJQsNYLRuSHAjMAQnCwHyRdyUHDOOABKFhrJYNSQ4E5sD/BzHzEfsk+wNXAAAAAElFTkSuQmCC"}))))},xCircleSolid:function(e){return C.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},e),m||(m=C.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16zM8.707 7.293a1 1 0 0 0-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 1 0 1.414 1.414L10 11.414l1.293 1.293a1 1 0 0 0 1.414-1.414L11.414 10l1.293-1.293a1 1 0 0 0-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})))},checkCircleSolid:function(e){return C.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},e),o||(o=C.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm3.707-9.293a1 1 0 0 0-1.414-1.414L9 10.586 7.707 9.293a1 1 0 0 0-1.414 1.414l2 2a1 1 0 0 0 1.414 0l4-4z",clipRule:"evenodd"})))}};function B(e){var g=e.name,t=e.className,n=y(e,["name","className"]),I=G[g];return I?(0,C.createElement)(I,Z({className:t,role:"icon"},n)):(0,C.createElement)(G.decashIcon,Z({className:t,role:"icon"},n))}},2197:function(e,g,t){"use strict";t.d(g,{I4:function(){return be},u_:function(){return he},DY:function(){return ue},dd:function(){return de}});var n=t(4051),I=t.n(n),C=t(5893),r=t(1355),o=t(7294),i=t(2984),l=t(2351),a=t(3784),s=t(1363),c=t(4103),A=t(9946),u=t(4575),d=t(3855);function h(e,g,t,n){let I=(0,d.E)(t);(0,o.useEffect)((()=>{function t(e){I.current(e)}return(e=null!=e?e:window).addEventListener(g,t,n),()=>e.removeEventListener(g,t,n)}),[e,g,n])}var m=t(4879),b=t(5466);function p(...e){return(0,o.useMemo)((()=>(0,b.r)(...e)),[...e])}var Z=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(Z||{});var y=t(6723);let G=new Set,B=new Map;function f(e){e.setAttribute("aria-hidden","true"),e.inert=!0}function v(e){let g=B.get(e);!g||(null===g["aria-hidden"]?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",g["aria-hidden"]),e.inert=g.inert)}function S(e,g=!0){(0,y.e)((()=>{if(!g||!e.current)return;let t=e.current,n=(0,b.r)(t);if(n){G.add(t);for(let e of B.keys())e.contains(t)&&(v(e),B.delete(e));return n.querySelectorAll("body > *").forEach((e=>{if(e instanceof HTMLElement){for(let g of G)if(e.contains(g))return;1===G.size&&(B.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),f(e))}})),()=>{if(G.delete(t),G.size>0)n.querySelectorAll("body > *").forEach((e=>{if(e instanceof HTMLElement&&!B.has(e)){for(let g of G)if(e.contains(g))return;B.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),f(e)}}));else for(let e of B.keys())v(e),B.delete(e)}}}),[g])}var V=t(3935);let W=(0,o.createContext)(!1);function R(){return(0,o.useContext)(W)}function k(e){return o.createElement(W.Provider,{value:e.force},e.children)}var X=t(2180);let J=o.Fragment,w=(0,l.yV)((function(e,g){let t=e,n=(0,o.useRef)(null),I=(0,a.T)((0,a.h)((e=>{n.current=e})),g),C=p(n),r=function(e){let g=R(),t=(0,o.useContext)(H),n=p(e),[I,C]=(0,o.useState)((()=>{if(!g&&null!==t||"undefined"==typeof window)return null;let e=null==n?void 0:n.getElementById("headlessui-portal-root");if(e)return e;if(null===n)return null;let I=n.createElement("div");return I.setAttribute("id","headlessui-portal-root"),n.body.appendChild(I)}));return(0,o.useEffect)((()=>{null!==I&&(null!=n&&n.body.contains(I)||null==n||n.body.appendChild(I))}),[I,n]),(0,o.useEffect)((()=>{g||null!==t&&C(t.current)}),[t,C,g]),I}(n),[i]=(0,o.useState)((()=>{var e;return"undefined"==typeof window?null:null!=(e=null==C?void 0:C.createElement("div"))?e:null})),s=(0,X.H)();return(0,y.e)((()=>{if(r&&i)return r.appendChild(i),()=>{var e;!r||!i||(r.removeChild(i),r.childNodes.length<=0&&(null==(e=r.parentElement)||e.removeChild(r)))}}),[r,i]),s&&r&&i?(0,V.createPortal)((0,l.sY)({ourProps:{ref:I},theirProps:t,defaultTag:J,name:"Portal"}),i):null})),Y=o.Fragment,H=(0,o.createContext)(null),N=(0,l.yV)((function(e,g){let{target:t,...n}=e,I={ref:(0,a.T)(g)};return o.createElement(H.Provider,{value:t},(0,l.sY)({ourProps:I,theirProps:n,defaultTag:Y,name:"Popover.Group"}))})),F=Object.assign(w,{Group:N}),K=(0,o.createContext)(null);function E(){let e=(0,o.useContext)(K);if(null===e){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,E),e}return e}function x(){let[e,g]=(0,o.useState)([]);return[e.length>0?e.join(" "):void 0,(0,o.useMemo)((()=>function(e){let t=(0,o.useCallback)((e=>(g((g=>[...g,e])),()=>g((g=>{let t=g.slice(),n=t.indexOf(e);return-1!==n&&t.splice(n,1),t})))),[]),n=(0,o.useMemo)((()=>({register:t,slot:e.slot,name:e.name,props:e.props})),[t,e.slot,e.name,e.props]);return o.createElement(K.Provider,{value:n},e.children)}),[g])]}let M=(0,l.yV)((function(e,g){let t=E(),n=`headlessui-description-${(0,A.M)()}`,I=(0,a.T)(g);(0,y.e)((()=>t.register(n)),[n,t.register]);let C=e,r={ref:I,...t.props,id:n};return(0,l.sY)({ourProps:r,theirProps:C,slot:t.slot||{},defaultTag:"p",name:t.name||"Description"})}));var U=t(6567);let T=(0,o.createContext)((()=>{}));T.displayName="StackContext";var z=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(z||{});function L({children:e,onUpdate:g,type:t,element:n}){let I=(0,o.useContext)(T),C=(0,o.useCallback)(((...e)=>{null==g||g(...e),I(...e)}),[I,g]);return(0,y.e)((()=>(C(0,t,n),()=>C(1,t,n))),[C,t,n]),o.createElement(T.Provider,{value:C},e)}var Q,D=t(4503),j=((Q=j||{})[Q.Open=0]="Open",Q[Q.Closed=1]="Closed",Q),O=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(O||{});let P={0:(e,g)=>e.titleId===g.id?e:{...e,titleId:g.id}},_=(0,o.createContext)(null);function q(e){let g=(0,o.useContext)(_);if(null===g){let g=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(g,q),g}return g}function $(e,g){return(0,i.E)(g.type,P,e,g)}_.displayName="DialogContext";let ee=l.AN.RenderStrategy|l.AN.Static,ge=(0,l.yV)((function(e,g){let{open:t,onClose:n,initialFocus:I,__demoMode:C=!1,...r}=e,[c,d]=(0,o.useState)(0),y=(0,U.oJ)();void 0===t&&null!==y&&(t=(0,i.E)(y,{[U.ZM.Open]:!0,[U.ZM.Closed]:!1}));let G=(0,o.useRef)(new Set),B=(0,o.useRef)(null),f=(0,a.T)(B,g),v=p(B),V=e.hasOwnProperty("open")||null!==y,W=e.hasOwnProperty("onClose");if(!V&&!W)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!V)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!W)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if("boolean"!=typeof t)throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${t}`);if("function"!=typeof n)throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${n}`);let R=t?0:1,[J,w]=(0,o.useReducer)($,{titleId:null,descriptionId:null,panelRef:(0,o.createRef)()}),Y=(0,o.useCallback)((()=>n(!1)),[n]),H=(0,o.useCallback)((e=>w({type:0,id:e})),[w]),N=!!(0,X.H)()&&(!C&&0===R),K=c>1,E=null!==(0,o.useContext)(_),M=function(e,g=30,{initialFocus:t,containers:n}={}){let I=(0,o.useRef)(null),C=(0,o.useRef)(null),r=(0,m.t)(),i=Boolean(16&g),l=Boolean(2&g),a=p(e);return(0,o.useEffect)((()=>{!i||I.current||(I.current=null==a?void 0:a.activeElement)}),[i,a]),(0,o.useEffect)((()=>{if(i)return()=>{(0,u.C5)(I.current),I.current=null}}),[i]),(0,o.useEffect)((()=>{if(!l)return;let g=e.current;if(!g)return;let n=null==a?void 0:a.activeElement;if(null!=t&&t.current){if((null==t?void 0:t.current)===n)return void(C.current=n)}else if(g.contains(n))return void(C.current=n);null!=t&&t.current?(0,u.C5)(t.current):(0,u.jA)(g,u.TO.First)===u.fE.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),C.current=null==a?void 0:a.activeElement}),[e,t,l,a]),h(null==a?void 0:a.defaultView,"keydown",(t=>{!(4&g)||!e.current||t.key===s.R.Tab&&(t.preventDefault(),(0,u.jA)(e.current,(t.shiftKey?u.TO.Previous:u.TO.Next)|u.TO.WrapAround)===u.fE.Success&&(C.current=null==a?void 0:a.activeElement))})),h(null==a?void 0:a.defaultView,"focus",(t=>{if(!(8&g))return;let I=new Set(null==n?void 0:n.current);if(I.add(e),!I.size)return;let o=C.current;if(!o||!r.current)return;let i=t.target;i&&i instanceof HTMLElement?function(e,g){var t;for(let n of e)if(null!=(t=n.current)&&t.contains(g))return!0;return!1}(I,i)?(C.current=i,(0,u.C5)(i)):(t.preventDefault(),t.stopPropagation(),(0,u.C5)(o)):(0,u.C5)(C.current)}),!0),I}(B,N?(0,i.E)(K?"parent":"leaf",{parent:Z.RestoreFocus,leaf:Z.All&~Z.FocusLock}):Z.None,{initialFocus:I,containers:G});S(B,!!K&&N),(0,D.O)((()=>{var e,g;return[...Array.from(null!=(e=null==v?void 0:v.querySelectorAll("body > *"))?e:[]).filter((e=>!(!(e instanceof HTMLElement)||e.contains(M.current)||J.panelRef.current&&e.contains(J.panelRef.current)))),null!=(g=J.panelRef.current)?g:B.current]}),(()=>{0===R&&(K||Y())}),D.A.IgnoreScrollbars),h(null==v?void 0:v.defaultView,"keydown",(e=>{e.key===s.R.Escape&&0===R&&(K||(e.preventDefault(),e.stopPropagation(),Y()))})),(0,o.useEffect)((()=>{var e;if(0!==R||E)return;let g=(0,b.r)(B);if(!g)return;let t=g.documentElement,n=null!=(e=g.defaultView)?e:window,I=t.style.overflow,C=t.style.paddingRight,r=n.innerWidth-t.clientWidth;return t.style.overflow="hidden",t.style.paddingRight=`${r}px`,()=>{t.style.overflow=I,t.style.paddingRight=C}}),[R,E]),(0,o.useEffect)((()=>{if(0!==R||!B.current)return;let e=new IntersectionObserver((e=>{for(let g of e)0===g.boundingClientRect.x&&0===g.boundingClientRect.y&&0===g.boundingClientRect.width&&0===g.boundingClientRect.height&&Y()}));return e.observe(B.current),()=>e.disconnect()}),[R,B,Y]);let[T,Q]=x(),j=`headlessui-dialog-${(0,A.M)()}`,O=(0,o.useMemo)((()=>[{dialogState:R,close:Y,setTitleId:H},J]),[R,J,Y,H]),P=(0,o.useMemo)((()=>({open:0===R})),[R]),q={ref:f,id:j,role:"dialog","aria-modal":0===R||void 0,"aria-labelledby":J.titleId,"aria-describedby":T,onClick(e){e.stopPropagation()}};return o.createElement(L,{type:"Dialog",element:B,onUpdate:(0,o.useCallback)(((e,g,t)=>{"Dialog"===g&&(0,i.E)(e,{[z.Add](){G.current.add(t),d((e=>e+1))},[z.Remove](){G.current.add(t),d((e=>e-1))}})}),[])},o.createElement(k,{force:!0},o.createElement(F,null,o.createElement(_.Provider,{value:O},o.createElement(F.Group,{target:B},o.createElement(k,{force:!1},o.createElement(Q,{slot:P,name:"Dialog.Description"},(0,l.sY)({ourProps:q,theirProps:r,slot:P,defaultTag:"div",features:ee,visible:0===R,name:"Dialog"}))))))))})),te=(0,l.yV)((function(e,g){let[{dialogState:t,close:n}]=q("Dialog.Overlay"),I=(0,a.T)(g),C=`headlessui-dialog-overlay-${(0,A.M)()}`,r=(0,o.useCallback)((e=>{if(e.target===e.currentTarget){if((0,c.P)(e.currentTarget))return e.preventDefault();e.preventDefault(),e.stopPropagation(),n()}}),[n]),i=(0,o.useMemo)((()=>({open:0===t})),[t]);return(0,l.sY)({ourProps:{ref:I,id:C,"aria-hidden":!0,onClick:r},theirProps:e,slot:i,defaultTag:"div",name:"Dialog.Overlay"})})),ne=(0,l.yV)((function(e,g){let[{dialogState:t},n]=q("Dialog.Backdrop"),I=(0,a.T)(g),C=`headlessui-dialog-backdrop-${(0,A.M)()}`;(0,o.useEffect)((()=>{if(null===n.panelRef.current)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")}),[n.panelRef]);let r=(0,o.useMemo)((()=>({open:0===t})),[t]);return o.createElement(k,{force:!0},o.createElement(F,null,(0,l.sY)({ourProps:{ref:I,id:C,"aria-hidden":!0},theirProps:e,slot:r,defaultTag:"div",name:"Dialog.Backdrop"})))})),Ie=(0,l.yV)((function(e,g){let[{dialogState:t},n]=q("Dialog.Panel"),I=(0,a.T)(g,n.panelRef),C=`headlessui-dialog-panel-${(0,A.M)()}`,r=(0,o.useMemo)((()=>({open:0===t})),[t]);return(0,l.sY)({ourProps:{ref:I,id:C},theirProps:e,slot:r,defaultTag:"div",name:"Dialog.Panel"})})),Ce=(0,l.yV)((function(e,g){let[{dialogState:t,setTitleId:n}]=q("Dialog.Title"),I=`headlessui-dialog-title-${(0,A.M)()}`,C=(0,a.T)(g);(0,o.useEffect)((()=>(n(I),()=>n(null))),[I,n]);let r=(0,o.useMemo)((()=>({open:0===t})),[t]);return(0,l.sY)({ourProps:{ref:C,id:I},theirProps:e,slot:r,defaultTag:"h2",name:"Dialog.Title"})})),re=Object.assign(ge,{Backdrop:ne,Panel:Ie,Overlay:te,Title:Ce,Description:M});var oe=t(8473),ie=t(1422);function le(e,g,t,n,I,C,r){try{var o=e[C](r),i=o.value}catch(l){return void t(l)}o.done?g(i):Promise.resolve(i).then(n,I)}function ae(e,g,t){return g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}function se(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(g){ae(e,g,t[g])}))}return e}var ce={show:!1},Ae=(0,o.createContext)({state:ce,setState:function(){}});function ue(e){var g=e.children,t=(0,o.useState)(ce),n=t[0],I=t[1];return(0,C.jsx)(Ae.Provider,{value:{state:n,setState:I},children:g})}function de(){var e=(0,o.useContext)(Ae);if(void 0===e)throw(0,oe.$T)("useModal","ModalProvider");return{show:function(g){return e.setState({show:!0,body:g})},hide:function(){return e.setState(se({},e.state,{show:!1}))}}}function he(){var e=(0,o.useContext)(Ae);if(void 0===e)throw(0,oe.$T)("useModal","ModalProvider");var g=e.state,t=g.body,n=g.show,I=e.setState;return(0,C.jsx)(r.u,{appear:!0,show:n,as:o.Fragment,children:(0,C.jsxs)(re,{as:"div",className:"relative z-50",onClose:function(){return I(se({},e.state,{show:!1}))},children:[(0,C.jsx)(r.u.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,C.jsx)("div",{className:"fixed inset-0 bg-black/25"})}),(0,C.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,C.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,C.jsx)(r.u.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:t})})})]})})}var me=(0,o.forwardRef)((function(e,g){var t=e.title,n=e.description,I=e.buttons,r=e.children;return(0,C.jsxs)(re.Panel,{className:"w-full max-w-sm transform overflow-hidden transition-all bg-white p-6 shadow-xl rounded-2xl space-y-4",ref:g,children:[t&&(0,C.jsx)(re.Title,{children:t}),n&&(0,C.jsx)(re.Description,{children:n}),(0,C.jsxs)("div",{className:"w-full flex flex-col",children:[r,(0,C.jsx)("div",{className:"flex justify-center items-center space-x-4",children:I})]})]})})),be=(0,o.forwardRef)((function(e,g){var t=e.confirmText,n=void 0===t?"Confirm":t,r=e.cancelText,i=void 0===r?"Cancel":r,l=e.onConfirm,a=e.title,s=e.description,c=void 0===s?"Are you sure?":s,A=(0,o.useState)(!1),u=A[0],d=A[1],h=de().hide,m=function(){var e,g=(e=I().mark((function e(){var g;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d(!0),e.prev=1,g=l(h),e.t0=(t=g,null!=(n=Promise)&&"undefined"!==typeof Symbol&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](t):t instanceof n),!e.t0){e.next=7;break}return e.next=7,g;case 7:e.next=12;break;case 9:e.prev=9,e.t1=e.catch(1),console.error(e.t1);case 12:return e.prev=12,d(!1),e.finish(12);case 15:case"end":return e.stop()}var t,n}),e,null,[[1,9,12,15]])})),function(){var g=this,t=arguments;return new Promise((function(n,I){var C=e.apply(g,t);function r(e){le(C,n,I,r,o,"next",e)}function o(e){le(C,n,I,r,o,"throw",e)}r(void 0)}))});return function(){return g.apply(this,arguments)}}();return(0,C.jsx)(me,{title:a,description:c,ref:g,buttons:[(0,C.jsx)(ie.zx,{onClick:m,disabled:u,children:n},"confirm"),(0,C.jsx)(ie.zx,{onClick:h,variant:"secondary",children:i},"cancel")]})}))},3465:function(e,g,t){"use strict";t.d(g,{F:function(){return o}});var n=t(5893),I=(t(7294),t(9008)),C=t.n(I),r=function(e){var g=e.title,t=e.subTitle,I=e.children,r="".concat(t," | ").concat(g);return(0,n.jsxs)(C(),{children:[(0,n.jsx)("title",{children:r}),(0,n.jsx)("meta",{property:"og:title",content:r},"title"),I]})};function o(e){var g=e.children,t=e.subtitle,I=e.title,C=void 0===I?"Decash Send Platform":I,o=e.logo,i=void 0!==o&&o;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r,{title:C,subTitle:t}),t&&(0,n.jsx)("h1",{className:"font-bold text-3xl mb-4",children:t}),(0,n.jsxs)("div",{className:"relative mx-auto flex flex-col rounded-xl border-2 border-gray-100 shadow-xl shadow-gray-100 bg-white p-8 w-full md:w-4/6 lg:w-3/6 xl:w-2/6",children:[(0,n.jsx)("div",{children:i&&(0,n.jsx)("img",{src:"/img/logo.webp",alt:"DeCash",className:"mx-auto mb-7 max-w-[50%] w-44"})}),g]})]})}},287:function(e,g,t){"use strict";t.d(g,{gx:function(){return R},Ho:function(){return p},aC:function(){return Z}});var n=t(4051),I=t.n(n),C=t(5893),r=t(4931),o=t(1422),i=t(5734),l=t(3465),a=t(4319),s=t(5549),c=t(581),A=t(737),u=t(7294),d=t(8473);function h(e,g,t,n,I,C,r){try{var o=e[C](r),i=o.value}catch(l){return void t(l)}o.done?g(i):Promise.resolve(i).then(n,I)}function m(e){return function(){var g=this,t=arguments;return new Promise((function(n,I){var C=e.apply(g,t);function r(e){h(C,n,I,r,o,"next",e)}function o(e){h(C,n,I,r,o,"throw",e)}r(void 0)}))}}var b=(0,u.createContext)(void 0);function p(e){var g=e.children,t=(0,u.useState)(!1),n=t[0],r=t[1],o=(0,u.useState)(!1),i=o[0],l=o[1],c=(0,u.useState)(),A=c[0],d=c[1],h=(0,u.useState)([]),p=h[0],Z=h[1],y=(0,u.useState)(s.Jb.TestNet),G=y[0],B=y[1],f=(0,u.useCallback)(function(){var e=m(I().mark((function e(g){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.nU)(G,null!==g&&void 0!==g?g:p);case 2:return t=e.sent,Z(t),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(g){return e.apply(this,arguments)}}(),[G,p]),v=(0,u.useCallback)(function(){var e=m(I().mark((function e(g){var t,n,C;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=2;break}throw a.Cn;case 2:return r((function(){return!0})),e.prev=3,e.next=6,(0,a.UP)(g,G);case 6:return t=e.sent,e.next=9,(0,a.Ln)(t,g,G);case 9:return n=e.sent,e.t0=f,e.next=13,(0,a.LT)(G,n);case 13:return e.t1=e.sent,e.next=16,(0,e.t0)(e.t1);case 16:return C=e.sent,d((function(){return{type:g,agent:t}})),e.abrupt("return",C);case 21:throw e.prev=21,e.t2=e.catch(3),e.t2;case 24:return e.prev=24,r((function(){return!1})),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[3,21,24,27]])})));return function(g){return e.apply(this,arguments)}}(),[G]),S=(0,u.useCallback)((function(e){return B(e||function(e){return e===s.Jb.MainNet?s.Jb.TestNet:s.Jb.MainNet})}),[v,null===A||void 0===A?void 0:A.type]),V=(0,u.useCallback)(m(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l((function(){return!0})),e.prev=1,!(null===A||void 0===A?void 0:A.agent)||!A.type){e.next=5;break}return e.next=5,(0,a.co)(A.agent,A.type,G);case 5:d((function(){})),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),e.t0;case 11:return e.prev=11,l((function(){return!1})),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])}))),[G,null===A||void 0===A?void 0:A.agent,null===A||void 0===A?void 0:A.type]),W=(0,u.useMemo)((function(){return void 0!==A}),[A]);(0,u.useEffect)((function(){(null===A||void 0===A?void 0:A.type)&&v(A.type)}),[G]);var R={wallet:A,connected:W,connecting:n,disconnecting:i,connect:v,disconnect:W?V:void 0,chain:G,switchChain:S,accounts:p,updateAccounts:f};return(0,C.jsx)(b.Provider,{value:R,children:g})}function Z(){var e=(0,u.useContext)(b);if(void 0===e)throw(0,d.$T)("useAuth","AuthProvider");return e}var y=t(1664),G=t.n(y),B=t(1163),f=t.n(B);function v(e,g,t,n,I,C,r){try{var o=e[C](r),i=o.value}catch(l){return void t(l)}o.done?g(i):Promise.resolve(i).then(n,I)}function S(e){return function(){var g=this,t=arguments;return new Promise((function(n,I){var C=e.apply(g,t);function r(e){v(C,n,I,r,o,"next",e)}function o(e){v(C,n,I,r,o,"throw",e)}r(void 0)}))}}function V(e,g,t){return g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}function W(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(g){V(e,g,t[g])}))}return e}function R(e){e=null!==e?e:function(e){throw e}(new TypeError("Cannot destructure undefined"));var g=Z(),t=g.connect,n=g.connecting,u=(0,B.useRouter)(),d="/instructions".concat(u.asPath.replace(RegExp("^".concat(u.pathname)),"")),h=(0,c.mv)(),m=function(){var e=S(I().mark((function e(g){var n,C,r,o,i,l;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(g);case 2:n=e.sent,i=null!==(o=null!==(r=null!==(C=n.find((function(e){var g;return e.address===(null===(g=h.state.tx)||void 0===g?void 0:g.from)})))&&void 0!==C?C:n.find((function(e){return e.seed===a.ub})))&&void 0!==r?r:n.find((function(e){return void 0===e.seed})))&&void 0!==o?o:n[0],l=i.address,h.setState(W({},h.state,{tx:W({},h.state.tx,{from:l}),txType:A.Z.TRANSFER_TOKENS}),"/");case 6:case"end":return e.stop()}}),e)})));return function(g){return e.apply(this,arguments)}}();return(0,C.jsx)(l.F,{subtitle:"Select How To Sign In",children:(0,C.jsxs)("form",{className:"flex flex-col justify-center items-center gap-6",children:[(0,C.jsxs)("div",{className:"w-full grid gap-2",children:[(0,C.jsxs)("button",{type:"button",className:"inline-flex justify-center items-center space-x-2 px-4 py-2 border border-transparent text-xs font-medium rounded-md text-gray-900 bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:bg-gray-100 disabled:cursor-not-allowed",onClick:function(){return m(s.Sq.PeraWallet)},disabled:n,children:[(0,C.jsx)(i.Z,{name:"peraWallet",className:"h-5 w-5 rounded bg-yellow-300"}),(0,C.jsx)("span",{children:"Pera wallet"})]}),(0,C.jsxs)("button",{type:"button",onClick:function(){return m(s.Sq.MyAlgoWallet)},className:"inline-flex justify-center items-center space-x-2 px-4 py-2 border border-transparent text-xs font-medium rounded-md text-gray-900 bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:n,children:[(0,C.jsx)(i.Z,{name:"myAlgoWallet",className:"h-5 w-5 rounded"}),(0,C.jsx)("span",{children:"MyAlgoWallet"})]}),(0,C.jsxs)("button",{type:"button",onClick:S(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m(s.Sq.AlgoSigner);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),r.Am.error(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),className:"inline-flex justify-center items-center space-x-2 px-4 py-2 border border-transparent text-xs font-medium rounded-md text-gray-900 bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:n,children:[(0,C.jsx)(i.Z,{name:"algoSigner",className:"h-5 w-5 rounded"}),(0,C.jsx)("span",{children:"AlgoSigner"})]}),(0,C.jsxs)("button",{type:"button",disabled:!0,className:"inline-flex justify-center items-center space-x-2 px-4 py-2 border border-transparent text-xs font-medium rounded-md text-gray-900 bg-gray-50 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[(0,C.jsx)(i.Z,{name:"decash",className:"h-5 w-5 rounded"}),(0,C.jsx)("span",{children:"DeCash Wallet"})]})]}),(0,C.jsxs)("div",{className:"text-center flex-col items-center justify-center text-xs text-gray-800 font-medium",children:[(0,C.jsx)("p",{children:"Don\u2019t have a wallet yet?"}),(0,C.jsxs)("p",{children:[(0,C.jsx)(G(),{href:d,children:(0,C.jsx)("a",{className:"underline text-blue-500",children:"Click here"})})," ","to get one! It\u2019s simple."]})]}),(0,C.jsx)(o.zx,{onClick:function(e){return e.preventDefault(),f().back()},variant:"secondary",children:"Back"})]})})}},737:function(e,g,t){"use strict";var n;t.d(g,{Z:function(){return n}}),function(e){e.TRANSFER_TOKENS="transfer-tokens",e.MANY_TO_ONE_TRANSFER="many-to-one-transfer",e.ONE_TO_MANY_TRANSFER="one-to-many-transfer"}(n||(n={}))},581:function(e,g,t){"use strict";t.d(g,{FE:function(){return Ln},mv:function(){return a}});var n=t(7294),I=t(7673),C=t(1163);function r(e,g,t){return g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}function o(){var e=(0,C.useRouter)();return{state:e.query,setState:function(g,t){var n=Object.keys(g).filter((function(e){return void 0!==g[e]&&""!==e})).reduce((function(e,t){return function(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(g){r(e,g,t[g])}))}return e}({},e,r({},t,g[t]))}),{});t&&t!==e.pathname?e.push({pathname:t,query:n}):e.push("".concat(e.pathname,"?").concat((0,I.stringify)(n)),void 0,{shallow:!0})}}}function i(e,g,t){return g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}function l(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(g){i(e,g,t[g])}))}return e}var a=function(){var e,g=o(),t=(0,n.useMemo)((function(){var e;return(null===(e=g.state)||void 0===e?void 0:e.tx)?JSON.parse(g.state.tx):void 0}),[null===(e=g.state)||void 0===e?void 0:e.tx]);return{state:(0,n.useMemo)((function(){return l({},g.state,{tx:t?l({},t,{value:(null===t||void 0===t?void 0:t.value)?+t.value:void 0}):void 0,redirectWaitForConfirmation:"true"===g.state.redirectWaitForConfirmation||"false"!==g.state.redirectWaitForConfirmation&&void 0})}),[t,g.state]),setState:(0,n.useCallback)((function(e,t){var n;g.setState(l({},e,{tx:e.tx?JSON.stringify(l({},e.tx)):void 0,redirectWaitForConfirmation:null===e||void 0===e||null===(n=e.redirectWaitForConfirmation)||void 0===n?void 0:n.toString()}),t)}),[g])}},s=t(4051),c=t.n(s),A=t(5893),u=e=>"checkbox"===e.type,d=e=>e instanceof Date,h=e=>null==e;const m=e=>"object"===typeof e;var b=e=>!h(e)&&!Array.isArray(e)&&m(e)&&!d(e),p=e=>b(e)&&e.target?u(e.target)?e.target.checked:e.target.value:e,Z=(e,g)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(g)),y=e=>Array.isArray(e)?e.filter(Boolean):[],G=e=>void 0===e,B=(e,g,t)=>{if(!g||!b(e))return t;const n=y(g.split(/[,[\].]+?/)).reduce(((e,g)=>h(e)?e:e[g]),e);return G(n)||n===e?G(e[g])?t:e[g]:n};const f="blur",v="focusout",S="onBlur",V="onChange",W="onSubmit",R="onTouched",k="all",X="max",J="min",w="maxLength",Y="minLength",H="pattern",N="required",F="validate";n.createContext(null);var K=(e,g,t,n=!0)=>{const I={};for(const C in e)Object.defineProperty(I,C,{get:()=>{const I=C;return g[I]!==k&&(g[I]=!n||k),t&&(t[I]=!0),e[I]}});return I},E=e=>b(e)&&!Object.keys(e).length,x=(e,g,t)=>{const{name:n,...I}=e;return E(I)||Object.keys(I).length>=Object.keys(g).length||Object.keys(I).find((e=>g[e]===(!t||k)))},M=e=>Array.isArray(e)?e:[e];function U(e){const g=n.useRef(e);g.current=e,n.useEffect((()=>{const t=!e.disabled&&g.current.subject.subscribe({next:g.current.callback});return()=>(e=>{e&&e.unsubscribe()})(t)}),[e.disabled])}var T=e=>"string"===typeof e,z=(e,g,t,n)=>{const I=Array.isArray(e);return T(e)?(n&&g.watch.add(e),B(t,e)):I?e.map((e=>(n&&g.watch.add(e),B(t,e)))):(n&&(g.watchAll=!0),t)},L=e=>"function"===typeof e,Q=e=>{for(const g in e)if(L(e[g]))return!0;return!1};var D=(e,g,t,n,I)=>g?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[n]:I||!0}}:{},j=e=>/^\w*$/.test(e),O=e=>y(e.replace(/["|']|\]/g,"").split(/\.|\[/));function P(e,g,t){let n=-1;const I=j(g)?[g]:O(g),C=I.length,r=C-1;for(;++n<C;){const g=I[n];let C=t;if(n!==r){const t=e[g];C=b(t)||Array.isArray(t)?t:isNaN(+I[n+1])?{}:[]}e[g]=C,e=e[g]}return e}const _=(e,g,t)=>{for(const n of t||Object.keys(e)){const t=B(e,n);if(t){const{_f:e,...n}=t;if(e&&g(e.name)){if(e.ref.focus&&G(e.ref.focus()))break;if(e.refs){e.refs[0].focus();break}}else b(n)&&_(n,g)}}};var q=(e,g,t)=>!t&&(g.watchAll||g.watch.has(e)||[...g.watch].some((g=>e.startsWith(g)&&/^\.\w+/.test(e.slice(g.length)))));function $(e){let g;const t=Array.isArray(e);if(e instanceof Date)g=new Date(e);else if(e instanceof Set)g=new Set(e);else if(globalThis.Blob&&e instanceof Blob)g=e;else if(globalThis.FileList&&e instanceof FileList)g=e;else{if(!t&&!b(e))return e;g=t?[]:{};for(const t in e)g[t]=L(e[t])?e[t]:$(e[t])}return g}function ee(e,g){const t=j(g)?[g]:O(g),n=1==t.length?e:function(e,g){const t=g.slice(0,-1).length;let n=0;for(;n<t;)e=G(e)?n++:e[g[n++]];return e}(e,t),I=t[t.length-1];let C;n&&delete n[I];for(let r=0;r<t.slice(0,-1).length;r++){let g,n=-1;const I=t.slice(0,-(r+1)),o=I.length-1;for(r>0&&(C=e);++n<I.length;){const t=I[n];g=g?g[t]:e[t],o===n&&(b(g)&&E(g)||Array.isArray(g)&&!g.filter((e=>!G(e))).length)&&(C?delete C[t]:delete e[t]),C=g}}return e}function ge(){let e=[];return{get observers(){return e},next:g=>{for(const t of e)t.next(g)},subscribe:g=>(e.push(g),{unsubscribe:()=>{e=e.filter((e=>e!==g))}}),unsubscribe:()=>{e=[]}}}var te=e=>h(e)||!m(e);function ne(e,g){if(te(e)||te(g))return e===g;if(d(e)&&d(g))return e.getTime()===g.getTime();const t=Object.keys(e),n=Object.keys(g);if(t.length!==n.length)return!1;for(const I of t){const t=e[I];if(!n.includes(I))return!1;if("ref"!==I){const e=g[I];if(d(t)&&d(e)||b(t)&&b(e)||Array.isArray(t)&&Array.isArray(e)?!ne(t,e):t!==e)return!1}}return!0}var Ie=e=>({isOnSubmit:!e||e===W,isOnBlur:e===S,isOnChange:e===V,isOnAll:e===k,isOnTouch:e===R}),Ce=e=>"boolean"===typeof e,re=e=>"file"===e.type,oe=e=>e instanceof HTMLElement,ie=e=>"select-multiple"===e.type,le=e=>"radio"===e.type,ae="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document,se=e=>oe(e)&&e.isConnected;function ce(e,g={}){const t=Array.isArray(e);if(b(e)||t)for(const n in e)Array.isArray(e[n])||b(e[n])&&!Q(e[n])?(g[n]=Array.isArray(e[n])?[]:{},ce(e[n],g[n])):h(e[n])||(g[n]=!0);return g}function Ae(e,g,t){const n=Array.isArray(e);if(b(e)||n)for(const I in e)Array.isArray(e[I])||b(e[I])&&!Q(e[I])?G(g)||te(t[I])?t[I]=Array.isArray(e[I])?ce(e[I],[]):{...ce(e[I])}:Ae(e[I],h(g)?{}:g[I],t[I]):t[I]=!ne(e[I],g[I]);return t}var ue=(e,g)=>Ae(e,g,ce(g));const de={value:!1,isValid:!1},he={value:!0,isValid:!0};var me=e=>{if(Array.isArray(e)){if(e.length>1){const g=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:g,isValid:!!g.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!G(e[0].attributes.value)?G(e[0].value)||""===e[0].value?he:{value:e[0].value,isValid:!0}:he:de}return de},be=(e,{valueAsNumber:g,valueAsDate:t,setValueAs:n})=>G(e)?e:g?""===e?NaN:+e:t&&T(e)?new Date(e):n?n(e):e;const pe={isValid:!1,value:null};var Ze=e=>Array.isArray(e)?e.reduce(((e,g)=>g&&g.checked&&!g.disabled?{isValid:!0,value:g.value}:e),pe):pe;function ye(e){const g=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):g.disabled))return re(g)?g.files:le(g)?Ze(e.refs).value:ie(g)?[...g.selectedOptions].map((({value:e})=>e)):u(g)?me(e.refs).value:be(G(g.value)?e.ref.value:g.value,e)}var Ge=e=>e instanceof RegExp,Be=e=>G(e)?void 0:Ge(e)?e.source:b(e)?Ge(e.value)?e.value.source:e.value:e;function fe(e,g,t){const n=B(e,t);if(n||j(t))return{error:n,name:t};const I=t.split(".");for(;I.length;){const n=I.join("."),C=B(g,n),r=B(e,n);if(C&&!Array.isArray(C)&&t!==n)return{name:t};if(r&&r.type)return{name:n,error:r};I.pop()}return{name:t}}var ve=e=>T(e)||n.isValidElement(e);function Se(e,g,t="validate"){if(ve(e)||Array.isArray(e)&&e.every(ve)||Ce(e)&&!e)return{type:t,message:ve(e)?e:"",ref:g}}var Ve=e=>b(e)&&!Ge(e)?e:{value:e,message:""},We=async(e,g,t,n)=>{const{ref:I,refs:C,required:r,maxLength:o,minLength:i,min:l,max:a,pattern:s,validate:c,name:A,valueAsNumber:d,mount:m,disabled:p}=e._f;if(!m||p)return{};const Z=C?C[0]:I,y=e=>{n&&Z.reportValidity&&(Z.setCustomValidity(Ce(e)?"":e||" "),Z.reportValidity())},G={},B=le(I),f=u(I),v=B||f,S=(d||re(I))&&!I.value||""===g||Array.isArray(g)&&!g.length,V=D.bind(null,A,t,G),W=(e,g,t,n=w,C=Y)=>{const r=e?g:t;G[A]={type:e?n:C,message:r,ref:I,...V(e?n:C,r)}};if(r&&(!v&&(S||h(g))||Ce(g)&&!g||f&&!me(C).isValid||B&&!Ze(C).isValid)){const{value:e,message:g}=ve(r)?{value:!!r,message:r}:Ve(r);if(e&&(G[A]={type:N,message:g,ref:Z,...V(N,g)},!t))return y(g),G}if(!S&&(!h(l)||!h(a))){let e,n;const C=Ve(a),r=Ve(l);if(isNaN(g)){const t=I.valueAsDate||new Date(g);T(C.value)&&(e=t>new Date(C.value)),T(r.value)&&(n=t<new Date(r.value))}else{const t=I.valueAsNumber||+g;h(C.value)||(e=t>C.value),h(r.value)||(n=t<r.value)}if((e||n)&&(W(!!e,C.message,r.message,X,J),!t))return y(G[A].message),G}if((o||i)&&!S&&T(g)){const e=Ve(o),n=Ve(i),I=!h(e.value)&&g.length>e.value,C=!h(n.value)&&g.length<n.value;if((I||C)&&(W(I,e.message,n.message),!t))return y(G[A].message),G}if(s&&!S&&T(g)){const{value:e,message:n}=Ve(s);if(Ge(e)&&!g.match(e)&&(G[A]={type:H,message:n,ref:I,...V(H,n)},!t))return y(n),G}if(c)if(L(c)){const e=Se(await c(g),Z);if(e&&(G[A]={...e,...V(F,e.message)},!t))return y(e.message),G}else if(b(c)){let e={};for(const n in c){if(!E(e)&&!t)break;const I=Se(await c[n](g),Z,n);I&&(e={...I,...V(n,I.message)},y(I.message),t&&(G[A]=e))}if(!E(e)&&(G[A]={ref:Z,...e},!t))return G}return y(!0),G};const Re={mode:W,reValidateMode:V,shouldFocusError:!0};function ke(e={}){let g,t={...Re,...e},n={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},I={},C=$(t.defaultValues)||{},r=t.shouldUnregister?{}:$(C),o={action:!1,mount:!1,watch:!1},i={mount:new Set,unMount:new Set,array:new Set,watch:new Set},l=0,a={};const s={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},c={watch:ge(),array:ge(),state:ge()},A=Ie(t.mode),m=Ie(t.reValidateMode),b=t.criteriaMode===k,S=async e=>{let g=!1;return s.isValid&&(g=t.resolver?E((await J()).errors):await w(I,!0),e||g===n.isValid||(n.isValid=g,c.state.next({isValid:g}))),g},V=(e,g)=>(P(n.errors,e,g),c.state.next({errors:n.errors})),W=(e,g,t,n)=>{const i=B(I,e);if(i){const I=B(r,e,G(t)?B(C,e):t);G(I)||n&&n.defaultChecked||g?P(r,e,g?I:ye(i._f)):N(e,I),o.mount&&S()}},R=(e,g,t,I,r)=>{let o=!1;const i={name:e},l=B(n.touchedFields,e);if(s.isDirty){const e=n.isDirty;n.isDirty=i.isDirty=Y(),o=e!==i.isDirty}if(s.dirtyFields&&(!t||I)){const t=B(n.dirtyFields,e);ne(B(C,e),g)?ee(n.dirtyFields,e):P(n.dirtyFields,e,!0),i.dirtyFields=n.dirtyFields,o=o||t!==B(n.dirtyFields,e)}return t&&!l&&(P(n.touchedFields,e,t),i.touchedFields=n.touchedFields,o=o||s.touchedFields&&l!==t),o&&r&&c.state.next(i),o?i:{}},X=async(t,I,C,r,o)=>{const i=B(n.errors,I),A=s.isValid&&n.isValid!==C;var u,d;if(e.delayError&&r?(g=g||(u=V,d=e.delayError,(...e)=>{clearTimeout(l),l=window.setTimeout((()=>u(...e)),d)}),g(I,r)):(clearTimeout(l),r?P(n.errors,I,r):ee(n.errors,I)),((r?!ne(i,r):i)||!E(o)||A)&&!t){const e={...o,...A?{isValid:C}:{},errors:n.errors,name:I};n={...n,...e},c.state.next(e)}a[I]--,s.isValidating&&!Object.values(a).some((e=>e))&&(c.state.next({isValidating:!1}),a={})},J=async e=>t.resolver?await t.resolver({...r},t.context,((e,g,t,n)=>{const I={};for(const C of e){const e=B(g,C);e&&P(I,C,e._f)}return{criteriaMode:t,names:[...e],fields:I,shouldUseNativeValidation:n}})(e||i.mount,I,t.criteriaMode,t.shouldUseNativeValidation)):{},w=async(e,g,I={valid:!0})=>{for(const C in e){const o=e[C];if(o){const{_f:e,...C}=o;if(e){const C=await We(o,B(r,e.name),b,t.shouldUseNativeValidation);if(C[e.name]&&(I.valid=!1,g))break;g||(C[e.name]?P(n.errors,e.name,C[e.name]):ee(n.errors,e.name))}C&&await w(C,g,I)}}return I.valid},Y=(e,g)=>(e&&g&&P(r,e,g),!ne(Q(),C)),H=(e,g,t)=>{const n={...o.mount?r:G(g)?C:T(e)?{[e]:g}:g};return z(e,i,n,t)},N=(e,g,t={})=>{const n=B(I,e);let C=g;if(n){const t=n._f;t&&(!t.disabled&&P(r,e,be(g,t)),C=ae&&oe(t.ref)&&h(g)?"":g,ie(t.ref)?[...t.ref.options].forEach((e=>e.selected=C.includes(e.value))):t.refs?u(t.ref)?t.refs.length>1?t.refs.forEach((e=>!e.disabled&&(e.checked=Array.isArray(C)?!!C.find((g=>g===e.value)):C===e.value))):t.refs[0]&&(t.refs[0].checked=!!C):t.refs.forEach((e=>e.checked=e.value===C)):re(t.ref)?t.ref.value="":(t.ref.value=C,t.ref.type||c.watch.next({name:e})))}(t.shouldDirty||t.shouldTouch)&&R(e,C,t.shouldTouch,t.shouldDirty,!0),t.shouldValidate&&U(e)},F=(e,g,t)=>{for(const n in g){const C=g[n],r=`${e}.${n}`,o=B(I,r);!i.array.has(e)&&te(C)&&(!o||o._f)||d(C)?N(r,C,t):F(r,C,t)}},K=(e,g,t={})=>{const o=B(I,e),l=i.array.has(e),a=$(g);P(r,e,a),l?(c.array.next({name:e,values:r}),(s.isDirty||s.dirtyFields)&&t.shouldDirty&&(n.dirtyFields=ue(C,r),c.state.next({name:e,dirtyFields:n.dirtyFields,isDirty:Y(e,a)}))):!o||o._f||h(a)?N(e,a,t):F(e,a,t),q(e,i)&&c.state.next({}),c.watch.next({name:e})},x=async e=>{const g=e.target;let C=g.name;const o=B(I,C);if(o){let s,u;const d=g.type?ye(o._f):p(e),h=e.type===f||e.type===v,Z=!((l=o._f).mount&&(l.required||l.min||l.max||l.maxLength||l.minLength||l.pattern||l.validate))&&!t.resolver&&!B(n.errors,C)&&!o._f.deps||((e,g,t,n,I)=>!I.isOnAll&&(!t&&I.isOnTouch?!(g||e):(t?n.isOnBlur:I.isOnBlur)?!e:!(t?n.isOnChange:I.isOnChange)||e))(h,B(n.touchedFields,C),n.isSubmitted,m,A),y=q(C,i,h);P(r,C,d),h?o._f.onBlur&&o._f.onBlur(e):o._f.onChange&&o._f.onChange(e);const G=R(C,d,h,!1),V=!E(G)||y;if(!h&&c.watch.next({name:C,type:e.type}),Z)return V&&c.state.next({name:C,...y?{}:G});if(!h&&y&&c.state.next({}),a[C]=(a[C],1),c.state.next({isValidating:!0}),t.resolver){const{errors:e}=await J([C]),g=fe(n.errors,I,C),t=fe(e,I,g.name||C);s=t.error,C=t.name,u=E(e)}else s=(await We(o,B(r,C),b,t.shouldUseNativeValidation))[C],u=await S(!0);o._f.deps&&U(o._f.deps),X(!1,C,u,s,G)}var l},U=async(e,g={})=>{let C,r;const o=M(e);if(c.state.next({isValidating:!0}),t.resolver){const g=await(async e=>{const{errors:g}=await J();if(e)for(const t of e){const e=B(g,t);e?P(n.errors,t,e):ee(n.errors,t)}else n.errors=g;return g})(G(e)?e:o);C=E(g),r=e?!o.some((e=>B(g,e))):C}else e?(r=(await Promise.all(o.map((async e=>{const g=B(I,e);return await w(g&&g._f?{[e]:g}:g)})))).every(Boolean),(r||n.isValid)&&S()):r=C=await w(I);return c.state.next({...!T(e)||s.isValid&&C!==n.isValid?{}:{name:e},...t.resolver?{isValid:C}:{},errors:n.errors,isValidating:!1}),g.shouldFocus&&!r&&_(I,(e=>B(n.errors,e)),e?o:i.mount),r},Q=e=>{const g={...C,...o.mount?r:{}};return G(e)?g:T(e)?B(g,e):e.map((e=>B(g,e)))},D=(e,g)=>({invalid:!!B((g||n).errors,e),isDirty:!!B((g||n).dirtyFields,e),isTouched:!!B((g||n).touchedFields,e),error:B((g||n).errors,e)}),j=(e,g={})=>{for(const o of e?M(e):i.mount)i.mount.delete(o),i.array.delete(o),B(I,o)&&(g.keepValue||(ee(I,o),ee(r,o)),!g.keepError&&ee(n.errors,o),!g.keepDirty&&ee(n.dirtyFields,o),!g.keepTouched&&ee(n.touchedFields,o),!t.shouldUnregister&&!g.keepDefaultValue&&ee(C,o));c.watch.next({}),c.state.next({...n,...g.keepDirty?{isDirty:Y()}:{}}),!g.keepIsValid&&S()},O=(e,g={})=>{let n=B(I,e);const l=Ce(g.disabled);return P(I,e,{_f:{...n&&n._f?n._f:{ref:{name:e}},name:e,mount:!0,...g}}),i.mount.add(e),n?l&&P(r,e,g.disabled?void 0:B(r,e,ye(n._f))):W(e,!0,g.value),{...l?{disabled:g.disabled}:{},...t.shouldUseNativeValidation?{required:!!g.required,min:Be(g.min),max:Be(g.max),minLength:Be(g.minLength),maxLength:Be(g.maxLength),pattern:Be(g.pattern)}:{},name:e,onChange:x,onBlur:x,ref:r=>{if(r){O(e,g),n=B(I,e);const t=G(r.value)&&r.querySelectorAll&&r.querySelectorAll("input,select,textarea")[0]||r,o=(e=>le(e)||u(e))(t),i=n._f.refs||[];if(o?i.find((e=>e===t)):t===n._f.ref)return;P(I,e,{_f:{...n._f,...o?{refs:[...i.filter(se),t,...Array.isArray(B(C,e))?[{}]:[]],ref:{type:t.type,name:e}}:{ref:t}}}),W(e,!1,void 0,t)}else n=B(I,e,{}),n._f&&(n._f.mount=!1),(t.shouldUnregister||g.shouldUnregister)&&(!Z(i.array,e)||!o.action)&&i.unMount.add(e)}}};return{control:{register:O,unregister:j,getFieldState:D,_executeSchema:J,_getWatch:H,_getDirty:Y,_updateValid:S,_removeUnmounted:()=>{for(const e of i.unMount){const g=B(I,e);g&&(g._f.refs?g._f.refs.every((e=>!se(e))):!se(g._f.ref))&&j(e)}i.unMount=new Set},_updateFieldArray:(e,g=[],t,i,l=!0,a=!0)=>{if(i&&t){if(o.action=!0,a&&Array.isArray(B(I,e))){const g=t(B(I,e),i.argA,i.argB);l&&P(I,e,g)}if(s.errors&&a&&Array.isArray(B(n.errors,e))){const g=t(B(n.errors,e),i.argA,i.argB);l&&P(n.errors,e,g),((e,g)=>{!y(B(e,g)).length&&ee(e,g)})(n.errors,e)}if(s.touchedFields&&a&&Array.isArray(B(n.touchedFields,e))){const g=t(B(n.touchedFields,e),i.argA,i.argB);l&&P(n.touchedFields,e,g)}s.dirtyFields&&(n.dirtyFields=ue(C,r)),c.state.next({isDirty:Y(e,g),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else P(r,e,g)},_getFieldArray:g=>y(B(o.mount?r:C,g,e.shouldUnregister?B(C,g,[]):[])),_subjects:c,_proxyFormState:s,get _fields(){return I},get _formValues(){return r},get _stateFlags(){return o},set _stateFlags(e){o=e},get _defaultValues(){return C},get _names(){return i},set _names(e){i=e},get _formState(){return n},set _formState(e){n=e},get _options(){return t},set _options(e){t={...t,...e}}},trigger:U,register:O,handleSubmit:(e,g)=>async C=>{C&&(C.preventDefault&&C.preventDefault(),C.persist&&C.persist());let o=!0,l=$(r);c.state.next({isSubmitting:!0});try{if(t.resolver){const{errors:e,values:g}=await J();n.errors=e,l=g}else await w(I);E(n.errors)?(c.state.next({errors:{},isSubmitting:!0}),await e(l,C)):(g&&await g({...n.errors},C),t.shouldFocusError&&_(I,(e=>B(n.errors,e)),i.mount))}catch(a){throw o=!1,a}finally{n.isSubmitted=!0,c.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:E(n.errors)&&o,submitCount:n.submitCount+1,errors:n.errors})}},watch:(e,g)=>L(e)?c.watch.subscribe({next:t=>e(H(void 0,g),t)}):H(e,g,!0),setValue:K,getValues:Q,reset:(g,t={})=>{const l=g||C,a=$(l),A=g&&!E(g)?a:C;if(t.keepDefaultValues||(C=l),!t.keepValues){if(t.keepDirtyValues)for(const e of i.mount)B(n.dirtyFields,e)?P(A,e,B(r,e)):K(e,B(A,e));else{if(ae&&G(g))for(const e of i.mount){const g=B(I,e);if(g&&g._f){const e=Array.isArray(g._f.refs)?g._f.refs[0]:g._f.ref;try{oe(e)&&e.closest("form").reset();break}catch(u){}}}I={}}r=e.shouldUnregister?t.keepDefaultValues?$(C):{}:a,c.array.next({values:A}),c.watch.next({values:A})}i={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!s.isValid||!!t.keepIsValid,o.watch=!!e.shouldUnregister,c.state.next({submitCount:t.keepSubmitCount?n.submitCount:0,isDirty:t.keepDirty||t.keepDirtyValues?n.isDirty:!(!t.keepDefaultValues||ne(g,C)),isSubmitted:!!t.keepIsSubmitted,dirtyFields:t.keepDirty||t.keepDirtyValues?n.dirtyFields:t.keepDefaultValues&&g?ue(C,g):{},touchedFields:t.keepTouched?n.touchedFields:{},errors:t.keepErrors?n.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},resetField:(e,g={})=>{B(I,e)&&(G(g.defaultValue)?K(e,B(C,e)):(K(e,g.defaultValue),P(C,e,g.defaultValue)),g.keepTouched||ee(n.touchedFields,e),g.keepDirty||(ee(n.dirtyFields,e),n.isDirty=g.defaultValue?Y(e,B(C,e)):Y()),g.keepError||(ee(n.errors,e),s.isValid&&S()),c.state.next({...n}))},clearErrors:e=>{e?M(e).forEach((e=>ee(n.errors,e))):n.errors={},c.state.next({errors:n.errors})},unregister:j,setError:(e,g,t)=>{const C=(B(I,e,{_f:{}})._f||{}).ref;P(n.errors,e,{...g,ref:C}),c.state.next({name:e,errors:n.errors,isValid:!1}),t&&t.shouldFocus&&C&&C.focus&&C.focus()},setFocus:(e,g={})=>{const t=B(I,e)._f,n=t.refs?t.refs[0]:t.ref;g.shouldSelect?n.select():n.focus()},getFieldState:D}}var Xe=t(4931);function Je(e,g,t){var I=this,C=(0,n.useRef)(null),r=(0,n.useRef)(0),o=(0,n.useRef)(null),i=(0,n.useRef)([]),l=(0,n.useRef)(),a=(0,n.useRef)(),s=(0,n.useRef)(e),c=(0,n.useRef)(!0);(0,n.useEffect)((function(){s.current=e}),[e]);var A=!g&&0!==g&&"undefined"!=typeof window;if("function"!=typeof e)throw new TypeError("Expected a function");g=+g||0;var u=!!(t=t||{}).leading,d=!("trailing"in t)||!!t.trailing,h="maxWait"in t,m=h?Math.max(+t.maxWait||0,g):null;(0,n.useEffect)((function(){return c.current=!0,function(){c.current=!1}}),[]);var b=(0,n.useMemo)((function(){var e=function(e){var g=i.current,t=l.current;return i.current=l.current=null,r.current=e,a.current=s.current.apply(t,g)},t=function(e,g){A&&cancelAnimationFrame(o.current),o.current=A?requestAnimationFrame(e):setTimeout(e,g)},n=function(e){if(!c.current)return!1;var t=e-C.current;return!C.current||t>=g||t<0||h&&e-r.current>=m},b=function(g){return o.current=null,d&&i.current?e(g):(i.current=l.current=null,a.current)},p=function e(){var I=Date.now();if(n(I))return b(I);if(c.current){var o=g-(I-C.current),i=h?Math.min(o,m-(I-r.current)):o;t(e,i)}},Z=function(){var s=Date.now(),A=n(s);if(i.current=[].slice.call(arguments),l.current=I,C.current=s,A){if(!o.current&&c.current)return r.current=C.current,t(p,g),u?e(C.current):a.current;if(h)return t(p,g),e(C.current)}return o.current||t(p,g),a.current};return Z.cancel=function(){o.current&&(A?cancelAnimationFrame(o.current):clearTimeout(o.current)),r.current=0,i.current=C.current=l.current=o.current=null},Z.isPending=function(){return!!o.current},Z.flush=function(){return o.current?b(Date.now()):a.current},Z}),[u,h,g,m,d,A]);return b}var we=t(1422),Ye=t(2197);function He(e){var g=e.size,t=void 0===g?225:g,I=e.value,C=e.alt,r=(0,n.useMemo)((function(){if(I){var e="".concat(t,"x").concat(t),g=encodeURIComponent(I);return"https://chart.googleapis.com/chart?chs=".concat(e,"&chld=L|2&cht=qr&chl=").concat(g)}}),[]);return r?(0,A.jsx)("div",{className:"border border-gray-200 rounded-lg",children:(0,A.jsx)("img",{src:r,alt:C,className:"rounded-md"})}):null}var Ne=t(2090),Fe=t.n(Ne),Ke={"Starting video failed":"Camera is unavailable/busy.","The request is not allowed by the user agent or the platform in the current context.":"Device permission declined."},Ee=function(e){var g=e.onScan,t=e.onError,n=e.validator;return(0,A.jsx)(Fe(),{onScan:function(e){if(e)return!n||n(e)?g(e):void 0},onError:function(e){console.error(e.code),null===t||void 0===t||t(Ke[e.message])}})},xe=t(287),Me=t(4319),Ue=t(5549),Te=t(8473),ze=t(737);function Le(e,g,t,n,I,C,r){try{var o=e[C](r),i=o.value}catch(l){return void t(l)}o.done?g(i):Promise.resolve(i).then(n,I)}function Qe(e){return function(){var g=this,t=arguments;return new Promise((function(n,I){var C=e.apply(g,t);function r(e){Le(C,n,I,r,o,"next",e)}function o(e){Le(C,n,I,r,o,"throw",e)}r(void 0)}))}}function De(e,g,t){return g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}function je(e,g){return null!=g&&"undefined"!==typeof Symbol&&g[Symbol.hasInstance]?!!g[Symbol.hasInstance](e):e instanceof g}function Oe(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(g){De(e,g,t[g])}))}return e}var Pe=function(){var e,g,t,I,r,o,i,l,s,u,d,h,m,b,p=(0,xe.aC)(),Z=p.connected,y=p.chain,G=p.wallet,B=p.accounts,f=(0,Ye.dd)(),v=(0,C.useRouter)(),S=a(),V=(0,n.useState)(),W=V[0],R=V[1],k=(0,n.useState)(),X=k[0],J=k[1],w=(0,n.useState)(),Y=w[0],H=w[1],N=(0,n.useState)(S.state)[0],F=function(e={}){const g=n.useRef(),[t,I]=n.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});g.current?g.current.control._options=e:g.current={...ke(e),formState:t};const C=g.current.control,r=n.useCallback((e=>{x(e,C._proxyFormState,!0)&&(C._formState={...C._formState,...e},I({...C._formState}))}),[C]);return U({subject:C._subjects.state,callback:r}),n.useEffect((()=>{C._stateFlags.mount||(C._proxyFormState.isValid&&C._updateValid(),C._stateFlags.mount=!0),C._stateFlags.watch&&(C._stateFlags.watch=!1,C._subjects.state.next({})),C._removeUnmounted()})),g.current.formState=K(t,C._proxyFormState),g.current}({mode:"all",defaultValues:{amount:"".concat(null!==(h=null===(e=S.state.tx)||void 0===e?void 0:e.value)&&void 0!==h?h:1),assetId:null!==(m=null===(g=S.state)||void 0===g||null===(t=g.tx)||void 0===t?void 0:t.token)&&void 0!==m?m:Ue.Ut.USDD,fromAddress:null!==(b=null===(I=S.state)||void 0===I||null===(r=I.tx)||void 0===r?void 0:r.from)&&void 0!==b?b:null===(o=B.find((function(e){return e.seed===Me.ub})))||void 0===o?void 0:o.address,toAddress:null===(i=S.state.tx)||void 0===i?void 0:i.to}}),E=function(e){if(R(e),e){if(je(e,Error))return;"RECEIVER_NOT_OPTED_IN"===e.errorId?F.setError("toAddress",{message:e.message}):"SENDER_NOT_ENOUGH_FUNDS"===e.errorId?F.setError("amount",{message:e.message}):"SENDER_NOT_OPTED_IN"!==e.errorId&&"NOT_ENOUGH_ALGOS"!==e.errorId||F.setError("fromAddress",{message:e.message})}else F.clearErrors(["amount","assetId","fromAddress","toAddress"])},M=F.watch(),T=M.amount,z=M.assetId,L=M.fromAddress,Q=M.toAddress,D=Je(Qe(c().mark((function e(){var g;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J("processing"),e.next=3,(0,Me.aY)({chain:y,params:{assetId:z,receiver:Q,sender:{address:L,amount:""!==T?Number(T):"max"}}});case 3:g=e.sent,J(g.payload),E(g.error);case 6:case"end":return e.stop()}}),e)}))),1e3);(0,n.useEffect)((function(){!function(){var e;S.setState(Oe({},S.state,{tx:Oe({},null!==(e=S.state.tx)&&void 0!==e?e:{},{from:L||void 0,to:Q||void 0,token:z||void 0,value:T?+T:void 0})})),Z&&z&&L&&Q&&T&&D()}()}),[T,z,y,L,Q]);var j=(0,n.useMemo)((function(){return Z?void 0!==W&&"errorId"in W&&!X?"RECHECK":"SEND":"SIGN_IN"}),[Z,W,X]),O=(0,n.useCallback)((function(e){var g=e.amount,t=e.fromAddress,n=e.assetId,I=e.toAddress;S.setState(Oe({},S.state,{txType:ze.Z.TRANSFER_TOKENS,tx:{to:I,from:t,value:+g,token:n}}),"/auth")}),[S]),P=(0,n.useCallback)(Qe(c().mark((function e(){var g,t,n,I,C,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H("processing"),e.prev=1,e.next=5,(0,Me.Dr)(G.agent,G.type,X,y);case 5:return I=e.sent,e.next=8,(0,Me.CF)({chain:y,params:I,throwError:!0});case 8:return C=e.sent,H(C.payload),E(void 0),e.next=13,v.push({pathname:"/receipt",query:Oe({txId:null===(g=C.payload)||void 0===g||null===(t=g.txIds)||void 0===t?void 0:t[0],txGroupId:null===(n=C.payload)||void 0===n?void 0:n.txGroupId},v.query)});case 13:e.next=21;break;case 15:e.prev=15,e.t0=e.catch(1),H(void 0),r=je(e.t0,Error)?e.t0:(0,Me.Bt)(e.t0)?e.t0.error:"message"in e.t0?Error(e.t0.message):void 0,E(r),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,15]])}))),[y,v,X,G]),_=F.handleSubmit((function(e){return"SIGN_IN"===j?O(e):"RECHECK"===j?D():void P()})),q=(0,n.useMemo)((function(){return"processing"!==X?null===X||void 0===X?void 0:X.info.asaFee:void 0}),[X]),$=S.state.redirectUrlSuccess||S.state.redirectUrlFailure,ee=!!$&&!!(null===(l=N.tx)||void 0===l?void 0:l.from),ge=!!$&&!!(null===(s=N.tx)||void 0===s?void 0:s.to),te=!!$&&!!(null===(u=N.tx)||void 0===u?void 0:u.value),ne=(0,n.useMemo)((function(){return F.formState.isSubmitting||"processing"===X||"processing"===Y||(0,Me.Zv)(W)||Object.values(F.formState.errors).length>0||"SIGN_IN"!==j&&void 0===X}),[W,F.formState.errors,F.formState.isSubmitting,Y,j,X]);return Oe({},F,{onSubmit:_,values:M,isAmountDisabled:te,isFromAddressDisabled:ee,isToAddressDisabled:ge,isSubmitButtonDisabled:ne,fee:q,submitType:j,handleCopyFromAddress:function(){f.show((0,A.jsx)(Ye.I4,{confirmText:"Copy",description:(0,A.jsxs)(A.Fragment,{children:["This address is capable of receiving"," ",(0,A.jsx)(we.ee,{href:"https://docs.decash.com/docs/concepts/tokens",target:"_blank",rel:"noreferrer",children:"DeCash Tokens"})," ","only. If you send"," ",(0,A.jsx)(we.ee,{href:"https://coinmarketcap.com/currencies/algorand/",target:"_blank",rel:"noreferrer",children:"Algo"})," ","to it, it will be lost."]}),onConfirm:function(){var e=Qe(c().mark((function e(g){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Te.Ts)((function(){return M.fromAddress}));case 2:g();case 3:case"end":return e.stop()}}),e)})));return function(g){return e.apply(this,arguments)}}()}))},handlePasteFromAddress:function(){return(0,Te.ar)((function(e){F.setValue("fromAddress",e),F.trigger("fromAddress",{shouldFocus:!0})}))},handlePasteToAddress:function(){return(0,Te.ar)((function(e){F.setValue("toAddress",e),F.trigger("toAddress",{shouldFocus:!0})}))},balance:L?null===(d=B.find((function(e){return e.address===L})))||void 0===d?void 0:d.balance:void 0,error:je(W,Error)||"NOT_ENOUGH_ALGOS"!==(null===W||void 0===W?void 0:W.errorId)&&"RECEIVER_NOT_OPTED_IN"!==(null===W||void 0===W?void 0:W.errorId)&&"SENDER_NOT_OPTED_IN"!==(null===W||void 0===W?void 0:W.errorId)&&"SENDER_NOT_ENOUGH_FUNDS"!==(null===W||void 0===W?void 0:W.errorId)?null===W||void 0===W?void 0:W.message:void 0,showQRCode:function(){f.show((0,A.jsxs)("div",{className:"flex items-center flex-col space-y-4 my-2",children:[(0,A.jsx)(He,{size:255,value:null===Q||void 0===Q?void 0:Q.toString()}),(0,A.jsx)("strong",{children:"To address"})]}))},showQrCodeScanner:function(){f.show((0,A.jsx)(Ee,{onScan:function(e){F.setValue("toAddress",e.text),F.trigger("toAddress",{shouldFocus:!0}),f.hide()},onError:function(e){Xe.ZP.error(e),f.hide()}}))}})};var _e=n.forwardRef((function(e,g){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:g},e),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 13l-5 5m0 0l-5-5m5 5V6"}))}));var qe=n.forwardRef((function(e,g){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:g},e),n.createElement("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h3a1 1 0 011 1v3a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm2 2V5h1v1H5zM3 13a1 1 0 011-1h3a1 1 0 011 1v3a1 1 0 01-1 1H4a1 1 0 01-1-1v-3zm2 2v-1h1v1H5zM13 3a1 1 0 00-1 1v3a1 1 0 001 1h3a1 1 0 001-1V4a1 1 0 00-1-1h-3zm1 2v1h1V5h-1z",clipRule:"evenodd"}),n.createElement("path",{d:"M11 4a1 1 0 10-2 0v1a1 1 0 002 0V4zM10 7a1 1 0 011 1v1h2a1 1 0 110 2h-3a1 1 0 01-1-1V8a1 1 0 011-1zM16 9a1 1 0 100 2 1 1 0 000-2zM9 13a1 1 0 011-1h1a1 1 0 110 2v2a1 1 0 11-2 0v-3zM7 11a1 1 0 100-2H4a1 1 0 100 2h3zM17 13a1 1 0 01-1 1h-2a1 1 0 110-2h2a1 1 0 011 1zM16 17a1 1 0 100-2h-3a1 1 0 100 2h3z"}))}));var $e=n.forwardRef((function(e,g){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:g},e),n.createElement("path",{d:"M7 9a2 2 0 012-2h6a2 2 0 012 2v6a2 2 0 01-2 2H9a2 2 0 01-2-2V9z"}),n.createElement("path",{d:"M5 3a2 2 0 00-2 2v6a2 2 0 002 2V5h8a2 2 0 00-2-2H5z"}))}));var eg=n.forwardRef((function(e,g){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:g},e),n.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"}))}));var gg=n.forwardRef((function(e,g){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:g},e),n.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),n.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))})),tg=t(4184),ng=t.n(tg);function Ig(e,g){(null==g||g>e.length)&&(g=e.length);for(var t=0,n=new Array(g);t<g;t++)n[t]=e[t];return n}function Cg(e,g){return function(e){if(Array.isArray(e))return e}(e)||function(e,g){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,I,C=[],r=!0,o=!1;try{for(t=t.call(e);!(r=(n=t.next()).done)&&(C.push(n.value),!g||C.length!==g);r=!0);}catch(i){o=!0,I=i}finally{try{r||null==t.return||t.return()}finally{if(o)throw I}}return C}}(e,g)||function(e,g){if(!e)return;if("string"===typeof e)return Ig(e,g);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ig(e,g)}(e,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rg=function(e){if(e){if("string"===typeof e)return rg([e]);if(r=e,null!=(o=Array)&&"undefined"!==typeof Symbol&&o[Symbol.hasInstance]?o[Symbol.hasInstance](r):r instanceof o){var g=Cg(e,3),t=g[0],n=g[1],I=void 0===n?"error":n,C=g[2];return rg({message:t,type:I,variant:void 0===C?"text":C})}var r,o,i=e.message,l=e.type,a=void 0===l?"error":l,s=e.variant,c=void 0===s?"text":s;if(""===i)throw Error("invalid feedback");return{message:i,type:a,variant:c}}},og=function(e){return(0,n.useMemo)((function(){return rg(e)}),[e])};function ig(e){var g=og(e.feedback);if(!g)return(0,A.jsx)(A.Fragment,{});var t=g.type,n=g.message,I=g.variant,C=(0,A.jsx)("span",{className:ng()("mt-1 text-center text-xs font-normal text-ellipsis overflow-hidden",{"text-red-400":"error"===t,"text-yellow-500":"warning"===t,"text-blue-300":"info"===t,"text-green-600":"success"===t}),children:n});return"text"===I?C:(0,A.jsx)("div",{className:ng()("flex flex-1 items-center p-5 border-2 rounded-lg",{"bg-red-50 border-red-400":"error"===t,"bg-yellow-50 border-yellow-500":"warning"===t,"bg-blue-50 border-blue-300":"info"===t,"bg-green-50 border-green-600":"success"===t}),children:C})}function lg(e){var g=e.label,t=e.entry,n=e.children,I=e.hint,C=e.feedback,r=void 0===C?t.props.feedback:C,o=e.variant,i=void 0===o?r||g||n||I?"vertical":"entry":o;return"entry"===i?t:(0,A.jsxs)("div",{className:ng()("flex flex-col"),children:[(0,A.jsxs)("div",{className:ng()("flex",{"flex-col space-y-2":"vertical"===i,"flex-row items-center space-x-2":"horizontal"===i}),children:[(0,A.jsxs)("div",{className:"flex flex-row justify-between text-xs mb-1 font-normal text-gray-700",children:[g&&(0,A.jsx)("label",{className:"flex",htmlFor:t.props.name,children:g}),I&&(0,A.jsx)("span",{className:"flex",children:I})]}),(0,A.jsxs)("div",{className:ng()("flex flex-row rounded-lg w-full flex-1 border-2 border-gray-100 divide-x-2 divide-gray-100 bg-gray-50",{"cursor-not-allowed":t.props.disabled}),children:[(0,A.jsx)("div",{className:"flex flex-1",children:t}),n]})]}),r&&(0,A.jsx)(ig,{feedback:r})]})}function ag(e,g,t){return g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}function sg(e,g){if(null==e)return{};var t,n,I=function(e,g){if(null==e)return{};var t,n,I={},C=Object.keys(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||(I[t]=e[t]);return I}(e,g);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(I[t]=e[t])}return I}function cg(e){var g=e.className,t=e.children,n=sg(e,["className","children"]);return(0,A.jsx)("button",function(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(g){ag(e,g,t[g])}))}return e}({type:"button",className:ng()("outline-none flex items-center px-3 text-sm text-gray-600 hover:text-gray-900 focus:outline-blue-500 focus:outline focus:outline-2",g)},n,{children:t}))}function Ag(e){return Ag="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ag(e)}function ug(e,g){if(!(e instanceof g))throw new TypeError("Cannot call a class as a function")}function dg(e,g){for(var t=0;t<g.length;t++){var n=g[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hg(e,g,t){return g&&dg(e.prototype,g),t&&dg(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mg(e,g){if("function"!==typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(g&&g.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),g&&pg(e,g)}function bg(e){return bg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},bg(e)}function pg(e,g){return pg=Object.setPrototypeOf||function(e,g){return e.__proto__=g,e},pg(e,g)}function Zg(e,g){if(null==e)return{};var t,n,I=function(e,g){if(null==e)return{};var t,n,I={},C=Object.keys(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||(I[t]=e[t]);return I}(e,g);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(I[t]=e[t])}return I}function yg(e,g){if(g&&("object"===typeof g||"function"===typeof g))return g;if(void 0!==g)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Gg(e){var g=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=bg(e);if(g){var I=bg(this).constructor;t=Reflect.construct(n,arguments,I)}else t=n.apply(this,arguments);return yg(this,t)}}function Bg(e,g){for(;!Object.prototype.hasOwnProperty.call(e,g)&&null!==(e=bg(e)););return e}function fg(){return fg="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,g,t){var n=Bg(e,g);if(n){var I=Object.getOwnPropertyDescriptor(n,g);return I.get?I.get.call(arguments.length<3?e:t):I.value}},fg.apply(this,arguments)}function vg(e,g,t,n){return vg="undefined"!==typeof Reflect&&Reflect.set?Reflect.set:function(e,g,t,n){var I,C=Bg(e,g);if(C){if((I=Object.getOwnPropertyDescriptor(C,g)).set)return I.set.call(n,t),!0;if(!I.writable)return!1}if(I=Object.getOwnPropertyDescriptor(n,g)){if(!I.writable)return!1;I.value=t,Object.defineProperty(n,g,I)}else!function(e,g,t){g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t}(n,g,t);return!0},vg(e,g,t,n)}function Sg(e,g,t,n,I){if(!vg(e,g,t,n||e)&&I)throw new Error("failed to set property");return t}function Vg(e,g){return function(e){if(Array.isArray(e))return e}(e)||function(e,g){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var n,I,C=[],r=!0,o=!1;try{for(t=t.call(e);!(r=(n=t.next()).done)&&(C.push(n.value),!g||C.length!==g);r=!0);}catch(i){o=!0,I=i}finally{try{r||null==t.return||t.return()}finally{if(o)throw I}}return C}(e,g)||function(e,g){if(!e)return;if("string"===typeof e)return Wg(e,g);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Wg(e,g)}(e,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wg(e,g){(null==g||g>e.length)&&(g=e.length);for(var t=0,n=new Array(g);t<g;t++)n[t]=e[t];return n}var Rg=function(){function e(g){ug(this,e),Object.assign(this,{inserted:"",rawInserted:"",skip:!1,tailShift:0},g)}return hg(e,[{key:"aggregate",value:function(e){return this.rawInserted+=e.rawInserted,this.skip=this.skip||e.skip,this.inserted+=e.inserted,this.tailShift+=e.tailShift,this}},{key:"offset",get:function(){return this.tailShift+this.inserted.length}}]),e}();function kg(e){return"string"===typeof e||e instanceof String}var Xg="NONE",Jg="LEFT",wg="FORCE_LEFT",Yg="RIGHT",Hg="FORCE_RIGHT";function Ng(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function Fg(e){return Array.isArray(e)?e:[e,new Rg]}function Kg(e,g){if(g===e)return!0;var t,n=Array.isArray(g),I=Array.isArray(e);if(n&&I){if(g.length!=e.length)return!1;for(t=0;t<g.length;t++)if(!Kg(g[t],e[t]))return!1;return!0}if(n!=I)return!1;if(g&&e&&"object"===Ag(g)&&"object"===Ag(e)){var C=g instanceof Date,r=e instanceof Date;if(C&&r)return g.getTime()==e.getTime();if(C!=r)return!1;var o=g instanceof RegExp,i=e instanceof RegExp;if(o&&i)return g.toString()==e.toString();if(o!=i)return!1;var l=Object.keys(g);for(t=0;t<l.length;t++)if(!Object.prototype.hasOwnProperty.call(e,l[t]))return!1;for(t=0;t<l.length;t++)if(!Kg(e[l[t]],g[l[t]]))return!1;return!0}return!(!g||!e||"function"!==typeof g||"function"!==typeof e)&&g.toString()===e.toString()}var Eg=function(){function e(g,t,n,I){for(ug(this,e),this.value=g,this.cursorPos=t,this.oldValue=n,this.oldSelection=I;this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos);)--this.oldSelection.start}return hg(e,[{key:"startChangePos",get:function(){return Math.min(this.cursorPos,this.oldSelection.start)}},{key:"insertedCount",get:function(){return this.cursorPos-this.startChangePos}},{key:"inserted",get:function(){return this.value.substr(this.startChangePos,this.insertedCount)}},{key:"removedCount",get:function(){return Math.max(this.oldSelection.end-this.startChangePos||this.oldValue.length-this.value.length,0)}},{key:"removed",get:function(){return this.oldValue.substr(this.startChangePos,this.removedCount)}},{key:"head",get:function(){return this.value.substring(0,this.startChangePos)}},{key:"tail",get:function(){return this.value.substring(this.startChangePos+this.insertedCount)}},{key:"removeDirection",get:function(){return!this.removedCount||this.insertedCount?Xg:this.oldSelection.end!==this.cursorPos&&this.oldSelection.start!==this.cursorPos||this.oldSelection.end!==this.oldSelection.start?Jg:Yg}}]),e}(),xg=function(){function e(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;ug(this,e),this.value=g,this.from=t,this.stop=n}return hg(e,[{key:"toString",value:function(){return this.value}},{key:"extend",value:function(e){this.value+=String(e)}},{key:"appendTo",value:function(e){return e.append(this.toString(),{tail:!0}).aggregate(e._appendPlaceholder())}},{key:"state",get:function(){return{value:this.value,from:this.from,stop:this.stop}},set:function(e){Object.assign(this,e)}},{key:"unshift",value:function(e){if(!this.value.length||null!=e&&this.from>=e)return"";var g=this.value[0];return this.value=this.value.slice(1),g}},{key:"shift",value:function(){if(!this.value.length)return"";var e=this.value[this.value.length-1];return this.value=this.value.slice(0,-1),e}}]),e}();function Mg(e){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Mg.InputMask(e,g)}var Ug=function(){function e(g){ug(this,e),this._value="",this._update(Object.assign({},e.DEFAULTS,g)),this.isInitialized=!0}return hg(e,[{key:"updateOptions",value:function(e){Object.keys(e).length&&this.withValueRefresh(this._update.bind(this,e))}},{key:"_update",value:function(e){Object.assign(this,e)}},{key:"state",get:function(){return{_value:this.value}},set:function(e){this._value=e._value}},{key:"reset",value:function(){this._value=""}},{key:"value",get:function(){return this._value},set:function(e){this.resolve(e)}},{key:"resolve",value:function(e){return this.reset(),this.append(e,{input:!0},""),this.doCommit(),this.value}},{key:"unmaskedValue",get:function(){return this.value},set:function(e){this.reset(),this.append(e,{},""),this.doCommit()}},{key:"typedValue",get:function(){return this.doParse(this.value)},set:function(e){this.value=this.doFormat(e)}},{key:"rawInputValue",get:function(){return this.extractInput(0,this.value.length,{raw:!0})},set:function(e){this.reset(),this.append(e,{raw:!0},""),this.doCommit()}},{key:"isComplete",get:function(){return!0}},{key:"isFilled",get:function(){return this.isComplete}},{key:"nearestInputPos",value:function(e,g){return e}},{key:"extractInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return this.value.slice(e,g)}},{key:"extractTail",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return new xg(this.extractInput(e,g),e)}},{key:"appendTail",value:function(e){return kg(e)&&(e=new xg(String(e))),e.appendTo(this)}},{key:"_appendCharRaw",value:function(e){return e?(this._value+=e,new Rg({inserted:e,rawInserted:e})):new Rg}},{key:"_appendChar",value:function(e){var g,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,I=this.state,C=Fg(this.doPrepare(e,t)),r=Vg(C,2);if(e=r[0],(g=(g=r[1]).aggregate(this._appendCharRaw(e,t))).inserted){var o,i=!1!==this.doValidate(t);if(i&&null!=n){var l=this.state;!0===this.overwrite&&(o=n.state,n.unshift(this.value.length));var a=this.appendTail(n);(i=a.rawInserted===n.toString())&&a.inserted||"shift"!==this.overwrite||(this.state=l,o=n.state,n.shift(),i=(a=this.appendTail(n)).rawInserted===n.toString()),i&&a.inserted&&(this.state=l)}i||(g=new Rg,this.state=I,n&&o&&(n.state=o))}return g}},{key:"_appendPlaceholder",value:function(){return new Rg}},{key:"_appendEager",value:function(){return new Rg}},{key:"append",value:function(e,g,t){if(!kg(e))throw new Error("value should be string");var n=new Rg,I=kg(t)?new xg(String(t)):t;g&&g.tail&&(g._beforeTailState=this.state);for(var C=0;C<e.length;++C)n.aggregate(this._appendChar(e[C],g,I));return null!=I&&(n.tailShift+=this.appendTail(I).tailShift),this.eager&&null!==g&&void 0!==g&&g.input&&e&&n.aggregate(this._appendEager()),n}},{key:"remove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return this._value=this.value.slice(0,e)+this.value.slice(g),new Rg}},{key:"withValueRefresh",value:function(e){if(this._refreshing||!this.isInitialized)return e();this._refreshing=!0;var g=this.rawInputValue,t=this.value,n=e();return this.rawInputValue=g,this.value&&this.value!==t&&0===t.indexOf(this.value)&&this.append(t.slice(this.value.length),{},""),delete this._refreshing,n}},{key:"runIsolated",value:function(e){if(this._isolated||!this.isInitialized)return e(this);this._isolated=!0;var g=this.state,t=e(this);return this.state=g,delete this._isolated,t}},{key:"doPrepare",value:function(e){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.prepare?this.prepare(e,this,g):e}},{key:"doValidate",value:function(e){return(!this.validate||this.validate(this.value,this,e))&&(!this.parent||this.parent.doValidate(e))}},{key:"doCommit",value:function(){this.commit&&this.commit(this.value,this)}},{key:"doFormat",value:function(e){return this.format?this.format(e,this):e}},{key:"doParse",value:function(e){return this.parse?this.parse(e,this):e}},{key:"splice",value:function(e,g,t,n){var I,C=e+g,r=this.extractTail(C);this.eager&&(n=function(e){switch(e){case Jg:return wg;case Yg:return Hg;default:return e}}(n),I=this.extractInput(0,C,{raw:!0}));var o=this.nearestInputPos(e,g>1&&0!==e&&!this.eager?Xg:n),i=new Rg({tailShift:o-e}).aggregate(this.remove(o));if(this.eager&&n!==Xg&&I===this.rawInputValue)if(n===wg)for(var l;I===this.rawInputValue&&(l=this.value.length);)i.aggregate(new Rg({tailShift:-1})).aggregate(this.remove(l-1));else n===Hg&&r.unshift();return i.aggregate(this.append(t,{input:!0},r))}},{key:"maskEquals",value:function(e){return this.mask===e}}]),e}();function Tg(e){if(null==e)throw new Error("mask property should be defined");return e instanceof RegExp?Mg.MaskedRegExp:kg(e)?Mg.MaskedPattern:e instanceof Date||e===Date?Mg.MaskedDate:e instanceof Number||"number"===typeof e||e===Number?Mg.MaskedNumber:Array.isArray(e)||e===Array?Mg.MaskedDynamic:Mg.Masked&&e.prototype instanceof Mg.Masked?e:e instanceof Mg.Masked?e.constructor:e instanceof Function?Mg.MaskedFunction:(console.warn("Mask not found for mask",e),Mg.Masked)}function zg(e){if(Mg.Masked&&e instanceof Mg.Masked)return e;var g=(e=Object.assign({},e)).mask;if(Mg.Masked&&g instanceof Mg.Masked)return g;var t=Tg(g);if(!t)throw new Error("Masked class is not found for provided mask, appropriate module needs to be import manually before creating mask.");return new t(e)}Ug.DEFAULTS={format:function(e){return e},parse:function(e){return e}},Mg.Masked=Ug,Mg.createMask=zg;var Lg=["mask"],Qg={0:/\d/,a:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./},Dg=function(){function e(g){ug(this,e);var t=g.mask,n=Zg(g,Lg);this.masked=zg({mask:t}),Object.assign(this,n)}return hg(e,[{key:"reset",value:function(){this.isFilled=!1,this.masked.reset()}},{key:"remove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length;return 0===e&&g>=1?(this.isFilled=!1,this.masked.remove(e,g)):new Rg}},{key:"value",get:function(){return this.masked.value||(this.isFilled&&!this.isOptional?this.placeholderChar:"")}},{key:"unmaskedValue",get:function(){return this.masked.unmaskedValue}},{key:"isComplete",get:function(){return Boolean(this.masked.value)||this.isOptional}},{key:"_appendChar",value:function(e){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.isFilled)return new Rg;var t=this.masked.state,n=this.masked._appendChar(e,g);return n.inserted&&!1===this.doValidate(g)&&(n.inserted=n.rawInserted="",this.masked.state=t),n.inserted||this.isOptional||this.lazy||g.input||(n.inserted=this.placeholderChar),n.skip=!n.inserted&&!this.isOptional,this.isFilled=Boolean(n.inserted),n}},{key:"append",value:function(){var e;return(e=this.masked).append.apply(e,arguments)}},{key:"_appendPlaceholder",value:function(){var e=new Rg;return this.isFilled||this.isOptional||(this.isFilled=!0,e.inserted=this.placeholderChar),e}},{key:"_appendEager",value:function(){return new Rg}},{key:"extractTail",value:function(){var e;return(e=this.masked).extractTail.apply(e,arguments)}},{key:"appendTail",value:function(){var e;return(e=this.masked).appendTail.apply(e,arguments)}},{key:"extractInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,t=arguments.length>2?arguments[2]:void 0;return this.masked.extractInput(e,g,t)}},{key:"nearestInputPos",value:function(e){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xg,t=0,n=this.value.length,I=Math.min(Math.max(e,t),n);switch(g){case Jg:case wg:return this.isComplete?I:t;case Yg:case Hg:return this.isComplete?I:n;default:return I}}},{key:"doValidate",value:function(){var e,g;return(e=this.masked).doValidate.apply(e,arguments)&&(!this.parent||(g=this.parent).doValidate.apply(g,arguments))}},{key:"doCommit",value:function(){this.masked.doCommit()}},{key:"state",get:function(){return{masked:this.masked.state,isFilled:this.isFilled}},set:function(e){this.masked.state=e.masked,this.isFilled=e.isFilled}}]),e}(),jg=function(){function e(g){ug(this,e),Object.assign(this,g),this._value="",this.isFixed=!0}return hg(e,[{key:"value",get:function(){return this._value}},{key:"unmaskedValue",get:function(){return this.isUnmasking?this.value:""}},{key:"reset",value:function(){this._isRawInput=!1,this._value=""}},{key:"remove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._value.length;return this._value=this._value.slice(0,e)+this._value.slice(g),this._value||(this._isRawInput=!1),new Rg}},{key:"nearestInputPos",value:function(e){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xg,t=0,n=this._value.length;switch(g){case Jg:case wg:return t;default:return n}}},{key:"extractInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._value.length,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.raw&&this._isRawInput&&this._value.slice(e,g)||""}},{key:"isComplete",get:function(){return!0}},{key:"isFilled",get:function(){return Boolean(this._value)}},{key:"_appendChar",value:function(e){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=new Rg;if(this._value)return t;var n=this.char===e,I=n&&(this.isUnmasking||g.input||g.raw)&&!this.eager&&!g.tail;return I&&(t.rawInserted=this.char),this._value=t.inserted=this.char,this._isRawInput=I&&(g.raw||g.input),t}},{key:"_appendEager",value:function(){return this._appendChar(this.char)}},{key:"_appendPlaceholder",value:function(){var e=new Rg;return this._value||(this._value=e.inserted=this.char),e}},{key:"extractTail",value:function(){return arguments.length>1&&void 0!==arguments[1]||this.value.length,new xg("")}},{key:"appendTail",value:function(e){return kg(e)&&(e=new xg(String(e))),e.appendTo(this)}},{key:"append",value:function(e,g,t){var n=this._appendChar(e[0],g);return null!=t&&(n.tailShift+=this.appendTail(t).tailShift),n}},{key:"doCommit",value:function(){}},{key:"state",get:function(){return{_value:this._value,_isRawInput:this._isRawInput}},set:function(e){Object.assign(this,e)}}]),e}(),Og=["chunks"],Pg=function(){function e(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ug(this,e),this.chunks=g,this.from=t}return hg(e,[{key:"toString",value:function(){return this.chunks.map(String).join("")}},{key:"extend",value:function(g){if(String(g)){kg(g)&&(g=new xg(String(g)));var t=this.chunks[this.chunks.length-1],n=t&&(t.stop===g.stop||null==g.stop)&&g.from===t.from+t.toString().length;if(g instanceof xg)n?t.extend(g.toString()):this.chunks.push(g);else if(g instanceof e){if(null==g.stop)for(var I;g.chunks.length&&null==g.chunks[0].stop;)(I=g.chunks.shift()).from+=g.from,this.extend(I);g.toString()&&(g.stop=g.blockIndex,this.chunks.push(g))}}}},{key:"appendTo",value:function(g){if(!(g instanceof Mg.MaskedPattern))return new xg(this.toString()).appendTo(g);for(var t=new Rg,n=0;n<this.chunks.length&&!t.skip;++n){var I=this.chunks[n],C=g._mapPosToBlock(g.value.length),r=I.stop,o=void 0;if(null!=r&&(!C||C.index<=r)&&((I instanceof e||g._stops.indexOf(r)>=0)&&t.aggregate(g._appendPlaceholder(r)),o=I instanceof e&&g._blocks[r]),o){var i=o.appendTail(I);i.skip=!1,t.aggregate(i),g._value+=i.inserted;var l=I.toString().slice(i.rawInserted.length);l&&t.aggregate(g.append(l,{tail:!0}))}else t.aggregate(g.append(I.toString(),{tail:!0}))}return t}},{key:"state",get:function(){return{chunks:this.chunks.map((function(e){return e.state})),from:this.from,stop:this.stop,blockIndex:this.blockIndex}},set:function(g){var t=g.chunks,n=Zg(g,Og);Object.assign(this,n),this.chunks=t.map((function(g){var t="chunks"in g?new e:new xg;return t.state=g,t}))}},{key:"unshift",value:function(e){if(!this.chunks.length||null!=e&&this.from>=e)return"";for(var g=null!=e?e-this.from:e,t=0;t<this.chunks.length;){var n=this.chunks[t],I=n.unshift(g);if(n.toString()){if(!I)break;++t}else this.chunks.splice(t,1);if(I)return I}return""}},{key:"shift",value:function(){if(!this.chunks.length)return"";for(var e=this.chunks.length-1;0<=e;){var g=this.chunks[e],t=g.shift();if(g.toString()){if(!t)break;--e}else this.chunks.splice(e,1);if(t)return t}return""}}]),e}(),_g=function(){function e(g,t){ug(this,e),this.masked=g,this._log=[];var n=g._mapPosToBlock(t)||(t<0?{index:0,offset:0}:{index:this.masked._blocks.length,offset:0}),I=n.offset,C=n.index;this.offset=I,this.index=C,this.ok=!1}return hg(e,[{key:"block",get:function(){return this.masked._blocks[this.index]}},{key:"pos",get:function(){return this.masked._blockStartPos(this.index)+this.offset}},{key:"state",get:function(){return{index:this.index,offset:this.offset,ok:this.ok}},set:function(e){Object.assign(this,e)}},{key:"pushState",value:function(){this._log.push(this.state)}},{key:"popState",value:function(){var e=this._log.pop();return this.state=e,e}},{key:"bindBlock",value:function(){this.block||(this.index<0&&(this.index=0,this.offset=0),this.index>=this.masked._blocks.length&&(this.index=this.masked._blocks.length-1,this.offset=this.block.value.length))}},{key:"_pushLeft",value:function(e){for(this.pushState(),this.bindBlock();0<=this.index;--this.index,this.offset=(null===(g=this.block)||void 0===g?void 0:g.value.length)||0){var g;if(e())return this.ok=!0}return this.ok=!1}},{key:"_pushRight",value:function(e){for(this.pushState(),this.bindBlock();this.index<this.masked._blocks.length;++this.index,this.offset=0)if(e())return this.ok=!0;return this.ok=!1}},{key:"pushLeftBeforeFilled",value:function(){var e=this;return this._pushLeft((function(){if(!e.block.isFixed&&e.block.value)return e.offset=e.block.nearestInputPos(e.offset,wg),0!==e.offset||void 0}))}},{key:"pushLeftBeforeInput",value:function(){var e=this;return this._pushLeft((function(){if(!e.block.isFixed)return e.offset=e.block.nearestInputPos(e.offset,Jg),!0}))}},{key:"pushLeftBeforeRequired",value:function(){var e=this;return this._pushLeft((function(){if(!(e.block.isFixed||e.block.isOptional&&!e.block.value))return e.offset=e.block.nearestInputPos(e.offset,Jg),!0}))}},{key:"pushRightBeforeFilled",value:function(){var e=this;return this._pushRight((function(){if(!e.block.isFixed&&e.block.value)return e.offset=e.block.nearestInputPos(e.offset,Hg),e.offset!==e.block.value.length||void 0}))}},{key:"pushRightBeforeInput",value:function(){var e=this;return this._pushRight((function(){if(!e.block.isFixed)return e.offset=e.block.nearestInputPos(e.offset,Xg),!0}))}},{key:"pushRightBeforeRequired",value:function(){var e=this;return this._pushRight((function(){if(!(e.block.isFixed||e.block.isOptional&&!e.block.value))return e.offset=e.block.nearestInputPos(e.offset,Xg),!0}))}}]),e}(),qg=function(e){mg(t,e);var g=Gg(t);function t(){return ug(this,t),g.apply(this,arguments)}return hg(t,[{key:"_update",value:function(e){e.mask&&(e.validate=function(g){return g.search(e.mask)>=0}),fg(bg(t.prototype),"_update",this).call(this,e)}}]),t}(Ug);Mg.MaskedRegExp=qg;var $g=["_blocks"],et=function(e){mg(t,e);var g=Gg(t);function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ug(this,t),e.definitions=Object.assign({},Qg,e.definitions),g.call(this,Object.assign({},t.DEFAULTS,e))}return hg(t,[{key:"_update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.definitions=Object.assign({},this.definitions,e.definitions),fg(bg(t.prototype),"_update",this).call(this,e),this._rebuildMask()}},{key:"_rebuildMask",value:function(){var e=this,g=this.definitions;this._blocks=[],this._stops=[],this._maskedBlocks={};var n=this.mask;if(n&&g)for(var I=!1,C=!1,r=0;r<n.length;++r){if(this.blocks){var o=function(){var g=n.slice(r),t=Object.keys(e.blocks).filter((function(e){return 0===g.indexOf(e)}));t.sort((function(e,g){return g.length-e.length}));var I=t[0];if(I){var C=zg(Object.assign({parent:e,lazy:e.lazy,eager:e.eager,placeholderChar:e.placeholderChar,overwrite:e.overwrite},e.blocks[I]));return C&&(e._blocks.push(C),e._maskedBlocks[I]||(e._maskedBlocks[I]=[]),e._maskedBlocks[I].push(e._blocks.length-1)),r+=I.length-1,"continue"}}();if("continue"===o)continue}var i=n[r],l=i in g;if(i!==t.STOP_CHAR)if("{"!==i&&"}"!==i)if("["!==i&&"]"!==i){if(i===t.ESCAPE_CHAR){if(++r,!(i=n[r]))break;l=!1}var a=l?new Dg({parent:this,lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,mask:g[i],isOptional:C}):new jg({char:i,eager:this.eager,isUnmasking:I});this._blocks.push(a)}else C=!C;else I=!I;else this._stops.push(this._blocks.length)}}},{key:"state",get:function(){return Object.assign({},fg(bg(t.prototype),"state",this),{_blocks:this._blocks.map((function(e){return e.state}))})},set:function(e){var g=e._blocks,n=Zg(e,$g);this._blocks.forEach((function(e,t){return e.state=g[t]})),Sg(bg(t.prototype),"state",n,this,!0)}},{key:"reset",value:function(){fg(bg(t.prototype),"reset",this).call(this),this._blocks.forEach((function(e){return e.reset()}))}},{key:"isComplete",get:function(){return this._blocks.every((function(e){return e.isComplete}))}},{key:"isFilled",get:function(){return this._blocks.every((function(e){return e.isFilled}))}},{key:"isFixed",get:function(){return this._blocks.every((function(e){return e.isFixed}))}},{key:"isOptional",get:function(){return this._blocks.every((function(e){return e.isOptional}))}},{key:"doCommit",value:function(){this._blocks.forEach((function(e){return e.doCommit()})),fg(bg(t.prototype),"doCommit",this).call(this)}},{key:"unmaskedValue",get:function(){return this._blocks.reduce((function(e,g){return e+g.unmaskedValue}),"")},set:function(e){Sg(bg(t.prototype),"unmaskedValue",e,this,!0)}},{key:"value",get:function(){return this._blocks.reduce((function(e,g){return e+g.value}),"")},set:function(e){Sg(bg(t.prototype),"value",e,this,!0)}},{key:"appendTail",value:function(e){return fg(bg(t.prototype),"appendTail",this).call(this,e).aggregate(this._appendPlaceholder())}},{key:"_appendEager",value:function(){var e,g=new Rg,t=null===(e=this._mapPosToBlock(this.value.length))||void 0===e?void 0:e.index;if(null==t)return g;this._blocks[t].isFilled&&++t;for(var n=t;n<this._blocks.length;++n){var I=this._blocks[n]._appendEager();if(!I.inserted)break;g.aggregate(I)}return g}},{key:"_appendCharRaw",value:function(e){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=this._mapPosToBlock(this.value.length),n=new Rg;if(!t)return n;for(var I=t.index;;++I){var C,r=this._blocks[I];if(!r)break;var o=r._appendChar(e,Object.assign({},g,{_beforeTailState:null===(C=g._beforeTailState)||void 0===C?void 0:C._blocks[I]})),i=o.skip;if(n.aggregate(o),i||o.rawInserted)break}return n}},{key:"extractTail",value:function(){var e=this,g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,n=new Pg;return g===t||this._forEachBlocksInRange(g,t,(function(g,t,I,C){var r=g.extractTail(I,C);r.stop=e._findStopBefore(t),r.from=e._blockStartPos(t),r instanceof Pg&&(r.blockIndex=t),n.extend(r)})),n}},{key:"extractInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e===g)return"";var n="";return this._forEachBlocksInRange(e,g,(function(e,g,I,C){n+=e.extractInput(I,C,t)})),n}},{key:"_findStopBefore",value:function(e){for(var g,t=0;t<this._stops.length;++t){var n=this._stops[t];if(!(n<=e))break;g=n}return g}},{key:"_appendPlaceholder",value:function(e){var g=this,t=new Rg;if(this.lazy&&null==e)return t;var n=this._mapPosToBlock(this.value.length);if(!n)return t;var I=n.index,C=null!=e?e:this._blocks.length;return this._blocks.slice(I,C).forEach((function(n){if(!n.lazy||null!=e){var I=null!=n._blocks?[n._blocks.length]:[],C=n._appendPlaceholder.apply(n,I);g._value+=C.inserted,t.aggregate(C)}})),t}},{key:"_mapPosToBlock",value:function(e){for(var g="",t=0;t<this._blocks.length;++t){var n=this._blocks[t],I=g.length;if(e<=(g+=n.value).length)return{index:t,offset:e-I}}}},{key:"_blockStartPos",value:function(e){return this._blocks.slice(0,e).reduce((function(e,g){return e+g.value.length}),0)}},{key:"_forEachBlocksInRange",value:function(e){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,t=arguments.length>2?arguments[2]:void 0,n=this._mapPosToBlock(e);if(n){var I=this._mapPosToBlock(g),C=I&&n.index===I.index,r=n.offset,o=I&&C?I.offset:this._blocks[n.index].value.length;if(t(this._blocks[n.index],n.index,r,o),I&&!C){for(var i=n.index+1;i<I.index;++i)t(this._blocks[i],i,0,this._blocks[i].value.length);t(this._blocks[I.index],I.index,0,I.offset)}}}},{key:"remove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,n=fg(bg(t.prototype),"remove",this).call(this,e,g);return this._forEachBlocksInRange(e,g,(function(e,g,t,I){n.aggregate(e.remove(t,I))})),n}},{key:"nearestInputPos",value:function(e){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xg;if(!this._blocks.length)return 0;var t=new _g(this,e);if(g===Xg)return t.pushRightBeforeInput()?t.pos:(t.popState(),t.pushLeftBeforeInput()?t.pos:this.value.length);if(g===Jg||g===wg){if(g===Jg){if(t.pushRightBeforeFilled(),t.ok&&t.pos===e)return e;t.popState()}if(t.pushLeftBeforeInput(),t.pushLeftBeforeRequired(),t.pushLeftBeforeFilled(),g===Jg){if(t.pushRightBeforeInput(),t.pushRightBeforeRequired(),t.ok&&t.pos<=e)return t.pos;if(t.popState(),t.ok&&t.pos<=e)return t.pos;t.popState()}return t.ok?t.pos:g===wg?0:(t.popState(),t.ok?t.pos:(t.popState(),t.ok?t.pos:0))}return g===Yg||g===Hg?(t.pushRightBeforeInput(),t.pushRightBeforeRequired(),t.pushRightBeforeFilled()?t.pos:g===Hg?this.value.length:(t.popState(),t.ok?t.pos:(t.popState(),t.ok?t.pos:this.nearestInputPos(e,Jg)))):e}},{key:"maskedBlock",value:function(e){return this.maskedBlocks(e)[0]}},{key:"maskedBlocks",value:function(e){var g=this,t=this._maskedBlocks[e];return t?t.map((function(e){return g._blocks[e]})):[]}}]),t}(Ug);et.DEFAULTS={lazy:!0,placeholderChar:"_"},et.STOP_CHAR="`",et.ESCAPE_CHAR="\\",et.InputDefinition=Dg,et.FixedDefinition=jg,Mg.MaskedPattern=et;var gt=function(e){mg(t,e);var g=Gg(t);function t(){return ug(this,t),g.apply(this,arguments)}return hg(t,[{key:"_matchFrom",get:function(){return this.maxLength-String(this.from).length}},{key:"_update",value:function(e){e=Object.assign({to:this.to||0,from:this.from||0,maxLength:this.maxLength||0},e);var g=String(e.to).length;null!=e.maxLength&&(g=Math.max(g,e.maxLength)),e.maxLength=g;for(var n=String(e.from).padStart(g,"0"),I=String(e.to).padStart(g,"0"),C=0;C<I.length&&I[C]===n[C];)++C;e.mask=I.slice(0,C).replace(/0/g,"\\0")+"0".repeat(g-C),fg(bg(t.prototype),"_update",this).call(this,e)}},{key:"isComplete",get:function(){return fg(bg(t.prototype),"isComplete",this)&&Boolean(this.value)}},{key:"boundaries",value:function(e){var g="",t="",n=Vg(e.match(/^(\D*)(\d*)(\D*)/)||[],3),I=n[1],C=n[2];return C&&(g="0".repeat(I.length)+C,t="9".repeat(I.length)+C),[g=g.padEnd(this.maxLength,"0"),t=t.padEnd(this.maxLength,"9")]}},{key:"doPrepare",value:function(e){var g,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},I=Fg(fg(bg(t.prototype),"doPrepare",this).call(this,e.replace(/\D/g,""),n)),C=Vg(I,2);if(e=C[0],g=C[1],!this.autofix||!e)return e;var r=String(this.from).padStart(this.maxLength,"0"),o=String(this.to).padStart(this.maxLength,"0"),i=this.value+e;if(i.length>this.maxLength)return"";var l=this.boundaries(i),a=Vg(l,2),s=a[0],c=a[1];return Number(c)<this.from?r[i.length-1]:Number(s)>this.to?"pad"===this.autofix&&i.length<this.maxLength?["",g.aggregate(this.append(r[i.length-1]+e,n))]:o[i.length-1]:e}},{key:"doValidate",value:function(){var e,g=this.value,n=g.search(/[^0]/);if(-1===n&&g.length<=this._matchFrom)return!0;for(var I=this.boundaries(g),C=Vg(I,2),r=C[0],o=C[1],i=arguments.length,l=new Array(i),a=0;a<i;a++)l[a]=arguments[a];return this.from<=Number(o)&&Number(r)<=this.to&&(e=fg(bg(t.prototype),"doValidate",this)).call.apply(e,[this].concat(l))}}]),t}(et);Mg.MaskedRange=gt;var tt=function(e){mg(t,e);var g=Gg(t);function t(e){return ug(this,t),g.call(this,Object.assign({},t.DEFAULTS,e))}return hg(t,[{key:"_update",value:function(e){e.mask===Date&&delete e.mask,e.pattern&&(e.mask=e.pattern);var g=e.blocks;e.blocks=Object.assign({},t.GET_DEFAULT_BLOCKS()),e.min&&(e.blocks.Y.from=e.min.getFullYear()),e.max&&(e.blocks.Y.to=e.max.getFullYear()),e.min&&e.max&&e.blocks.Y.from===e.blocks.Y.to&&(e.blocks.m.from=e.min.getMonth()+1,e.blocks.m.to=e.max.getMonth()+1,e.blocks.m.from===e.blocks.m.to&&(e.blocks.d.from=e.min.getDate(),e.blocks.d.to=e.max.getDate())),Object.assign(e.blocks,this.blocks,g),Object.keys(e.blocks).forEach((function(g){var t=e.blocks[g];!("autofix"in t)&&"autofix"in e&&(t.autofix=e.autofix)})),fg(bg(t.prototype),"_update",this).call(this,e)}},{key:"doValidate",value:function(){for(var e,g=this.date,n=arguments.length,I=new Array(n),C=0;C<n;C++)I[C]=arguments[C];return(e=fg(bg(t.prototype),"doValidate",this)).call.apply(e,[this].concat(I))&&(!this.isComplete||this.isDateExist(this.value)&&null!=g&&(null==this.min||this.min<=g)&&(null==this.max||g<=this.max))}},{key:"isDateExist",value:function(e){return this.format(this.parse(e,this),this).indexOf(e)>=0}},{key:"date",get:function(){return this.typedValue},set:function(e){this.typedValue=e}},{key:"typedValue",get:function(){return this.isComplete?fg(bg(t.prototype),"typedValue",this):null},set:function(e){Sg(bg(t.prototype),"typedValue",e,this,!0)}},{key:"maskEquals",value:function(e){return e===Date||fg(bg(t.prototype),"maskEquals",this).call(this,e)}}]),t}(et);tt.DEFAULTS={pattern:"d{.}`m{.}`Y",format:function(e){return e?[String(e.getDate()).padStart(2,"0"),String(e.getMonth()+1).padStart(2,"0"),e.getFullYear()].join("."):""},parse:function(e){var g=Vg(e.split("."),3),t=g[0],n=g[1],I=g[2];return new Date(I,n-1,t)}},tt.GET_DEFAULT_BLOCKS=function(){return{d:{mask:gt,from:1,to:31,maxLength:2},m:{mask:gt,from:1,to:12,maxLength:2},Y:{mask:gt,from:1900,to:9999}}},Mg.MaskedDate=tt;var nt=function(){function e(){ug(this,e)}return hg(e,[{key:"selectionStart",get:function(){var e;try{e=this._unsafeSelectionStart}catch(g){}return null!=e?e:this.value.length}},{key:"selectionEnd",get:function(){var e;try{e=this._unsafeSelectionEnd}catch(g){}return null!=e?e:this.value.length}},{key:"select",value:function(e,g){if(null!=e&&null!=g&&(e!==this.selectionStart||g!==this.selectionEnd))try{this._unsafeSelect(e,g)}catch(t){}}},{key:"_unsafeSelect",value:function(e,g){}},{key:"isActive",get:function(){return!1}},{key:"bindEvents",value:function(e){}},{key:"unbindEvents",value:function(){}}]),e}();Mg.MaskElement=nt;var It=function(e){mg(t,e);var g=Gg(t);function t(e){var n;return ug(this,t),(n=g.call(this)).input=e,n._handlers={},n}return hg(t,[{key:"rootElement",get:function(){var e,g,t;return null!==(e=null===(g=(t=this.input).getRootNode)||void 0===g?void 0:g.call(t))&&void 0!==e?e:document}},{key:"isActive",get:function(){return this.input===this.rootElement.activeElement}},{key:"_unsafeSelectionStart",get:function(){return this.input.selectionStart}},{key:"_unsafeSelectionEnd",get:function(){return this.input.selectionEnd}},{key:"_unsafeSelect",value:function(e,g){this.input.setSelectionRange(e,g)}},{key:"value",get:function(){return this.input.value},set:function(e){this.input.value=e}},{key:"bindEvents",value:function(e){var g=this;Object.keys(e).forEach((function(n){return g._toggleEventHandler(t.EVENTS_MAP[n],e[n])}))}},{key:"unbindEvents",value:function(){var e=this;Object.keys(this._handlers).forEach((function(g){return e._toggleEventHandler(g)}))}},{key:"_toggleEventHandler",value:function(e,g){this._handlers[e]&&(this.input.removeEventListener(e,this._handlers[e]),delete this._handlers[e]),g&&(this.input.addEventListener(e,g),this._handlers[e]=g)}}]),t}(nt);It.EVENTS_MAP={selectionChange:"keydown",input:"input",drop:"drop",click:"click",focus:"focus",commit:"blur"},Mg.HTMLMaskElement=It;var Ct=function(e){mg(t,e);var g=Gg(t);function t(){return ug(this,t),g.apply(this,arguments)}return hg(t,[{key:"_unsafeSelectionStart",get:function(){var e=this.rootElement,g=e.getSelection&&e.getSelection(),t=g&&g.anchorOffset,n=g&&g.focusOffset;return null==n||null==t||t<n?t:n}},{key:"_unsafeSelectionEnd",get:function(){var e=this.rootElement,g=e.getSelection&&e.getSelection(),t=g&&g.anchorOffset,n=g&&g.focusOffset;return null==n||null==t||t>n?t:n}},{key:"_unsafeSelect",value:function(e,g){if(this.rootElement.createRange){var t=this.rootElement.createRange();t.setStart(this.input.firstChild||this.input,e),t.setEnd(this.input.lastChild||this.input,g);var n=this.rootElement,I=n.getSelection&&n.getSelection();I&&(I.removeAllRanges(),I.addRange(t))}}},{key:"value",get:function(){return this.input.textContent},set:function(e){this.input.textContent=e}}]),t}(It);Mg.HTMLContenteditableMaskElement=Ct;var rt=["mask"],ot=function(){function e(g,t){ug(this,e),this.el=g instanceof nt?g:g.isContentEditable&&"INPUT"!==g.tagName&&"TEXTAREA"!==g.tagName?new Ct(g):new It(g),this.masked=zg(t),this._listeners={},this._value="",this._unmaskedValue="",this._saveSelection=this._saveSelection.bind(this),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onDrop=this._onDrop.bind(this),this._onFocus=this._onFocus.bind(this),this._onClick=this._onClick.bind(this),this.alignCursor=this.alignCursor.bind(this),this.alignCursorFriendly=this.alignCursorFriendly.bind(this),this._bindEvents(),this.updateValue(),this._onChange()}return hg(e,[{key:"mask",get:function(){return this.masked.mask},set:function(e){if(!this.maskEquals(e))if(e instanceof Mg.Masked||this.masked.constructor!==Tg(e)){var g=zg({mask:e});g.unmaskedValue=this.masked.unmaskedValue,this.masked=g}else this.masked.updateOptions({mask:e})}},{key:"maskEquals",value:function(e){var g;return null==e||(null===(g=this.masked)||void 0===g?void 0:g.maskEquals(e))}},{key:"value",get:function(){return this._value},set:function(e){this.masked.value=e,this.updateControl(),this.alignCursor()}},{key:"unmaskedValue",get:function(){return this._unmaskedValue},set:function(e){this.masked.unmaskedValue=e,this.updateControl(),this.alignCursor()}},{key:"typedValue",get:function(){return this.masked.typedValue},set:function(e){this.masked.typedValue=e,this.updateControl(),this.alignCursor()}},{key:"_bindEvents",value:function(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this._onClick,focus:this._onFocus,commit:this._onChange})}},{key:"_unbindEvents",value:function(){this.el&&this.el.unbindEvents()}},{key:"_fireEvent",value:function(e){for(var g=arguments.length,t=new Array(g>1?g-1:0),n=1;n<g;n++)t[n-1]=arguments[n];var I=this._listeners[e];I&&I.forEach((function(e){return e.apply(void 0,t)}))}},{key:"selectionStart",get:function(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart}},{key:"cursorPos",get:function(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd},set:function(e){this.el&&this.el.isActive&&(this.el.select(e,e),this._saveSelection())}},{key:"_saveSelection",value:function(){this.value!==this.el.value&&console.warn("Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly."),this._selection={start:this.selectionStart,end:this.cursorPos}}},{key:"updateValue",value:function(){this.masked.value=this.el.value,this._value=this.masked.value}},{key:"updateControl",value:function(){var e=this.masked.unmaskedValue,g=this.masked.value,t=this.unmaskedValue!==e||this.value!==g;this._unmaskedValue=e,this._value=g,this.el.value!==g&&(this.el.value=g),t&&this._fireChangeEvents()}},{key:"updateOptions",value:function(e){var g=e.mask,t=Zg(e,rt),n=!this.maskEquals(g),I=!Kg(this.masked,t);n&&(this.mask=g),I&&this.masked.updateOptions(t),(n||I)&&this.updateControl()}},{key:"updateCursor",value:function(e){null!=e&&(this.cursorPos=e,this._delayUpdateCursor(e))}},{key:"_delayUpdateCursor",value:function(e){var g=this;this._abortUpdateCursor(),this._changingCursorPos=e,this._cursorChanging=setTimeout((function(){g.el&&(g.cursorPos=g._changingCursorPos,g._abortUpdateCursor())}),10)}},{key:"_fireChangeEvents",value:function(){this._fireEvent("accept",this._inputEvent),this.masked.isComplete&&this._fireEvent("complete",this._inputEvent)}},{key:"_abortUpdateCursor",value:function(){this._cursorChanging&&(clearTimeout(this._cursorChanging),delete this._cursorChanging)}},{key:"alignCursor",value:function(){this.cursorPos=this.masked.nearestInputPos(this.masked.nearestInputPos(this.cursorPos,Jg))}},{key:"alignCursorFriendly",value:function(){this.selectionStart===this.cursorPos&&this.alignCursor()}},{key:"on",value:function(e,g){return this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(g),this}},{key:"off",value:function(e,g){if(!this._listeners[e])return this;if(!g)return delete this._listeners[e],this;var t=this._listeners[e].indexOf(g);return t>=0&&this._listeners[e].splice(t,1),this}},{key:"_onInput",value:function(e){if(this._inputEvent=e,this._abortUpdateCursor(),!this._selection)return this.updateValue();var g=new Eg(this.el.value,this.cursorPos,this.value,this._selection),t=this.masked.rawInputValue,n=this.masked.splice(g.startChangePos,g.removed.length,g.inserted,g.removeDirection).offset,I=t===this.masked.rawInputValue?g.removeDirection:Xg,C=this.masked.nearestInputPos(g.startChangePos+n,I);I!==Xg&&(C=this.masked.nearestInputPos(C,Xg)),this.updateControl(),this.updateCursor(C),delete this._inputEvent}},{key:"_onChange",value:function(){this.value!==this.el.value&&this.updateValue(),this.masked.doCommit(),this.updateControl(),this._saveSelection()}},{key:"_onDrop",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"_onFocus",value:function(e){this.alignCursorFriendly()}},{key:"_onClick",value:function(e){this.alignCursorFriendly()}},{key:"destroy",value:function(){this._unbindEvents(),this._listeners.length=0,delete this.el}}]),e}();Mg.InputMask=ot;var it=function(e){mg(t,e);var g=Gg(t);function t(){return ug(this,t),g.apply(this,arguments)}return hg(t,[{key:"_update",value:function(e){e.enum&&(e.mask="*".repeat(e.enum[0].length)),fg(bg(t.prototype),"_update",this).call(this,e)}},{key:"doValidate",value:function(){for(var e,g=this,n=arguments.length,I=new Array(n),C=0;C<n;C++)I[C]=arguments[C];return this.enum.some((function(e){return e.indexOf(g.unmaskedValue)>=0}))&&(e=fg(bg(t.prototype),"doValidate",this)).call.apply(e,[this].concat(I))}}]),t}(et);Mg.MaskedEnum=it;var lt=function(e){mg(t,e);var g=Gg(t);function t(e){return ug(this,t),g.call(this,Object.assign({},t.DEFAULTS,e))}return hg(t,[{key:"_update",value:function(e){fg(bg(t.prototype),"_update",this).call(this,e),this._updateRegExps()}},{key:"_updateRegExps",value:function(){var e="^"+(this.allowNegative?"[+|\\-]?":""),g=(this.scale?"("+Ng(this.radix)+"\\d{0,"+this.scale+"})?":"")+"$";this._numberRegExpInput=new RegExp(e+"(0|([1-9]+\\d*))?"+g),this._numberRegExp=new RegExp(e+"\\d*"+g),this._mapToRadixRegExp=new RegExp("["+this.mapToRadix.map(Ng).join("")+"]","g"),this._thousandsSeparatorRegExp=new RegExp(Ng(this.thousandsSeparator),"g")}},{key:"_removeThousandsSeparators",value:function(e){return e.replace(this._thousandsSeparatorRegExp,"")}},{key:"_insertThousandsSeparators",value:function(e){var g=e.split(this.radix);return g[0]=g[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator),g.join(this.radix)}},{key:"doPrepare",value:function(e){var g;e=e.replace(this._mapToRadixRegExp,this.radix);for(var n=this._removeThousandsSeparators(e),I=arguments.length,C=new Array(I>1?I-1:0),r=1;r<I;r++)C[r-1]=arguments[r];var o=Fg((g=fg(bg(t.prototype),"doPrepare",this)).call.apply(g,[this,n].concat(C))),i=Vg(o,2),l=i[0],a=i[1];return e&&!n&&(a.skip=!0),[l,a]}},{key:"_separatorsCount",value:function(e){for(var g=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=0,n=0;n<e;++n)this._value.indexOf(this.thousandsSeparator,n)===n&&(++t,g&&(e+=this.thousandsSeparator.length));return t}},{key:"_separatorsCountFromSlice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._value;return this._separatorsCount(this._removeThousandsSeparators(e).length,!0)}},{key:"extractInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,n=arguments.length>2?arguments[2]:void 0,I=this._adjustRangeWithSeparators(e,g),C=Vg(I,2);return e=C[0],g=C[1],this._removeThousandsSeparators(fg(bg(t.prototype),"extractInput",this).call(this,e,g,n))}},{key:"_appendCharRaw",value:function(e){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.thousandsSeparator)return fg(bg(t.prototype),"_appendCharRaw",this).call(this,e,g);var n=g.tail&&g._beforeTailState?g._beforeTailState._value:this._value,I=this._separatorsCountFromSlice(n);this._value=this._removeThousandsSeparators(this.value);var C=fg(bg(t.prototype),"_appendCharRaw",this).call(this,e,g);this._value=this._insertThousandsSeparators(this._value);var r=g.tail&&g._beforeTailState?g._beforeTailState._value:this._value,o=this._separatorsCountFromSlice(r);return C.tailShift+=(o-I)*this.thousandsSeparator.length,C.skip=!C.rawInserted&&e===this.thousandsSeparator,C}},{key:"_findSeparatorAround",value:function(e){if(this.thousandsSeparator){var g=e-this.thousandsSeparator.length+1,t=this.value.indexOf(this.thousandsSeparator,g);if(t<=e)return t}return-1}},{key:"_adjustRangeWithSeparators",value:function(e,g){var t=this._findSeparatorAround(e);t>=0&&(e=t);var n=this._findSeparatorAround(g);return n>=0&&(g=n+this.thousandsSeparator.length),[e,g]}},{key:"remove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.value.length,t=this._adjustRangeWithSeparators(e,g),n=Vg(t,2);e=n[0],g=n[1];var I=this.value.slice(0,e),C=this.value.slice(g),r=this._separatorsCount(I.length);this._value=this._insertThousandsSeparators(this._removeThousandsSeparators(I+C));var o=this._separatorsCountFromSlice(I);return new Rg({tailShift:(o-r)*this.thousandsSeparator.length})}},{key:"nearestInputPos",value:function(e,g){if(!this.thousandsSeparator)return e;switch(g){case Xg:case Jg:case wg:var t=this._findSeparatorAround(e-1);if(t>=0){var n=t+this.thousandsSeparator.length;if(e<n||this.value.length<=n||g===wg)return t}break;case Yg:case Hg:var I=this._findSeparatorAround(e);if(I>=0)return I+this.thousandsSeparator.length}return e}},{key:"doValidate",value:function(e){var g=(e.input?this._numberRegExpInput:this._numberRegExp).test(this._removeThousandsSeparators(this.value));if(g){var n=this.number;g=g&&!isNaN(n)&&(null==this.min||this.min>=0||this.min<=this.number)&&(null==this.max||this.max<=0||this.number<=this.max)}return g&&fg(bg(t.prototype),"doValidate",this).call(this,e)}},{key:"doCommit",value:function(){if(this.value){var e=this.number,g=e;null!=this.min&&(g=Math.max(g,this.min)),null!=this.max&&(g=Math.min(g,this.max)),g!==e&&(this.unmaskedValue=String(g));var n=this.value;this.normalizeZeros&&(n=this._normalizeZeros(n)),this.padFractionalZeros&&this.scale>0&&(n=this._padFractionalZeros(n)),this._value=n}fg(bg(t.prototype),"doCommit",this).call(this)}},{key:"_normalizeZeros",value:function(e){var g=this._removeThousandsSeparators(e).split(this.radix);return g[0]=g[0].replace(/^(\D*)(0*)(\d*)/,(function(e,g,t,n){return g+n})),e.length&&!/\d$/.test(g[0])&&(g[0]=g[0]+"0"),g.length>1&&(g[1]=g[1].replace(/0*$/,""),g[1].length||(g.length=1)),this._insertThousandsSeparators(g.join(this.radix))}},{key:"_padFractionalZeros",value:function(e){if(!e)return e;var g=e.split(this.radix);return g.length<2&&g.push(""),g[1]=g[1].padEnd(this.scale,"0"),g.join(this.radix)}},{key:"unmaskedValue",get:function(){return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix,".")},set:function(e){Sg(bg(t.prototype),"unmaskedValue",e.replace(".",this.radix),this,!0)}},{key:"typedValue",get:function(){return Number(this.unmaskedValue)},set:function(e){Sg(bg(t.prototype),"unmaskedValue",String(e),this,!0)}},{key:"number",get:function(){return this.typedValue},set:function(e){this.typedValue=e}},{key:"allowNegative",get:function(){return this.signed||null!=this.min&&this.min<0||null!=this.max&&this.max<0}}]),t}(Ug);lt.DEFAULTS={radix:",",thousandsSeparator:"",mapToRadix:["."],scale:2,signed:!1,normalizeZeros:!0,padFractionalZeros:!1},Mg.MaskedNumber=lt;var at=function(e){mg(t,e);var g=Gg(t);function t(){return ug(this,t),g.apply(this,arguments)}return hg(t,[{key:"_update",value:function(e){e.mask&&(e.validate=e.mask),fg(bg(t.prototype),"_update",this).call(this,e)}}]),t}(Ug);Mg.MaskedFunction=at;var st=["compiledMasks","currentMaskRef","currentMask"],ct=function(e){mg(t,e);var g=Gg(t);function t(e){var n;return ug(this,t),(n=g.call(this,Object.assign({},t.DEFAULTS,e))).currentMask=null,n}return hg(t,[{key:"_update",value:function(e){fg(bg(t.prototype),"_update",this).call(this,e),"mask"in e&&(this.compiledMasks=Array.isArray(e.mask)?e.mask.map((function(e){return zg(e)})):[])}},{key:"_appendCharRaw",value:function(e){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=this._applyDispatch(e,g);return this.currentMask&&t.aggregate(this.currentMask._appendChar(e,g)),t}},{key:"_applyDispatch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=g.tail&&null!=g._beforeTailState?g._beforeTailState._value:this.value,n=this.rawInputValue,I=g.tail&&null!=g._beforeTailState?g._beforeTailState._rawInputValue:n,C=n.slice(I.length),r=this.currentMask,o=new Rg,i=r&&r.state;if(this.currentMask=this.doDispatch(e,Object.assign({},g)),this.currentMask)if(this.currentMask!==r){if(this.currentMask.reset(),I){var l=this.currentMask.append(I,{raw:!0});o.tailShift=l.inserted.length-t.length}C&&(o.tailShift+=this.currentMask.append(C,{raw:!0,tail:!0}).tailShift)}else this.currentMask.state=i;return o}},{key:"_appendPlaceholder",value:function(){var e=this._applyDispatch.apply(this,arguments);return this.currentMask&&e.aggregate(this.currentMask._appendPlaceholder()),e}},{key:"_appendEager",value:function(){var e=this._applyDispatch.apply(this,arguments);return this.currentMask&&e.aggregate(this.currentMask._appendEager()),e}},{key:"doDispatch",value:function(e){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.dispatch(e,this,g)}},{key:"doValidate",value:function(){for(var e,g,n=arguments.length,I=new Array(n),C=0;C<n;C++)I[C]=arguments[C];return(e=fg(bg(t.prototype),"doValidate",this)).call.apply(e,[this].concat(I))&&(!this.currentMask||(g=this.currentMask).doValidate.apply(g,I))}},{key:"reset",value:function(){var e;null===(e=this.currentMask)||void 0===e||e.reset(),this.compiledMasks.forEach((function(e){return e.reset()}))}},{key:"value",get:function(){return this.currentMask?this.currentMask.value:""},set:function(e){Sg(bg(t.prototype),"value",e,this,!0)}},{key:"unmaskedValue",get:function(){return this.currentMask?this.currentMask.unmaskedValue:""},set:function(e){Sg(bg(t.prototype),"unmaskedValue",e,this,!0)}},{key:"typedValue",get:function(){return this.currentMask?this.currentMask.typedValue:""},set:function(e){var g=String(e);this.currentMask&&(this.currentMask.typedValue=e,g=this.currentMask.unmaskedValue),this.unmaskedValue=g}},{key:"isComplete",get:function(){var e;return Boolean(null===(e=this.currentMask)||void 0===e?void 0:e.isComplete)}},{key:"isFilled",get:function(){var e;return Boolean(null===(e=this.currentMask)||void 0===e?void 0:e.isFilled)}},{key:"remove",value:function(){var e,g=new Rg;this.currentMask&&g.aggregate((e=this.currentMask).remove.apply(e,arguments)).aggregate(this._applyDispatch());return g}},{key:"state",get:function(){return Object.assign({},fg(bg(t.prototype),"state",this),{_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map((function(e){return e.state})),currentMaskRef:this.currentMask,currentMask:this.currentMask&&this.currentMask.state})},set:function(e){var g=e.compiledMasks,n=e.currentMaskRef,I=e.currentMask,C=Zg(e,st);this.compiledMasks.forEach((function(e,t){return e.state=g[t]})),null!=n&&(this.currentMask=n,this.currentMask.state=I),Sg(bg(t.prototype),"state",C,this,!0)}},{key:"extractInput",value:function(){var e;return this.currentMask?(e=this.currentMask).extractInput.apply(e,arguments):""}},{key:"extractTail",value:function(){for(var e,g,n=arguments.length,I=new Array(n),C=0;C<n;C++)I[C]=arguments[C];return this.currentMask?(e=this.currentMask).extractTail.apply(e,I):(g=fg(bg(t.prototype),"extractTail",this)).call.apply(g,[this].concat(I))}},{key:"doCommit",value:function(){this.currentMask&&this.currentMask.doCommit(),fg(bg(t.prototype),"doCommit",this).call(this)}},{key:"nearestInputPos",value:function(){for(var e,g,n=arguments.length,I=new Array(n),C=0;C<n;C++)I[C]=arguments[C];return this.currentMask?(e=this.currentMask).nearestInputPos.apply(e,I):(g=fg(bg(t.prototype),"nearestInputPos",this)).call.apply(g,[this].concat(I))}},{key:"overwrite",get:function(){return this.currentMask?this.currentMask.overwrite:fg(bg(t.prototype),"overwrite",this)},set:function(e){console.warn('"overwrite" option is not available in dynamic mask, use this option in siblings')}},{key:"eager",get:function(){return this.currentMask?this.currentMask.eager:fg(bg(t.prototype),"eager",this)},set:function(e){console.warn('"eager" option is not available in dynamic mask, use this option in siblings')}},{key:"maskEquals",value:function(e){return Array.isArray(e)&&this.compiledMasks.every((function(g,t){var n;return g.maskEquals(null===(n=e[t])||void 0===n?void 0:n.mask)}))}}]),t}(Ug);ct.DEFAULTS={dispatch:function(e,g,t){if(g.compiledMasks.length){var n=g.rawInputValue,I=g.compiledMasks.map((function(g,I){return g.reset(),g.append(n,{raw:!0}),g.append(e,t),{weight:g.rawInputValue.length,index:I}}));return I.sort((function(e,g){return g.weight-e.weight})),g.compiledMasks[I[0].index]}}},Mg.MaskedDynamic=ct;var At={MASKED:"value",UNMASKED:"unmaskedValue",TYPED:"typedValue"};function ut(e){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:At.MASKED,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:At.MASKED,n=zg(e);return function(e){return n.runIsolated((function(n){return n[g]=e,n[t]}))}}Mg.PIPE_TYPE=At,Mg.createPipe=ut,Mg.pipe=function(e){for(var g=arguments.length,t=new Array(g>1?g-1:0),n=1;n<g;n++)t[n-1]=arguments[n];return ut.apply(void 0,t)(e)};try{globalThis.IMask=Mg}catch(Qn){}function dt(e,g){for(var t=0;t<g.length;t++){var n=g[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ht(e){return ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ht(e)}function mt(e,g){return mt=Object.setPrototypeOf||function(e,g){return e.__proto__=g,e},mt(e,g)}function bt(e,g){if(null==e)return{};var t,n,I=function(e,g){if(null==e)return{};var t,n,I={},C=Object.keys(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||(I[t]=e[t]);return I}(e,g);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(I[t]=e[t])}return I}function pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zt(e,g){if(g&&("object"===typeof g||"function"===typeof g))return g;if(void 0!==g)throw new TypeError("Derived constructors may only return object or undefined");return pt(e)}function yt(e){var g=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Qn){return!1}}();return function(){var t,n=ht(e);if(g){var I=ht(this).constructor;t=Reflect.construct(n,arguments,I)}else t=n.apply(this,arguments);return Zt(this,t)}}var Gt=t(5697),Bt=t.n(Gt),ft={mask:Bt().oneOfType([Bt().array,Bt().func,Bt().string,Bt().instanceOf(RegExp),Bt().oneOf([Date,Number,Mg.Masked]),Bt().instanceOf(Mg.Masked)]),value:Bt().any,unmask:Bt().oneOfType([Bt().bool,Bt().oneOf(["typed"])]),prepare:Bt().func,validate:Bt().func,commit:Bt().func,overwrite:Bt().oneOfType([Bt().bool,Bt().oneOf(["shift"])]),eager:Bt().bool,onAccept:Bt().func,onComplete:Bt().func,placeholderChar:Bt().string,lazy:Bt().bool,definitions:Bt().object,blocks:Bt().object,pattern:Bt().string,format:Bt().func,parse:Bt().func,autofix:Bt().oneOfType([Bt().bool,Bt().oneOf(["pad"])]),radix:Bt().string,thousandsSeparator:Bt().string,mapToRadix:Bt().arrayOf(Bt().string),scale:Bt().number,signed:Bt().bool,normalizeZeros:Bt().bool,padFractionalZeros:Bt().bool,min:Bt().oneOfType([Bt().number,Bt().instanceOf(Date)]),max:Bt().oneOfType([Bt().number,Bt().instanceOf(Date)]),dispatch:Bt().func,inputRef:Bt().func},vt=Object.keys(ft),St=["value","unmask","onAccept","onComplete","inputRef"],Vt=vt.filter((function(e){return St.indexOf(e)<0}));function Wt(e){var g=function(g){!function(e,g){if("function"!==typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(g&&g.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),g&&mt(e,g)}(o,g);var t,I,C,r=yt(o);function o(e){var g;return function(e,g){if(!(e instanceof g))throw new TypeError("Cannot call a class as a function")}(this,o),(g=r.call(this,e))._inputRef=g._inputRef.bind(pt(g)),g}return t=o,I=[{key:"componentDidMount",value:function(){this.props.mask&&this.initMask()}},{key:"componentDidUpdate",value:function(){var e=this.props,g=this._extractMaskOptionsFromProps(e);g.mask?this.maskRef?(this.maskRef.updateOptions(g),"value"in e&&(e.value!==this.maskValue||"string"!==typeof e.value&&""===this.maskRef.value&&!this.maskRef.el.isActive)&&(this.maskValue=e.value)):this.initMask(g):(this.destroyMask(),"value"in e&&(this.element.value=e.value))}},{key:"componentWillUnmount",value:function(){this.destroyMask()}},{key:"_inputRef",value:function(e){this.element=e,this.props.inputRef&&this.props.inputRef(e)}},{key:"initMask",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._extractMaskOptionsFromProps(this.props);this.maskRef=Mg(this.element,e).on("accept",this._onAccept.bind(this)).on("complete",this._onComplete.bind(this)),"value"in this.props&&(this.maskValue=this.props.value)}},{key:"destroyMask",value:function(){this.maskRef&&(this.maskRef.destroy(),delete this.maskRef)}},{key:"_extractMaskOptionsFromProps",value:function(e){var g=Object.assign({},e);return Object.keys(g).filter((function(e){return Vt.indexOf(e)<0})).forEach((function(e){delete g[e]})),g}},{key:"_extractNonMaskProps",value:function(e){var g=Object.assign({},e);return vt.forEach((function(e){delete g[e]})),g}},{key:"maskValue",get:function(){return"typed"===this.props.unmask?this.maskRef.typedValue:this.props.unmask?this.maskRef.unmaskedValue:this.maskRef.value},set:function(e){e=null==e?"":e,"typed"===this.props.unmask?this.maskRef.typedValue=e:this.props.unmask?this.maskRef.unmaskedValue=e:this.maskRef.value=e}},{key:"_onAccept",value:function(e){this.props.onAccept&&this.maskRef&&this.props.onAccept(this.maskValue,this.maskRef,e)}},{key:"_onComplete",value:function(e){this.props.onComplete&&this.maskRef&&this.props.onComplete(this.maskValue,this.maskRef,e)}},{key:"render",value:function(){return n.createElement(e,Object.assign({},this._extractNonMaskProps(this.props),{inputRef:this._inputRef}))}}],I&&dt(t.prototype,I),C&&dt(t,C),Object.defineProperty(t,"prototype",{writable:!1}),o}(n.Component),t=e.displayName||e.name||"Component";return g.displayName="IMask(".concat(t,")"),g.propTypes=ft,g}var Rt=["inputRef"],kt=Wt((function(e){var g=e.inputRef,t=bt(e,Rt);return n.createElement("input",Object.assign({},t,{ref:g}))}));n.forwardRef((function(e,g){return n.createElement(kt,Object.assign({},e,{ref:g}))}));function Xt(e,g,t){return g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}function Jt(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(g){Xt(e,g,t[g])}))}return e}function wt(e,g){if(null==e)return{};var t,n,I=function(e,g){if(null==e)return{};var t,n,I={},C=Object.keys(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||(I[t]=e[t]);return I}(e,g);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(I[t]=e[t])}return I}var Yt=(0,n.forwardRef)((function(e,g){var t=e.className,n=e.name,I=e.disabled,C=(e.children,e.feedback),r=wt(e,["className","name","disabled","children","feedback"]),o=og(C);return(0,A.jsx)("input",Jt({ref:g,id:n,name:n,className:ng()("flex-1 rounded-l-md focus:outline focus:outline-2 w-full",{"focus:outline-blue-500 mr-0 focus:mr-[2px]":!o,"outline outline-2 mr-[2px]":o,"outline-red-400":"error"===(null===o||void 0===o?void 0:o.type),"outline-yellow-500":"warning"===(null===o||void 0===o?void 0:o.type),"outline-blue-300":"info"===(null===o||void 0===o?void 0:o.type),"outline-green-600":"success"===(null===o||void 0===o?void 0:o.type)},"py-2.5 px-5 font-mono text-gray-900 placeholder:text-sm placeholder:text-gray-700","disabled:bg-gray-50 disabled:text-gray-700",{"cursor-not-allowed":I},t),disabled:I},r))})),Ht=Wt((function(e){var g=e.inputRef,t=wt(e,["inputRef"]);return(0,A.jsx)(Yt,Jt({},t,{ref:g}))}));function Nt(e,g,t){return g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}function Ft(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(g){Nt(e,g,t[g])}))}return e}function Kt(e,g){if(null==e)return{};var t,n,I=function(e,g){if(null==e)return{};var t,n,I={},C=Object.keys(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||(I[t]=e[t]);return I}(e,g);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(I[t]=e[t])}return I}var Et=(0,n.forwardRef)((function(e,g){var t=e.copy,n=e.paste,I=e.onOpenQRCodeModal,C=e.onOpenQRCodeScannerModal,r=(e.type,e.disabled),o=e.label,i=e.hint,l=Kt(e,["copy","paste","onOpenQRCodeModal","onOpenQRCodeScannerModal","type","disabled","label","hint"]);return(0,A.jsxs)(lg,{label:o,hint:i,variant:"vertical",entry:(0,A.jsx)(Yt,Ft({ref:g,disabled:r},l)),children:[r&&(0,A.jsx)(A.Fragment,{children:I&&(0,A.jsx)(cg,{title:"Show QR code",onClick:I,children:(0,A.jsx)(qe,{width:20})})}),t&&(0,A.jsx)(cg,{title:"Copy to clipboard",onClick:t,children:(0,A.jsx)($e,{width:20})}),!r&&(0,A.jsxs)(A.Fragment,{children:[C&&(0,A.jsx)(cg,{title:"Scan QR code",onClick:C,children:(0,A.jsx)(eg,{width:20})}),n&&(0,A.jsx)(cg,{title:"Paste from clipboard",onClick:n,children:(0,A.jsx)(gg,{width:20})})]})]})})),xt=t(4192),Mt=t(9946),Ut=t(6723),Tt=t(3855);function zt(e,g){let[t,I]=(0,n.useState)(e),C=(0,Tt.E)(e);return(0,Ut.e)((()=>I(C.current)),[C,I,...g]),t}var Lt=t(3784),Qt=t(2351),Dt=t(2984),jt=t(9362),Ot=t(1363);var Pt=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(Pt||{});function _t(e,g){let t=g.resolveItems();if(t.length<=0)return null;let n=g.resolveActiveIndex(),I=null!=n?n:-1,C=(()=>{switch(e.focus){case 0:return t.findIndex((e=>!g.resolveDisabled(e)));case 1:{let e=t.slice().reverse().findIndex(((e,t,n)=>!(-1!==I&&n.length-t-1>=I)&&!g.resolveDisabled(e)));return-1===e?e:t.length-1-e}case 2:return t.findIndex(((e,t)=>!(t<=I)&&!g.resolveDisabled(e)));case 3:{let e=t.slice().reverse().findIndex((e=>!g.resolveDisabled(e)));return-1===e?e:t.length-1-e}case 4:return t.findIndex((t=>g.resolveId(t)===e.id));case 5:return null;default:!function(e){throw new Error("Unexpected object: "+e)}(e)}})();return-1===C?n:C}var qt=t(4103),$t=t(4575),en=t(6567);function gn(e){var g;if(e.type)return e.type;let t=null!=(g=e.as)?g:"button";return"string"==typeof t&&"button"===t.toLowerCase()?"button":void 0}function tn(e,g){let[t,I]=(0,n.useState)((()=>gn(e)));return(0,Ut.e)((()=>{I(gn(e))}),[e.type,e.as]),(0,Ut.e)((()=>{t||!g.current||g.current instanceof HTMLButtonElement&&!g.current.hasAttribute("type")&&I("button")}),[t,g]),t}var nn=t(4503);let In=(0,Qt.yV)((function(e,g){return(0,Qt.sY)({ourProps:{ref:g,style:{position:"absolute",width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",display:"none"}},theirProps:e,slot:{},defaultTag:"div",name:"VisuallyHidden"})}));function Cn(e={},g=null,t=[]){for(let[n,I]of Object.entries(e))on(t,rn(g,n),I);return t}function rn(e,g){return e?e+"["+g+"]":g}function on(e,g,t){if(Array.isArray(t))for(let[n,I]of t.entries())on(e,rn(g,n.toString()),I);else t instanceof Date?e.push([g,t.toISOString()]):"boolean"==typeof t?e.push([g,t?"1":"0"]):"string"==typeof t?e.push([g,t]):"number"==typeof t?e.push([g,`${t}`]):null==t?e.push([g,""]):Cn(t,g,e)}var ln,an=t(5466),sn=((ln=sn||{})[ln.Open=0]="Open",ln[ln.Closed=1]="Closed",ln),cn=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(cn||{}),An=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(An||{}),un=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.SetDisabled=2]="SetDisabled",e[e.SetOrientation=3]="SetOrientation",e[e.GoToOption=4]="GoToOption",e[e.Search=5]="Search",e[e.ClearSearch=6]="ClearSearch",e[e.RegisterOption=7]="RegisterOption",e[e.UnregisterOption=8]="UnregisterOption",e))(un||{});function dn(e,g=(e=>e)){let t=null!==e.activeOptionIndex?e.options[e.activeOptionIndex]:null,n=(0,$t.z2)(g(e.options.slice()),(e=>e.dataRef.current.domRef.current)),I=t?n.indexOf(t):null;return-1===I&&(I=null),{options:n,activeOptionIndex:I}}let hn={1:e=>e.disabled||1===e.listboxState?e:{...e,activeOptionIndex:null,listboxState:1},0(e){if(e.disabled||0===e.listboxState)return e;let g=e.activeOptionIndex,{value:t,mode:n}=e.propsRef.current,I=e.options.findIndex((e=>{let g=e.dataRef.current.value;return(0,Dt.E)(n,{1:()=>t.includes(g),0:()=>t===g})}));return-1!==I&&(g=I),{...e,listboxState:0,activeOptionIndex:g}},2:(e,g)=>e.disabled===g.disabled?e:{...e,disabled:g.disabled},3:(e,g)=>e.orientation===g.orientation?e:{...e,orientation:g.orientation},4(e,g){var t;if(e.disabled||1===e.listboxState)return e;let n=dn(e),I=_t(g,{resolveItems:()=>n.options,resolveActiveIndex:()=>n.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});return{...e,...n,searchQuery:"",activeOptionIndex:I,activationTrigger:null!=(t=g.trigger)?t:1}},5:(e,g)=>{if(e.disabled||1===e.listboxState)return e;let t=""!==e.searchQuery?0:1,n=e.searchQuery+g.value.toLowerCase(),I=(null!==e.activeOptionIndex?e.options.slice(e.activeOptionIndex+t).concat(e.options.slice(0,e.activeOptionIndex+t)):e.options).find((e=>{var g;return!e.dataRef.current.disabled&&(null==(g=e.dataRef.current.textValue)?void 0:g.startsWith(n))})),C=I?e.options.indexOf(I):-1;return-1===C||C===e.activeOptionIndex?{...e,searchQuery:n}:{...e,searchQuery:n,activeOptionIndex:C,activationTrigger:1}},6:e=>e.disabled||1===e.listboxState||""===e.searchQuery?e:{...e,searchQuery:""},7:(e,g)=>{let t={id:g.id,dataRef:g.dataRef},n=dn(e,(e=>[...e,t]));if(null===e.activeOptionIndex){let{value:I,mode:C}=e.propsRef.current,r=g.dataRef.current.value;(0,Dt.E)(C,{1:()=>I.includes(r),0:()=>I===r})&&(n.activeOptionIndex=n.options.indexOf(t))}return{...e,...n}},8:(e,g)=>{let t=dn(e,(e=>{let t=e.findIndex((e=>e.id===g.id));return-1!==t&&e.splice(t,1),e}));return{...e,...t,activationTrigger:1}}},mn=(0,n.createContext)(null);function bn(e){let g=(0,n.useContext)(mn);if(null===g){let g=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(g,bn),g}return g}function pn(e,g){return(0,Dt.E)(g.type,hn,e,g)}mn.displayName="ListboxContext";let Zn=n.Fragment,yn=(0,Qt.yV)((function(e,g){let{value:t,name:I,onChange:C,disabled:r=!1,horizontal:o=!1,multiple:i=!1,...l}=e;const a=o?"horizontal":"vertical";let s=(0,Lt.T)(g),c=(0,n.useReducer)(pn,{listboxState:1,propsRef:{current:{value:t,onChange:C,mode:i?1:0}},labelRef:(0,n.createRef)(),buttonRef:(0,n.createRef)(),optionsRef:(0,n.createRef)(),disabled:r,orientation:a,options:[],searchQuery:"",activeOptionIndex:null,activationTrigger:1}),[{listboxState:A,propsRef:u,optionsRef:d,buttonRef:h},m]=c;u.current.value=t,u.current.mode=i?1:0,(0,Ut.e)((()=>{u.current.onChange=e=>(0,Dt.E)(u.current.mode,{0:()=>C(e),1(){let g=u.current.value.slice(),t=g.indexOf(e);return-1===t?g.push(e):g.splice(t,1),C(g)}})}),[C,u]),(0,Ut.e)((()=>m({type:2,disabled:r})),[r]),(0,Ut.e)((()=>m({type:3,orientation:a})),[a]),(0,nn.O)([h,d],((e,g)=>{var t;0===A&&(m({type:1}),(0,$t.sP)(g,$t.tJ.Loose)||(e.preventDefault(),null==(t=h.current)||t.focus()))}));let b=(0,n.useMemo)((()=>({open:0===A,disabled:r})),[A,r]),p={ref:s};return n.createElement(mn.Provider,{value:c},n.createElement(en.up,{value:(0,Dt.E)(A,{0:en.ZM.Open,1:en.ZM.Closed})},null!=I&&null!=t&&Cn({[I]:t}).map((([e,g])=>n.createElement(In,{...(0,Qt.oA)({key:e,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:e,value:g})}))),(0,Qt.sY)({ourProps:p,theirProps:l,slot:b,defaultTag:Zn,name:"Listbox"})))})),Gn=(0,Qt.yV)((function(e,g){var t;let[I,C]=bn("Listbox.Button"),r=(0,Lt.T)(I.buttonRef,g),o=`headlessui-listbox-button-${(0,Mt.M)()}`,i=(0,xt.G)(),l=(0,n.useCallback)((e=>{switch(e.key){case Ot.R.Space:case Ot.R.Enter:case Ot.R.ArrowDown:e.preventDefault(),C({type:0}),i.nextFrame((()=>{I.propsRef.current.value||C({type:4,focus:Pt.First})}));break;case Ot.R.ArrowUp:e.preventDefault(),C({type:0}),i.nextFrame((()=>{I.propsRef.current.value||C({type:4,focus:Pt.Last})}))}}),[C,I,i]),a=(0,n.useCallback)((e=>{if(e.key===Ot.R.Space)e.preventDefault()}),[]),s=(0,n.useCallback)((e=>{if((0,qt.P)(e.currentTarget))return e.preventDefault();0===I.listboxState?(C({type:1}),i.nextFrame((()=>{var e;return null==(e=I.buttonRef.current)?void 0:e.focus({preventScroll:!0})}))):(e.preventDefault(),C({type:0}))}),[C,i,I]),c=zt((()=>{if(I.labelRef.current)return[I.labelRef.current.id,o].join(" ")}),[I.labelRef.current,o]),A=(0,n.useMemo)((()=>({open:0===I.listboxState,disabled:I.disabled})),[I]),u=e,d={ref:r,id:o,type:tn(e,I.buttonRef),"aria-haspopup":!0,"aria-controls":null==(t=I.optionsRef.current)?void 0:t.id,"aria-expanded":I.disabled?void 0:0===I.listboxState,"aria-labelledby":c,disabled:I.disabled,onKeyDown:l,onKeyUp:a,onClick:s};return(0,Qt.sY)({ourProps:d,theirProps:u,slot:A,defaultTag:"button",name:"Listbox.Button"})})),Bn=(0,Qt.yV)((function(e,g){let[t]=bn("Listbox.Label"),I=`headlessui-listbox-label-${(0,Mt.M)()}`,C=(0,Lt.T)(t.labelRef,g),r=(0,n.useCallback)((()=>{var e;return null==(e=t.buttonRef.current)?void 0:e.focus({preventScroll:!0})}),[t.buttonRef]),o=(0,n.useMemo)((()=>({open:0===t.listboxState,disabled:t.disabled})),[t]);return(0,Qt.sY)({ourProps:{ref:C,id:I,onClick:r},theirProps:e,slot:o,defaultTag:"label",name:"Listbox.Label"})})),fn=Qt.AN.RenderStrategy|Qt.AN.Static,vn=(0,Qt.yV)((function(e,g){var t;let[I,C]=bn("Listbox.Options"),r=(0,Lt.T)(I.optionsRef,g),o=`headlessui-listbox-options-${(0,Mt.M)()}`,i=(0,xt.G)(),l=(0,xt.G)(),a=(0,en.oJ)(),s=null!==a?a===en.ZM.Open:0===I.listboxState;(0,n.useEffect)((()=>{var e;let g=I.optionsRef.current;!g||0===I.listboxState&&g!==(null==(e=(0,an.r)(g))?void 0:e.activeElement)&&g.focus({preventScroll:!0})}),[I.listboxState,I.optionsRef]);let c=(0,n.useCallback)((e=>{switch(l.dispose(),e.key){case Ot.R.Space:if(""!==I.searchQuery)return e.preventDefault(),e.stopPropagation(),C({type:5,value:e.key});case Ot.R.Enter:if(e.preventDefault(),e.stopPropagation(),null!==I.activeOptionIndex){let{dataRef:e}=I.options[I.activeOptionIndex];I.propsRef.current.onChange(e.current.value)}0===I.propsRef.current.mode&&(C({type:1}),(0,jt.k)().nextFrame((()=>{var e;return null==(e=I.buttonRef.current)?void 0:e.focus({preventScroll:!0})})));break;case(0,Dt.E)(I.orientation,{vertical:Ot.R.ArrowDown,horizontal:Ot.R.ArrowRight}):return e.preventDefault(),e.stopPropagation(),C({type:4,focus:Pt.Next});case(0,Dt.E)(I.orientation,{vertical:Ot.R.ArrowUp,horizontal:Ot.R.ArrowLeft}):return e.preventDefault(),e.stopPropagation(),C({type:4,focus:Pt.Previous});case Ot.R.Home:case Ot.R.PageUp:return e.preventDefault(),e.stopPropagation(),C({type:4,focus:Pt.First});case Ot.R.End:case Ot.R.PageDown:return e.preventDefault(),e.stopPropagation(),C({type:4,focus:Pt.Last});case Ot.R.Escape:return e.preventDefault(),e.stopPropagation(),C({type:1}),i.nextFrame((()=>{var e;return null==(e=I.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));case Ot.R.Tab:e.preventDefault(),e.stopPropagation();break;default:1===e.key.length&&(C({type:5,value:e.key}),l.setTimeout((()=>C({type:6})),350))}}),[i,C,l,I]),A=zt((()=>{var e,g,t;return null!=(t=null==(e=I.labelRef.current)?void 0:e.id)?t:null==(g=I.buttonRef.current)?void 0:g.id}),[I.labelRef.current,I.buttonRef.current]),u=(0,n.useMemo)((()=>({open:0===I.listboxState})),[I]),d=e,h={"aria-activedescendant":null===I.activeOptionIndex||null==(t=I.options[I.activeOptionIndex])?void 0:t.id,"aria-multiselectable":1===I.propsRef.current.mode||void 0,"aria-labelledby":A,"aria-orientation":I.orientation,id:o,onKeyDown:c,role:"listbox",tabIndex:0,ref:r};return(0,Qt.sY)({ourProps:h,theirProps:d,slot:u,defaultTag:"ul",features:fn,visible:s,name:"Listbox.Options"})})),Sn=(0,Qt.yV)((function(e,g){let{disabled:t=!1,value:I,...C}=e,[r,o]=bn("Listbox.Option"),i=`headlessui-listbox-option-${(0,Mt.M)()}`,l=null!==r.activeOptionIndex&&r.options[r.activeOptionIndex].id===i,a=(0,Dt.E)(r.propsRef.current.mode,{1:()=>r.propsRef.current.value.includes(I),0:()=>r.propsRef.current.value===I}),s=(0,n.useRef)(null),c=(0,Lt.T)(g,s);(0,Ut.e)((()=>{if(0!==r.listboxState||!l||0===r.activationTrigger)return;let e=(0,jt.k)();return e.requestAnimationFrame((()=>{var e,g;null==(g=null==(e=s.current)?void 0:e.scrollIntoView)||g.call(e,{block:"nearest"})})),e.dispose}),[s,l,r.listboxState,r.activationTrigger,r.activeOptionIndex]);let A=(0,n.useRef)({disabled:t,value:I,domRef:s});(0,Ut.e)((()=>{A.current.disabled=t}),[A,t]),(0,Ut.e)((()=>{A.current.value=I}),[A,I]),(0,Ut.e)((()=>{var e,g;A.current.textValue=null==(g=null==(e=s.current)?void 0:e.textContent)?void 0:g.toLowerCase()}),[A,s]);let u=(0,n.useCallback)((()=>r.propsRef.current.onChange(I)),[r.propsRef,I]);(0,Ut.e)((()=>(o({type:7,id:i,dataRef:A}),()=>o({type:8,id:i}))),[A,i]);let d=(0,n.useCallback)((e=>{if(t)return e.preventDefault();u(),0===r.propsRef.current.mode&&(o({type:1}),(0,jt.k)().nextFrame((()=>{var e;return null==(e=r.buttonRef.current)?void 0:e.focus({preventScroll:!0})})))}),[o,r.buttonRef,t,u]),h=(0,n.useCallback)((()=>{if(t)return o({type:4,focus:Pt.Nothing});o({type:4,focus:Pt.Specific,id:i})}),[t,i,o]),m=(0,n.useCallback)((()=>{t||l||o({type:4,focus:Pt.Specific,id:i,trigger:0})}),[t,l,i,o]),b=(0,n.useCallback)((()=>{t||!l||o({type:4,focus:Pt.Nothing})}),[t,l,o]),p=(0,n.useMemo)((()=>({active:l,selected:a,disabled:t})),[l,a,t]);return(0,Qt.sY)({ourProps:{id:i,ref:c,role:"option",tabIndex:!0===t?void 0:-1,"aria-disabled":!0===t||void 0,"aria-selected":!0===a||void 0,disabled:void 0,onClick:d,onFocus:h,onPointerMove:m,onMouseMove:m,onPointerLeave:b,onMouseLeave:b},theirProps:C,slot:p,defaultTag:"li",name:"Listbox.Option"})})),Vn=Object.assign(yn,{Button:Gn,Label:Bn,Options:vn,Option:Sn});var Wn=t(1355);var Rn=n.forwardRef((function(e,g){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:g},e),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))})),kn=t(8057);function Xn(e,g){(null==g||g>e.length)&&(g=e.length);for(var t=0,n=new Array(g);t<g;t++)n[t]=e[t];return n}function Jn(e){return function(e){if(Array.isArray(e))return Xn(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,g){if(!e)return;if("string"===typeof e)return Xn(e,g);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Xn(e,g)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wn(e){var g,t,I=e.options,C=e.multiple,r=void 0!==C&&C,o=e.value,i=e.onChange,l=e.placeholder,a=e.styles,s=e.disabled,c=void 0!==s&&s,u=e.feedback,d=e.name,h=e.required,m=void 0!==h&&h;if(r){if("string"===typeof o)throw Error("value cannot be string but got "+o)}else if(g=o,null!=(t=Array)&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](g):g instanceof t)throw Error("value cannot be array but got ".concat(o.join()));var b,p=(0,n.useCallback)((function(e){var g;return r?!!(null===(g=o)||void 0===g?void 0:g.find((function(g){return g===e}))):o===e}),[r,o]),Z=(0,n.useCallback)((function(e){return null===i||void 0===i?void 0:i(r&&"string"===typeof e?p(e)?(null!==(b=o)&&void 0!==b?b:[]).filter((function(g){return g!==e})):Jn(o).concat([e]):e)}),[p,r,i,o]),y=(0,n.useCallback)((function(e){return I.find((function(g){return g.value===e}))}),[I]);return(0,A.jsx)(Vn,{as:n.Fragment,refName:d,value:o,onChange:Z,disabled:c,children:function(e){var g=e.open;return(0,A.jsx)(Yn,{getOption:y,handleOnChange:Z,isSelected:p,open:g,options:I,value:null!==o&&void 0!==o?o:r?[]:void 0,styles:null!==a&&void 0!==a?a:{},disabled:c,multiple:r,feedback:u,placeholder:l,required:m})}})}var Yn=function(e){var g,t,I,C=e.open,r=e.options,o=e.styles,i=o.fullWidth,l=void 0===i||i,a=o.position,s=e.getOption,c=e.handleOnChange,u=e.isSelected,d=e.value,h=e.disabled,m=e.multiple,b=e.placeholder,p=(0,n.useState)(!1),Z=p[0],y=p[1];return(0,n.useEffect)((function(){y(C)}),[C]),(0,A.jsxs)("div",{className:ng()("relative",{"w-full":l}),children:[(0,A.jsxs)(Vn.Button,{className:ng()("inline-block min-h-[44px] pr-7 items-center px-3","text-sm text-gray-600 text-left","form-select border-none disabled:bg-gray-50","focus:outline-offset-0 outline-offset-0 outline-none focus:outline-blue-500 focus:outline focus:outline-2 space-y-1",{"hover:text-gray-900":!h,"cursor-not-allowed":h,"outline-blue-500 outline outline-2":Z,"w-full":l,"pr-10":!l,"rounded-r-lg":"right"===a,"rounded-l-lg":"left"===a,"rounded-lg":void 0===a}),disabled:h,children:[m||(null===(g=s(d))||void 0===g?void 0:g.label)||b||"Select",m&&!(null===d||void 0===d?void 0:d.length)&&(null!==b&&void 0!==b?b:"Select One or More"),m&&(null===(t=d)||void 0===t?void 0:t.map((function(e){var g;return(0,A.jsxs)("div",{className:"inline-flex items-center px-1 mr-1 mt rounded text-white bg-gray-400",children:[null!==(I=null===(g=s(e))||void 0===g?void 0:g.label)&&void 0!==I?I:"value",(0,A.jsx)("div",{className:"ml-1 bg-gray-100 rounded-full cursor-pointer",onClick:function(){return c(e)},children:(0,A.jsx)(Rn,{className:"w-3 h-3 bg-white text-gray-400 rounded-full"})})]},e)})))]}),(0,A.jsx)(Wn.u,{show:C,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",className:"absolute mt-1 w-full rounded-md bg-white shadow-lg z-10",children:(0,A.jsx)(Vn.Options,{static:!0,className:"max-h-60 rounded-md py-1 text-base leading-6 shadow-xs overflow-auto focus:outline-none sm:text-sm sm:leading-5",children:r.map((function(e){var g=u(e.value);return(0,A.jsx)(Vn.Option,{value:e.value,children:function(t){var n=t.active;return(0,A.jsxs)("div",{className:"".concat(n?"text-white bg-blue-600":"text-gray-900"," cursor-default select-none relative py-2 pl-8 pr-4"),children:[(0,A.jsx)("span",{className:"".concat(g?"font-semibold":"font-normal"," block truncate"),children:e.label}),g&&(0,A.jsx)("span",{className:"".concat(n?"text-white":"text-blue-600"," absolute inset-y-0 left-0 flex items-center pl-1.5"),children:(0,A.jsx)(kn.Z,{className:"x-4 h-4"})})]})}},e.value)}))})})]})};function Hn(e,g,t){return g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}function Nn(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(g){Hn(e,g,t[g])}))}return e}function Fn(e,g){if(null==e)return{};var t,n,I=function(e,g){if(null==e)return{};var t,n,I={},C=Object.keys(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||(I[t]=e[t]);return I}(e,g);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(I[t]=e[t])}return I}function Kn(e){var g=e.disabled,t=e.feedback,n=e.label,I=e.hint,C=e.assetSelector,r=e.onChange,o=e.value,i=e.defaultValue,l=Fn(e,["disabled","feedback","label","hint","assetSelector","onChange","value","defaultValue"]);return(0,A.jsx)(lg,{feedback:null!==t&&void 0!==t?t:null===C||void 0===C?void 0:C.feedback,label:n,hint:I,entry:(0,A.jsx)(Ht,Nn({mask:Number,radix:".",thousandsSeparator:",",defaultValue:null!==i&&void 0!==i?i:o,disabled:g,feedback:t},l,{onAccept:function(e,g){return null===r||void 0===r?void 0:r(g.unmaskedValue)}})),children:C&&(0,A.jsx)(wn,{options:C.options.map((function(e){return{label:e,value:e}})),styles:{fullWidth:!1,position:"right"},name:C.name,disabled:g,onChange:C.onChange?function(e){var g;null===(g=C.onChange)||void 0===g||g.call(C,e)}:void 0,value:C.value,feedback:C.feedback})})}var En=t(3465),xn=t(1664),Mn=t.n(xn),Un=function(){return(0,A.jsxs)("div",{className:"text-center flex-col items-center justify-center pt-6 text-xs text-gray-500 font-medium",children:[(0,A.jsxs)("p",{children:["DeCash send \xa9 ",(new Date).getFullYear()]}),(0,A.jsxs)("p",{children:[(0,A.jsx)(Mn(),{passHref:!0,href:"https://github.com/DeCash-Official/send.decash.com",children:(0,A.jsx)("a",{className:"underline text-blue-500",children:"Open source"})})," ","\ud83d\udc99 by the DeCash Community"]}),(0,A.jsxs)("p",{className:"mt-3",children:["The same wallet available for the Ethereum version of our token at","  ",(0,A.jsx)(Mn(),{passHref:!0,href:"https://decash.com/send",children:(0,A.jsx)("a",{target:"_blank",className:"underline text-blue-500",children:"decash.com/send"})})]})]})};function Tn(e,g,t){return g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}function zn(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(g){Tn(e,g,t[g])}))}return e}var Ln=function(){var e,g,t,n,I=Pe(),C=(0,xe.aC)(),r=C.chain,o=C.switchChain;return(0,A.jsxs)(En.F,{subtitle:"Send ".concat(I.values.assetId),children:[(0,A.jsx)(lg,{label:"Network",entry:(0,A.jsx)(wn,{options:(0,Te.qA)(Ue.Jb).map((function(e){return{label:e,value:e}})),onChange:function(e){o(Ue.Jb[(0,Te.qA)(Ue.Jb).find((function(g){return g===e}))])},value:r})}),(0,A.jsxs)("form",{className:"flex flex-col mt-4 space-y-4",onSubmit:I.onSubmit,children:[(0,A.jsx)(Kn,{name:"amount",onChange:function(e){return I.setValue("amount",e)},value:I.values.amount,label:"Amount",placeholder:"1.00",feedback:null===(e=I.formState.errors.amount)||void 0===e?void 0:e.message,disabled:I.isAmountDisabled,assetSelector:{options:(0,Te.qA)(Ue.Ut),onChange:function(e){return I.setValue("assetId",e)},value:I.values.assetId,feedback:null===(g=I.formState.errors.assetId)||void 0===g?void 0:g.message,name:"assetId"}}),(0,A.jsx)(Et,zn({},I.register("fromAddress",zn({},I.formState.dirtyFields.fromAddress||"SEND"===I.submitType?{validate:Te.qf}:{})),{label:"From",hint:I.balance&&"Balances: ".concat(Object.keys(I.balance).filter((function(e){var g;return!!(null===(g=I.balance)||void 0===g?void 0:g[e])})).map((function(e){var g;return"".concat(null===(g=I.balance)||void 0===g?void 0:g[e]," ").concat(e)})).join(", ")||"none"),placeholder:"...",copy:I.handleCopyFromAddress,paste:I.handlePasteFromAddress,feedback:null===(t=I.formState.errors.fromAddress)||void 0===t?void 0:t.message,disabled:I.isFromAddressDisabled})),(0,A.jsxs)("div",{className:"!mt-8 flex justify-around items-center",children:[(0,A.jsx)(_e,{width:20,height:20,className:"inline text-gray-500"}),(0,A.jsx)(_e,{width:20,height:20,className:"inline text-gray-500"})]}),(0,A.jsx)(Et,zn({},I.register("toAddress",zn({},I.formState.dirtyFields.toAddress||"SEND"===I.submitType?{validate:Te.qf}:{})),{label:"To",paste:I.handlePasteToAddress,placeholder:"...",onOpenQRCodeScannerModal:I.showQrCodeScanner,onOpenQRCodeModal:I.showQRCode,feedback:null===(n=I.formState.errors.toAddress)||void 0===n?void 0:n.message,disabled:I.isToAddressDisabled})),I.fee&&(0,A.jsxs)("p",{className:"my-5 text-center text-xs font-medium text-gray-700",children:[(0,A.jsx)(Mn(),{passHref:!0,href:"https://docs.decash.com/docs/api/fees",children:(0,A.jsx)("a",{target:"_blank",className:"underline text-blue-500",children:"Transaction fee"})}),":"," ",(0,A.jsxs)("span",{className:"text-red-400",children:[I.fee," ",I.values.assetId]})]}),(0,A.jsx)("div",{className:"flex flex-col",children:(0,A.jsx)("div",{className:"flex justify-center items-center w-full",children:(0,A.jsxs)(we.zx,{type:"submit",id:"sendButton",disabled:I.isSubmitButtonDisabled,children:[I.formState.isSubmitting||"SEND"===I.submitType&&!I.fee&&I.formState.isValid&&(0,A.jsxs)("svg",{role:"status",className:"mr-2 w-4 h-4 text-gray-200 animate-spin dark:text-gray-600 fill-blue-600",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,A.jsx)("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),(0,A.jsx)("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),"SIGN_IN"===I.submitType?"Sign In":"RECHECK"===I.submitType?"Recheck":"Send"]})})}),I.error&&(0,A.jsx)(ig,{feedback:I.error})]}),"SIGN_IN"===I.submitType&&(0,A.jsx)(Un,{})]})}},4319:function(e,g,t){"use strict";t.d(g,{ub:function(){return h},LN:function(){return b},UP:function(){return jg},co:function(){return Pg},LT:function(){return et},Ln:function(){return Og},Lv:function(){return Z},Zv:function(){return A},Bt:function(){return u},Dr:function(){return _g},CF:function(){return f},aY:function(){return S},nU:function(){return qg},Cn:function(){return W}});var n={};t.r(n),t.d(n,{decrypt:function(){return Xg},encrypt:function(){return kg},generateKey:function(){return Wg},verifyHmac:function(){return Rg}});var I=t(4051),C=t.n(I),r=t(9669),o=t.n(r),i=t(5549);function l(e,g,t,n,I,C,r){try{var o=e[C](r),i=o.value}catch(l){return void t(l)}o.done?g(i):Promise.resolve(i).then(n,I)}function a(e,g,t){return g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}function s(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(g){a(e,g,t[g])}))}return e}var c=function(){var e,g=(e=C().mark((function e(g){var t,n,I,r,l,a,c;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.chain,n=g.path,I=g.params,r=g.throwError,l=void 0!==r&&r,e.next=3,o().create({baseURL:t===i.Jb.MainNet?"/api/main/v1/":"/api/test/v1/",timeout:3e4,validateStatus:function(){return!0}}).post(n,I);case 3:if(a=e.sent,c=s({},a,{payload:a.status>=400?void 0:a.data,error:a.status<400?void 0:a.data}),!l||!c.error){e.next=7;break}throw c;case 7:return e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})),function(){var g=this,t=arguments;return new Promise((function(n,I){var C=e.apply(g,t);function r(e){l(C,n,I,r,o,"next",e)}function o(e){l(C,n,I,r,o,"throw",e)}r(void 0)}))});return function(e){return g.apply(this,arguments)}}(),A=function(e){return"object"===typeof e&&("errorId"in e&&"message"in e)},u=function(e){return"object"===typeof e&&A(e.error)};function d(e,g,t){return g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}var h=0,m=function(e){return c(function(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(g){d(e,g,t[g])}))}return e}({},e,{path:"/CreateDelegatedWallet"}))};var b;function p(e,g,t){return g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}!function(e){e.PENDING="pending",e.CONFIRMED="confirmed",e.REJECTED="rejected"}(b||(b={}));var Z=function(e){return c(function(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(g){p(e,g,t[g])}))}return e}({},e,{path:"/TransactionStatus"}))};function y(e,g,t){return g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}var G=function(e){return c(function(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(g){y(e,g,t[g])}))}return e}({},e,{path:"/WalletsInfo"}))};function B(e,g,t){return g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}var f=function(e){return c(function(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(g){B(e,g,t[g])}))}return e}({},e,{path:"/SubmitTransaction"}))};function v(e,g,t){return g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}var S=function(e){return c(function(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(g){v(e,g,t[g])}))}return e}({},e,{path:"/TransferTokens"}))},V=Error("No accounts found"),W=Error("Wallet not set"),R=(Error("Unsupported transaction type"),function(e){return Error("Unsupported wallet: `".concat(e,"`"))});function k(e,g,t,n,I,C,r){try{var o=e[C](r),i=o.value}catch(l){return void t(l)}o.done?g(i):Promise.resolve(i).then(n,I)}function X(e){return function(){var g=this,t=arguments;return new Promise((function(n,I){var C=e.apply(g,t);function r(e){k(C,n,I,r,o,"next",e)}function o(e){k(C,n,I,r,o,"throw",e)}r(void 0)}))}}function J(){return(J=X(C().mark((function e(g){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.AlgoSigner){e.next=2;break}throw new Error("AlgoSigner is not installed!");case 2:return e.next=4,window.AlgoSigner.connect({ledger:g});case 4:return e.abrupt("return",window.AlgoSigner);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=X(C().mark((function e(g,t){var n;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.accounts({ledger:t});case 2:if(0!==(n=e.sent).length){e.next=5;break}throw V;case 5:return e.abrupt("return",n[0]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=X(C().mark((function e(g){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var H=function(){var e=X(C().mark((function e(g,t){var n,I,r;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.txns.filter((function(e){return 0==e.signers.length})).map((function(e){return e.txn})),I=t.txns.map((function(e){return{txn:e.txn,signers:e.signers,authAddr:void 0,message:void 0,msig:void 0}})),e.next=4,g.signTxn(I);case 4:return r=e.sent.filter((function(e){return void 0!=e})).map((function(e){return e.blob})),e.abrupt("return",{signed:r,unsigned:n});case 6:case"end":return e.stop()}}),e)})));return function(g,t){return e.apply(this,arguments)}}();function N(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function F(e,g,t){return(F=N()?Reflect.construct:function(e,g,t){var n=[null];n.push.apply(n,g);var I=new(Function.bind.apply(e,n));return t&&x(I,t.prototype),I}).apply(null,arguments)}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,g){return!g||"object"!==M(g)&&"function"!==typeof g?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):g}function x(e,g){return(x=Object.setPrototypeOf||function(e,g){return e.__proto__=g,e})(e,g)}var M=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function U(e){var g="function"===typeof Map?new Map:void 0;return U=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof g){if(g.has(e))return g.get(e);g.set(e,n)}function n(){return F(e,arguments,K(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),x(n,e)},U(e)}function T(e){var g=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=K(e);if(g){var I=K(this).constructor;t=Reflect.construct(n,arguments,I)}else t=n.apply(this,arguments);return E(this,t)}}var z=function(e){!function(e,g){if("function"!==typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(g&&g.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),g&&x(e,g)}(t,e);var g=T(t);function t(e,n,I,C,r){return function(e,g){if(!(e instanceof g))throw new TypeError("Cannot call a class as a function")}(this,t),g.call(this,(o=r,(null!=(i=Error)&&"undefined"!==typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](o):o instanceof i)?r.message:"string"===typeof r?r:"message"in r?r.message:"There is a problem with signing by '".concat(n,"'. Try it later or anther time.")));var o,i}return t}(U(Error)),L=t(8473);function Q(e,g,t,n,I,C,r){try{var o=e[C](r),i=o.value}catch(l){return void t(l)}o.done?g(i):Promise.resolve(i).then(n,I)}function D(e){return function(){var g=this,t=arguments;return new Promise((function(n,I){var C=e.apply(g,t);function r(e){Q(C,n,I,r,o,"next",e)}function o(e){Q(C,n,I,r,o,"throw",e)}r(void 0)}))}}function j(){return(j=D(C().mark((function e(g,n){var I;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.e(72).then(t.t.bind(t,1072,23));case 2:return I=e.sent.default,e.abrupt("return",new I(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=D(C().mark((function e(g){var t;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.connect();case 2:if(0!==(t=e.sent).length){e.next=5;break}throw V;case 5:return e.abrupt("return",t[0]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=D(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=function(){var e=D(C().mark((function e(g,t){var n,I,r,o;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.txns.filter((function(e){return e.signers.length>0})).map((function(e){return e.txn})),e.next=3,g.signTransaction(n);case 3:return I=e.sent,r=t.txns.filter((function(e){return 0==e.signers.length})).map((function(e){return e.txn})),e.next=7,Promise.all(I.map((function(e){var g=e.blob;return(0,L.sM)(g)})));case 7:return o=e.sent,e.abrupt("return",{signed:o,unsigned:r});case 9:case"end":return e.stop()}}),e)})));return function(g,t){return e.apply(this,arguments)}}(),q=t(3632),$=t.n(q),ee=t(5755),ge=t(2873),te=t(3631);function ne(e){return(0,te.qY)(e)}function Ie(){const e=ne();return e&&e.os?e.os:void 0}function Ce(){return!!Ie()&&(function(){const e=Ie();return!!e&&e.toLowerCase().includes("android")}()||function(){const e=Ie();return!!e&&(e.toLowerCase().includes("ios")||e.toLowerCase().includes("mac")&&navigator.maxTouchPoints>1)}())}function re(){return!function(){const e=ne();return!(!e||!e.name)&&"node"===e.name.toLowerCase()}()&&!!oe()}ge.getFromWindow,ge.getFromWindowOrThrow,ge.getDocumentOrThrow,ge.getDocument,ge.getNavigatorOrThrow;const oe=ge.getNavigator,ie=(ge.getLocationOrThrow,ge.getLocation),le=(ge.getCryptoOrThrow,ge.getCrypto,ge.getLocalStorageOrThrow,ge.getLocalStorage);function ae(){return ee.D()}var se=t(5094);const ce=se.D,Ae=se.u;function ue(e){let g=null,t=null;const n=le();return n&&(t=n.getItem(e)),g=t?ce(t):t,g}function de(e){const g=le();g&&g.removeItem(e)}const he="WALLETCONNECT_DEEPLINK_CHOICE";const me=["session_request","session_update","exchange_key","connect","disconnect","display_uri","modal_closed","transport_open","transport_close","transport_error"],be=["eth_sendTransaction","eth_signTransaction","eth_sign","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v2","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"];var pe=t(3550),Ze=t.n(pe),ye=(t(4501),t(5054)),Ge=t.n(ye),Be=t(8764).Buffer;const fe="hex",ve="utf8",Se="0";function Ve(e){return new Uint8Array(e)}function We(e,g=!1){const t=e.toString(fe);return g?Me(t):t}function Re(e){return e.toString(ve)}function ke(e){return Ge()(e)}function Xe(e,g=!1){return We(ke(e),g)}function Je(e){return Re(ke(e))}function we(e){return Be.from(xe(e),fe)}function Ye(e){return Ve(we(e))}function He(e){return Be.from(e,ve)}function Ne(e){return Ve(He(e))}function Fe(e,g){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!g||e.length===2+2*g)}function Ke(...e){let g=[];return e.forEach((e=>g=g.concat(Array.from(e)))),new Uint8Array([...g])}function Ee(e,g=8,t="0"){return function(e,g,t="0"){return Te(e,g,!0,t)}(e,function(e,g=8){const t=e%g;return t?(e-t)/g*g+g:e}(e.length,g),t)}function xe(e){return e.replace(/^0x/,"")}function Me(e){return e.startsWith("0x")?e:`0x${e}`}function Ue(e){return(e=Ee(e=xe(e),2))&&(e=Me(e)),e}function Te(e,g,t,n="0"){const I=g-e.length;let C=e;if(I>0){const g=n.repeat(I);C=t?g+e:e+g}return C}function ze(e){return ke(new Uint8Array(e))}function Le(e,g){return function(e,g=!1){return We(He(e),g)}(e,!g)}function Qe(e,g){const t=xe(Ue(new(Ze())(e).toString(16)));return g?t:Me(t)}var De=t(1094);var je=t(1468);function Oe(){return Date.now()*Math.pow(10,3)+Math.floor(Math.random()*Math.pow(10,3))}function Pe(e){return Ue(e)}function _e(e){return function(e){const g=e.startsWith("0x");return e=(e=xe(e)).startsWith(Se)?e.substring(1):e,g?Me(e):e}(Me(e))}const qe=Oe;function $e(){return((e,g)=>{for(g=e="";e++<36;g+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return g})()}function eg(e,g){return Fe(e,g)}function gg(e){return"undefined"!==typeof e.result}function tg(e){return"undefined"!==typeof e.error}function ng(e){return"undefined"!==typeof e.event}function Ig(e){e=xe(e.toLowerCase());const g=xe((0,De.keccak_256)(He(e)));let t="";for(let n=0;n<e.length;n++)parseInt(g[n],16)>7?t+=e[n].toUpperCase():t+=e[n];return Me(t)}function Cg(e){var g;return(g=e)&&g.length&&!eg(e[0])&&(e[0]=Le(e[0])),e}function rg(e){if("undefined"!==typeof e.type&&"0"!==e.type)return e;if("undefined"===typeof e.from||(!(g=e.from)||"0x"!==g.toLowerCase().substring(0,2)||!/^(0x)?[0-9a-f]{40}$/i.test(g)||!/^(0x)?[0-9a-f]{40}$/.test(g)&&!/^(0x)?[0-9A-F]{40}$/.test(g)&&g!==Ig(g)))throw new Error("Transaction object must include a valid 'from' value.");var g;function t(e){let g=e;return("number"===typeof e||"string"===typeof e&&!function(e){return""===e||"string"===typeof e&&""===e.trim()}(e))&&(eg(e)?"string"===typeof e&&(g=Pe(e)):g=Qe(e)),"string"===typeof g&&(g=_e(g)),g}const n={from:Pe(e.from),to:"undefined"===typeof e.to?void 0:Pe(e.to),gasPrice:"undefined"===typeof e.gasPrice?"":t(e.gasPrice),gas:"undefined"===typeof e.gas?"undefined"===typeof e.gasLimit?"":t(e.gasLimit):t(e.gas),value:"undefined"===typeof e.value?"":t(e.value),nonce:"undefined"===typeof e.nonce?"":t(e.nonce),data:"undefined"===typeof e.data?"":Pe(e.data)||"0x"},I=["gasPrice","gas","value","nonce"];return Object.keys(n).forEach((e=>{("undefined"===typeof n[e]||"string"===typeof n[e]&&!n[e].trim().length)&&I.includes(e)&&delete n[e]})),n}var og=t(7563);function ig(e,g){let t=lg(e);return t=Object.assign(Object.assign({},t),g),e=function(e){return og.stringify(e)}(t),e}function lg(e){return og.parse(e)}var ag=class{constructor(){this._eventEmitters=[],"undefined"!==typeof window&&"undefined"!==typeof window.addEventListener&&(window.addEventListener("online",(()=>this.trigger("online"))),window.addEventListener("offline",(()=>this.trigger("offline"))))}on(e,g){this._eventEmitters.push({event:e,callback:g})}trigger(e){let g=[];e&&(g=this._eventEmitters.filter((g=>g.event===e))),g.forEach((e=>{e.callback()}))}};const sg="undefined"!==typeof t.g.WebSocket?t.g.WebSocket:t(7026);var cg=class{constructor(e){if(this.opts=e,this._queue=[],this._events=[],this._subscriptions=[],this._protocol=e.protocol,this._version=e.version,this._url="",this._netMonitor=null,this._socket=null,this._nextSocket=null,this._subscriptions=e.subscriptions||[],this._netMonitor=e.netMonitor||new ag,!e.url||"string"!==typeof e.url)throw new Error("Missing or invalid WebSocket url");this._url=e.url,this._netMonitor.on("online",(()=>this._socketCreate()))}set readyState(e){}get readyState(){return this._socket?this._socket.readyState:-1}set connecting(e){}get connecting(){return 0===this.readyState}set connected(e){}get connected(){return 1===this.readyState}set closing(e){}get closing(){return 2===this.readyState}set closed(e){}get closed(){return 3===this.readyState}open(){this._socketCreate()}close(){this._socketClose()}send(e,g,t){if(!g||"string"!==typeof g)throw new Error("Missing or invalid topic field");this._socketSend({topic:g,type:"pub",payload:e,silent:!!t})}subscribe(e){this._socketSend({topic:e,type:"sub",payload:"",silent:!0})}on(e,g){this._events.push({event:e,callback:g})}_socketCreate(){if(this._nextSocket)return;const e=function(e,g,t){var n,I;const C=(e.startsWith("https")?e.replace("https","wss"):e.startsWith("http")?e.replace("http","ws"):e).split("?"),r=re()?{protocol:g,version:t,env:"browser",host:(null===(n=ie())||void 0===n?void 0:n.host)||""}:{protocol:g,version:t,env:(null===(I=ne())||void 0===I?void 0:I.name)||""},o=ig(function(e){const g=-1!==e.indexOf("?")?e.indexOf("?"):void 0;return"undefined"!==typeof g?e.substr(g):""}(C[1]||""),r);return C[0]+"?"+o}(this._url,this._protocol,this._version);if(this._nextSocket=new sg(e),!this._nextSocket)throw new Error("Failed to create socket");this._nextSocket.onmessage=e=>this._socketReceive(e),this._nextSocket.onopen=()=>this._socketOpen(),this._nextSocket.onerror=e=>this._socketError(e),this._nextSocket.onclose=()=>{setTimeout((()=>{this._nextSocket=null,this._socketCreate()}),1e3)}}_socketOpen(){this._socketClose(),this._socket=this._nextSocket,this._nextSocket=null,this._queueSubscriptions(),this._pushQueue()}_socketClose(){this._socket&&(this._socket.onclose=()=>{},this._socket.close())}_socketSend(e){const g=JSON.stringify(e);this._socket&&1===this._socket.readyState?this._socket.send(g):(this._setToQueue(e),this._socketCreate())}async _socketReceive(e){let g;try{g=JSON.parse(e.data)}catch(t){return}if(this._socketSend({topic:g.topic,type:"ack",payload:"",silent:!0}),this._socket&&1===this._socket.readyState){const e=this._events.filter((e=>"message"===e.event));e&&e.length&&e.forEach((e=>e.callback(g)))}}_socketError(e){const g=this._events.filter((e=>"error"===e.event));g&&g.length&&g.forEach((g=>g.callback(e)))}_queueSubscriptions(){this._subscriptions.forEach((e=>this._queue.push({topic:e,type:"sub",payload:"",silent:!0}))),this._subscriptions=this.opts.subscriptions||[]}_setToQueue(e){this._queue.push(e)}_pushQueue(){this._queue.forEach((e=>this._socketSend(e))),this._queue=[]}};const Ag="Session currently connected",ug="Session currently disconnected",dg="JSON RPC response format is invalid",hg="User close QRCode Modal";var mg=class{constructor(){this._eventEmitters=[]}subscribe(e){this._eventEmitters.push(e)}unsubscribe(e){this._eventEmitters=this._eventEmitters.filter((g=>g.event!==e))}trigger(e){let g,t=[];g="undefined"!==typeof e.method?e.method:gg(e)||tg(e)?`response:${e.id}`:ng(e)?e.event:"",g&&(t=this._eventEmitters.filter((e=>e.event===g))),t&&t.length||function(e){return me.includes(e)||e.startsWith("wc_")}(g)||ng(g)||(t=this._eventEmitters.filter((e=>"call_request"===e.event))),t.forEach((g=>{if(tg(e)){const t=new Error(e.error.message);g.callback(t,null)}else g.callback(null,e)}))}};var bg=class{constructor(e="walletconnect"){this.storageId=e}getSession(){let e=null;const g=ue(this.storageId);return g&&"undefined"!==typeof g.bridge&&(e=g),e}setSession(e){return function(e,g){const t=Ae(g),n=le();n&&n.setItem(e,t)}(this.storageId,e),e}removeSession(){de(this.storageId)}};const pg="abcdefghijklmnopqrstuvwxyz0123456789".split("").map((e=>`https://${e}.bridge.walletconnect.org`));function Zg(){return pg[Math.floor(Math.random()*pg.length)]}var yg=class{constructor(e){if(this.protocol="wc",this.version=1,this._bridge="",this._key=null,this._clientId="",this._clientMeta=null,this._peerId="",this._peerMeta=null,this._handshakeId=0,this._handshakeTopic="",this._connected=!1,this._accounts=[],this._chainId=0,this._networkId=0,this._rpcUrl="",this._eventManager=new mg,this._clientMeta=ae()||e.connectorOpts.clientMeta||null,this._cryptoLib=e.cryptoLib,this._sessionStorage=e.sessionStorage||new bg(e.connectorOpts.storageId),this._qrcodeModal=e.connectorOpts.qrcodeModal,this._qrcodeModalOptions=e.connectorOpts.qrcodeModalOptions,this._signingMethods=[...be,...e.connectorOpts.signingMethods||[]],!e.connectorOpts.bridge&&!e.connectorOpts.uri&&!e.connectorOpts.session)throw new Error("Missing one of the required parameters: bridge / uri / session");var g;e.connectorOpts.bridge&&(this.bridge=function(e){return"walletconnect.org"===function(e){return function(e){let g=e.indexOf("//")>-1?e.split("/")[2]:e.split("/")[0];return g=g.split(":")[0],g=g.split("?")[0],g}(e).split(".").slice(-2).join(".")}(e)}(g=e.connectorOpts.bridge)?Zg():g),e.connectorOpts.uri&&(this.uri=e.connectorOpts.uri);const t=e.connectorOpts.session||this._getStorageSession();t&&(this.session=t),this.handshakeId&&this._subscribeToSessionResponse(this.handshakeId,"Session request rejected"),this._transport=e.transport||new cg({protocol:this.protocol,version:this.version,url:this.bridge,subscriptions:[this.clientId]}),this._subscribeToInternalEvents(),this._initTransport(),e.connectorOpts.uri&&this._subscribeToSessionRequest(),e.pushServerOpts&&this._registerPushServer(e.pushServerOpts)}set bridge(e){e&&(this._bridge=e)}get bridge(){return this._bridge}set key(e){if(!e)return;const g=Ye(e).buffer;this._key=g}get key(){if(this._key){return e=this._key,g=!0,Xe(new Uint8Array(e),!g)}var e,g;return""}set clientId(e){e&&(this._clientId=e)}get clientId(){let e=this._clientId;return e||(e=this._clientId=$e()),this._clientId}set peerId(e){e&&(this._peerId=e)}get peerId(){return this._peerId}set clientMeta(e){}get clientMeta(){let e=this._clientMeta;return e||(e=this._clientMeta=ae()),e}set peerMeta(e){this._peerMeta=e}get peerMeta(){return this._peerMeta}set handshakeTopic(e){e&&(this._handshakeTopic=e)}get handshakeTopic(){return this._handshakeTopic}set handshakeId(e){e&&(this._handshakeId=e)}get handshakeId(){return this._handshakeId}get uri(){return this._formatUri()}set uri(e){if(!e)return;const{handshakeTopic:g,bridge:t,key:n}=this._parseUri(e);this.handshakeTopic=g,this.bridge=t,this.key=n}set chainId(e){this._chainId=e}get chainId(){return this._chainId}set networkId(e){this._networkId=e}get networkId(){return this._networkId}set accounts(e){this._accounts=e}get accounts(){return this._accounts}set rpcUrl(e){this._rpcUrl=e}get rpcUrl(){return this._rpcUrl}set connected(e){}get connected(){return this._connected}set pending(e){}get pending(){return!!this._handshakeTopic}get session(){return{connected:this.connected,accounts:this.accounts,chainId:this.chainId,bridge:this.bridge,key:this.key,clientId:this.clientId,clientMeta:this.clientMeta,peerId:this.peerId,peerMeta:this.peerMeta,handshakeId:this.handshakeId,handshakeTopic:this.handshakeTopic}}set session(e){e&&(this._connected=e.connected,this.accounts=e.accounts,this.chainId=e.chainId,this.bridge=e.bridge,this.key=e.key,this.clientId=e.clientId,this.clientMeta=e.clientMeta,this.peerId=e.peerId,this.peerMeta=e.peerMeta,this.handshakeId=e.handshakeId,this.handshakeTopic=e.handshakeTopic)}on(e,g){const t={event:e,callback:g};this._eventManager.subscribe(t)}off(e){this._eventManager.unsubscribe(e)}async createInstantRequest(e){this._key=await this._generateKey();const g=this._formatRequest({method:"wc_instantRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,request:this._formatRequest(e)}]});this.handshakeId=g.id,this.handshakeTopic=$e(),this._eventManager.trigger({event:"display_uri",params:[this.uri]}),this.on("modal_closed",(()=>{throw new Error(hg)}));const t=()=>{this.killSession()};try{const e=await this._sendCallRequest(g);return e&&t(),e}catch(n){throw t(),n}}async connect(e){if(!this._qrcodeModal)throw new Error("QRCode Modal not provided");return this.connected?{chainId:this.chainId,accounts:this.accounts}:(await this.createSession(e),new Promise((async(e,g)=>{this.on("modal_closed",(()=>g(new Error(hg)))),this.on("connect",((t,n)=>{if(t)return g(t);e(n.params[0])}))})))}async createSession(e){if(this._connected)throw new Error(Ag);if(this.pending)return;this._key=await this._generateKey();const g=this._formatRequest({method:"wc_sessionRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,chainId:e&&e.chainId?e.chainId:null}]});this.handshakeId=g.id,this.handshakeTopic=$e(),this._sendSessionRequest(g,"Session update rejected",{topic:this.handshakeTopic}),this._eventManager.trigger({event:"display_uri",params:[this.uri]})}approveSession(e){if(this._connected)throw new Error(Ag);this.chainId=e.chainId,this.accounts=e.accounts,this.networkId=e.networkId||0,this.rpcUrl=e.rpcUrl||"";const g={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl,peerId:this.clientId,peerMeta:this.clientMeta},t={id:this.handshakeId,jsonrpc:"2.0",result:g};this._sendResponse(t),this._connected=!0,this._setStorageSession(),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})}rejectSession(e){if(this._connected)throw new Error(Ag);const g=e&&e.message?e.message:"Session Rejected",t=this._formatResponse({id:this.handshakeId,error:{message:g}});this._sendResponse(t),this._connected=!1,this._eventManager.trigger({event:"disconnect",params:[{message:g}]}),this._removeStorageSession()}updateSession(e){if(!this._connected)throw new Error(ug);this.chainId=e.chainId,this.accounts=e.accounts,this.networkId=e.networkId||0,this.rpcUrl=e.rpcUrl||"";const g={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl},t=this._formatRequest({method:"wc_sessionUpdate",params:[g]});this._sendSessionRequest(t,"Session update rejected"),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]}),this._manageStorageSession()}async killSession(e){const g=e?e.message:"Session Disconnected",t=this._formatRequest({method:"wc_sessionUpdate",params:[{approved:!1,chainId:null,networkId:null,accounts:null}]});await this._sendRequest(t),this._handleSessionDisconnect(g)}async sendTransaction(e){if(!this._connected)throw new Error(ug);const g=rg(e),t=this._formatRequest({method:"eth_sendTransaction",params:[g]});return await this._sendCallRequest(t)}async signTransaction(e){if(!this._connected)throw new Error(ug);const g=rg(e),t=this._formatRequest({method:"eth_signTransaction",params:[g]});return await this._sendCallRequest(t)}async signMessage(e){if(!this._connected)throw new Error(ug);const g=this._formatRequest({method:"eth_sign",params:e});return await this._sendCallRequest(g)}async signPersonalMessage(e){if(!this._connected)throw new Error(ug);e=Cg(e);const g=this._formatRequest({method:"personal_sign",params:e});return await this._sendCallRequest(g)}async signTypedData(e){if(!this._connected)throw new Error(ug);const g=this._formatRequest({method:"eth_signTypedData",params:e});return await this._sendCallRequest(g)}async updateChain(e){if(!this._connected)throw new Error("Session currently disconnected");const g=this._formatRequest({method:"wallet_updateChain",params:[e]});return await this._sendCallRequest(g)}unsafeSend(e,g){return this._sendRequest(e,g),this._eventManager.trigger({event:"call_request_sent",params:[{request:e,options:g}]}),new Promise(((g,t)=>{this._subscribeToResponse(e.id,((e,n)=>{if(e)t(e);else{if(!n)throw new Error("Missing JSON RPC response");g(n)}}))}))}async sendCustomRequest(e,g){if(!this._connected)throw new Error(ug);switch(e.method){case"eth_accounts":return this.accounts;case"eth_chainId":return Qe(this.chainId);case"eth_sendTransaction":case"eth_signTransaction":e.params&&(e.params[0]=rg(e.params[0]));break;case"personal_sign":e.params&&(e.params=Cg(e.params))}const t=this._formatRequest(e);return await this._sendCallRequest(t,g)}approveRequest(e){if(!gg(e))throw new Error('JSON-RPC success response must include "result" field');{const g=this._formatResponse(e);this._sendResponse(g)}}rejectRequest(e){if(!tg(e))throw new Error('JSON-RPC error response must include "error" field');{const g=this._formatResponse(e);this._sendResponse(g)}}transportClose(){this._transport.close()}async _sendRequest(e,g){const t=this._formatRequest(e),n=await this._encrypt(t),I="undefined"!==typeof(null===g||void 0===g?void 0:g.topic)?g.topic:this.peerId,C=JSON.stringify(n),r="undefined"!==typeof(null===g||void 0===g?void 0:g.forcePushNotification)?!g.forcePushNotification:function(e){return!!e.method.startsWith("wc_")||!be.includes(e.method)}(t);this._transport.send(C,I,r)}async _sendResponse(e){const g=await this._encrypt(e),t=this.peerId,n=JSON.stringify(g);this._transport.send(n,t,!0)}async _sendSessionRequest(e,g,t){this._sendRequest(e,t),this._subscribeToSessionResponse(e.id,g)}_sendCallRequest(e,g){return this._sendRequest(e,g),this._eventManager.trigger({event:"call_request_sent",params:[{request:e,options:g}]}),this._subscribeToCallResponse(e.id)}_formatRequest(e){if("undefined"===typeof e.method)throw new Error('JSON RPC request must have valid "method" value');return{id:"undefined"===typeof e.id?qe():e.id,jsonrpc:"2.0",method:e.method,params:"undefined"===typeof e.params?[]:e.params}}_formatResponse(e){if("undefined"===typeof e.id)throw new Error('JSON RPC request must have valid "id" value');const g={id:e.id,jsonrpc:"2.0"};if(tg(e)){const t=function(e){const g=e.message||"Failed or Rejected Request";let t=-32e3;if(e&&!e.code)switch(g){case"Parse error":t=-32700;break;case"Invalid request":t=-32600;break;case"Method not found":t=-32601;break;case"Invalid params":t=-32602;break;case"Internal error":t=-32603;break;default:t=-32e3}return{code:t,message:g}}(e.error);return Object.assign(Object.assign(Object.assign({},g),e),{error:t})}if(gg(e)){return Object.assign(Object.assign({},g),e)}throw new Error(dg)}_handleSessionDisconnect(e){const g=e||"Session Disconnected";this._connected||(this._qrcodeModal&&this._qrcodeModal.close(),de(he)),this._connected&&(this._connected=!1),this._handshakeId&&(this._handshakeId=0),this._handshakeTopic&&(this._handshakeTopic=""),this._peerId&&(this._peerId=""),this._eventManager.trigger({event:"disconnect",params:[{message:g}]}),this._removeStorageSession(),this.transportClose()}_handleSessionResponse(e,g){g&&g.approved?(this._connected?(g.chainId&&(this.chainId=g.chainId),g.accounts&&(this.accounts=g.accounts),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]})):(this._connected=!0,g.chainId&&(this.chainId=g.chainId),g.accounts&&(this.accounts=g.accounts),g.peerId&&!this.peerId&&(this.peerId=g.peerId),g.peerMeta&&!this.peerMeta&&(this.peerMeta=g.peerMeta),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})),this._manageStorageSession()):this._handleSessionDisconnect(e)}async _handleIncomingMessages(e){if(![this.clientId,this.handshakeTopic].includes(e.topic))return;let g;try{g=JSON.parse(e.payload)}catch(n){return}const t=await this._decrypt(g);t&&this._eventManager.trigger(t)}_subscribeToSessionRequest(){this._transport.subscribe(this.handshakeTopic)}_subscribeToResponse(e,g){this.on(`response:${e}`,g)}_subscribeToSessionResponse(e,g){this._subscribeToResponse(e,((e,t)=>{e?this._handleSessionResponse(e.message):gg(t)?this._handleSessionResponse(g,t.result):t.error&&t.error.message?this._handleSessionResponse(t.error.message):this._handleSessionResponse(g)}))}_subscribeToCallResponse(e){return new Promise(((g,t)=>{this._subscribeToResponse(e,((e,n)=>{e?t(e):gg(n)?g(n.result):n.error&&n.error.message?t(new Error(n.error.message)):t(new Error(dg))}))}))}_subscribeToInternalEvents(){this.on("display_uri",(()=>{this._qrcodeModal&&this._qrcodeModal.open(this.uri,(()=>{this._eventManager.trigger({event:"modal_closed",params:[]})}),this._qrcodeModalOptions)})),this.on("connect",(()=>{this._qrcodeModal&&this._qrcodeModal.close()})),this.on("call_request_sent",((e,g)=>{const{request:t}=g.params[0];if(Ce()&&this._signingMethods.includes(t.method)){const e=ue(he);e&&(window.location.href=e.href)}})),this.on("wc_sessionRequest",((e,g)=>{e&&this._eventManager.trigger({event:"error",params:[{code:"SESSION_REQUEST_ERROR",message:e.toString()}]}),this.handshakeId=g.id,this.peerId=g.params[0].peerId,this.peerMeta=g.params[0].peerMeta;const t=Object.assign(Object.assign({},g),{method:"session_request"});this._eventManager.trigger(t)})),this.on("wc_sessionUpdate",((e,g)=>{e&&this._handleSessionResponse(e.message),this._handleSessionResponse("Session disconnected",g.params[0])}))}_initTransport(){this._transport.on("message",(e=>this._handleIncomingMessages(e))),this._transport.on("open",(()=>this._eventManager.trigger({event:"transport_open",params:[]}))),this._transport.on("close",(()=>this._eventManager.trigger({event:"transport_close",params:[]}))),this._transport.on("error",(()=>this._eventManager.trigger({event:"transport_error",params:["Websocket connection failed"]}))),this._transport.open()}_formatUri(){return`${this.protocol}:${this.handshakeTopic}@${this.version}?bridge=${encodeURIComponent(this.bridge)}&key=${this.key}`}_parseUri(e){const g=function(e){const g=e.indexOf(":"),t=-1!==e.indexOf("?")?e.indexOf("?"):void 0,n=e.substring(0,g),I=function(e){const g=e.split("@");return{handshakeTopic:g[0],version:parseInt(g[1],10)}}(e.substring(g+1,t)),C=function(e){const g=lg(e);return{key:g.key||"",bridge:g.bridge||""}}("undefined"!==typeof t?e.substr(t):"");return Object.assign(Object.assign({protocol:n},I),C)}(e);if(g.protocol===this.protocol){if(!g.handshakeTopic)throw Error("Invalid or missing handshakeTopic parameter value");const e=g.handshakeTopic;if(!g.bridge)throw Error("Invalid or missing bridge url parameter value");const t=decodeURIComponent(g.bridge);if(!g.key)throw Error("Invalid or missing key parameter value");return{handshakeTopic:e,bridge:t,key:g.key}}throw new Error("URI format is invalid")}async _generateKey(){if(this._cryptoLib){return await this._cryptoLib.generateKey()}return null}async _encrypt(e){const g=this._key;if(this._cryptoLib&&g){return await this._cryptoLib.encrypt(e,g)}return null}async _decrypt(e){const g=this._key;if(this._cryptoLib&&g){return await this._cryptoLib.decrypt(e,g)}return null}_getStorageSession(){let e=null;return this._sessionStorage&&(e=this._sessionStorage.getSession()),e}_setStorageSession(){this._sessionStorage&&this._sessionStorage.setSession(this.session)}_removeStorageSession(){this._sessionStorage&&this._sessionStorage.removeSession()}_manageStorageSession(){this._connected?this._setStorageSession():this._removeStorageSession()}_registerPushServer(e){if(!e.url||"string"!==typeof e.url)throw Error("Invalid or missing pushServerOpts.url parameter value");if(!e.type||"string"!==typeof e.type)throw Error("Invalid or missing pushServerOpts.type parameter value");if(!e.token||"string"!==typeof e.token)throw Error("Invalid or missing pushServerOpts.token parameter value");const g={bridge:this.bridge,topic:this.clientId,type:e.type,token:e.token,peerName:"",language:e.language||""};this.on("connect",(async(t,n)=>{if(t)throw t;if(e.peerMeta){const e=n.params[0].peerMeta.name;g.peerName=e}try{const t=await fetch(`${e.url}/new`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(g)});if(!(await t.json()).success)throw Error("Failed to register in Push Server")}catch(t){throw Error("Failed to register in Push Server")}}))}};const Gg="AES-CBC",Bg="HMAC";async function fg(e,g="AES-CBC"){return je.getSubtleCrypto().importKey("raw",e,function(e){return e===Gg?{length:256,name:Gg}:{hash:{name:"SHA-256"},name:Bg}}(g),!0,function(e){return e===Gg?["encrypt","decrypt"]:["sign","verify"]}(g))}function vg(e,g,t){return async function(e,g,t){const n=je.getSubtleCrypto(),I=await fg(g,Gg),C=await n.encrypt({iv:e,name:Gg},I,t);return new Uint8Array(C)}(e,g,t)}function Sg(e,g,t){return async function(e,g,t){const n=je.getSubtleCrypto(),I=await fg(g,Gg),C=await n.decrypt({iv:e,name:Gg},I,t);return new Uint8Array(C)}(e,g,t)}async function Vg(e,g){const t=await async function(e,g){const t=je.getSubtleCrypto(),n=await fg(e,Bg),I=await t.sign({length:256,name:Bg},n,g);return new Uint8Array(I)}(e,g);return t}async function Wg(e){const g=function(e){return je.getBrowerCrypto().getRandomValues(new Uint8Array(e))}((e||256)/8);return Ve(ke(g)).buffer}async function Rg(e,g){const t=Ye(e.data),n=Ye(e.iv),I=Xe(Ye(e.hmac),!1),C=Ke(t,n),r=Xe(await Vg(g,C),!1);return xe(I)===xe(r)}async function kg(e,g,t){const n=Ve(ze(g)),I=Ve(ze(t||await Wg(128))),C=Xe(I,!1),r=Ne(JSON.stringify(e)),o=await vg(I,n,r),i=Xe(o,!1),l=Ke(o,I);return{data:i,hmac:Xe(await Vg(n,l),!1),iv:C}}async function Xg(e,g){const t=Ve(ze(g));if(!t)throw new Error("Missing key: required for decryption");if(!(await Rg(e,t)))return null;const n=Ye(e.data),I=Ye(e.iv),C=Je(await Sg(I,t,n));let r;try{r=JSON.parse(C)}catch(o){return null}return r}var Jg=class extends yg{constructor(e,g){super({cryptoLib:n,connectorOpts:e,pushServerOpts:g})}};function wg(e,g){(null==g||g>e.length)&&(g=e.length);for(var t=0,n=new Array(g);t<g;t++)n[t]=e[t];return n}function Yg(e,g,t,n,I,C,r){try{var o=e[C](r),i=o.value}catch(l){return void t(l)}o.done?g(i):Promise.resolve(i).then(n,I)}function Hg(e){return function(){var g=this,t=arguments;return new Promise((function(n,I){var C=e.apply(g,t);function r(e){Yg(C,n,I,r,o,"next",e)}function o(e){Yg(C,n,I,r,o,"throw",e)}r(void 0)}))}}function Ng(e,g){return function(e){if(Array.isArray(e))return e}(e)||function(e,g){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,I,C=[],r=!0,o=!1;try{for(t=t.call(e);!(r=(n=t.next()).done)&&(C.push(n.value),!g||C.length!==g);r=!0);}catch(i){o=!0,I=i}finally{try{r||null==t.return||t.return()}finally{if(o)throw I}}return C}}(e,g)||function(e,g){if(!e)return;if("string"===typeof e)return wg(e,g);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return wg(e,g)}(e,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Fg="https://bridge.walletconnect.org";function Kg(){return(Kg=Hg(C().mark((function e(g){var t;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=new Jg({bridge:Fg,qrcodeModal:$()})).connected){e.next=4;break}return e.next=4,t.connect();case 4:if(t.session.connected){e.next=7;break}return e.next=7,t.createSession();case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Eg(){return Eg=Hg(C().mark((function e(g,t){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Hg(C().mark((function e(t,n){var I,r,o,i;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r=Ng(g.session.accounts,1),o=r[0],i=null===(I=g.session.peerMeta)||void 0===I?void 0:I.name,t({address:o,name:i})}catch(C){n(C)}case 1:case"end":return e.stop()}}),e)})));return function(g,t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),Eg.apply(this,arguments)}function xg(){return(xg=Hg(C().mark((function e(g){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Mg=function(){var e=Hg(C().mark((function e(g,t){var n,I,r,o;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.txns.map((function(e){var g=e.txn;return e.signers.length>0?{txn:g}:{txn:g,signers:[]}})),e.next=3,g.sendCustomRequest({id:Date.now()+Math.floor(1e3*Math.random()),jsonrpc:"2.0",method:"algo_signTxn",params:[n]});case 3:return I=e.sent,r=t.txns.filter((function(e){return 0==e.signers.length})).map((function(e){return e.txn})),o=I.filter((function(e){return void 0!=e})).map((function(e){return window.btoa(String.fromCharCode.apply(null,e))})),e.abrupt("return",{signed:o,unsigned:r});case 7:case"end":return e.stop()}}),e)})));return function(g,t){return e.apply(this,arguments)}}();function Ug(e,g){(null==g||g>e.length)&&(g=e.length);for(var t=0,n=new Array(g);t<g;t++)n[t]=e[t];return n}function Tg(e,g,t,n,I,C,r){try{var o=e[C](r),i=o.value}catch(l){return void t(l)}o.done?g(i):Promise.resolve(i).then(n,I)}function zg(e){return function(){var g=this,t=arguments;return new Promise((function(n,I){var C=e.apply(g,t);function r(e){Tg(C,n,I,r,o,"next",e)}function o(e){Tg(C,n,I,r,o,"throw",e)}r(void 0)}))}}function Lg(e,g,t){return g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}function Qg(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(g){Lg(e,g,t[g])}))}return e}function Dg(e){return function(e){if(Array.isArray(e))return Ug(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,g){if(!e)return;if("string"===typeof e)return Ug(e,g);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ug(e,g)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jg(e,g){switch(e){case i.Sq.MyAlgoWallet:return function(e,g){return j.apply(this,arguments)}(g);case i.Sq.AlgoSigner:return function(e){return J.apply(this,arguments)}(g);case i.Sq.PeraWallet:return function(e){return Kg.apply(this,arguments)}(g);default:throw R(e)}}function Og(e,g,t){switch(g){case i.Sq.MyAlgoWallet:return function(e){return O.apply(this,arguments)}(e);case i.Sq.AlgoSigner:return function(e,g){return w.apply(this,arguments)}(e,t);case i.Sq.PeraWallet:return function(e,g){return Eg.apply(this,arguments)}(e,t);default:throw R(g)}}function Pg(e,g,t){switch(g){case i.Sq.MyAlgoWallet:return function(){return P.apply(this,arguments)}();case i.Sq.AlgoSigner:return function(e){return Y.apply(this,arguments)}(e);case i.Sq.PeraWallet:return function(e){return xg.apply(this,arguments)}(e);default:throw R(g)}}function _g(e,g,t,n){try{switch(g){case i.Sq.MyAlgoWallet:return _(e,t);case i.Sq.AlgoSigner:return H(e,t);case i.Sq.PeraWallet:return Mg(e,t);default:throw R(g)}}catch(I){throw console.log({walletType:g,error:I}),new z(e,g,t,n,I)}}function qg(e,g){return $g.apply(this,arguments)}function $g(){return($g=zg(C().mark((function e(g,t){var n;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G({chain:g,params:{addresses:t.map((function(e){return e.address}))},throwError:!0});case 2:return n=e.sent,e.abrupt("return",t.map((function(e){var g;return Qg({},e,{balance:null===(g=n.payload)||void 0===g?void 0:g[e.address].balance})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(e,g){return gt.apply(this,arguments)}function gt(){return(gt=zg(C().mark((function e(g,t){var n,I;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([h].map((function(e){return m({chain:g,params:{owner:t.address,seed:e},throwError:!0})})));case 2:return n=e.sent.map((function(e){return{address:e.payload.wallet,name:e.payload.seed===h?"Default Delegated Wallet":"Delegated Wallet #".concat(e.payload.seed),seed:e.payload.seed}})),e.abrupt("return",[Qg({},t,{name:null!==(I=t.name)&&void 0!==I?I:"Main Algorand Wallet"})].concat(Dg(n)));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},5549:function(e,g,t){"use strict";var n,I,C,r;t.d(g,{Ut:function(){return r},Jb:function(){return n},Sq:function(){return C}}),function(e){e.MainNet="MainNet",e.TestNet="TestNet",e.BetaNet="BetaNet"}(n||(n={})),function(e){e[e.None=0]="None",e.NotAuthorized="[RequestErrors.NotAuthorized] The extension user does not authorize the request.",e.InvalidTransactionParams="[RequestErrors.InvalidTransactionParams] Invalid transaction parameters.",e.UnsupportedAlgod="[RequestErrors.UnsupportedAlgod] The provided method is not supported.",e.UnsupportedLedger="[RequestErrors.UnsupportedLedger] The provided ledger is not supported.",e.Undefined="[RequestErrors.Undefined] An undefined error occurred."}(I||(I={})),function(e){e.AlgoSigner="AlgoSigner",e.MyAlgoWallet="MyAlgoWallet",e.PeraWallet="PeraWallet"}(C||(C={})),function(e){e.USDD="USDD",e.EURD="EURD",e.GBPD="GBPD",e.CHFD="CHFD"}(r||(r={}))},8473:function(e,g,t){"use strict";t.d(g,{$T:function(){return A},Ts:function(){return u},ar:function(){return d},qA:function(){return c},qf:function(){return a},sM:function(){return s}});var n=t(4051),I=t.n(n),C=t(4931),r=t(4423),o=t.n(r);function i(e,g,t,n,I,C,r){try{var o=e[C](r),i=o.value}catch(l){return void t(l)}o.done?g(i):Promise.resolve(i).then(n,I)}function l(e){return function(){var g=this,t=arguments;return new Promise((function(n,I){var C=e.apply(g,t);function r(e){i(C,n,I,r,o,"next",e)}function o(e){i(C,n,I,r,o,"throw",e)}r(void 0)}))}}var a=function(e){return o().validate(e||"","algo")?void 0:"Please enter a valid address."},s=function(){var e=l(I().mark((function e(g){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var t=new FileReader;t.onload=function(){return e(t.result)},t.readAsDataURL(new Blob([g]))}));case 2:return t=e.sent,e.abrupt("return",t.split(",",2)[1]);case 4:case"end":return e.stop()}}),e)})));return function(g){return e.apply(this,arguments)}}(),c=function(e){return Object.keys(e).map((function(g){return e[g]}))},A=function(e,g){return Error("`".concat(e,"` must be used within `").concat(g,"`."))},u=function(){var e=l(I().mark((function e(g){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=null===g||void 0===g?void 0:g())){e.next=5;break}return e.next=4,navigator.clipboard.writeText(t);case 4:C.ZP.success("Copied to clipboard.");case 5:case"end":return e.stop()}}),e)})));return function(g){return e.apply(this,arguments)}}(),d=function(){var e=l(I().mark((function e(g){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.readText();case 3:(t=e.sent)&&(null===g||void 0===g||g(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,C.ZP)("Your browser doesn't support reading from clipboard");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(g){return e.apply(this,arguments)}}()},5775:function(e){e.exports={base:"Button_base__EYBmf",primary:"Button_primary__wnomA",secondary:"Button_secondary__HrEDu",text:"Button_text__t2U9w"}},7107:function(){},9008:function(e,g,t){e.exports=t(3121)},1664:function(e,g,t){e.exports=t(1551)},1163:function(e,g,t){e.exports=t(880)},8602:function(e,g){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.format=void 0;var t=/(%?)(%([sdjo]))/g;function n(e,g){switch(g){case"s":return e;case"d":case"i":return Number(e);case"j":return JSON.stringify(e);case"o":if("string"===typeof e)return e;var t=JSON.stringify(e);return"{}"===t||"[]"===t||/^\[object .+?\]$/.test(t)?e:t}}g.format=function(e){for(var g=[],I=1;I<arguments.length;I++)g[I-1]=arguments[I];if(0===g.length)return e;var C=0,r=e.replace(t,(function(e,t,I,r){var o=n(g[C],r);return t?e:(C++,o)}));return C<g.length&&(r+=" "+g.slice(C).join(" ")),r=r.replace(/%{2,2}/g,"%")}},8987:function(e,g,t){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,g,t,n){void 0===n&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return g[t]}})}:function(e,g,t,n){void 0===n&&(n=t),e[n]=g[t]}),I=this&&this.__exportStar||function(e,g){for(var t in e)"default"===t||Object.prototype.hasOwnProperty.call(g,t)||n(g,e,t)};Object.defineProperty(g,"__esModule",{value:!0}),I(t(2413),g),I(t(8602),g)},2413:function(e,g,t){"use strict";var n=this&&this.__extends||function(){var e=function(g,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,g){e.__proto__=g}||function(e,g){for(var t in g)Object.prototype.hasOwnProperty.call(g,t)&&(e[t]=g[t])},e(g,t)};return function(g,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=g}e(g,t),g.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),I=this&&this.__spreadArray||function(e,g){for(var t=0,n=g.length,I=e.length;t<n;t++,I++)e[I]=g[t];return e};Object.defineProperty(g,"__esModule",{value:!0}),g.invariant=g.InvariantError=void 0;var C=t(8602),r=function(e){function g(g){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=e.call(this,g)||this;if(r.name="Invariant Violation",r.message=C.format.apply(void 0,I([g],t)),r.stack){var o=r.stack.split("\n");o.splice(1,2),r.stack=o.join("\n")}return r}return n(g,e),g}(Error);g.InvariantError=r,g.invariant=function(e,g){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];if(!e)throw new(r.bind.apply(r,I([void 0,g],t)))}},7423:function(e,g,t){"use strict";t.r(g),t.d(g,{Children:function(){return be},Component:function(){return p},Fragment:function(){return b},PureComponent:function(){return Ae},Suspense:function(){return ye},SuspenseList:function(){return fe},cloneElement:function(){return xe},createContext:function(){return K},createElement:function(){return d},createFactory:function(){return Ke},createPortal:function(){return We},createRef:function(){return m},default:function(){return ze},findDOMNode:function(){return Ue},forwardRef:function(){return he},hydrate:function(){return Je},isValidElement:function(){return Ee},lazy:function(){return Be},memo:function(){return ue},render:function(){return Xe},unmountComponentAtNode:function(){return Me},unstable_batchedUpdates:function(){return Te},useCallback:function(){return te},useContext:function(){return ne},useDebugValue:function(){return Ie},useEffect:function(){return _},useErrorBoundary:function(){return Ce},useImperativeHandle:function(){return ee},useLayoutEffect:function(){return q},useMemo:function(){return ge},useReducer:function(){return P},useRef:function(){return $},useState:function(){return O},version:function(){return Fe}});var n,I,C,r,o,i,l,a={},s=[],c=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function A(e,g){for(var t in g)e[t]=g[t];return e}function u(e){var g=e.parentNode;g&&g.removeChild(e)}function d(e,g,t){var n,I=arguments,C={};for(n in g)"key"!==n&&"ref"!==n&&(C[n]=g[n]);if(arguments.length>3)for(t=[t],n=3;n<arguments.length;n++)t.push(I[n]);if(null!=t&&(C.children=t),"function"==typeof e&&null!=e.defaultProps)for(n in e.defaultProps)void 0===C[n]&&(C[n]=e.defaultProps[n]);return h(e,C,g&&g.key,g&&g.ref,null)}function h(e,g,t,I,C){var r={type:e,props:g,key:t,ref:I,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:C};return null==C&&(r.__v=r),n.vnode&&n.vnode(r),r}function m(){return{}}function b(e){return e.children}function p(e,g){this.props=e,this.context=g}function Z(e,g){if(null==g)return e.__?Z(e.__,e.__.__k.indexOf(e)+1):null;for(var t;g<e.__k.length;g++)if(null!=(t=e.__k[g])&&null!=t.__e)return t.__e;return"function"==typeof e.type?Z(e):null}function y(e){var g,t;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,g=0;g<e.__k.length;g++)if(null!=(t=e.__k[g])&&null!=t.__e){e.__e=e.__c.base=t.__e;break}return y(e)}}function G(e){(!e.__d&&(e.__d=!0)&&I.push(e)&&!C++||o!==n.debounceRendering)&&((o=n.debounceRendering)||r)(B)}function B(){for(var e;C=I.length;)e=I.sort((function(e,g){return e.__v.__b-g.__v.__b})),I=[],e.some((function(e){var g,t,n,I,C,r,o;e.__d&&(r=(C=(g=e).__v).__e,(o=g.__P)&&(t=[],(n=A({},C)).__v=n,I=R(o,C,n,g.__n,void 0!==o.ownerSVGElement,null,t,null==r?Z(C):r),k(t,C),I!=r&&y(C)))}))}function f(e,g,t,n,I,C,r,o,i){var l,c,A,d,h,m,b,p=t&&t.__k||s,y=p.length;if(o==a&&(o=null!=C?C[0]:y?Z(t,0):null),l=0,g.__k=v(g.__k,(function(t){if(null!=t){if(t.__=g,t.__b=g.__b+1,null===(A=p[l])||A&&t.key==A.key&&t.type===A.type)p[l]=void 0;else for(c=0;c<y;c++){if((A=p[c])&&t.key==A.key&&t.type===A.type){p[c]=void 0;break}A=null}if(d=R(e,t,A=A||a,n,I,C,r,o,i),(c=t.ref)&&A.ref!=c&&(b||(b=[]),A.ref&&b.push(A.ref,null,t),b.push(c,t.__c||d,t)),null!=d){var s;if(null==m&&(m=d),void 0!==t.__d)s=t.__d,t.__d=void 0;else if(C==A||d!=o||null==d.parentNode){e:if(null==o||o.parentNode!==e)e.appendChild(d),s=null;else{for(h=o,c=0;(h=h.nextSibling)&&c<y;c+=2)if(h==d)break e;e.insertBefore(d,o),s=o}"option"==g.type&&(e.value="")}o=void 0!==s?s:d.nextSibling,"function"==typeof g.type&&(g.__d=o)}else o&&A.__e==o&&o.parentNode!=e&&(o=Z(A))}return l++,t})),g.__e=m,null!=C&&"function"!=typeof g.type)for(l=C.length;l--;)null!=C[l]&&u(C[l]);for(l=y;l--;)null!=p[l]&&w(p[l],p[l]);if(b)for(l=0;l<b.length;l++)J(b[l],b[++l],b[++l])}function v(e,g,t){if(null==t&&(t=[]),null==e||"boolean"==typeof e)g&&t.push(g(null));else if(Array.isArray(e))for(var n=0;n<e.length;n++)v(e[n],g,t);else t.push(g?g("string"==typeof e||"number"==typeof e?h(null,e,null,null,e):null!=e.__e||null!=e.__c?h(e.type,e.props,e.key,null,e.__v):e):e);return t}function S(e,g,t){"-"===g[0]?e.setProperty(g,t):e[g]="number"==typeof t&&!1===c.test(g)?t+"px":null==t?"":t}function V(e,g,t,n,I){var C,r,o,i,l;if(I?"className"===g&&(g="class"):"class"===g&&(g="className"),"style"===g)if(C=e.style,"string"==typeof t)C.cssText=t;else{if("string"==typeof n&&(C.cssText="",n=null),n)for(i in n)t&&i in t||S(C,i,"");if(t)for(l in t)n&&t[l]===n[l]||S(C,l,t[l])}else"o"===g[0]&&"n"===g[1]?(r=g!==(g=g.replace(/Capture$/,"")),o=g.toLowerCase(),g=(o in e?o:g).slice(2),t?(n||e.addEventListener(g,W,r),(e.l||(e.l={}))[g]=t):e.removeEventListener(g,W,r)):"list"!==g&&"tagName"!==g&&"form"!==g&&"type"!==g&&"size"!==g&&!I&&g in e?e[g]=null==t?"":t:"function"!=typeof t&&"dangerouslySetInnerHTML"!==g&&(g!==(g=g.replace(/^xlink:?/,""))?null==t||!1===t?e.removeAttributeNS("http://www.w3.org/1999/xlink",g.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",g.toLowerCase(),t):null==t||!1===t&&!/^ar/.test(g)?e.removeAttribute(g):e.setAttribute(g,t))}function W(e){this.l[e.type](n.event?n.event(e):e)}function R(e,g,t,I,C,r,o,i,l){var a,s,c,u,d,h,m,Z,y,G,B=g.type;if(void 0!==g.constructor)return null;(a=n.__b)&&a(g);try{e:if("function"==typeof B){if(Z=g.props,y=(a=B.contextType)&&I[a.__c],G=a?y?y.props.value:a.__:I,t.__c?m=(s=g.__c=t.__c).__=s.__E:("prototype"in B&&B.prototype.render?g.__c=s=new B(Z,G):(g.__c=s=new p(Z,G),s.constructor=B,s.render=Y),y&&y.sub(s),s.props=Z,s.state||(s.state={}),s.context=G,s.__n=I,c=s.__d=!0,s.__h=[]),null==s.__s&&(s.__s=s.state),null!=B.getDerivedStateFromProps&&(s.__s==s.state&&(s.__s=A({},s.__s)),A(s.__s,B.getDerivedStateFromProps(Z,s.__s))),u=s.props,d=s.state,c)null==B.getDerivedStateFromProps&&null!=s.componentWillMount&&s.componentWillMount(),null!=s.componentDidMount&&s.__h.push(s.componentDidMount);else{if(null==B.getDerivedStateFromProps&&Z!==u&&null!=s.componentWillReceiveProps&&s.componentWillReceiveProps(Z,G),!s.__e&&null!=s.shouldComponentUpdate&&!1===s.shouldComponentUpdate(Z,s.__s,G)||g.__v===t.__v&&!s.__){for(s.props=Z,s.state=s.__s,g.__v!==t.__v&&(s.__d=!1),s.__v=g,g.__e=t.__e,g.__k=t.__k,s.__h.length&&o.push(s),a=0;a<g.__k.length;a++)g.__k[a]&&(g.__k[a].__=g);break e}null!=s.componentWillUpdate&&s.componentWillUpdate(Z,s.__s,G),null!=s.componentDidUpdate&&s.__h.push((function(){s.componentDidUpdate(u,d,h)}))}s.context=G,s.props=Z,s.state=s.__s,(a=n.__r)&&a(g),s.__d=!1,s.__v=g,s.__P=e,a=s.render(s.props,s.state,s.context),g.__k=null!=a&&a.type==b&&null==a.key?a.props.children:Array.isArray(a)?a:[a],null!=s.getChildContext&&(I=A(A({},I),s.getChildContext())),c||null==s.getSnapshotBeforeUpdate||(h=s.getSnapshotBeforeUpdate(u,d)),f(e,g,t,I,C,r,o,i,l),s.base=g.__e,s.__h.length&&o.push(s),m&&(s.__E=s.__=null),s.__e=!1}else null==r&&g.__v===t.__v?(g.__k=t.__k,g.__e=t.__e):g.__e=X(t.__e,g,t,I,C,r,o,l);(a=n.diffed)&&a(g)}catch(e){g.__v=null,n.__e(e,g,t)}return g.__e}function k(e,g){n.__c&&n.__c(g,e),e.some((function(g){try{e=g.__h,g.__h=[],e.some((function(e){e.call(g)}))}catch(e){n.__e(e,g.__v)}}))}function X(e,g,t,n,I,C,r,o){var i,l,c,A,u,d=t.props,h=g.props;if(I="svg"===g.type||I,null!=C)for(i=0;i<C.length;i++)if(null!=(l=C[i])&&((null===g.type?3===l.nodeType:l.localName===g.type)||e==l)){e=l,C[i]=null;break}if(null==e){if(null===g.type)return document.createTextNode(h);e=I?document.createElementNS("http://www.w3.org/2000/svg",g.type):document.createElement(g.type,h.is&&{is:h.is}),C=null,o=!1}if(null===g.type)d!==h&&e.data!=h&&(e.data=h);else{if(null!=C&&(C=s.slice.call(e.childNodes)),c=(d=t.props||a).dangerouslySetInnerHTML,A=h.dangerouslySetInnerHTML,!o){if(d===a)for(d={},u=0;u<e.attributes.length;u++)d[e.attributes[u].name]=e.attributes[u].value;(A||c)&&(A&&c&&A.__html==c.__html||(e.innerHTML=A&&A.__html||""))}(function(e,g,t,n,I){var C;for(C in t)"children"===C||"key"===C||C in g||V(e,C,null,t[C],n);for(C in g)I&&"function"!=typeof g[C]||"children"===C||"key"===C||"value"===C||"checked"===C||t[C]===g[C]||V(e,C,g[C],t[C],n)})(e,h,d,I,o),A?g.__k=[]:(g.__k=g.props.children,f(e,g,t,n,"foreignObject"!==g.type&&I,C,r,a,o)),o||("value"in h&&void 0!==(i=h.value)&&i!==e.value&&V(e,"value",i,d.value,!1),"checked"in h&&void 0!==(i=h.checked)&&i!==e.checked&&V(e,"checked",i,d.checked,!1))}return e}function J(e,g,t){try{"function"==typeof e?e(g):e.current=g}catch(e){n.__e(e,t)}}function w(e,g,t){var I,C,r;if(n.unmount&&n.unmount(e),(I=e.ref)&&(I.current&&I.current!==e.__e||J(I,null,g)),t||"function"==typeof e.type||(t=null!=(C=e.__e)),e.__e=e.__d=void 0,null!=(I=e.__c)){if(I.componentWillUnmount)try{I.componentWillUnmount()}catch(e){n.__e(e,g)}I.base=I.__P=null}if(I=e.__k)for(r=0;r<I.length;r++)I[r]&&w(I[r],g,t);null!=C&&u(C)}function Y(e,g,t){return this.constructor(e,t)}function H(e,g,t){var I,C,r;n.__&&n.__(e,g),C=(I=t===i)?null:t&&t.__k||g.__k,e=d(b,null,[e]),r=[],R(g,(I?g:t||g).__k=e,C||a,a,void 0!==g.ownerSVGElement,t&&!I?[t]:C?null:s.slice.call(g.childNodes),r,t||a,I),k(r,e)}function N(e,g){H(e,g,i)}function F(e,g){var t,n;for(n in g=A(A({},e.props),g),arguments.length>2&&(g.children=s.slice.call(arguments,2)),t={},g)"key"!==n&&"ref"!==n&&(t[n]=g[n]);return h(e.type,t,g.key||e.key,g.ref||e.ref,null)}function K(e){var g={},t={__c:"__cC"+l++,__:e,Consumer:function(e,g){return e.children(g)},Provider:function(e){var n,I=this;return this.getChildContext||(n=[],this.getChildContext=function(){return g[t.__c]=I,g},this.shouldComponentUpdate=function(e){I.props.value!==e.value&&n.some((function(g){g.context=e.value,G(g)}))},this.sub=function(e){n.push(e);var g=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),g&&g.call(e)}}),e.children}};return t.Consumer.contextType=t,t.Provider.__=t,t}n={__e:function(e,g){for(var t,n;g=g.__;)if((t=g.__c)&&!t.__)try{if(t.constructor&&null!=t.constructor.getDerivedStateFromError&&(n=!0,t.setState(t.constructor.getDerivedStateFromError(e))),null!=t.componentDidCatch&&(n=!0,t.componentDidCatch(e)),n)return G(t.__E=t)}catch(g){e=g}throw e}},p.prototype.setState=function(e,g){var t;t=this.__s!==this.state?this.__s:this.__s=A({},this.state),"function"==typeof e&&(e=e(t,this.props)),e&&A(t,e),null!=e&&this.__v&&(g&&this.__h.push(g),G(this))},p.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),G(this))},p.prototype.render=b,I=[],C=0,r="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,i=a,l=0;var E,x,M,U=0,T=[],z=n.__r,L=n.diffed,Q=n.__c,D=n.unmount;function j(e,g){n.__h&&n.__h(x,e,U||g),U=0;var t=x.__H||(x.__H={__:[],__h:[]});return e>=t.__.length&&t.__.push({}),t.__[e]}function O(e){return U=1,P(ae,e)}function P(e,g,t){var n=j(E++,2);return n.__c||(n.__c=x,n.__=[t?t(g):ae(void 0,g),function(g){var t=e(n.__[0],g);n.__[0]!==t&&(n.__[0]=t,n.__c.setState({}))}]),n.__}function _(e,g){var t=j(E++,3);!n.__s&&le(t.__H,g)&&(t.__=e,t.__H=g,x.__H.__h.push(t))}function q(e,g){var t=j(E++,4);!n.__s&&le(t.__H,g)&&(t.__=e,t.__H=g,x.__h.push(t))}function $(e){return U=5,ge((function(){return{current:e}}),[])}function ee(e,g,t){U=6,q((function(){"function"==typeof e?e(g()):e&&(e.current=g())}),null==t?t:t.concat(e))}function ge(e,g){var t=j(E++,7);return le(t.__H,g)?(t.__H=g,t.__h=e,t.__=e()):t.__}function te(e,g){return U=8,ge((function(){return e}),g)}function ne(e){var g=x.context[e.__c],t=j(E++,9);return t.__c=e,g?(null==t.__&&(t.__=!0,g.sub(x)),g.props.value):e.__}function Ie(e,g){n.useDebugValue&&n.useDebugValue(g?g(e):e)}function Ce(e){var g=j(E++,10),t=O();return g.__=e,x.componentDidCatch||(x.componentDidCatch=function(e){g.__&&g.__(e),t[1](e)}),[t[0],function(){t[1](void 0)}]}function re(){T.some((function(e){if(e.__P)try{e.__H.__h.forEach(oe),e.__H.__h.forEach(ie),e.__H.__h=[]}catch(I){return e.__H.__h=[],n.__e(I,e.__v),!0}})),T=[]}function oe(e){e.t&&e.t()}function ie(e){var g=e.__();"function"==typeof g&&(e.t=g)}function le(e,g){return!e||g.some((function(g,t){return g!==e[t]}))}function ae(e,g){return"function"==typeof g?g(e):g}function se(e,g){for(var t in g)e[t]=g[t];return e}function ce(e,g){for(var t in e)if("__source"!==t&&!(t in g))return!0;for(var n in g)if("__source"!==n&&e[n]!==g[n])return!0;return!1}n.__r=function(e){z&&z(e),E=0,(x=e.__c).__H&&(x.__H.__h.forEach(oe),x.__H.__h.forEach(ie),x.__H.__h=[])},n.diffed=function(e){L&&L(e);var g=e.__c;if(g){var t=g.__H;t&&t.__h.length&&(1!==T.push(g)&&M===n.requestAnimationFrame||((M=n.requestAnimationFrame)||function(e){var g,t=function(){clearTimeout(n),cancelAnimationFrame(g),setTimeout(e)},n=setTimeout(t,100);"undefined"!=typeof window&&(g=requestAnimationFrame(t))})(re))}},n.__c=function(e,g){g.some((function(e){try{e.__h.forEach(oe),e.__h=e.__h.filter((function(e){return!e.__||ie(e)}))}catch(o){g.some((function(e){e.__h&&(e.__h=[])})),g=[],n.__e(o,e.__v)}})),Q&&Q(e,g)},n.unmount=function(e){D&&D(e);var g=e.__c;if(g){var t=g.__H;if(t)try{t.__.forEach((function(e){return e.t&&e.t()}))}catch(e){n.__e(e,g.__v)}}};var Ae=function(e){var g,t;function n(g){var t;return(t=e.call(this,g)||this).isPureReactComponent=!0,t}return t=e,(g=n).prototype=Object.create(t.prototype),g.prototype.constructor=g,g.__proto__=t,n.prototype.shouldComponentUpdate=function(e,g){return ce(this.props,e)||ce(this.state,g)},n}(p);function ue(e,g){function t(e){var t=this.props.ref,n=t==e.ref;return!n&&t&&(t.call?t(null):t.current=null),g?!g(this.props,e)||!n:ce(this.props,e)}function n(g){return this.shouldComponentUpdate=t,d(e,se({},g))}return n.prototype.isReactComponent=!0,n.displayName="Memo("+(e.displayName||e.name)+")",n.t=!0,n}var de=n.__b;function he(e){function g(g){var t=se({},g);return delete t.ref,e(t,g.ref)}return g.prototype.isReactComponent=g.t=!0,g.displayName="ForwardRef("+(e.displayName||e.name)+")",g}n.__b=function(e){e.type&&e.type.t&&e.ref&&(e.props.ref=e.ref,e.ref=null),de&&de(e)};var me=function(e,g){return e?v(e).reduce((function(e,t,n){return e.concat(g(t,n))}),[]):null},be={map:me,forEach:me,count:function(e){return e?v(e).length:0},only:function(e){if(1!==(e=v(e)).length)throw new Error("Children.only() expects only one child.");return e[0]},toArray:v},pe=n.__e;function Ze(e){return e&&((e=se({},e)).__c=null,e.__k=e.__k&&e.__k.map(Ze)),e}function ye(){this.__u=0,this.o=null,this.__b=null}function Ge(e){var g=e.__.__c;return g&&g.u&&g.u(e)}function Be(e){var g,t,n;function I(I){if(g||(g=e()).then((function(e){t=e.default||e}),(function(e){n=e})),n)throw n;if(!t)throw g;return d(t,I)}return I.displayName="Lazy",I.t=!0,I}function fe(){this.i=null,this.l=null}n.__e=function(e,g,t){if(e.then)for(var n,I=g;I=I.__;)if((n=I.__c)&&n.__c)return n.__c(e,g.__c);pe(e,g,t)},(ye.prototype=new p).__c=function(e,g){var t=this;null==t.o&&(t.o=[]),t.o.push(g);var n=Ge(t.__v),I=!1,C=function(){I||(I=!0,n?n(r):r())};g.__c=g.componentWillUnmount,g.componentWillUnmount=function(){C(),g.__c&&g.__c()};var r=function(){var e;if(!--t.__u)for(t.__v.__k[0]=t.state.u,t.setState({u:t.__b=null});e=t.o.pop();)e.forceUpdate()};t.__u++||t.setState({u:t.__b=t.__v.__k[0]}),e.then(C,C)},ye.prototype.render=function(e,g){return this.__b&&(this.__v.__k[0]=Ze(this.__b),this.__b=null),[d(p,null,g.u?null:e.children),g.u&&e.fallback]};var ve=function(e,g,t){if(++t[1]===t[0]&&e.l.delete(g),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.l.size))for(t=e.i;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;e.i=t=t[2]}};(fe.prototype=new p).u=function(e){var g=this,t=Ge(g.__v),n=g.l.get(e);return n[0]++,function(I){var C=function(){g.props.revealOrder?(n.push(I),ve(g,e,n)):I()};t?t(C):C()}},fe.prototype.render=function(e){this.i=null,this.l=new Map;var g=v(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&g.reverse();for(var t=g.length;t--;)this.l.set(g[t],this.i=[1,0,this.i]);return e.children},fe.prototype.componentDidUpdate=fe.prototype.componentDidMount=function(){var e=this;e.l.forEach((function(g,t){ve(e,t,g)}))};var Se=function(){function e(){}var g=e.prototype;return g.getChildContext=function(){return this.props.context},g.render=function(e){return e.children},e}();function Ve(e){var g=this,t=e.container,n=d(Se,{context:g.context},e.vnode);return g.s&&g.s!==t&&(g.v.parentNode&&g.s.removeChild(g.v),w(g.h),g.p=!1),e.vnode?g.p?(t.__k=g.__k,H(n,t),g.__k=t.__k):(g.v=document.createTextNode(""),N("",t),t.appendChild(g.v),g.p=!0,g.s=t,H(n,t,g.v),g.__k=g.v.__k):g.p&&(g.v.parentNode&&g.s.removeChild(g.v),w(g.h)),g.h=n,g.componentWillUnmount=function(){g.v.parentNode&&g.s.removeChild(g.v),w(g.h)},null}function We(e,g){return d(Ve,{vnode:e,container:g})}var Re=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;p.prototype.isReactComponent={};var ke="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;function Xe(e,g,t){if(null==g.__k)for(;g.firstChild;)g.removeChild(g.firstChild);return H(e,g),"function"==typeof t&&t(),e?e.__c:null}function Je(e,g,t){return N(e,g),"function"==typeof t&&t(),e?e.__c:null}var we=n.event;function Ye(e,g){e["UNSAFE_"+g]&&!e[g]&&Object.defineProperty(e,g,{configurable:!1,get:function(){return this["UNSAFE_"+g]},set:function(e){this["UNSAFE_"+g]=e}})}n.event=function(e){we&&(e=we(e)),e.persist=function(){};var g=!1,t=!1,n=e.stopPropagation;e.stopPropagation=function(){n.call(e),g=!0};var I=e.preventDefault;return e.preventDefault=function(){I.call(e),t=!0},e.isPropagationStopped=function(){return g},e.isDefaultPrevented=function(){return t},e.nativeEvent=e};var He={configurable:!0,get:function(){return this.class}},Ne=n.vnode;n.vnode=function(e){e.$$typeof=ke;var g=e.type,t=e.props;if(g){if(t.class!=t.className&&(He.enumerable="className"in t,null!=t.className&&(t.class=t.className),Object.defineProperty(t,"className",He)),"function"!=typeof g){var n,I,C;for(C in t.defaultValue&&void 0!==t.value&&(t.value||0===t.value||(t.value=t.defaultValue),delete t.defaultValue),Array.isArray(t.value)&&t.multiple&&"select"===g&&(v(t.children).forEach((function(e){-1!=t.value.indexOf(e.props.value)&&(e.props.selected=!0)})),delete t.value),t)if(n=Re.test(C))break;if(n)for(C in I=e.props={},t)I[Re.test(C)?C.replace(/[A-Z0-9]/,"-$&").toLowerCase():C]=t[C]}!function(g){var t=e.type,n=e.props;if(n&&"string"==typeof t){var I={};for(var C in n)/^on(Ani|Tra|Tou)/.test(C)&&(n[C.toLowerCase()]=n[C],delete n[C]),I[C.toLowerCase()]=C;if(I.ondoubleclick&&(n.ondblclick=n[I.ondoubleclick],delete n[I.ondoubleclick]),I.onbeforeinput&&(n.onbeforeinput=n[I.onbeforeinput],delete n[I.onbeforeinput]),I.onchange&&("textarea"===t||"input"===t.toLowerCase()&&!/^fil|che|ra/i.test(n.type))){var r=I.oninput||"oninput";n[r]||(n[r]=n[I.onchange],delete n[I.onchange])}}}(),"function"==typeof g&&!g.m&&g.prototype&&(Ye(g.prototype,"componentWillMount"),Ye(g.prototype,"componentWillReceiveProps"),Ye(g.prototype,"componentWillUpdate"),g.m=!0)}Ne&&Ne(e)};var Fe="16.8.0";function Ke(e){return d.bind(null,e)}function Ee(e){return!!e&&e.$$typeof===ke}function xe(e){return Ee(e)?F.apply(null,arguments):e}function Me(e){return!!e.__k&&(H(null,e),!0)}function Ue(e){return e&&(e.base||1===e.nodeType&&e)||null}var Te=function(e,g){return e(g)},ze={useState:O,useReducer:P,useEffect:_,useLayoutEffect:q,useRef:$,useImperativeHandle:ee,useMemo:ge,useCallback:te,useContext:ne,useDebugValue:Ie,version:"16.8.0",Children:be,render:Xe,hydrate:Xe,unmountComponentAtNode:Me,createPortal:We,createElement:d,createContext:K,createFactory:Ke,cloneElement:xe,createRef:m,Fragment:b,isValidElement:Ee,findDOMNode:Ue,Component:p,PureComponent:Ae,memo:ue,forwardRef:he,unstable_batchedUpdates:Te,Suspense:ye,SuspenseList:fe,lazy:Be}},4155:function(e){var g,t,n=e.exports={};function I(){throw new Error("setTimeout has not been defined")}function C(){throw new Error("clearTimeout has not been defined")}function r(e){if(g===setTimeout)return setTimeout(e,0);if((g===I||!g)&&setTimeout)return g=setTimeout,setTimeout(e,0);try{return g(e,0)}catch(t){try{return g.call(null,e,0)}catch(t){return g.call(this,e,0)}}}!function(){try{g="function"===typeof setTimeout?setTimeout:I}catch(e){g=I}try{t="function"===typeof clearTimeout?clearTimeout:C}catch(e){t=C}}();var o,i=[],l=!1,a=-1;function s(){l&&o&&(l=!1,o.length?i=o.concat(i):a=-1,i.length&&c())}function c(){if(!l){var e=r(s);l=!0;for(var g=i.length;g;){for(o=i,i=[];++a<g;)o&&o[a].run();a=-1,g=i.length}o=null,l=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===C||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(g){try{return t.call(null,e)}catch(g){return t.call(this,e)}}}(e)}}function A(e,g){this.fun=e,this.array=g}function u(){}n.nextTick=function(e){var g=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)g[t-1]=arguments[t];i.push(new A(e,g)),1!==i.length||l||r(c)},A.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=u,n.addListener=u,n.once=u,n.off=u,n.removeListener=u,n.removeAllListeners=u,n.emit=u,n.prependListener=u,n.prependOnceListener=u,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},2703:function(e,g,t){"use strict";var n=t(414);function I(){}function C(){}C.resetWarningCache=I,e.exports=function(){function e(e,g,t,I,C,r){if(r!==n){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function g(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:g,element:e,elementType:e,instanceOf:g,node:e,objectOf:g,oneOf:g,oneOfType:g,shape:g,exact:g,checkPropTypes:C,resetWarningCache:I};return t.PropTypes=t,t}},5697:function(e,g,t){e.exports=t(2703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2592:function(e,g,t){var n=t(7138),I=t(5115),C=t(6907),r=t(3776);function o(e,g,t,C,r){var o=[].slice.call(arguments,1),i=o.length,l="function"===typeof o[i-1];if(!l&&!n())throw new Error("Callback required as last argument");if(!l){if(i<1)throw new Error("Too few arguments provided");return 1===i?(t=g,g=C=void 0):2!==i||g.getContext||(C=t,t=g,g=void 0),new Promise((function(n,r){try{var o=I.create(t,C);n(e(o,g,C))}catch(i){r(i)}}))}if(i<2)throw new Error("Too few arguments provided");2===i?(r=t,t=g,g=C=void 0):3===i&&(g.getContext&&"undefined"===typeof r?(r=C,C=void 0):(r=C,C=t,t=g,g=void 0));try{var a=I.create(t,C);r(null,e(a,g,C))}catch(s){r(s)}}g.create=I.create,g.toCanvas=o.bind(null,C.render),g.toDataURL=o.bind(null,C.renderToDataURL),g.toString=o.bind(null,(function(e,g,t){return r.render(e,t)}))},7138:function(e){e.exports=function(){return"function"===typeof Promise&&Promise.prototype&&Promise.prototype.then}},1845:function(e,g,t){var n=t(242).getSymbolSize;g.getRowColCoords=function(e){if(1===e)return[];for(var g=Math.floor(e/7)+2,t=n(e),I=145===t?26:2*Math.ceil((t-13)/(2*g-2)),C=[t-7],r=1;r<g-1;r++)C[r]=C[r-1]-I;return C.push(6),C.reverse()},g.getPositions=function(e){for(var t=[],n=g.getRowColCoords(e),I=n.length,C=0;C<I;C++)for(var r=0;r<I;r++)0===C&&0===r||0===C&&r===I-1||C===I-1&&0===r||t.push([n[C],n[r]]);return t}},8260:function(e,g,t){var n=t(6910),I=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function C(e){this.mode=n.ALPHANUMERIC,this.data=e}C.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},C.prototype.getLength=function(){return this.data.length},C.prototype.getBitsLength=function(){return C.getBitsLength(this.data.length)},C.prototype.write=function(e){var g;for(g=0;g+2<=this.data.length;g+=2){var t=45*I.indexOf(this.data[g]);t+=I.indexOf(this.data[g+1]),e.put(t,11)}this.data.length%2&&e.put(I.indexOf(this.data[g]),6)},e.exports=C},7245:function(e){function g(){this.buffer=[],this.length=0}g.prototype={get:function(e){var g=Math.floor(e/8);return 1===(this.buffer[g]>>>7-e%8&1)},put:function(e,g){for(var t=0;t<g;t++)this.putBit(1===(e>>>g-t-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var g=Math.floor(this.length/8);this.buffer.length<=g&&this.buffer.push(0),e&&(this.buffer[g]|=128>>>this.length%8),this.length++}},e.exports=g},3280:function(e,g,t){var n=t(9131);function I(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=n.alloc(e*e),this.reservedBit=n.alloc(e*e)}I.prototype.set=function(e,g,t,n){var I=e*this.size+g;this.data[I]=t,n&&(this.reservedBit[I]=!0)},I.prototype.get=function(e,g){return this.data[e*this.size+g]},I.prototype.xor=function(e,g,t){this.data[e*this.size+g]^=t},I.prototype.isReserved=function(e,g){return this.reservedBit[e*this.size+g]},e.exports=I},3424:function(e,g,t){var n=t(9131),I=t(6910);function C(e){this.mode=I.BYTE,this.data=n.from(e)}C.getBitsLength=function(e){return 8*e},C.prototype.getLength=function(){return this.data.length},C.prototype.getBitsLength=function(){return C.getBitsLength(this.data.length)},C.prototype.write=function(e){for(var g=0,t=this.data.length;g<t;g++)e.put(this.data[g],8)},e.exports=C},5393:function(e,g,t){var n=t(4908),I=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],C=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];g.getBlocksCount=function(e,g){switch(g){case n.L:return I[4*(e-1)+0];case n.M:return I[4*(e-1)+1];case n.Q:return I[4*(e-1)+2];case n.H:return I[4*(e-1)+3];default:return}},g.getTotalCodewordsCount=function(e,g){switch(g){case n.L:return C[4*(e-1)+0];case n.M:return C[4*(e-1)+1];case n.Q:return C[4*(e-1)+2];case n.H:return C[4*(e-1)+3];default:return}}},4908:function(e,g){g.L={bit:1},g.M={bit:0},g.Q={bit:3},g.H={bit:2},g.isValid=function(e){return e&&"undefined"!==typeof e.bit&&e.bit>=0&&e.bit<4},g.from=function(e,t){if(g.isValid(e))return e;try{return function(e){if("string"!==typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return g.L;case"m":case"medium":return g.M;case"q":case"quartile":return g.Q;case"h":case"high":return g.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(n){return t}}},6526:function(e,g,t){var n=t(242).getSymbolSize;g.getPositions=function(e){var g=n(e);return[[0,0],[g-7,0],[0,g-7]]}},1642:function(e,g,t){var n=t(242),I=n.getBCHDigit(1335);g.getEncodedBits=function(e,g){for(var t=e.bit<<3|g,C=t<<10;n.getBCHDigit(C)-I>=0;)C^=1335<<n.getBCHDigit(C)-I;return 21522^(t<<10|C)}},9729:function(e,g,t){var n=t(9131),I=n.alloc(512),C=n.alloc(256);!function(){for(var e=1,g=0;g<255;g++)I[g]=e,C[e]=g,256&(e<<=1)&&(e^=285);for(g=255;g<512;g++)I[g]=I[g-255]}(),g.log=function(e){if(e<1)throw new Error("log("+e+")");return C[e]},g.exp=function(e){return I[e]},g.mul=function(e,g){return 0===e||0===g?0:I[C[e]+C[g]]}},5442:function(e,g,t){var n=t(6910),I=t(242);function C(e){this.mode=n.KANJI,this.data=e}C.getBitsLength=function(e){return 13*e},C.prototype.getLength=function(){return this.data.length},C.prototype.getBitsLength=function(){return C.getBitsLength(this.data.length)},C.prototype.write=function(e){var g;for(g=0;g<this.data.length;g++){var t=I.toSJIS(this.data[g]);if(t>=33088&&t<=40956)t-=33088;else{if(!(t>=57408&&t<=60351))throw new Error("Invalid SJIS character: "+this.data[g]+"\nMake sure your charset is UTF-8");t-=49472}t=192*(t>>>8&255)+(255&t),e.put(t,13)}},e.exports=C},7126:function(e,g){g.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var t=3,n=3,I=40,C=10;function r(e,t,n){switch(e){case g.Patterns.PATTERN000:return(t+n)%2===0;case g.Patterns.PATTERN001:return t%2===0;case g.Patterns.PATTERN010:return n%3===0;case g.Patterns.PATTERN011:return(t+n)%3===0;case g.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2===0;case g.Patterns.PATTERN101:return t*n%2+t*n%3===0;case g.Patterns.PATTERN110:return(t*n%2+t*n%3)%2===0;case g.Patterns.PATTERN111:return(t*n%3+(t+n)%2)%2===0;default:throw new Error("bad maskPattern:"+e)}}g.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},g.from=function(e){return g.isValid(e)?parseInt(e,10):void 0},g.getPenaltyN1=function(e){for(var g=e.size,n=0,I=0,C=0,r=null,o=null,i=0;i<g;i++){I=C=0,r=o=null;for(var l=0;l<g;l++){var a=e.get(i,l);a===r?I++:(I>=5&&(n+=t+(I-5)),r=a,I=1),(a=e.get(l,i))===o?C++:(C>=5&&(n+=t+(C-5)),o=a,C=1)}I>=5&&(n+=t+(I-5)),C>=5&&(n+=t+(C-5))}return n},g.getPenaltyN2=function(e){for(var g=e.size,t=0,I=0;I<g-1;I++)for(var C=0;C<g-1;C++){var r=e.get(I,C)+e.get(I,C+1)+e.get(I+1,C)+e.get(I+1,C+1);4!==r&&0!==r||t++}return t*n},g.getPenaltyN3=function(e){for(var g=e.size,t=0,n=0,C=0,r=0;r<g;r++){n=C=0;for(var o=0;o<g;o++)n=n<<1&2047|e.get(r,o),o>=10&&(1488===n||93===n)&&t++,C=C<<1&2047|e.get(o,r),o>=10&&(1488===C||93===C)&&t++}return t*I},g.getPenaltyN4=function(e){for(var g=0,t=e.data.length,n=0;n<t;n++)g+=e.data[n];return Math.abs(Math.ceil(100*g/t/5)-10)*C},g.applyMask=function(e,g){for(var t=g.size,n=0;n<t;n++)for(var I=0;I<t;I++)g.isReserved(I,n)||g.xor(I,n,r(e,I,n))},g.getBestMask=function(e,t){for(var n=Object.keys(g.Patterns).length,I=0,C=1/0,r=0;r<n;r++){t(r),g.applyMask(r,e);var o=g.getPenaltyN1(e)+g.getPenaltyN2(e)+g.getPenaltyN3(e)+g.getPenaltyN4(e);g.applyMask(r,e),o<C&&(C=o,I=r)}return I}},6910:function(e,g,t){var n=t(3114),I=t(7007);g.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},g.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},g.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},g.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},g.MIXED={bit:-1},g.getCharCountIndicator=function(e,g){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!n.isValid(g))throw new Error("Invalid version: "+g);return g>=1&&g<10?e.ccBits[0]:g<27?e.ccBits[1]:e.ccBits[2]},g.getBestModeForData=function(e){return I.testNumeric(e)?g.NUMERIC:I.testAlphanumeric(e)?g.ALPHANUMERIC:I.testKanji(e)?g.KANJI:g.BYTE},g.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},g.isValid=function(e){return e&&e.bit&&e.ccBits},g.from=function(e,t){if(g.isValid(e))return e;try{return function(e){if("string"!==typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return g.NUMERIC;case"alphanumeric":return g.ALPHANUMERIC;case"kanji":return g.KANJI;case"byte":return g.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(n){return t}}},1085:function(e,g,t){var n=t(6910);function I(e){this.mode=n.NUMERIC,this.data=e.toString()}I.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},I.prototype.getLength=function(){return this.data.length},I.prototype.getBitsLength=function(){return I.getBitsLength(this.data.length)},I.prototype.write=function(e){var g,t,n;for(g=0;g+3<=this.data.length;g+=3)t=this.data.substr(g,3),n=parseInt(t,10),e.put(n,10);var I=this.data.length-g;I>0&&(t=this.data.substr(g),n=parseInt(t,10),e.put(n,3*I+1))},e.exports=I},6143:function(e,g,t){var n=t(9131),I=t(9729);g.mul=function(e,g){for(var t=n.alloc(e.length+g.length-1),C=0;C<e.length;C++)for(var r=0;r<g.length;r++)t[C+r]^=I.mul(e[C],g[r]);return t},g.mod=function(e,g){for(var t=n.from(e);t.length-g.length>=0;){for(var C=t[0],r=0;r<g.length;r++)t[r]^=I.mul(g[r],C);for(var o=0;o<t.length&&0===t[o];)o++;t=t.slice(o)}return t},g.generateECPolynomial=function(e){for(var t=n.from([1]),C=0;C<e;C++)t=g.mul(t,[1,I.exp(C)]);return t}},5115:function(e,g,t){var n=t(9131),I=t(242),C=t(4908),r=t(7245),o=t(3280),i=t(1845),l=t(6526),a=t(7126),s=t(5393),c=t(2882),A=t(3103),u=t(1642),d=t(6910),h=t(6130),m=t(5147);function b(e,g,t){var n,I,C=e.size,r=u.getEncodedBits(g,t);for(n=0;n<15;n++)I=1===(r>>n&1),n<6?e.set(n,8,I,!0):n<8?e.set(n+1,8,I,!0):e.set(C-15+n,8,I,!0),n<8?e.set(8,C-n-1,I,!0):n<9?e.set(8,15-n-1+1,I,!0):e.set(8,15-n-1,I,!0);e.set(C-8,8,1,!0)}function p(e,g,t){var C=new r;t.forEach((function(g){C.put(g.mode.bit,4),C.put(g.getLength(),d.getCharCountIndicator(g.mode,e)),g.write(C)}));var o=8*(I.getSymbolTotalCodewords(e)-s.getTotalCodewordsCount(e,g));for(C.getLengthInBits()+4<=o&&C.put(0,4);C.getLengthInBits()%8!==0;)C.putBit(0);for(var i=(o-C.getLengthInBits())/8,l=0;l<i;l++)C.put(l%2?17:236,8);return function(e,g,t){for(var C=I.getSymbolTotalCodewords(g),r=s.getTotalCodewordsCount(g,t),o=C-r,i=s.getBlocksCount(g,t),l=i-C%i,a=Math.floor(C/i),A=Math.floor(o/i),u=A+1,d=a-A,h=new c(d),m=0,b=new Array(i),p=new Array(i),Z=0,y=n.from(e.buffer),G=0;G<i;G++){var B=G<l?A:u;b[G]=y.slice(m,m+B),p[G]=h.encode(b[G]),m+=B,Z=Math.max(Z,B)}var f,v,S=n.alloc(C),V=0;for(f=0;f<Z;f++)for(v=0;v<i;v++)f<b[v].length&&(S[V++]=b[v][f]);for(f=0;f<d;f++)for(v=0;v<i;v++)S[V++]=p[v][f];return S}(C,e,g)}function Z(e,g,t,n){var C;if(m(e))C=h.fromArray(e);else{if("string"!==typeof e)throw new Error("Invalid data");var r=g;if(!r){var s=h.rawSplit(e);r=A.getBestVersionForData(s,t)}C=h.fromString(e,r||40)}var c=A.getBestVersionForData(C,t);if(!c)throw new Error("The amount of data is too big to be stored in a QR Code");if(g){if(g<c)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+c+".\n")}else g=c;var u=p(g,t,C),d=I.getSymbolSize(g),Z=new o(d);return function(e,g){for(var t=e.size,n=l.getPositions(g),I=0;I<n.length;I++)for(var C=n[I][0],r=n[I][1],o=-1;o<=7;o++)if(!(C+o<=-1||t<=C+o))for(var i=-1;i<=7;i++)r+i<=-1||t<=r+i||(o>=0&&o<=6&&(0===i||6===i)||i>=0&&i<=6&&(0===o||6===o)||o>=2&&o<=4&&i>=2&&i<=4?e.set(C+o,r+i,!0,!0):e.set(C+o,r+i,!1,!0))}(Z,g),function(e){for(var g=e.size,t=8;t<g-8;t++){var n=t%2===0;e.set(t,6,n,!0),e.set(6,t,n,!0)}}(Z),function(e,g){for(var t=i.getPositions(g),n=0;n<t.length;n++)for(var I=t[n][0],C=t[n][1],r=-2;r<=2;r++)for(var o=-2;o<=2;o++)-2===r||2===r||-2===o||2===o||0===r&&0===o?e.set(I+r,C+o,!0,!0):e.set(I+r,C+o,!1,!0)}(Z,g),b(Z,t,0),g>=7&&function(e,g){for(var t,n,I,C=e.size,r=A.getEncodedBits(g),o=0;o<18;o++)t=Math.floor(o/3),n=o%3+C-8-3,I=1===(r>>o&1),e.set(t,n,I,!0),e.set(n,t,I,!0)}(Z,g),function(e,g){for(var t=e.size,n=-1,I=t-1,C=7,r=0,o=t-1;o>0;o-=2)for(6===o&&o--;;){for(var i=0;i<2;i++)if(!e.isReserved(I,o-i)){var l=!1;r<g.length&&(l=1===(g[r]>>>C&1)),e.set(I,o-i,l),-1===--C&&(r++,C=7)}if((I+=n)<0||t<=I){I-=n,n=-n;break}}}(Z,u),isNaN(n)&&(n=a.getBestMask(Z,b.bind(null,Z,t))),a.applyMask(n,Z),b(Z,t,n),{modules:Z,version:g,errorCorrectionLevel:t,maskPattern:n,segments:C}}g.create=function(e,g){if("undefined"===typeof e||""===e)throw new Error("No input text");var t,n,r=C.M;return"undefined"!==typeof g&&(r=C.from(g.errorCorrectionLevel,C.M),t=A.from(g.version),n=a.from(g.maskPattern),g.toSJISFunc&&I.setToSJISFunction(g.toSJISFunc)),Z(e,t,r,n)}},2882:function(e,g,t){var n=t(9131),I=t(6143),C=t(8764).Buffer;function r(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}r.prototype.initialize=function(e){this.degree=e,this.genPoly=I.generateECPolynomial(this.degree)},r.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");var g=n.alloc(this.degree),t=C.concat([e,g],e.length+this.degree),r=I.mod(t,this.genPoly),o=this.degree-r.length;if(o>0){var i=n.alloc(this.degree);return r.copy(i,o),i}return r},e.exports=r},7007:function(e,g){var t="[0-9]+",n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",I="(?:(?![A-Z0-9 $%*+\\-./:]|"+(n=n.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";g.KANJI=new RegExp(n,"g"),g.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),g.BYTE=new RegExp(I,"g"),g.NUMERIC=new RegExp(t,"g"),g.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");var C=new RegExp("^"+n+"$"),r=new RegExp("^[0-9]+$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");g.testKanji=function(e){return C.test(e)},g.testNumeric=function(e){return r.test(e)},g.testAlphanumeric=function(e){return o.test(e)}},6130:function(e,g,t){var n=t(6910),I=t(1085),C=t(8260),r=t(3424),o=t(5442),i=t(7007),l=t(242),a=t(5987);function s(e){return unescape(encodeURIComponent(e)).length}function c(e,g,t){for(var n,I=[];null!==(n=e.exec(t));)I.push({data:n[0],index:n.index,mode:g,length:n[0].length});return I}function A(e){var g,t,I=c(i.NUMERIC,n.NUMERIC,e),C=c(i.ALPHANUMERIC,n.ALPHANUMERIC,e);return l.isKanjiModeEnabled()?(g=c(i.BYTE,n.BYTE,e),t=c(i.KANJI,n.KANJI,e)):(g=c(i.BYTE_KANJI,n.BYTE,e),t=[]),I.concat(C,g,t).sort((function(e,g){return e.index-g.index})).map((function(e){return{data:e.data,mode:e.mode,length:e.length}}))}function u(e,g){switch(g){case n.NUMERIC:return I.getBitsLength(e);case n.ALPHANUMERIC:return C.getBitsLength(e);case n.KANJI:return o.getBitsLength(e);case n.BYTE:return r.getBitsLength(e)}}function d(e,g){var t,i=n.getBestModeForData(e);if((t=n.from(g,i))!==n.BYTE&&t.bit<i.bit)throw new Error('"'+e+'" cannot be encoded with mode '+n.toString(t)+".\n Suggested mode is: "+n.toString(i));switch(t!==n.KANJI||l.isKanjiModeEnabled()||(t=n.BYTE),t){case n.NUMERIC:return new I(e);case n.ALPHANUMERIC:return new C(e);case n.KANJI:return new o(e);case n.BYTE:return new r(e)}}g.fromArray=function(e){return e.reduce((function(e,g){return"string"===typeof g?e.push(d(g,null)):g.data&&e.push(d(g.data,g.mode)),e}),[])},g.fromString=function(e,t){for(var I=function(e){for(var g=[],t=0;t<e.length;t++){var I=e[t];switch(I.mode){case n.NUMERIC:g.push([I,{data:I.data,mode:n.ALPHANUMERIC,length:I.length},{data:I.data,mode:n.BYTE,length:I.length}]);break;case n.ALPHANUMERIC:g.push([I,{data:I.data,mode:n.BYTE,length:I.length}]);break;case n.KANJI:g.push([I,{data:I.data,mode:n.BYTE,length:s(I.data)}]);break;case n.BYTE:g.push([{data:I.data,mode:n.BYTE,length:s(I.data)}])}}return g}(A(e,l.isKanjiModeEnabled())),C=function(e,g){for(var t={},I={start:{}},C=["start"],r=0;r<e.length;r++){for(var o=e[r],i=[],l=0;l<o.length;l++){var a=o[l],s=""+r+l;i.push(s),t[s]={node:a,lastCount:0},I[s]={};for(var c=0;c<C.length;c++){var A=C[c];t[A]&&t[A].node.mode===a.mode?(I[A][s]=u(t[A].lastCount+a.length,a.mode)-u(t[A].lastCount,a.mode),t[A].lastCount+=a.length):(t[A]&&(t[A].lastCount=a.length),I[A][s]=u(a.length,a.mode)+4+n.getCharCountIndicator(a.mode,g))}}C=i}for(c=0;c<C.length;c++)I[C[c]].end=0;return{map:I,table:t}}(I,t),r=a.find_path(C.map,"start","end"),o=[],i=1;i<r.length-1;i++)o.push(C.table[r[i]].node);return g.fromArray(function(e){return e.reduce((function(e,g){var t=e.length-1>=0?e[e.length-1]:null;return t&&t.mode===g.mode?(e[e.length-1].data+=g.data,e):(e.push(g),e)}),[])}(o))},g.rawSplit=function(e){return g.fromArray(A(e,l.isKanjiModeEnabled()))}},242:function(e,g){var t,n=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];g.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},g.getSymbolTotalCodewords=function(e){return n[e]},g.getBCHDigit=function(e){for(var g=0;0!==e;)g++,e>>>=1;return g},g.setToSJISFunction=function(e){if("function"!==typeof e)throw new Error('"toSJISFunc" is not a valid function.');t=e},g.isKanjiModeEnabled=function(){return"undefined"!==typeof t},g.toSJIS=function(e){return t(e)}},3114:function(e,g){g.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},3103:function(e,g,t){var n=t(242),I=t(5393),C=t(4908),r=t(6910),o=t(3114),i=t(5147),l=n.getBCHDigit(7973);function a(e,g){return r.getCharCountIndicator(e,g)+4}function s(e,g){var t=0;return e.forEach((function(e){var n=a(e.mode,g);t+=n+e.getBitsLength()})),t}g.from=function(e,g){return o.isValid(e)?parseInt(e,10):g},g.getCapacity=function(e,g,t){if(!o.isValid(e))throw new Error("Invalid QR Code version");"undefined"===typeof t&&(t=r.BYTE);var C=8*(n.getSymbolTotalCodewords(e)-I.getTotalCodewordsCount(e,g));if(t===r.MIXED)return C;var i=C-a(t,e);switch(t){case r.NUMERIC:return Math.floor(i/10*3);case r.ALPHANUMERIC:return Math.floor(i/11*2);case r.KANJI:return Math.floor(i/13);case r.BYTE:default:return Math.floor(i/8)}},g.getBestVersionForData=function(e,t){var n,I=C.from(t,C.M);if(i(e)){if(e.length>1)return function(e,t){for(var n=1;n<=40;n++)if(s(e,n)<=g.getCapacity(n,t,r.MIXED))return n}(e,I);if(0===e.length)return 1;n=e[0]}else n=e;return function(e,t,n){for(var I=1;I<=40;I++)if(t<=g.getCapacity(I,n,e))return I}(n.mode,n.getLength(),I)},g.getEncodedBits=function(e){if(!o.isValid(e)||e<7)throw new Error("Invalid QR Code version");for(var g=e<<12;n.getBCHDigit(g)-l>=0;)g^=7973<<n.getBCHDigit(g)-l;return e<<12|g}},6907:function(e,g,t){var n=t(9653);g.render=function(e,g,t){var I=t,C=g;"undefined"!==typeof I||g&&g.getContext||(I=g,g=void 0),g||(C=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),I=n.getOptions(I);var r=n.getImageWidth(e.modules.size,I),o=C.getContext("2d"),i=o.createImageData(r,r);return n.qrToImageData(i.data,e,I),function(e,g,t){e.clearRect(0,0,g.width,g.height),g.style||(g.style={}),g.height=t,g.width=t,g.style.height=t+"px",g.style.width=t+"px"}(o,C,r),o.putImageData(i,0,0),C},g.renderToDataURL=function(e,t,n){var I=n;"undefined"!==typeof I||t&&t.getContext||(I=t,t=void 0),I||(I={});var C=g.render(e,t,I),r=I.type||"image/png",o=I.rendererOpts||{};return C.toDataURL(r,o.quality)}},3776:function(e,g,t){var n=t(9653);function I(e,g){var t=e.a/255,n=g+'="'+e.hex+'"';return t<1?n+" "+g+'-opacity="'+t.toFixed(2).slice(1)+'"':n}function C(e,g,t){var n=e+g;return"undefined"!==typeof t&&(n+=" "+t),n}g.render=function(e,g,t){var r=n.getOptions(g),o=e.modules.size,i=e.modules.data,l=o+2*r.margin,a=r.color.light.a?"<path "+I(r.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",s="<path "+I(r.color.dark,"stroke")+' d="'+function(e,g,t){for(var n="",I=0,r=!1,o=0,i=0;i<e.length;i++){var l=Math.floor(i%g),a=Math.floor(i/g);l||r||(r=!0),e[i]?(o++,i>0&&l>0&&e[i-1]||(n+=r?C("M",l+t,.5+a+t):C("m",I,0),I=0,r=!1),l+1<g&&e[i+1]||(n+=C("h",o),o=0)):I++}return n}(i,o,r.margin)+'"/>',c='viewBox="0 0 '+l+" "+l+'"',A='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+c+' shape-rendering="crispEdges">'+a+s+"</svg>\n";return"function"===typeof t&&t(null,A),A}},9653:function(e,g){function t(e){if("number"===typeof e&&(e=e.toString()),"string"!==typeof e)throw new Error("Color should be defined as hex string");var g=e.slice().replace("#","").split("");if(g.length<3||5===g.length||g.length>8)throw new Error("Invalid hex color: "+e);3!==g.length&&4!==g.length||(g=Array.prototype.concat.apply([],g.map((function(e){return[e,e]})))),6===g.length&&g.push("F","F");var t=parseInt(g.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:255&t,hex:"#"+g.slice(0,6).join("")}}g.getOptions=function(e){e||(e={}),e.color||(e.color={});var g="undefined"===typeof e.margin||null===e.margin||e.margin<0?4:e.margin,n=e.width&&e.width>=21?e.width:void 0,I=e.scale||4;return{width:n,scale:n?4:I,margin:g,color:{dark:t(e.color.dark||"#000000ff"),light:t(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},g.getScale=function(e,g){return g.width&&g.width>=e+2*g.margin?g.width/(e+2*g.margin):g.scale},g.getImageWidth=function(e,t){var n=g.getScale(e,t);return Math.floor((e+2*t.margin)*n)},g.qrToImageData=function(e,t,n){for(var I=t.modules.size,C=t.modules.data,r=g.getScale(I,n),o=Math.floor((I+2*n.margin)*r),i=n.margin*r,l=[n.color.light,n.color.dark],a=0;a<o;a++)for(var s=0;s<o;s++){var c=4*(a*o+s),A=n.color.light;if(a>=i&&s>=i&&a<o-i&&s<o-i)A=l[C[Math.floor((a-i)/r)*I+Math.floor((s-i)/r)]?1:0];e[c++]=A.r,e[c++]=A.g,e[c++]=A.b,e[c]=A.a}}},9131:function(e,g,t){"use strict";var n=t(5147);C.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(g){return!1}}();var I=C.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function C(e,g,t){return C.TYPED_ARRAY_SUPPORT||this instanceof C?"number"===typeof e?i(this,e):function(e,g,t,n){if("number"===typeof g)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&g instanceof ArrayBuffer)return function(e,g,t,n){if(t<0||g.byteLength<t)throw new RangeError("'offset' is out of bounds");if(g.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");var I;I=void 0===t&&void 0===n?new Uint8Array(g):void 0===n?new Uint8Array(g,t):new Uint8Array(g,t,n);C.TYPED_ARRAY_SUPPORT?I.__proto__=C.prototype:I=l(e,I);return I}(e,g,t,n);if("string"===typeof g)return function(e,g){var t=0|s(g),n=o(e,t),I=n.write(g);I!==t&&(n=n.slice(0,I));return n}(e,g);return function(e,g){if(C.isBuffer(g)){var t=0|r(g.length),n=o(e,t);return 0===n.length||g.copy(n,0,0,t),n}if(g){if("undefined"!==typeof ArrayBuffer&&g.buffer instanceof ArrayBuffer||"length"in g)return"number"!==typeof g.length||(I=g.length)!==I?o(e,0):l(e,g);if("Buffer"===g.type&&Array.isArray(g.data))return l(e,g.data)}var I;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,g)}(this,e,g,t):new C(e,g,t)}function r(e){if(e>=I)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+I.toString(16)+" bytes");return 0|e}function o(e,g){var t;return C.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(g)).__proto__=C.prototype:(null===(t=e)&&(t=new C(g)),t.length=g),t}function i(e,g){var t=o(e,g<0?0:0|r(g));if(!C.TYPED_ARRAY_SUPPORT)for(var n=0;n<g;++n)t[n]=0;return t}function l(e,g){for(var t=g.length<0?0:0|r(g.length),n=o(e,t),I=0;I<t;I+=1)n[I]=255&g[I];return n}function a(e,g){var t;g=g||1/0;for(var n=e.length,I=null,C=[],r=0;r<n;++r){if((t=e.charCodeAt(r))>55295&&t<57344){if(!I){if(t>56319){(g-=3)>-1&&C.push(239,191,189);continue}if(r+1===n){(g-=3)>-1&&C.push(239,191,189);continue}I=t;continue}if(t<56320){(g-=3)>-1&&C.push(239,191,189),I=t;continue}t=65536+(I-55296<<10|t-56320)}else I&&(g-=3)>-1&&C.push(239,191,189);if(I=null,t<128){if((g-=1)<0)break;C.push(t)}else if(t<2048){if((g-=2)<0)break;C.push(t>>6|192,63&t|128)}else if(t<65536){if((g-=3)<0)break;C.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((g-=4)<0)break;C.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return C}function s(e){return C.isBuffer(e)?e.length:"undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)?e.byteLength:("string"!==typeof e&&(e=""+e),0===e.length?0:a(e).length)}C.TYPED_ARRAY_SUPPORT&&(C.prototype.__proto__=Uint8Array.prototype,C.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&C[Symbol.species]===C&&Object.defineProperty(C,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1})),C.prototype.write=function(e,g,t){void 0===g||void 0===t&&"string"===typeof g?(t=this.length,g=0):isFinite(g)&&(g|=0,isFinite(t)?t|=0:t=void 0);var n=this.length-g;if((void 0===t||t>n)&&(t=n),e.length>0&&(t<0||g<0)||g>this.length)throw new RangeError("Attempt to write outside buffer bounds");return function(e,g,t,n){return function(e,g,t,n){for(var I=0;I<n&&!(I+t>=g.length||I>=e.length);++I)g[I+t]=e[I];return I}(a(g,e.length-t),e,t,n)}(this,e,g,t)},C.prototype.slice=function(e,g){var t,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(g=void 0===g?n:~~g)<0?(g+=n)<0&&(g=0):g>n&&(g=n),g<e&&(g=e),C.TYPED_ARRAY_SUPPORT)(t=this.subarray(e,g)).__proto__=C.prototype;else{var I=g-e;t=new C(I,void 0);for(var r=0;r<I;++r)t[r]=this[r+e]}return t},C.prototype.copy=function(e,g,t,n){if(t||(t=0),n||0===n||(n=this.length),g>=e.length&&(g=e.length),g||(g=0),n>0&&n<t&&(n=t),n===t)return 0;if(0===e.length||0===this.length)return 0;if(g<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-g<n-t&&(n=e.length-g+t);var I,r=n-t;if(this===e&&t<g&&g<n)for(I=r-1;I>=0;--I)e[I+g]=this[I+t];else if(r<1e3||!C.TYPED_ARRAY_SUPPORT)for(I=0;I<r;++I)e[I+g]=this[I+t];else Uint8Array.prototype.set.call(e,this.subarray(t,t+r),g);return r},C.prototype.fill=function(e,g,t){if("string"===typeof e){if("string"===typeof g?(g=0,t=this.length):"string"===typeof t&&(t=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}}else"number"===typeof e&&(e&=255);if(g<0||this.length<g||this.length<t)throw new RangeError("Out of range index");if(t<=g)return this;var I;if(g>>>=0,t=void 0===t?this.length:t>>>0,e||(e=0),"number"===typeof e)for(I=g;I<t;++I)this[I]=e;else{var r=C.isBuffer(e)?e:new C(e),o=r.length;for(I=0;I<t-g;++I)this[I+g]=r[I%o]}return this},C.concat=function(e,g){if(!n(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o(null,0);var t;if(void 0===g)for(g=0,t=0;t<e.length;++t)g+=e[t].length;var I=i(null,g),r=0;for(t=0;t<e.length;++t){var l=e[t];if(!C.isBuffer(l))throw new TypeError('"list" argument must be an Array of Buffers');l.copy(I,r),r+=l.length}return I},C.byteLength=s,C.prototype._isBuffer=!0,C.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.exports.alloc=function(e){var g=new C(e);return g.fill(0),g},e.exports.from=function(e){return new C(e)}},5147:function(e){var g={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==g.call(e)}},7563:function(e,g,t){"use strict";const n=t(8218),I=t(4020),C=t(500);function r(e){if("string"!==typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function o(e,g){return g.encode?g.strict?n(e):encodeURIComponent(e):e}function i(e,g){return g.decode?I(e):e}function l(e){return Array.isArray(e)?e.sort():"object"===typeof e?l(Object.keys(e)).sort(((e,g)=>Number(e)-Number(g))).map((g=>e[g])):e}function a(e){const g=e.indexOf("#");return-1!==g&&(e=e.slice(0,g)),e}function s(e){const g=(e=a(e)).indexOf("?");return-1===g?"":e.slice(g+1)}function c(e,g){return g.parseNumbers&&!Number.isNaN(Number(e))&&"string"===typeof e&&""!==e.trim()?e=Number(e):!g.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function A(e,g){r((g=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},g)).arrayFormatSeparator);const t=function(e){let g;switch(e.arrayFormat){case"index":return(e,t,n)=>{g=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),g?(void 0===n[e]&&(n[e]={}),n[e][g[1]]=t):n[e]=t};case"bracket":return(e,t,n)=>{g=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),g?void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=[t]:n[e]=t};case"comma":case"separator":return(g,t,n)=>{const I="string"===typeof t&&t.split("").indexOf(e.arrayFormatSeparator)>-1?t.split(e.arrayFormatSeparator).map((g=>i(g,e))):null===t?t:i(t,e);n[g]=I};default:return(e,g,t)=>{void 0!==t[e]?t[e]=[].concat(t[e],g):t[e]=g}}}(g),n=Object.create(null);if("string"!==typeof e)return n;if(!(e=e.trim().replace(/^[?#&]/,"")))return n;for(const I of e.split("&")){let[e,r]=C(g.decode?I.replace(/\+/g," "):I,"=");r=void 0===r?null:["comma","separator"].includes(g.arrayFormat)?r:i(r,g),t(i(e,g),r,n)}for(const I of Object.keys(n)){const e=n[I];if("object"===typeof e&&null!==e)for(const t of Object.keys(e))e[t]=c(e[t],g);else n[I]=c(e,g)}return!1===g.sort?n:(!0===g.sort?Object.keys(n).sort():Object.keys(n).sort(g.sort)).reduce(((e,g)=>{const t=n[g];return Boolean(t)&&"object"===typeof t&&!Array.isArray(t)?e[g]=l(t):e[g]=t,e}),Object.create(null))}g.extract=s,g.parse=A,g.stringify=(e,g)=>{if(!e)return"";r((g=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},g)).arrayFormatSeparator);const t=t=>{return g.skipNull&&(null===(n=e[t])||void 0===n)||g.skipEmptyString&&""===e[t];var n},n=function(e){switch(e.arrayFormat){case"index":return g=>(t,n)=>{const I=t.length;return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?t:null===n?[...t,[o(g,e),"[",I,"]"].join("")]:[...t,[o(g,e),"[",o(I,e),"]=",o(n,e)].join("")]};case"bracket":return g=>(t,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?t:null===n?[...t,[o(g,e),"[]"].join("")]:[...t,[o(g,e),"[]=",o(n,e)].join("")];case"comma":case"separator":return g=>(t,n)=>null===n||void 0===n||0===n.length?t:0===t.length?[[o(g,e),"=",o(n,e)].join("")]:[[t,o(n,e)].join(e.arrayFormatSeparator)];default:return g=>(t,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?t:null===n?[...t,o(g,e)]:[...t,[o(g,e),"=",o(n,e)].join("")]}}(g),I={};for(const r of Object.keys(e))t(r)||(I[r]=e[r]);const C=Object.keys(I);return!1!==g.sort&&C.sort(g.sort),C.map((t=>{const I=e[t];return void 0===I?"":null===I?o(t,g):Array.isArray(I)?I.reduce(n(t),[]).join("&"):o(t,g)+"="+o(I,g)})).filter((e=>e.length>0)).join("&")},g.parseUrl=(e,g)=>{g=Object.assign({decode:!0},g);const[t,n]=C(e,"#");return Object.assign({url:t.split("?")[0]||"",query:A(s(e),g)},g&&g.parseFragmentIdentifier&&n?{fragmentIdentifier:i(n,g)}:{})},g.stringifyUrl=(e,t)=>{t=Object.assign({encode:!0,strict:!0},t);const n=a(e.url).split("?")[0]||"",I=g.extract(e.url),C=g.parse(I,{sort:!1}),r=Object.assign(C,e.query);let i=g.stringify(r,t);i&&(i=`?${i}`);let l=function(e){let g="";const t=e.indexOf("#");return-1!==t&&(g=e.slice(t)),g}(e.url);return e.fragmentIdentifier&&(l=`#${o(e.fragmentIdentifier,t)}`),`${n}${i}${l}`}},2587:function(e){"use strict";function g(e,g){return Object.prototype.hasOwnProperty.call(e,g)}e.exports=function(e,t,n,I){t=t||"&",n=n||"=";var C={};if("string"!==typeof e||0===e.length)return C;var r=/\+/g;e=e.split(t);var o=1e3;I&&"number"===typeof I.maxKeys&&(o=I.maxKeys);var i=e.length;o>0&&i>o&&(i=o);for(var l=0;l<i;++l){var a,s,c,A,u=e[l].replace(r,"%20"),d=u.indexOf(n);d>=0?(a=u.substr(0,d),s=u.substr(d+1)):(a=u,s=""),c=decodeURIComponent(a),A=decodeURIComponent(s),g(C,c)?Array.isArray(C[c])?C[c].push(A):C[c]=[C[c],A]:C[c]=A}return C}},2361:function(e){"use strict";var g=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,I){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"===typeof e?Object.keys(e).map((function(I){var C=encodeURIComponent(g(I))+n;return Array.isArray(e[I])?e[I].map((function(e){return C+encodeURIComponent(g(e))})).join(t):C+encodeURIComponent(g(e[I]))})).filter(Boolean).join(t):I?encodeURIComponent(g(I))+n+encodeURIComponent(g(e)):""}},7673:function(e,g,t){"use strict";t(2587),g.stringify=t(2361)},4931:function(e,g,t){"use strict";t.d(g,{x7:function(){return me},ZP:function(){return be},Am:function(){return w}});var n=t(7294);let I={data:""},C=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||I,r=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,o=/\/\*[^]*?\*\/|\s\s+|\n/g,i=(e,g)=>{let t="",n="",I="";for(let C in e){let r=e[C];"@"==C[0]?"i"==C[1]?t=C+" "+r+";":n+="f"==C[1]?i(r,C):C+"{"+i(r,"k"==C[1]?"":g)+"}":"object"==typeof r?n+=i(r,g?g.replace(/([^,])+/g,(e=>C.replace(/(^:.*)|([^,])+/g,(g=>/&/.test(g)?g.replace(/&/g,e):e?e+" "+g:g)))):C):null!=r&&(C=/^--/.test(C)?C:C.replace(/[A-Z]/g,"-$&").toLowerCase(),I+=i.p?i.p(C,r):C+":"+r+";")}return t+(g&&I?g+"{"+I+"}":I)+n},l={},a=e=>{if("object"==typeof e){let g="";for(let t in e)g+=t+a(e[t]);return g}return e},s=(e,g,t,n,I)=>{let C=a(e),s=l[C]||(l[C]=(e=>{let g=0,t=11;for(;g<e.length;)t=101*t+e.charCodeAt(g++)>>>0;return"go"+t})(C));if(!l[s]){let g=C!==e?e:(e=>{let g,t=[{}];for(;g=r.exec(e.replace(o,""));)g[4]?t.shift():g[3]?t.unshift(t[0][g[3]]=t[0][g[3]]||{}):t[0][g[1]]=g[2];return t[0]})(e);l[s]=i(I?{["@keyframes "+s]:g}:g,t?"":"."+s)}return((e,g,t)=>{-1==g.data.indexOf(e)&&(g.data=t?e+g.data:g.data+e)})(l[s],g,n),s},c=(e,g,t)=>e.reduce(((e,n,I)=>{let C=g[I];if(C&&C.call){let e=C(t),g=e&&e.props&&e.props.className||/^go/.test(e)&&e;C=g?"."+g:e&&"object"==typeof e?e.props?"":i(e,""):!1===e?"":e}return e+n+(null==C?"":C)}),"");function A(e){let g=this||{},t=e.call?e(g.p):e;return s(t.unshift?t.raw?c(t,[].slice.call(arguments,1),g.p):t.reduce(((e,t)=>Object.assign(e,t&&t.call?t(g.p):t)),{}):t,C(g.target),g.g,g.o,g.k)}A.bind({g:1});let u,d,h,m=A.bind({k:1});function b(e,g){let t=this||{};return function(){let n=arguments;function I(C,r){let o=Object.assign({},C),i=o.className||I.className;t.p=Object.assign({theme:d&&d()},o),t.o=/ *go\d+/.test(i),o.className=A.apply(t,n)+(i?" "+i:""),g&&(o.ref=r);let l=e;return e[0]&&(l=o.as||e,delete o.as),h&&l[0]&&h(o),u(l,o)}return g?g(I):I}}function p(){return p=Object.assign||function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},p.apply(this,arguments)}function Z(e,g){return g||(g=e.slice(0)),e.raw=g,e}var y,G=function(e,g){return function(e){return"function"===typeof e}(e)?e(g):e},B=function(){var e=0;return function(){return(++e).toString()}}(),f=function(){var e=void 0;return function(){if(void 0===e&&"undefined"!==typeof window){var g=matchMedia("(prefers-reduced-motion: reduce)");e=!g||g.matches}return e}}();!function(e){e[e.ADD_TOAST=0]="ADD_TOAST",e[e.UPDATE_TOAST=1]="UPDATE_TOAST",e[e.UPSERT_TOAST=2]="UPSERT_TOAST",e[e.DISMISS_TOAST=3]="DISMISS_TOAST",e[e.REMOVE_TOAST=4]="REMOVE_TOAST",e[e.START_PAUSE=5]="START_PAUSE",e[e.END_PAUSE=6]="END_PAUSE"}(y||(y={}));var v=new Map,S=function(e){if(!v.has(e)){var g=setTimeout((function(){v.delete(e),k({type:y.REMOVE_TOAST,toastId:e})}),1e3);v.set(e,g)}},V=function e(g,t){switch(t.type){case y.ADD_TOAST:return p({},g,{toasts:[t.toast].concat(g.toasts).slice(0,20)});case y.UPDATE_TOAST:return t.toast.id&&function(e){var g=v.get(e);g&&clearTimeout(g)}(t.toast.id),p({},g,{toasts:g.toasts.map((function(e){return e.id===t.toast.id?p({},e,t.toast):e}))});case y.UPSERT_TOAST:var n=t.toast;return g.toasts.find((function(e){return e.id===n.id}))?e(g,{type:y.UPDATE_TOAST,toast:n}):e(g,{type:y.ADD_TOAST,toast:n});case y.DISMISS_TOAST:var I=t.toastId;return I?S(I):g.toasts.forEach((function(e){S(e.id)})),p({},g,{toasts:g.toasts.map((function(e){return e.id===I||void 0===I?p({},e,{visible:!1}):e}))});case y.REMOVE_TOAST:return void 0===t.toastId?p({},g,{toasts:[]}):p({},g,{toasts:g.toasts.filter((function(e){return e.id!==t.toastId}))});case y.START_PAUSE:return p({},g,{pausedAt:t.time});case y.END_PAUSE:var C=t.time-(g.pausedAt||0);return p({},g,{pausedAt:void 0,toasts:g.toasts.map((function(e){return p({},e,{pauseDuration:e.pauseDuration+C})}))})}},W=[],R={toasts:[],pausedAt:void 0},k=function(e){R=V(R,e),W.forEach((function(e){e(R)}))},X={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},J=function(e){return function(g,t){var n=function(e,g,t){return void 0===g&&(g="blank"),p({createdAt:Date.now(),visible:!0,type:g,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},t,{id:(null==t?void 0:t.id)||B()})}(g,e,t);return k({type:y.UPSERT_TOAST,toast:n}),n.id}},w=function(e,g){return J("blank")(e,g)};w.error=J("error"),w.success=J("success"),w.loading=J("loading"),w.custom=J("custom"),w.dismiss=function(e){k({type:y.DISMISS_TOAST,toastId:e})},w.remove=function(e){return k({type:y.REMOVE_TOAST,toastId:e})},w.promise=function(e,g,t){var n=w.loading(g.loading,p({},t,null==t?void 0:t.loading));return e.then((function(e){return w.success(G(g.success,e),p({id:n},t,null==t?void 0:t.success)),e})).catch((function(e){w.error(G(g.error,e),p({id:n},t,null==t?void 0:t.error))})),e};var Y=function(e){var g=function(e){void 0===e&&(e={});var g=(0,n.useState)(R),t=g[0],I=g[1];(0,n.useEffect)((function(){return W.push(I),function(){var e=W.indexOf(I);e>-1&&W.splice(e,1)}}),[t]);var C=t.toasts.map((function(g){var t,n,I;return p({},e,e[g.type],g,{duration:g.duration||(null==(t=e[g.type])?void 0:t.duration)||(null==(n=e)?void 0:n.duration)||X[g.type],style:p({},e.style,null==(I=e[g.type])?void 0:I.style,g.style)})}));return p({},t,{toasts:C})}(e),t=g.toasts,I=g.pausedAt;(0,n.useEffect)((function(){if(!I){var e=Date.now(),g=t.map((function(g){if(g.duration!==1/0){var t=(g.duration||0)+g.pauseDuration-(e-g.createdAt);if(!(t<0))return setTimeout((function(){return w.dismiss(g.id)}),t);g.visible&&w.dismiss(g.id)}}));return function(){g.forEach((function(e){return e&&clearTimeout(e)}))}}}),[t,I]);var C=(0,n.useMemo)((function(){return{startPause:function(){k({type:y.START_PAUSE,time:Date.now()})},endPause:function(){I&&k({type:y.END_PAUSE,time:Date.now()})},updateHeight:function(e,g){return k({type:y.UPDATE_TOAST,toast:{id:e,height:g}})},calculateOffset:function(e,g){var n,I=g||{},C=I.reverseOrder,r=void 0!==C&&C,o=I.gutter,i=void 0===o?8:o,l=I.defaultPosition,a=t.filter((function(g){return(g.position||l)===(e.position||l)&&g.height})),s=a.findIndex((function(g){return g.id===e.id})),c=a.filter((function(e,g){return g<s&&e.visible})).length,A=(n=a.filter((function(e){return e.visible}))).slice.apply(n,r?[c+1]:[0,c]).reduce((function(e,g){return e+(g.height||0)+i}),0);return A}}}),[t,I]);return{toasts:t,handlers:C}};function H(){var e=Z(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"]);return H=function(){return e},e}function N(){var e=Z(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]);return N=function(){return e},e}function F(){var e=Z(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]);return F=function(){return e},e}function K(){var e=Z(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]);return K=function(){return e},e}var E=m(K()),x=m(F()),M=m(N()),U=b("div")(H(),(function(e){return e.primary||"#ff4b4b"}),E,x,(function(e){return e.secondary||"#fff"}),M);function T(){var e=Z(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"]);return T=function(){return e},e}function z(){var e=Z(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]);return z=function(){return e},e}var L=m(z()),Q=b("div")(T(),(function(e){return e.secondary||"#e0e0e0"}),(function(e){return e.primary||"#616161"}),L);function D(){var e=Z(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"]);return D=function(){return e},e}function j(){var e=Z(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]);return j=function(){return e},e}function O(){var e=Z(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]);return O=function(){return e},e}var P=m(O()),_=m(j()),q=b("div")(D(),(function(e){return e.primary||"#61d345"}),P,_,(function(e){return e.secondary||"#fff"}));function $(){var e=Z(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"]);return $=function(){return e},e}function ee(){var e=Z(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]);return ee=function(){return e},e}function ge(){var e=Z(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]);return ge=function(){return e},e}function te(){var e=Z(["\n  position: absolute;\n"]);return te=function(){return e},e}var ne=b("div")(te()),Ie=b("div")(ge()),Ce=m(ee()),re=b("div")($(),Ce),oe=function(e){var g=e.toast,t=g.icon,I=g.type,C=g.iconTheme;return void 0!==t?"string"===typeof t?(0,n.createElement)(re,null,t):t:"blank"===I?null:(0,n.createElement)(Ie,null,(0,n.createElement)(Q,Object.assign({},C)),"loading"!==I&&(0,n.createElement)(ne,null,"error"===I?(0,n.createElement)(U,Object.assign({},C)):(0,n.createElement)(q,Object.assign({},C))))};function ie(){var e=Z(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]);return ie=function(){return e},e}function le(){var e=Z(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]);return le=function(){return e},e}var ae=function(e){return"\n0% {transform: translate3d(0,"+-200*e+"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"},se=function(e){return"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,"+-150*e+"%,-1px) scale(.6); opacity:0;}\n"},ce=b("div",n.forwardRef)(le()),Ae=b("div")(ie()),ue=(0,n.memo)((function(e){var g=e.toast,t=e.position,I=e.style,C=e.children,r=null!=g&&g.height?function(e,g){var t=e.includes("top")?1:-1,n=f()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[ae(t),se(t)],I=n[1];return{animation:g?m(n[0])+" 0.35s cubic-bezier(.21,1.02,.73,1) forwards":m(I)+" 0.4s forwards cubic-bezier(.06,.71,.55,1)"}}(g.position||t||"top-center",g.visible):{opacity:0},o=(0,n.createElement)(oe,{toast:g}),i=(0,n.createElement)(Ae,Object.assign({},g.ariaProps),G(g.message,g));return(0,n.createElement)(ce,{className:g.className,style:p({},r,I,g.style)},"function"===typeof C?C({icon:o,message:i}):(0,n.createElement)(n.Fragment,null,o,i))}));function de(){var e=Z(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]);return de=function(){return e},e}!function(e,g,t,n){i.p=g,u=e,d=t,h=n}(n.createElement);var he=A(de()),me=function(e){var g=e.reverseOrder,t=e.position,I=void 0===t?"top-center":t,C=e.toastOptions,r=e.gutter,o=e.children,i=e.containerStyle,l=e.containerClassName,a=Y(C),s=a.toasts,c=a.handlers;return(0,n.createElement)("div",{style:p({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},i),className:l,onMouseEnter:c.startPause,onMouseLeave:c.endPause},s.map((function(e){var t,C=e.position||I,i=function(e,g){var t=e.includes("top"),n=t?{top:0}:{bottom:0},I=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return p({left:0,right:0,display:"flex",position:"absolute",transition:f()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY("+g*(t?1:-1)+"px)"},n,I)}(C,c.calculateOffset(e,{reverseOrder:g,gutter:r,defaultPosition:I})),l=e.height?void 0:(t=function(g){c.updateHeight(e.id,g.height)},function(e){e&&setTimeout((function(){var g=e.getBoundingClientRect();t(g)}))});return(0,n.createElement)("div",{ref:l,className:e.visible?he:"",key:e.id,style:i},"custom"===e.type?G(e.message,e):o?o(e):(0,n.createElement)(ue,{toast:e,position:C}))})))},be=w},2090:function(e,g,t){e.exports=function(e,g){"use strict";function t(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var n=t(e),I=t(g);function C(){return C=Object.assign||function(e){for(var g=1;g<arguments.length;g++){var t=arguments[g];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},C.apply(this,arguments)}function r(e,g,t){return g in e?Object.defineProperty(e,g,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[g]=t,e}function o(e){if(Array.isArray(e))return e}function i(e,g){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,I,C=[],r=!0,o=!1;try{for(t=t.call(e);!(r=(n=t.next()).done)&&(C.push(n.value),!g||C.length!==g);r=!0);}catch(i){o=!0,I=i}finally{try{r||null==t.return||t.return()}finally{if(o)throw I}}return C}}function l(e,g){(null==g||g>e.length)&&(g=e.length);for(var t=0,n=new Array(g);t<g;t++)n[t]=e[t];return n}function a(e,g){if(e){if("string"===typeof e)return l(e,g);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,g):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,g){return o(e)||i(e,g)||a(e,g)||s()}function A(e,g){if(null==e)return{};var t,n,I={},C=Object.keys(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||(I[t]=e[t]);return I}function u(e,g){if(null==e)return{};var t,n,I=A(e,g);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(e);for(n=0;n<C.length;n++)t=C[n],g.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(I[t]=e[t])}return I}function d(e,g){var t=atob(e);if(g){for(var n=new Uint8Array(t.length),I=0,C=t.length;I<C;++I)n[I]=t.charCodeAt(I);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}return t}function h(e,g,t){var n=void 0===g?null:g,I=d(e,void 0!==t&&t),C=I.indexOf("\n",10)+1,r=I.substring(C)+(n?"//# sourceMappingURL="+n:""),o=new Blob([r],{type:"application/javascript"});return URL.createObjectURL(o)}function m(e,g,t){var n;return function(I){return n=n||h(e,g,t),new Worker(n,I)}}var b=m("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg==",null,!1),p=["constraints","onError","onLoad","onScan","resolution"];function Z(e,g){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);g&&(n=n.filter((function(g){return Object.getOwnPropertyDescriptor(e,g).enumerable}))),t.push.apply(t,n)}return t}function y(e){for(var g=1;g<arguments.length;g++){var t=null!=arguments[g]?arguments[g]:{};g%2?Z(Object(t),!0).forEach((function(g){r(e,g,t[g])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach((function(g){Object.defineProperty(e,g,Object.getOwnPropertyDescriptor(t,g))}))}return e}var G=function(){return new b},B=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map((function(g){e.removeTrack(g),g.stop()})),e.getAudioTracks().map((function(g){e.removeTrack(g),g.stop()}))):e.stop())},f=function(g){var t=g.constraints,I=g.onError,r=g.onLoad,o=g.onScan,i=g.resolution,l=u(g,p),a=JSON.stringify(t),s=e.useRef(null),A=e.useRef(null),d=e.useRef(document.createElement("canvas")),h=e.useRef(null),m=e.useRef(),b=c(e.useState(null),2),Z=b[0],f=b[1],v=e.useRef(!1),S=e.useMemo(G,[G]);e.useEffect((function(){return function(){S.terminate()}}),[S]),e.useEffect((function(){S.onmessage=function(e){o&&o(e.data?y(y({},e.data),{},{canvas:d.current}):null),v.current=!1}}),[o,S]);var V=e.useCallback((function(){var e=A.current&&A.current.readyState===A.current.HAVE_ENOUGH_DATA;if(!v.current&&e){v.current=!0;var g=A.current.videoWidth,t=A.current.videoHeight,n=i/(g>t?g:t);t*=n,g*=n,d.current.width=g,d.current.height=t,h.current=d.current.getContext("2d"),h.current.drawImage(A.current,0,0,g,t);var I=h.current.getImageData(0,0,g,t);S.postMessage(I)}m.current=requestAnimationFrame(V)}),[i,S]);return e.useEffect((function(){var e=JSON.parse(a),g=!0;return navigator.mediaDevices.getUserMedia(e).then((function(e){if(g){s.current=e;try{A.current&&(A.current.srcObject=e,A.current.setAttribute("playsinline",!0))}catch(t){f(window.URL.createObjectURL(e))}r&&r(),m.current=requestAnimationFrame(V)}else B(e)})).catch((function(e){return g?I(e):null})),function(){cancelAnimationFrame(m.current),g=!1,B(s.current),Z&&window.URL.revokeObjectURL(Z)}}),[V,a,I,r]),n.default.createElement("video",C({autoPlay:!0,playsInline:!0,src:Z,ref:A},l))};return f.propTypes={constraints:I.default.object,onError:I.default.func.isRequired,onLoad:I.default.func,onScan:I.default.func.isRequired,resolution:I.default.number},f.defaultProps={constraints:{audio:!1,video:!0},resolution:640},f}(t(7294),t(5697))},9509:function(e,g,t){var n=t(8764),I=n.Buffer;function C(e,g){for(var t in e)g[t]=e[t]}function r(e,g,t){return I(e,g,t)}I.from&&I.alloc&&I.allocUnsafe&&I.allocUnsafeSlow?e.exports=n:(C(n,g),g.Buffer=r),r.prototype=Object.create(I.prototype),C(I,r),r.from=function(e,g,t){if("number"===typeof e)throw new TypeError("Argument must not be a number");return I(e,g,t)},r.alloc=function(e,g,t){if("number"!==typeof e)throw new TypeError("Argument must be a number");var n=I(e);return void 0!==g?"string"===typeof t?n.fill(g,t):n.fill(g):n.fill(0),n},r.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return I(e)},r.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},9328:function(e){"use strict";var g={decodeValues:!0,map:!1,silent:!1};function t(e){return"string"===typeof e&&!!e.trim()}function n(e,n){var I=e.split(";").filter(t),C=I.shift().split("="),r=C.shift(),o=C.join("=");n=n?Object.assign({},g,n):g;try{o=n.decodeValues?decodeURIComponent(o):o}catch(l){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+o+"'. Set options.decodeValues to false to disable this feature.",l)}var i={name:r,value:o};return I.forEach((function(e){var g=e.split("="),t=g.shift().trimLeft().toLowerCase(),n=g.join("=");"expires"===t?i.expires=new Date(n):"max-age"===t?i.maxAge=parseInt(n,10):"secure"===t?i.secure=!0:"httponly"===t?i.httpOnly=!0:"samesite"===t?i.sameSite=n:i[t]=n})),i}function I(e,I){if(I=I?Object.assign({},g,I):g,!e)return I.map?{}:[];if(e.headers&&e.headers["set-cookie"])e=e.headers["set-cookie"];else if(e.headers){var C=e.headers[Object.keys(e.headers).find((function(e){return"set-cookie"===e.toLowerCase()}))];C||!e.headers.cookie||I.silent||console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),e=C}if(Array.isArray(e)||(e=[e]),(I=I?Object.assign({},g,I):g).map){return e.filter(t).reduce((function(e,g){var t=n(g,I);return e[t.name]=t,e}),{})}return e.filter(t).map((function(e){return n(e,I)}))}e.exports=I,e.exports.parse=I,e.exports.parseString=n,e.exports.splitCookiesString=function(e){if(Array.isArray(e))return e;if("string"!==typeof e)return[];var g,t,n,I,C,r=[],o=0;function i(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}for(;o<e.length;){for(g=o,C=!1;i();)if(","===(t=e.charAt(o))){for(n=o,o+=1,i(),I=o;o<e.length&&"="!==(t=e.charAt(o))&&";"!==t&&","!==t;)o+=1;o<e.length&&"="===e.charAt(o)?(C=!0,o=I,r.push(e.substring(g,n)),g=o):o=n+1}else o+=1;(!C||o>=e.length)&&r.push(e.substring(g,e.length))}return r}},500:function(e){"use strict";e.exports=(e,g)=>{if("string"!==typeof e||"string"!==typeof g)throw new TypeError("Expected the arguments to be of type `string`");if(""===g)return[e];const t=e.indexOf(g);return-1===t?[e]:[e.slice(0,t),e.slice(t+g.length)]}},9585:function(e,g,t){"use strict";var n=this&&this.__extends||function(){var e=function(g,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,g){e.__proto__=g}||function(e,g){for(var t in g)Object.prototype.hasOwnProperty.call(g,t)&&(e[t]=g[t])},e(g,t)};return function(g,t){function n(){this.constructor=g}e(g,t),g.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),I=this&&this.__spreadArrays||function(){for(var e=0,g=0,t=arguments.length;g<t;g++)e+=arguments[g].length;var n=Array(e),I=0;for(g=0;g<t;g++)for(var C=arguments[g],r=0,o=C.length;r<o;r++,I++)n[I]=C[r];return n};g.__esModule=!0,g.StrictEventEmitter=void 0;var C=function(e){function g(){return e.call(this)||this}return n(g,e),g.prototype.on=function(g,t){return e.prototype.on.call(this,g.toString(),t)},g.prototype.once=function(g,t){return e.prototype.on.call(this,g.toString(),t)},g.prototype.off=function(g,t){return e.prototype.off.call(this,g.toString(),t)},g.prototype.emit=function(g){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.prototype.emit.apply(this,I([g.toString()],t))},g.prototype.addListener=function(g,t){return e.prototype.addListener.call(this,g.toString(),t)},g.prototype.removeListener=function(g,t){return e.prototype.removeListener.call(this,g.toString(),t)},g}(t(7187).EventEmitter);g.StrictEventEmitter=C},8533:function(e,g,t){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,g,t,n){void 0===n&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return g[t]}})}:function(e,g,t,n){void 0===n&&(n=t),e[n]=g[t]});g.__esModule=!0,g.StrictEventEmitter=void 0,n(g,t(9585),"StrictEventEmitter")},8218:function(e){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},1742:function(e){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var g=document.activeElement,t=[],n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));switch(g.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":g.blur();break;default:g=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||t.forEach((function(g){e.addRange(g)})),g&&g.focus()}}},5054:function(e,g,t){var n=t(8764).Buffer,I=t(4501).strict;e.exports=function(e){if(I(e)){var g=n.from(e.buffer);return e.byteLength!==e.buffer.byteLength&&(g=g.slice(e.byteOffset,e.byteOffset+e.byteLength)),g}return n.from(e)}},7026:function(e){"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},6601:function(){},1363:function(e,g,t){"use strict";t.d(g,{R:function(){return n}});var n=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(n||{})},1355:function(e,g,t){"use strict";t.d(g,{u:function(){return H}});var n=t(7294),I=t(2351),C=t(6567),r=t(2984),o=t(1021),i=t(9946),l=t(4879),a=t(6723),s=t(3855),c=t(2180),A=t(3784);var u=t(9362);function d(e,...g){e&&g.length>0&&e.classList.add(...g)}function h(e,...g){e&&g.length>0&&e.classList.remove(...g)}var m,b=((m=b||{}).Ended="ended",m.Cancelled="cancelled",m);function p(e,g,t,n){let I=t?"enter":"leave",C=(0,u.k)(),o=void 0!==n?function(e){let g={called:!1};return(...t)=>{if(!g.called)return g.called=!0,e(...t)}}(n):()=>{},i=(0,r.E)(I,{enter:()=>g.enter,leave:()=>g.leave}),l=(0,r.E)(I,{enter:()=>g.enterTo,leave:()=>g.leaveTo}),a=(0,r.E)(I,{enter:()=>g.enterFrom,leave:()=>g.leaveFrom});return h(e,...g.enter,...g.enterTo,...g.enterFrom,...g.leave,...g.leaveFrom,...g.leaveTo,...g.entered),d(e,...i,...a),C.nextFrame((()=>{h(e,...a),d(e,...l),function(e,g){let t=(0,u.k)();if(!e)return t.dispose;let{transitionDuration:n,transitionDelay:I}=getComputedStyle(e),[C,r]=[n,I].map((e=>{let[g=0]=e.split(",").filter(Boolean).map((e=>e.includes("ms")?parseFloat(e):1e3*parseFloat(e))).sort(((e,g)=>g-e));return g}));if(C+r!==0){let n=[];n.push(t.addEventListener(e,"transitionrun",(()=>{n.splice(0).forEach((e=>e())),n.push(t.addEventListener(e,"transitionend",(()=>{g("ended"),n.splice(0).forEach((e=>e()))}),{once:!0}),t.addEventListener(e,"transitioncancel",(()=>{g("cancelled"),n.splice(0).forEach((e=>e()))}),{once:!0}))}),{once:!0}))}else g("ended");t.add((()=>g("cancelled"))),t.dispose}(e,(t=>("ended"===t&&(h(e,...i),d(e,...g.entered)),o(t))))})),C.dispose}var Z=t(4192);function y({container:e,direction:g,classes:t,events:n,onStart:I,onStop:C}){let o=(0,l.t)(),i=(0,Z.G)(),c=(0,s.E)(g),A=(0,s.E)((()=>(0,r.E)(c.current,{enter:()=>n.current.beforeEnter(),leave:()=>n.current.beforeLeave(),idle:()=>{}}))),d=(0,s.E)((()=>(0,r.E)(c.current,{enter:()=>n.current.afterEnter(),leave:()=>n.current.afterLeave(),idle:()=>{}})));(0,a.e)((()=>{let g=(0,u.k)();i.add(g.dispose);let n=e.current;if(n&&"idle"!==c.current&&o.current)return g.dispose(),A.current(),I.current(c.current),g.add(p(n,t.current,"enter"===c.current,(e=>{g.dispose(),(0,r.E)(e,{[b.Ended](){d.current(),C.current(c.current)},[b.Cancelled]:()=>{}})}))),g.dispose}),[g])}function G(e=""){return e.split(" ").filter((e=>e.trim().length>1))}let B=(0,n.createContext)(null);B.displayName="TransitionContext";var f,v=((f=v||{}).Visible="visible",f.Hidden="hidden",f);let S=(0,n.createContext)(null);function V(e){return"children"in e?V(e.children):e.current.filter((({state:e})=>"visible"===e)).length>0}function W(e){let g=(0,s.E)(e),t=(0,n.useRef)([]),C=(0,l.t)(),i=(0,s.E)(((e,n=I.l4.Hidden)=>{let i=t.current.findIndex((({id:g})=>g===e));-1!==i&&((0,r.E)(n,{[I.l4.Unmount](){t.current.splice(i,1)},[I.l4.Hidden](){t.current[i].state="hidden"}}),(0,o.Y)((()=>{var e;!V(t)&&C.current&&(null==(e=g.current)||e.call(g))})))})),a=(0,s.E)((e=>{let g=t.current.find((({id:g})=>g===e));return g?"visible"!==g.state&&(g.state="visible"):t.current.push({id:e,state:"visible"}),()=>i.current(e,I.l4.Unmount)}));return(0,n.useMemo)((()=>({children:t,register:a,unregister:i})),[a,i,t])}function R(){}S.displayName="NestingContext";let k=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function X(e){var g;let t={};for(let n of k)t[n]=null!=(g=e[n])?g:R;return t}let J=I.AN.RenderStrategy,w=(0,I.yV)((function(e,g){let{beforeEnter:t,afterEnter:o,beforeLeave:l,afterLeave:a,enter:u,enterFrom:d,enterTo:h,entered:m,leave:b,leaveFrom:p,leaveTo:Z,...f}=e,v=(0,n.useRef)(null),R=(0,A.T)(v,g),[k,w]=(0,n.useState)("visible"),Y=f.unmount?I.l4.Unmount:I.l4.Hidden,{show:H,appear:N,initial:F}=function(){let e=(0,n.useContext)(B);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),{register:K,unregister:E}=function(){let e=(0,n.useContext)(S);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),x=(0,n.useRef)(null),M=(0,i.M)(),U=(0,n.useRef)(!1),T=W((()=>{U.current||(w("hidden"),E.current(M))}));(0,n.useEffect)((()=>{if(M)return K.current(M)}),[K,M]),(0,n.useEffect)((()=>{if(Y===I.l4.Hidden&&M){if(H&&"visible"!==k)return void w("visible");(0,r.E)(k,{hidden:()=>E.current(M),visible:()=>K.current(M)})}}),[k,M,K,E,H,Y]);let z=(0,s.E)({enter:G(u),enterFrom:G(d),enterTo:G(h),entered:G(m),leave:G(b),leaveFrom:G(p),leaveTo:G(Z)}),L=function(e){let g=(0,n.useRef)(X(e));return(0,n.useEffect)((()=>{g.current=X(e)}),[e]),g}({beforeEnter:t,afterEnter:o,beforeLeave:l,afterLeave:a}),Q=(0,c.H)();(0,n.useEffect)((()=>{if(Q&&"visible"===k&&null===v.current)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}),[v,k,Q]);let D=F&&!N,j=!Q||D||x.current===H?"idle":H?"enter":"leave";y({container:v,classes:z,events:L,direction:j,onStart:(0,s.E)((()=>{})),onStop:(0,s.E)((e=>{"leave"===e&&!V(T)&&(w("hidden"),E.current(M))}))}),(0,n.useEffect)((()=>{!D||(Y===I.l4.Hidden?x.current=null:x.current=H)}),[H,D,k]);let O=f,P={ref:R};return n.createElement(S.Provider,{value:T},n.createElement(C.up,{value:(0,r.E)(k,{visible:C.ZM.Open,hidden:C.ZM.Closed})},(0,I.sY)({ourProps:P,theirProps:O,defaultTag:"div",features:J,visible:"visible"===k,name:"Transition.Child"})))})),Y=(0,I.yV)((function(e,g){let{show:t,appear:o=!1,unmount:i,...l}=e,s=(0,A.T)(g);(0,c.H)();let u=(0,C.oJ)();if(void 0===t&&null!==u&&(t=(0,r.E)(u,{[C.ZM.Open]:!0,[C.ZM.Closed]:!1})),![!0,!1].includes(t))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[d,h]=(0,n.useState)(t?"visible":"hidden"),m=W((()=>{h("hidden")})),[b,p]=(0,n.useState)(!0),Z=(0,n.useRef)([t]);(0,a.e)((()=>{!1!==b&&Z.current[Z.current.length-1]!==t&&(Z.current.push(t),p(!1))}),[Z,t]);let y=(0,n.useMemo)((()=>({show:t,appear:o,initial:b})),[t,o,b]);(0,n.useEffect)((()=>{t?h("visible"):V(m)||h("hidden")}),[t,m]);let G={unmount:i};return n.createElement(S.Provider,{value:m},n.createElement(B.Provider,{value:y},(0,I.sY)({ourProps:{...G,as:n.Fragment,children:n.createElement(w,{ref:s,...G,...l})},theirProps:{},defaultTag:n.Fragment,features:J,visible:"visible"===d,name:"Transition"})))}));let H=Object.assign(Y,{Child:function(e){let g=null!==(0,n.useContext)(B),t=null!==(0,C.oJ)();return n.createElement(n.Fragment,null,!g&&t?n.createElement(Y,{...e}):n.createElement(w,{...e}))},Root:Y})},4192:function(e,g,t){"use strict";t.d(g,{G:function(){return C}});var n=t(7294),I=t(9362);function C(){let[e]=(0,n.useState)(I.k);return(0,n.useEffect)((()=>()=>e.dispose()),[e]),e}},9946:function(e,g,t){"use strict";t.d(g,{M:function(){return l}});var n,I=t(7294),C=t(6723),r=t(2180);let o=0;function i(){return++o}let l=null!=(n=I.useId)?n:function(){let e=(0,r.H)(),[g,t]=I.useState(e?i:null);return(0,C.e)((()=>{null===g&&t(i())}),[g]),null!=g?""+g:void 0}},4879:function(e,g,t){"use strict";t.d(g,{t:function(){return C}});var n=t(7294),I=t(6723);function C(){let e=(0,n.useRef)(!1);return(0,I.e)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},6723:function(e,g,t){"use strict";t.d(g,{e:function(){return I}});var n=t(7294);const I="undefined"!=typeof window?n.useLayoutEffect:n.useEffect},3855:function(e,g,t){"use strict";t.d(g,{E:function(){return C}});var n=t(7294),I=t(6723);function C(e){let g=(0,n.useRef)(e);return(0,I.e)((()=>{g.current=e}),[e]),g}},4503:function(e,g,t){"use strict";t.d(g,{A:function(){return o},O:function(){return i}});var n=t(7294),I=t(1021),C=t(3855);function r(e,g,t){let I=(0,C.E)(g);(0,n.useEffect)((()=>{function g(e){I.current(e)}return window.addEventListener(e,g,t),()=>window.removeEventListener(e,g,t)}),[e,t])}var o=(e=>(e[e.None=1]="None",e[e.IgnoreScrollbars=2]="IgnoreScrollbars",e))(o||{});function i(e,g,t=1){let o=(0,n.useRef)(!1),i=(0,C.E)((n=>{if(o.current)return;o.current=!0,(0,I.Y)((()=>{o.current=!1}));let C=function e(g){return"function"==typeof g?e(g()):Array.isArray(g)||g instanceof Set?g:[g]}(e),r=n.target;if(r.ownerDocument.documentElement.contains(r)){if(2===(2&t)){let e=20,g=r.ownerDocument.documentElement;if(n.clientX>g.clientWidth-e||n.clientX<e||n.clientY>g.clientHeight-e||n.clientY<e)return}for(let e of C){if(null===e)continue;let g=e instanceof HTMLElement?e:e.current;if(null!=g&&g.contains(r))return}return g(n,r)}}));r("pointerdown",((...e)=>i.current(...e))),r("mousedown",((...e)=>i.current(...e)))}},2180:function(e,g,t){"use strict";t.d(g,{H:function(){return C}});var n=t(7294);let I={serverHandoffComplete:!1};function C(){let[e,g]=(0,n.useState)(I.serverHandoffComplete);return(0,n.useEffect)((()=>{!0!==e&&g(!0)}),[e]),(0,n.useEffect)((()=>{!1===I.serverHandoffComplete&&(I.serverHandoffComplete=!0)}),[]),e}},3784:function(e,g,t){"use strict";t.d(g,{T:function(){return r},h:function(){return C}});var n=t(7294);let I=Symbol();function C(e,g=!0){return Object.assign(e,{[I]:g})}function r(...e){let g=(0,n.useRef)(e);(0,n.useEffect)((()=>{g.current=e}),[e]);let t=(0,n.useCallback)((e=>{for(let t of g.current)null!=t&&("function"==typeof t?t(e):t.current=e)}),[g]);return e.every((e=>null==e||(null==e?void 0:e[I])))?void 0:t}},6567:function(e,g,t){"use strict";t.d(g,{ZM:function(){return C},oJ:function(){return r},up:function(){return o}});var n=t(7294);let I=(0,n.createContext)(null);I.displayName="OpenClosedContext";var C=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(C||{});function r(){return(0,n.useContext)(I)}function o({value:e,children:g}){return n.createElement(I.Provider,{value:e},g)}},4103:function(e,g,t){"use strict";function n(e){let g=e.parentElement,t=null;for(;g&&!(g instanceof HTMLFieldSetElement);)g instanceof HTMLLegendElement&&(t=g),g=g.parentElement;let n=""===(null==g?void 0:g.getAttribute("disabled"));return(!n||!function(e){if(!e)return!1;let g=e.previousElementSibling;for(;null!==g;){if(g instanceof HTMLLegendElement)return!1;g=g.previousElementSibling}return!0}(t))&&n}t.d(g,{P:function(){return n}})},9362:function(e,g,t){"use strict";function n(){let e=[],g=[],t={enqueue(e){g.push(e)},addEventListener:(e,g,n,I)=>(e.addEventListener(g,n,I),t.add((()=>e.removeEventListener(g,n,I)))),requestAnimationFrame(...e){let g=requestAnimationFrame(...e);return t.add((()=>cancelAnimationFrame(g)))},nextFrame:(...e)=>t.requestAnimationFrame((()=>t.requestAnimationFrame(...e))),setTimeout(...e){let g=setTimeout(...e);return t.add((()=>clearTimeout(g)))},add:g=>(e.push(g),()=>{let t=e.indexOf(g);if(t>=0){let[g]=e.splice(t,1);g()}}),dispose(){for(let g of e.splice(0))g()},async workQueue(){for(let e of g.splice(0))await e()}};return t}t.d(g,{k:function(){return n}})},4575:function(e,g,t){"use strict";t.d(g,{C5:function(){return u},TO:function(){return l},fE:function(){return a},jA:function(){return m},sP:function(){return A},tJ:function(){return c},z2:function(){return h}});var n=t(2984),I=t(5466);let C=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map((e=>`${e}:not([tabindex='-1'])`)).join(",");var r,o,i,l=((i=l||{})[i.First=1]="First",i[i.Previous=2]="Previous",i[i.Next=4]="Next",i[i.Last=8]="Last",i[i.WrapAround=16]="WrapAround",i[i.NoScroll=32]="NoScroll",i),a=((o=a||{})[o.Error=0]="Error",o[o.Overflow=1]="Overflow",o[o.Success=2]="Success",o[o.Underflow=3]="Underflow",o),s=((r=s||{})[r.Previous=-1]="Previous",r[r.Next=1]="Next",r);var c=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(c||{});function A(e,g=0){var t;return e!==(null==(t=(0,I.r)(e))?void 0:t.body)&&(0,n.E)(g,{0:()=>e.matches(C),1(){let g=e;for(;null!==g;){if(g.matches(C))return!0;g=g.parentElement}return!1}})}function u(e){null==e||e.focus({preventScroll:!0})}let d=["textarea","input"].join(",");function h(e,g=(e=>e)){return e.slice().sort(((e,t)=>{let n=g(e),I=g(t);if(null===n||null===I)return 0;let C=n.compareDocumentPosition(I);return C&Node.DOCUMENT_POSITION_FOLLOWING?-1:C&Node.DOCUMENT_POSITION_PRECEDING?1:0}))}function m(e,g){let t,n=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,I=Array.isArray(e)?h(e):function(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(C))}(e),r=n.activeElement,o=(()=>{if(5&g)return 1;if(10&g)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),i=(()=>{if(1&g)return 0;if(2&g)return Math.max(0,I.indexOf(r))-1;if(4&g)return Math.max(0,I.indexOf(r))+1;if(8&g)return I.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=32&g?{preventScroll:!0}:{},a=0,s=I.length;do{if(a>=s||a+s<=0)return 0;let e=i+a;if(16&g)e=(e+s)%s;else{if(e<0)return 3;if(e>=s)return 1}t=I[e],null==t||t.focus(l),a+=o}while(t!==n.activeElement);return 6&g&&function(e){var g,t;return null!=(t=null==(g=null==e?void 0:e.matches)?void 0:g.call(e,d))&&t}(t)&&t.select(),t.hasAttribute("tabindex")||t.setAttribute("tabindex","0"),2}},2984:function(e,g,t){"use strict";function n(e,g,...t){if(e in g){let n=g[e];return"function"==typeof n?n(...t):n}let I=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(g).map((e=>`"${e}"`)).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(I,n),I}t.d(g,{E:function(){return n}})},1021:function(e,g,t){"use strict";function n(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch((e=>setTimeout((()=>{throw e}))))}t.d(g,{Y:function(){return n}})},5466:function(e,g,t){"use strict";function n(e){return"undefined"==typeof window?null:e instanceof Node?e.ownerDocument:null!=e&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}t.d(g,{r:function(){return n}})},2351:function(e,g,t){"use strict";t.d(g,{AN:function(){return r},l4:function(){return o},oA:function(){return c},sY:function(){return i},yV:function(){return s}});var n,I=t(7294),C=t(2984),r=((n=r||{})[n.None=0]="None",n[n.RenderStrategy=1]="RenderStrategy",n[n.Static=2]="Static",n),o=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(o||{});function i({ourProps:e,theirProps:g,slot:t,defaultTag:n,features:I,visible:r=!0,name:o}){let i=a(g,e);if(r)return l(i,t,n,o);let s=null!=I?I:0;if(2&s){let{static:e=!1,...g}=i;if(e)return l(g,t,n,o)}if(1&s){let{unmount:e=!0,...g}=i;return(0,C.E)(e?0:1,{0:()=>null,1:()=>l({...g,hidden:!0,style:{display:"none"}},t,n,o)})}return l(i,t,n,o)}function l(e,g={},t,n){let{as:C=t,children:r,refName:o="ref",...i}=A(e,["unmount","static"]),l=void 0!==e.ref?{[o]:e.ref}:{},s="function"==typeof r?r(g):r;if(i.className&&"function"==typeof i.className&&(i.className=i.className(g)),C===I.Fragment&&Object.keys(c(i)).length>0){if(!(0,I.isValidElement)(s)||Array.isArray(s)&&s.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(i).map((e=>`  - ${e}`)).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map((e=>`  - ${e}`)).join("\n")].join("\n"));return(0,I.cloneElement)(s,Object.assign({},a(s.props,c(A(i,["ref"]))),l))}return(0,I.createElement)(C,Object.assign({},A(i,["ref"]),C!==I.Fragment&&l),s)}function a(...e){if(0===e.length)return{};if(1===e.length)return e[0];let g={},t={};for(let n of e)for(let e in n)e.startsWith("on")&&"function"==typeof n[e]?(null!=t[e]||(t[e]=[]),t[e].push(n[e])):g[e]=n[e];if(g.disabled||g["aria-disabled"])return Object.assign(g,Object.fromEntries(Object.keys(t).map((e=>[e,void 0]))));for(let n in t)Object.assign(g,{[n](e){let g=t[n];for(let t of g){if(e.defaultPrevented)return;t(e)}}});return g}function s(e){var g;return Object.assign((0,I.forwardRef)(e),{displayName:null!=(g=e.displayName)?g:e.name})}function c(e){let g=Object.assign({},e);for(let t in g)void 0===g[t]&&delete g[t];return g}function A(e,g=[]){let t=Object.assign({},e);for(let n of g)n in t&&delete t[n];return t}},8057:function(e,g,t){"use strict";var n=t(7294);const I=n.forwardRef((function(e,g){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:g},e),n.createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}))}));g.Z=I}},function(e){var g=function(g){return e(e.s=g)};e.O(0,[774,179],(function(){return g(6840),g(880)}));var t=e.O();_N_E=t}]);